<!DOCTYPE html><html><head><script src="ad-js-injection.js"></script> 	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>	<script>	var _TREIMAGES =  {		'256x256.jpg': 'data:image/jpg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAeAAD/4QMyaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA5LjAtYzAwMSA3OS5jMDIwNGIyZGVmLCAyMDIzLzAyLzAyLTEyOjE0OjI0ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxMjlDMjY1OUZFQjExMUVEOEQzMjgwNDQ0QTI3N0EzQiIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxMjlDMjY1OEZFQjExMUVEOEQzMjgwNDQ0QTI3N0EzQiIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgMjQuMCAoTWFjaW50b3NoKSI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjZEOUJFQTQ1RjZFMTExRUQ4NDZERUIyRTU5RUE4REJFIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjZEOUJFQTQ2RjZFMTExRUQ4NDZERUIyRTU5RUE4REJFIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+/+4ADkFkb2JlAGTAAAAAAf/bAIQAEAsLCwwLEAwMEBcPDQ8XGxQQEBQbHxcXFxcXHx4XGhoaGhceHiMlJyUjHi8vMzMvL0BAQEBAQEBAQEBAQEBAQAERDw8RExEVEhIVFBEUERQaFBYWFBomGhocGhomMCMeHh4eIzArLicnJy4rNTUwMDU1QEA/QEBAQEBAQEBAQEBA/8AAEQgBAAEAAwEiAAIRAQMRAf/EAKcAAQADAAMBAAAAAAAAAAAAAAAEBQYBAgMHAQEAAwEBAQAAAAAAAAAAAAAAAgMEBQEGEAACAQICBAgLBgUEAwAAAAAAAQIDBBEFITESBkFRYXGRIhMWgaGxMkKS0uIjU1TRUmJyshThgqJjFcFDkyTxMzURAAICAQICBggGAwEBAAAAAAABAgMREgQhMUFRcSITBWGBwdEyUlMUkaGxQmJyoiMz4XP/2gAMAwEAAhEDEQA/AOgAOWfTgAAAAAAAAAAAAAAAAAAFhaZHmF0lJU+ypvVOp1fFrLKnupHD4ty8fwxSXjbLI02S4qP48Cizd0QeJTWepcf0M6DRz3Up4fDuZJ/iimvE0V11u/mNunKMVXgtO1T0v1XpEqbFxcfw4nkN3RN4U1n+XD9StA5HrWsFZoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOYQnUnGnTi5Tk8IxWttmryrIaNolWuUqtw+B6Yw5uXlPLdzLFSpK+qr4tRfCT9GHH/ADeQs769o2Nu69Z6FojFa5S4ka6alGOufbx6DlbvdTnPwKc89Lxzk+rsPec4U4uc5KMVrk3gkV9beDK6Tw7V1H+CLl49RmL/ADK6v6jlWlhDHq0l5sf48pFIz3Tz3F62Tq8tjjNsnnqj7zX0t4srqPB1JU+WcWl0rEsaVWlWgqlKanB6pReK8R8/Pe0vbmyqdpbzcfvR9GX5kI7p57yWPQe2+WwxmuTT6pcUanNMlt76LnBKlcrVNLRLknxmSr0KtvVlRrRcKkHg0zaZZmVLMKHaQ6tSOipT4Yv7GRc+yxXdu69Nf9iisVhrlHhj9hK2qM464c+fDpKtruZ02eDdnTnTx/a/cZIAGQ6wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJGX2ru7ylb8EpYz/KtMvERy83VpbV1WrNeZBRXPJ+6SrjqnFdbKtxZ4dM5rmo8O18EaZJRSSWCWhLkMbnV+729lsvGjSxhTXBo1y8Jqczru3sK9Za4wajzvqrxswxo3UuUF08WYPLak3K19Hdj7QADKdQAAAlZbeysbuFdN7GqrFcMHr6NZuIyjKKlF4xksU1wpnz02WRXDr5ZSb0yp403/Lq8Rp2s+Lh60c3zOpYjauedL9hm86tP2mYVIxWFOp8SHFhLWvAyCaLeul1LesuByg/CsV5DOlNsdNkl6/xNe1sdlEJPnjD9XAAAgXgAAAAAAAAAAAAAAAAAAAAHvZWk725hbU2oynj1nqSSxbLrumvqv6PeK7IHhm1Dl2l/SzZmmiqEotyWXnBzd9ubqrIxhLSnDPJPp9Jne6a+qfqe8O6a+qfqe8aIF3gVfL+bMn325+p/jH3Gd7pr6p+p7xZZVlSy2NVdp2rqtPHZ2cMPCywB7GqEXlLDIWbq+yLhOeYvowiLmNn++tZW232e003LDHU8dWKKfumvqn6nvGiB7KqEnmSyzyvc3Vx0wlpWc8kzO9019U/U94d019U/U940QI+BV8v5ss++3P1P8Y+4zvdNfVP1PeHdNfVP1PeNEB4FXy/mx99ufqf4x9xne6a+qfqe8WuV5d/jqEqPadqpS28cNnDFJcb4iaCUaoReYrDIWbq6yOmctUexELNMvWY26oOfZ7MlNSw2tSa41xlV3TX1T9T3jRASqhJ5kssV7q6uOmEtK54wmZ3umvqn6nvDumvqn6nvGiBHwKvl/Nk/vtz9T/GPuM93TX1T9T3inzKwnl9z2E5KaaUoyWjFPRq8BuTJ7zyxzGK+7Sj5ZFV9UIwzFYeTTst1dZbpnLVHS3yXsKgAGU6gAAAAAAAAAAAAAABNyV4Zrbfmf6WbYw+UPDM7Z/3EunQbg2bX4H/Y5Hmf/WH9PawADQc8AAAAHlc3NC1pOtXmoQXC+PiQbxxZ6k20kst9CPUGXvN57ibcbSCpQ4JyW1Po1IrZ5lmFV9a5qN8Sk14olEtzBck5G2Hl10lmTjD0PizdAwsMzzGm+rc1FyOTfiliT7fea/p4KtGFaPG1sy6Y6PEeLcwfNNHs/LbksxcZ/kzVgr7HOrK9ahGXZ1n/ALU9D8D1MsC+MlJZTyYpwnB6ZxcX6QAD0iAAADIbxvHNJ8kIeQ15jt4Xjm1XkUF/Sijc/Av7G7y3/u//AJv9UVoAMR2QAAAAAAAAAAAAAACRlz2cwtnxVYeU3ZgbV7N1RlxVIP8AqRvjXteUu05Xma79b/iwADSc0AAA41aWYvOMxlfXUmm+wptxpR4MF6XhNbfzcLK4nHXGnNr1WYvL6cKt7b05+ZKpFPmxM25k+7BfuOj5dCKVlrWdC4e0u8p3epypxuL5NuWmNHUkuBy+wvadCjSWFKnGC4opLyHc5LoVxgsJesx3X2Wybk36I9CPOdGjUWFSnGa/Ek/KV93u/l9wm4R7Cf3qeheGOotAeyhGXNJkYW2QeYSlHsZl6O7d1C/hCrhK2i9p1YvDFL0cNabNOcg8hXGGdPSTu3Flzi547qxw/UAAmUgAAAxWdy2s1uOSSXRFG1MNmrxzK6f9xro0GfdfAv7HQ8sX+2b/AIe0igAxnXAAAAAAAAAAAAAAAO1N4VIPikn4z6AfPdWniPoMHjCL40matr+71HL80X/J/wBvYdgAajmAAAHSrTVWlOk9U4uL8KwMHOFa0uHCXVq0ZeOL0M35U5zksb5dtRwhcxWGL1TS4H9pRfW5JOPOJt2O4jVJxn8FnT1MlZbmNHMKCnBpVF/7KeOmL+wmGC/7VjX9OhXh4H/FFvab0VYJRu6fafjh1ZeGOo8huFyn3X1k7/L5Z1U4nF8Us8f/AE0wIVrnGX3eCp1VGb9CfVl49fgJhepJrKeewwyhKDxKLi/SsHIAPSIAAAAAAMHfy2r64lx1Z/qZvD5/Xe1Xqy45yfS2Zt1yj2s6Xla71j9EToADIdUAAAAAAAAAAAAAAA4epm/tntW9KXHCL8RgTd2D2rG3fHSh+lGna85diOb5ou7W/wCTJAANZygAAAAADxuLW2uobFxTjUjwYrSuZ8BTXe61KT2rOr2b+5PrR8D1l+CEq4S+JFtW4tq+CTS6ua/AxF1lF/a4urRcoL04daPi1Hexzq+s2oqfa0V/tz06OR60bQqsyyK2vIyqUUqNxrUlojJ/iS8pRKiUe9XJ9huhvoWLRuIRw/3Ll+BIy7NLbMIN0ns1I+fSl5y+1E0wSdzY3WKxp3FGWHM15UzaZfeRvbSncR0OSwnHiktaLKbdeYy4SRRu9qqsTg81y/IkgAuMYAABw3gm+I+et4yb422fQKzwpTfFF+Q+fLUZd1+31nU8rXC1/wBfacgAynTAAAAAAAAAAAAAAABucreOXWz/ALUPIYY22TPayu2f4EujQaNr8Uuw5/ma/wBcH/P2E0AGw5AAAAB4Xl3Ss7edxVfVjqXDJ8CR45fmtrmEPhvZqpdelLzl9qPNUc6c8eomq5uDmovQnhyJoAPSAAABmd6qMY16FdLCVSMoy5dnDDykjdSTdC4jwKcWvCv4EDeO9p3N5GlSeMLdOLfA5t9bowLTdm3lSsZVZaO3njH8seqjLHjuG1yOpbmPl8VP4njGe3K/IuQAajlgAAHldPZtq0uKEn4mYBakbvMZbNhcvipT/SzCmTdc49jOt5Yu5Y/5IAAzHRAAAAAAAAAAAAAAABs8heOU2/IpLokzGGv3deOVU+SU1/Uy/bfG/wCph8yX+mPosX6MtAAbTjAAAEDNssWY0IwU3CdNuUPutv7yMlcW13YVlGtGVKotMZJ6HyxkjeHSrSpVoOFWEZwfoySa8ZTbSpvKeJGvbbyVK0Na4dXSjL2m8t5RShXiq8V6T6s+laPEWdLefL5L4iqU3xOOK/pZxc7s2NV7VGUqD4l1o9EvtIVTdSun8O4hJfii15MStfcR4fEvxNDewt4vNTfaveidU3my6K6iqVHwJRw/VgVV9vFd3UZUqK7CnLQ2njNr83B4D1jurdt9atTS5FJ/YTbbde0pyUq9SVfD0fMj4cNPjD+4nw+Ffgexewq7yfiSXLp/8KTK8srZhWSScaEX8Wpxci5TZ06cKVONOCwhBKMVxJCnTp0oKnTioQjqjFYJHcuqqUF1t82Y9zuZXyXDTGPwx9rAALDOAAAQs4ls5Xcv8DXToMSbPPnhlNxyqK6ZIxhj3Xxr+p2PLF/qk/5+xAAGc3gAAAAAAAAAAAAAAA1e7Ek8tceGNSSfhwZlC33ezGFpcSoVns0q+HWeqM1qx5y2iSjYs9PAy72tzokorLi1LHYawHBybzhAAAAAAAAAAAAAAAAAAAA4AKveOajlc196UEunH/QyJc7xZlC6qxtqLUqVF4ymtKlPVo5imMF8lKx46OB3djXKFC1LDk3LHaAAVGoAAAAAAAAAAAAAAAAAAn2mdZhaRUIVNumtChUW0kuR6yV3ov8A5dLol7RTAmrZpYUmUy21MnmVcW36C570Zh8ul0S9od6Mw+XS6Je0UwHjWfMzz7Tb/TiXPejMPl0uiXtDvRmHy6XRL2imA8az5mPtNv8ATiXPejMPl0uiXtDvRmHy6XRL2imA8az5mPtNv9OJc96Mw+XS6Je0O9GYfLpdEvaKYDxrPmY+02/04lz3ozD5dLol7Q70X/y6XRL2imA8az5mPtNv9OJc96L/AOXS6Je0O9F/8ul0S9opgPGs+Zj7Tb/TiXPei/8Al0uiXtEW6zrMbqLhOpsU3ocKa2U+d6yAA7ZtYcmex21MXmNcU+wAAgXAAAAAAAAAAAAAAAAJNvBaW9SB72E4QvredTzI1IuTfOEstI8k8RbxnCzguqGS2FlbK5zWeMng9jFqKx9HCOmTOFcbr1XsOj2a1bWzKPjic700K8pUa6TdCCcZNaoyb1vnM8Xzkq5aFCOF8yzkxUVu+CtnbZqlnhCWlR9GC3zbK7G3t43dpXxhNpRpt7W1+WS4uU9d3LO1uo3DuKUajg47O0scMVIozRbqeZdc8PJI8rcZWrupLq9RLcKde1mnZKck1iXJ4yjPS0Sa5WcHMvOlzvynBSbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAC6y7eKdCnG3u4dtSS2VNeclxNPWS/227+aP4ElSrS4I9SWP5JaH4DNAtVzxiSU16feZp7SOpzrlKmT+R8PWiwzLJrnL+u/iUG8FUXB+ZcBZbp+Zdc8PJI9slr1L7K69G668YY09t6W4uOOnmPHdPzLrnh5JFkIxVkJR5TT4dRmusnLb3V2Yc6pQTkunL4M9bjNstyubtbahtyg8J7OCSfLJ4ts5p1Mrz6nKk6bpXMVingtpcqktaMxNtzk3pbk234SfkLazWhg8MdpPm2WRjc5SUWlpbxpwWT2kYVuyMpq2EXPXq4triRK9tVt7mVtNfFjLZwXDjqw5zQ0bPL8kto3F6lUuZatG1p+7BcnGR75Q7zUdrU3T6cNHjPLejtP38NrzOzWxxa3tBJQU5JZcZaY56PSJTlc6a23CNlfiT08M+glw3lsqsuzr2zjSehvRPpjgRc6ymhSoq/scOwlg5RWlJS1SjyFKaPL8e7VftvM2amxjxcGH8wjN2KUZ4eItp9WBZVHbuFlTcU5qEoZypJ+077tU41MurwlqnUlF8zjFCtnGW5Y/wBraUFUdPRLZwik1+J4ts43b2/8Zcdn5+3LZ59hYGa0+lr4cdeJ67HCuvSuLXMhCiNu4v1tuMZLup4y30s1FK4yvPYuhUp9lcYYx1bXPGS18xnby1qWdzUt6muD0Pji9TPTKtv/ACVtsed2i6PS8RZbx9n/AJS2x+7HtObbIyeuvW8KUZYz1lsF4N/hRbdc4Oai+OlrqPaysbHK7ON/mC2q00nGDWOy3pUYx+8do7zWdSXZ1rZxovQ5PCWjljgT80r5bRVL9/T24vHs8YbaT0Ylf+/3Z+RH/iLn3HpjOEEuh832mSD8VOyyq62Um8OHwxX8SLnWV0KVKN/Y6bephtRXmx2tUo8jI+S5WswrydRtUKWDnhrk3qiWV3nGUyy6raW6aUoONOCg0k3pXjPXdt01ldVtY4Tm6iWltbK/0IaIStWGmsZaXLJc7robWWpTjJT0RlJd7S+ntOlXPsuspft7O37SENDccIx8Gh4nZwyzPqMnSj2N3BY6kpLixw86J5/v92PkR/4j0o5tu/bz7ShT7OeGG1Gm08CSkm8SnW4/L7ipwcVmqncRtX73xz2maqU50qkqdRbM4NxkuJo6krNLijc39WvQx7ObTWKwehJMimVpJtLisnUg24xbWluKbXUwADwkAAAAAAAAAD2s68Le6p150+1jTli4PRj/AODxATw89R40mmnyawaapRyPN/iQqKjcS0vDCEsfxRehnRbrW0XtVLqWwtehLRz6TODFtYN6OIt8WL4yrTfoeDKttbHu13zjHqlFSx6zRZhmVjZWTy/LmpSknGUovFRT85uXDJnG6jShdYvDTDySM8ArnrUmvh4KKPXtI+DKpSebGpSnLi285OZedLnflJ2R6M1t8eOX6ZEAFcXiSfU8micdUJQzjVFxz2lpvDJrNpSi8Gowaa4Giyp3mXZ1bRoXrVK5jq07Lx44N8fEZkE1a1KTxlT5xZS9qnXXHU4yqWIzjwZo1u1ZUn2le5bpLS09mCf8xGzrNqFWirCxw/bxw2px0J7OqMeQpdesB2rDUIqGefSzyO2lrjO2x2uHGKxpSfXg027M1Ty6vUl5sKkpPDiUYsVcpyvNJu5tK6g56ZqGDWPG4vSmdMg/+Rd88/0Iza1Isc0q604qSaKIUynffKFkqpRmllcVhrpRqKVHKcjjKrOp21y09lPBz5oxWrnM9eXVS8uJ3FXzpvQuBLgXgPEFU7NSUUlGK6EaaqNEnOUnZZLg5S6upLoNFZZjY5hZqwzJqM4pRjOTw2sNCkpcEh3Wt31ldS2OaL0c+JnRpww4OIl4qaWuCm105wQe2lFt02yqUnlxxqWfRnkXOaUcmtbNW1vLtLpST24tSfLttaMMOAj5Nmn+PrvbTlQq4KaWuLWqSK4EXY9SlFKOOWCxULw3XOUrNXFuXP1Glq5LlmYzdxZ3Cgp6ZRhhKOP5dDQhlGUZc+2va6qtebGeCXqLFszWrShykvFhz8OOrt4fgVfbW40/cT0csYWrH9jvW7Ltp9hj2O0+z2tezwYnQAqNaWFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAs8vzeFnZVrV0nN1XJqSaSW1HZKs5B65NpJ/t5EI1xjKUorjN5kAAeEwAAAAAAAAAAAAAAAAAD/2Q==', 	};	var _TRESCRIPTS = 	{"Spartan.js":"var familyName = \"Spartan\";window._TREFONTS = window._TREFONTS || {};_TREFONTS[familyName] = {    version: 1,    data: {        \"400\": \"data:font\/woff2;base64,d09GMgABAAAAAEPIABAAAAAAlrgAAENkAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGoF+G6hIHId0BmA\/U1RBVCoAiUARCAqBv0yBoCULhj4AATYCJAOMeAQgBYhGB5FLDAcbuoIl7NgLoDuAU1G1i6EjETaDs8JFUcpFGbL\/\/5ogh4xMeHcAtVUnosyqFjaTUWbaulu9R4ejldqcvacHa5TC8mEI6jAEc9niMjJAhG\/a6M2Fyh7L4OWr3FrKU8lC61GXGh89Dn5Hd5SCqPSW9RXfz\/3+3X8rQrCDvsqfyjvA8ppej4NjIDA0KJ1G6TSWEcJXaig\/QmOf5PI8tD\/4zp15731QjUlM3HWyoowGpnVaJzFtWifOz\/Nz+3Pf3oIxahtI721USkROROCDkdDKEB8YNXCU9ggBC1H4Csh3KKmiYmGB8b+EjX4wsWgDoKiWvV\/Zc7txJ+MAEkOiAlieWUugCBTAAuhbhl+s\/zj37z3NY3T\/bwqQHAAq1nSTNIW0fUOSTG52syQnNNlteJhb\/4y+8LyyQRzqUTVGL4slrIJFMXqwNS0V0i0oRuHU+57+Q0UvSr2w7389xbimeN3TZtu+f0eCMjiPQ2iEVRhNmt8A4VDmgLZJc9dkQGicQEiUQqItymIMGNznqyJuBzLxHnP7+ctRFgaYSJRIl3ECExdI227v9\/7NBRJ4GV6yV9j\/s2kUotNaG7aIygdOCNbHQWzqOvbmTGiPgxSq\/D2vTLJOqem6Hb2b3wxskJ0sIaeqK7RQUdryxGizmZ\/Q+0vv40vFkTO5MjVLdwDscXEnAzwpPSTPf0HW5ISsjd747D9T1Du94O7sAP5QXADkH8h7lgDiHCgHkjILLKUCl3dy1gKgDPgWb40LrQ8\/SCIXGZd\/EEafPvz\/t5+v\/ffuT5kpna+SVYXqAwkTKyeZ4rvlV8pLiR2gcBGyzhLIri5f\/2u\/X32f8y\/iO\/vx5DudUKyRzsxvxYyL2aJZk3kSjaIt0AkhUxq++brKkxula7MChHCMLZj7uw6PW\/XVL5lt\/xR1KEREggQJjkj1ttyG+fG3tI8Ld17ZxmjLoSECJIgHLfsS\/YspMIrArcAPMKoQJoSFDeHiQtToQwzZQRy4QNxEQKJEQaLlQPLkQQochJQ5DjnhFKRGPeSsZkirTsgd\/0MGDcG89x7ms2FYWHUUiqi06bPhJQhCNWjI+\/qrh+BQuRuGhgmVKaHuUEJmhpnwuJ1sHo8BY4Gpx\/s4saowKKwyEGA0YxGwXQ+EUaB4xqPMNFCEA9qsBQSGcvozMg24f9ccaP+uOR8OBEBpRn9qeKvCUbH6r1f9XgeHBhgGDDM2xA4OTBNLqsWwkdA5ZUt2JcbuHy0YJKnEDLJZQlTxWAkUJVacFCSxAlInyLTpNNFkv\/rNU2TyULuIvAvETAqITGjbRKZHRwJJSIF0fFtki8m5yEVyEojISFv3k1auR3geD4MKClDLJjKT7pEjpKBQcx+oDfABqQSwC8outbV2iRdpWyHPmhhC3AVYxpZ4khuzMZH3L9I7ll82+XN3QJKwBEfwhFqwZYPmSi8SgxQQGW9zJYveAdzSX8cfFBPq+50yhpfxYzGNH\/0mLfKNf+dHTj9Eeidg5Uo4KD+czFRw\/AJ38o7toT8faFa1KnNkqjC3FVlAv\/e1vUn6F\/1if8pARuzvFKIPuO7zb2uLj1rTsVWWWCYvaWjie7ycbCES3pQ4TlnpdGP97R6lvN9XF+6moDRivInP0YPdBippl\/jqMDRnQaQttcBYK0K72IQquCBTl3axnYqBcxdHnBMdU62bgqu0LxL9++99DE5z+1pRT8qUMSxOzap8p6FHzVz23PkJuYnz7R8PXeigGrU39LfGBRe169Dpvid6PE8ALBw8KkYYdWrnEhTdXOHshXMXlZ+oQsQQFXIdJjQpEBMpeWIhBUIKxSIT0iakXQo6pKhTSu6HcoQJxXNspWQ5fFhW9cOyblsIhg9JnmGDgmT0Y3RhwmAhhwKKE0wOGmacDDukpEz5mSoEmkngAcEmmAsk3KVghgVHGRXY0N6nZTSzqBmPNmpwKFBuYNmAfoycrEMY\/G8GjDYcZDQqhNBAG7v9N\/r2NCGMEQQBk3EgqthOwUPA6YvG8G\/oLFlhcOCIKUAw1hwmyhZBKpLFliaObdu5cuRSla85pKE+gVc1VDpBSyY6TlPoDj3huQURnolv4GcCg77SM4qTZarTpebj556FB4cuMRJKa6Lhp6XFwm5tXPLWpZz6iVPdKCvzb+ayy1aRpCrVHYIBZYVg4FCCOmNQoCnewuDze4awqHluZbv5EGzVzwoVqAQ85YCJCmz4WGOPkHlsZRt7KOEwxzn9YislMOZ1tjfsPXvfPl34zL6xn+xn++XQX6AxK8cj\/tkDSj9V7uN\/saUv0ze2Df3KAmiwYKOO7nZrOVwKUjpu+JTKKERppXRNIru4rlIdFTm8CTG57HbpCeuHJ1VzSNNJkF90biqpaaAOdb76XRP6oy74l35eMcinavoCGJcRuChimrLBHALDUpmTPPBTNKoIgfAC4xP7ahpjNJAJ+WyZzYa9q4sop4LqroX2eVznjugBTzTMO54xUGhuZGBl4zHF3EwlmJiaLC1Au2gYY3arF1pujeMgkTKLUVLhIvzQ5NzjbW4DEnaynxJV+pTqfY\/ztHGFm3rkD\/Tywt\/uCkvWo++vw2P+KwegwYKN+nbTWF9x6HUFJR03fAqMQpRWRheJrC7N0ZwMObwJMbnsRkrp1pqcPW1PZ04TF+k40NWl\/bsSy\/n3YP6kn1cMMsGnme+8UIZKRmBehiXgollg5rKpk0LKDw\/wKzAa0a\/G9mCLmgxbSJvNhGzyPyxvxWl166CGtqi91\/WsT7jDgwIb0ExH4h0MFzRTLA8fjKlJxtNGrWgIMMvVERNOvigwxM2mKCRS4X6omelswxrBNiTsZL+urFeH10Ylp6jn\/PF63IR7\/mgVQVLnXRiO8jmaUee3O0nIZZ61HPSHUeH3S7KbpXpMv48hzutZqttXpfre3frxBlYm7mS6oDEPyuvLenxFPrOZ5oXtOfAJSN2WthzrxjH92tbuW186em+m27ebZVcgOXBZ7yvymc00L3xP2s29wL+0JcwO\/Hpjy7UypmDM8r92\/LvFKoNS2R0EpHTGx5jLuDJ9PIrIy5RU02h2VJstdYTUWT1gpcfiNNzcsTGboWAW8bIeH4afaoFje2JAndvieM\/Ao9B0rsnbyVqKrtB00UWXdz3AbozmZhxdBLrsbZHLzs1qPSraaIltlaho9paWYjdq2J0d7EoFcn42aXJhO1dtBScqosaoUcqch+Eod7SP1mFww635eBTKw3CUO9pHq9U4I+RhOEotq83TSbeADNxPJD1MRWS3mkWTdX4HeA+QPhef9dhtccCJA3GgbbpxxcyW6RwKKtByFdwvIWF61NWbH2s1IoRywC\/3SlHPAb0HbwTdWhTF9JKrlBJboKc7FcX1zrIQ2WUubTWkITloMI844HTWT5Pbyh91XGknTDwwAcdd63kXr1BEN0Td8NRR1xRL0WSLHtC0l8qc3QLOCZclPaxWvxyUt39aPK0Dad374mrvDa\/0Fjo+g1qKx+Gm425Rk519kV0u4qjDdFOu0zqz4Ek3tC1ZKm6NG7WuXttHh+7ujIaXz++IUv2upi7fZVvSULYkpOINuZCVK+\/91YV8l1SIOl73pBDZZS4tP6geLqmDdaJCml3m0toNkh7W4SA21NnAhkKe9EZgoPwk\/EyKWNCs6ZtmAeVRP+XIZzIjVRgaVjYe8Ynpq\/sOS+hjNbvfcrOxZ9ayrbMttst2Lxxoh9sRdpyd8vwsKNsCtzZvtDuZswyOeyWm+c81O\/FpFk0EQ+ZsOJ3D4+V2Fy7aN2330pOUHle9EbAseLN7I0p7ebJi2mYMR2p3voV4wE2t9rJxX\/2JsH0PhQQYf0eEEuAD2qwLkDcL2bSxfKXALR8fRb+2P4B0qSal6jc1ZJJHqTnTRqW2oQWaOj9NhFQsDZUpvZU77ZVNvY113IPUX+J\/E8wK5L+FieJUIXJ69U9ipZwtTpqT6mQ4lRrRcRjb7TubcyMvTAYjSjTCmLeMR0mWs35yZyL0QrqRJa4vvoqwUNjR8sly0z3TzTSLAAUOBFJII4N2CBfiboEYpDIyN9wNHTnkUUARJZRRQRU1jlHciyjPYy48bcw6F70EEHZqjJlGJ4oZDNRl\/Vkkh8YmQmg0mo2AIlphcVDKXoGyN4WKN41qNoPaFBYXTNq9WBQTywFQM+bTI1yC9G6y+MJZvQGoU8CxzEmWhvpxallOkI6PToeuLOo6fk9orMkDNGHOba\/2lxktKMIdgAiyCDswB\/g4a7RdEk35+E77m0ZDb+8EzJtFrdfRqU\/MRbYwEVuj5HdR2zmxc7Q\/V8W4k52TTkU4vXgRHHqMLF4cgwpP3Ys4Jva6J75DIVXpA4VOH2HG+ARTc4PTIUvFWlJRwNjQ984y771VBr1SnwtlhmGVF0EFvF9smY4K5frhBvbsN52jil\/KXvN5h4+CX7dF\/AD9t1XeLtAB\/hna+6spkHwIh3Yf4A5AVzInAgtRIKm8CFBj4lzYOS+SMxEoVrwsSo+\/2LOgEoUpxP8u4N3jwMW8UHkA41hxJm4dmrToMWJmLkcegpDxZNCyqZ8dcztfHlzkREk0lvEqWaPr9Fr4llevqI8SXEKT0CUEhCFhTbgQfkQmUd8S8Ffwd7UxwSa4LbgnUBVoCnQFZoIgwUpBgsG939jsrDAOwZqLyjaiQ5chU5YcOPNGQCOkYVA\/W6cz+w9QBlEQjWWYNMne7gjBIdQJbYLocO4ID7xL4gV0v3UUOvDu1q5wa5X\/\/5r1\/y+fyuUtdqOnbQB+fIX1lSDLx+HIN9\/nDDweqKzHam7w\/S2VXoJlwffXVkyhvOi8moW+fm72GARwPnB3uw3HTDKcxnBHbbRHd4zHYdwmYhqLVK6863Lt1E\/bdPUcL3ez4+GrT98MBX3lwbepL\/o5n317y4FChYnxl0w5qGBc2FsskCdTjsxZWEVILFzmSO1VwKablll9hluVzrled4EkJBtl0UYfSX74tBI58ZAMqW7TmuUULj3wsi3KcNUGNuTAS9oz\/H9+A3G1TYJEdGEicTGlscpTI78vCZEhRYFDCsltwVHEJFekw97ra0LtMIc2m2gwOCYqOfKUaZtDgyYzRoyZ4HDjzYMnf17x87PMYksstVqQWzbKsN5WG2yxzQ777LTbHsccctgRuc5q1OCcVucT1OKhLt0eeOGiV+g2ocjEsJmiLCoklGTjyqMqn479tOyl6wB1u\/AV0VNCoJiBUuYqWDjOVDlrJ9moZucUW3+zd5qTOi7qOTvD1T98NfPRJECbUJfNc5XQFfNds8AN4a6LcVe0O\/5y2wqPrfKf5R5Z6V8J+qzxUqq13ljnf+neinDTQvdSqlaLdq0auLgVK1ehlJNDGY+SkjwVr1eifiKvEwQPBQMLzcYuih5jJjRo0qGLh8AnoM+AISNqRHhkpCGozboNyMMBdVOQQ4IZXwBLN8Do3UH\/LwBKe8Y5US2yccywRyQRezfTIowZKyJ0V0kyae2DLyYCM5uIWUtgbQX31pk7qAXbKawHZnXYNUdcO412G8S9rIZBIuZEqql8RgmOu7tif0K0ZzXpaSgSTPZFJTKbGQQ0S7ZKuRBUPyell3mAii4JRwbBwxggWJsIk82eUKPXTIpSQam2c\/FpNusm1gLecO90ITu9hsgZZ7yuVEifzlIiLZxVMkMHUhlqhDZ7VI2rqtSifB4geDKw\/fyjTAkM8XgZmm4LDaZWUs5Xjzm+40W1hEygAse4lv4ub+9Mql0gUdN4IbZSYyU1c8+s6m2eIEulcRzkwc9wE+Cu141QxWHTWRoMpMSc2MkFNOh26XTo\/gsWidlBTVAc4iFfKpW5eEH55KvSPJTVA2b6jnaadF1xdX0F1ePL9p66xwEYqlVVhdEQ4R7fQn2cEKXSbrHa91x\/D0FMXo7XGlPRyr0YH1abiD5H6s5XV200sL4ZIGTQlyltRNgjUvrXXN4Of0MuG\/1PQ4bRQ8RygAEZnuTjiDP9WtHnB79CFmtc2p0+0tiw3EYqkEgB5vIKBSH2UByriegzWmknbDmZKwkVx0Hq2SIHutDCCOGTBiTigLwM6kK7SnF5MEUGO+Jn8q0jH4VVqmQ94ag1Sny4ip6\/j0AFGl2ZhAMtIihKeoqnySWi7g7lfU6sSzSGaELS76RZL6Gawhq7V6U9XkiuMm3ZxGSmYulLGU9LI1iVmVCUASIig6mQQ4PnvEIRyxfCOdv+PHZNk2TSxM3DVEUoKawSWKq74Yo8QYxvzocGjnNPlgKyxO1XXwb2ohOtqOyl+j0+CrBrGbkoxadS4DEj\/vzznTw4Ciqy2stYEZb88AFkPtMxIg5xdwi9OWOKEfg7x2KVSll1jC5TZb2P00Myib7Ka1p5ZcSrtNyhXWVkZSkKUmvGRBDXs3sS25wLTNEyBqkiMXMrmEnympng0K0y9vfPscRoQFqS7bO1rKPEQHpPxfZ5SDsjeofZXx8kU0nJpAUZlUgtxtSt+oiRX+xi8wMITGv5tMjMWw3xsFRmtXXfketcyRln9EzLHv72LOOMINevQzFEVaQCgeTOUTeXtQ2kP7KazcNQWSIVI8ueq9+jpJdDSt28rQUci6uiDLQs7thkDeVWv5CBdhpA+NBmodHq+VfS3PkIe+L3tGF\/CBn3jXuZiZyc597NqAROERgr8Og2zS\/LxYICMKsEVnozBMJZxGZ6owQWuIiPUctWveFNoQZKGZQVdkrLSjlOuEOmmRI8ihdslHu2K04W9U2wOKEs5CmJjia\/3iWlU\/RBWZ6SXwU1hwbO1U8dp8z0CjzoSXqpse4nIVMgiE6yGZUdvqvRLvAyaGpIFtbhi3omJ+iPjVkX\/cXQesMb4EWKUfRmwJFCENmcDIiQR6\/zIVIdeMXTUeTKEnUWaaHB9M9PdJRPnriG8cgUqP2Dx+rHlASoUQ6nQTvDdZblsKQIi4MT9XNET0SVPf18aJ+T49yj+qimuE4ISU+71\/L3JROODFSKMZP3SmkFg2TMDnNx3yJzb\/MEdAVGDtayqQmpISbNVU2LZUGhv2WmcHA3NVXh0mEh8YMOoiIz1lpZf\/XqPCZ\/zvlRSoQm3D3QDkLc+\/WIdGRw5p6woDjVpkX1hRWJL3ScxEmFeqDHKRuiDeXZp1MhiIk7su6\/5q+FLBZ+d6TCL19xMlAsUXnC0ZRMWtvRKdhnAJL\/6OGOdjPUlTC1yw6E4VXB1dYzOi7WkanSMp67IyrTm2l0PWvrb4wo0vA\/o9ehMtehpbcjslZZOASnIEE1LtdQn0Q+23K+846qoToWC6bSuGRp6mgxsk26\/Ghh3yaqonDUFQMkFv3kEE0GiYeYJU9HWNsRcQjsUAGtevVNRRDKCQl7c+Eytmn+cSEvlUOMcqwSmRFv2hQFejbVfqRvhnSLBtA\/Zr55WJG1YnJ2dkFnV10L5F2y1mNt573u6uz6a7u8o\/OYYgjGvcKEuQAR0ZBWwIg8yENMcoHUsCBGDyBJnPOlsYgxxPYAdI9mqVhjSmamJsbCTU+PJw5+TRiIqFULtEvs1c9VqXdsZkWUdk3tlJKG+5ktM\/nUbjNcZLz46Lfiq6mXFHRz+FAOqfDYL1dNMxbbfrS2bXu1mmqwdeeNGyRwRpdb1ZRIzRAlQY3PBoFEHsKGbCI2pdKQYUrWDEPdIfltbaT\/nqAe96f5X82EHVmooXUU6wZFYT3vDkbb6AUSN0IMhkZEcBwtMjjmSQSUIZgoYRqUOP4pQmWOksCBNuIT5J4GpzFyghWEXm3l\/2fgDXwTIyDxBAaDu8PMRZXVEayYcSQ5b+alFz4L\/QNe9bGjocbjgaLtNEzHEBgdem6xbeYXjLFZZ9uLbqFRO+cq8Dg1Qqbmgu04LGEdlvJTvlvSNLnZfAManHUfnbTLJWG+T0K7EQn9YULaJUjYb1riKd001\/YwyrMPT3Pr0GrxmM4RgxIaxtIGViLddUvIe+UK3sqPPxroWP18ifhaItMHIcrigd7dJEtHzdG65nC6QVomcxbKnv7hANlLuPslWvO4EBWS4tWkDykIn92lTvk0A\/rhTV6Pll8MWZlvygMMKFXYuSqjVrGDu0M7n2mOp\/XilP3Kt+UB9kLa8CHz0p3Oo6zM4+eaEpULMeoKs0CoI6g1msgpetgOMyTeRkMGXfS9IkmyLcwpDJ3Sh5m66nI1PEU+m7Yv6+SDr65Yx90Ft2lBLs5vXfmq6xisMFr56sp6d244ZffJizx4fZxlkwxg5kqsrEBaeUnFU6+8lxx6bZrGahOtCGYmaay7nkKyWbzEMB2m9GE7xSIO6ykeolO8rDClHEmYkjREzYh1RXwaJse+M3t2sb0qqe3ua897njL5xHZWlj7CUkrE7rIFH81o6lvS5KTX81NzPbAd564OzqqOurHwdHSasL\/5AG5ZkHbumHKLabYZMffFQez3KPKSpe\/mKgGRe+jMMZziqXqLqk\/35yLh11mGXzPOe6Wdnocv8ctNvFA3E9f\/A7yd5F+XG1Nv3L45X+eb\/lpivg0U7BGvMNJKKG7TNuApGmvShBxvXEaHRYkKZA1SFXKtnbrgqmYwIJFwn6q23EwlCizVTndTBPtprOWTizJedGNsm4YKzmyyczLYXtCzDTaj5kWFqbXXYhrNommYrHsPVARDGAMrrfb8W+yjwkZu7Ww+A7K7FAHjX+09dXaF8+qGXctcPTNERNEEiBpnE7P1kj9KCir2fFM+4nYZEB3hCxEHviTPcNPv5u\/OHbv7V4PJB4vgfokU9GzVlwEZyMOGb0MkyNm0oI\/oz6EZaKTk2aYn99+6l3Bkm7d3+qD18iNN3\/tzfdXj87VlZUerJ6oB1Xqm+WpzVbW3Y\/YfkGjyPZnievawGHrkSAn06Ydkycm2zVwFiTdGh3+HsTS8lDXNSv9fUUEgoLFiSw0taLcnI7ybDmAg984EW3+6awuamrIGSquQbTMLRydLH4gnpkSPysu53YnJB5LSSWBwv3po4P7BscCC+9+7go8c5cK9F0Gbxnz1i++LJicljyorxI+mpvQOWjwZVjpUSopSzLBorjowdzY3tHru\/mN8+dytlKiTKWnDs8MpaQnAzdd3fJ\/r+0eFMUdGjJFffIvY47Xcjbu2hoCXt\/Okm7Ob635Ut5+gPS2tT3\/V3\/qN3KY8j2yzpU\/rwoJ6\/5qtca78tuEtHoCBvH877NV9s\/+nsLe3zgPWBx7qZNjJD1ebHxD0gAOeMr9iMMx7XXmIMOJwtDcNnh5TX+17sno15oXcPXXn7zDfgOgLQTtevrztrgeoV8vmgMFkt3Xo8lL5\/Dfr1tDgreG2pjlwmpVLfr2z+uzEvr6PubpheWZH03gZyxuF7bBRBjsAVev+Ttj+CmqCh9dowwkCjUIYQSKrEgitfXOdH3hPvR9ar5WnRSLNdzLY\/fNjR8zsnCNaQEOTdiN6bramUG\/iguu2bGiW\/+zgXgYBtXPtLmjgfp295x2gN2ts3ManfBRpF4NHDUGFd+9aQ2YP2wL+95JScB1WuR+w6J55QKXt\/yaYGZc8rq4UPp6aeCYCMJBP+p4aPTdbmz23nxb0bRgOWzKNEcU1GSrxwTGsaSmX3ndpG\/7SRM8KHXf+bx3eQBlfyhtK5daJa71jR5aAqCNmvk8\/MzXqevHGGQvnjw+s0UeO2KE\/fwrOnZpKxwfWHjPXn7VPY8Dvr0xGfAi9rh\/ZEvRHqEulOwHN1VTXj2elcyS\/le3jPRs8f1vmdt+RDc7xf6ven\/50YOa2WLz\/iQ48zXTdanIpPjttd72\/5+jKfyqP9FKWckfJvFp50+XhuSVQySs6j6qUpYmJhk4tmZPJaYkX8xqSuVYBNdmQSW1BcPZ8nYXQiuHFPD66326bwenEY\/HFfLOwcaNC6A4lCRwkZAE6KYLFitcGexT7jzLLTZROU0v1rddGcHfsEpxJVCSELyyGtSamUiwJGCMZDUvjxStDeBEwDDRY5y7cx0QU1LiyD\/X+fO2jLsaVzX6\/HpksvyHOmXeS92XEYj3i3RATJ1ASxaFA89LteZ9dzwJOgNr+ar5s\/g6gtt+1qTNXX\/NrDbAN84Xsh0b7Xx357fS7ixc5\/9vz\/\/rbV2MBbhZgvr9nyGvD7t1fKhCoqzT\/9PF4nNaluPYdX8R9fC\/uJxr8eTv3PtWBYCOZZcvrsXZh3Prye5NGkZa\/X15uCHIfQzi9L2e6Dv\/35XXsDbDYc\/B02fyL+S12cR6IeTX3D5a87DrqXr5X1eD6MitOecoLrncg1DdyCEPqHjFv1GBgkLxa1Svmq6Hnj+EzA\/z2IQ9T5LUyqbJ+NtUsHU\/OM5X2tpbEqXakhSTh7HjMQvKatiuuAxJ0xp2i4tZnFXt\/A630TayMNaKBMZ5JPchKYFbhCQV\/eypqHuYQdXG4Enlr1PtWoiUSx09MwvMKI4gdIwKbTh8QnKAg8sO\/Ghi8ZVUNNB6\/mS6sAjYpvvabuXDVghfQ2q5nJSqXshwND6o8y50VJS\/vVXpl9ukN\/DGPStUnjIEF+bgEtbzsK\/RDDexL2WbGxZbGq4w8xdG4H4NccnJ99qRSOKnWSSam5Gas9cAvwa5nc65gO6\/6fmXJy65jnuX7VY2OpaxEZbYX0C5cX4CrbuYShtS9sXh5Y71ir9D7EdXBq11TWbLcLRFe7a26gtdJu1nB+ID+vtf6qK4uPr+s9FM7rC9sgLZ1FE8Jb2rkCRw2JWXic9vfaIuZ7ubl1XtODetHxZJRvUE6Cp9ONyb2GfTi0fogm9d4r8rzqgOO5L5Mr1uj+3p2ouILk9O026t70tkHqJrXOxLib1hoQ6rekpOMgrwoQ9knoqwRpAn2Rst4vf9W3bHcRjIuNTVfYmT2PHPnP+l428fcpBX3j\/GNZfP5hMv\/pxhrrXmbsjy3GsFOr03h54KPosyGTHIRbrqCL08y+NUgy28gofDoXVIU5d\/ipoejBp8qtXjV9RCDhZ+ZbLoRlrjb+F2K6mauo\/peZenLrmPFy\/erGhw3sxKUp7w7qz2P\/i48PqHuy8Ed5evdufwrKNESPS0oyJuUCk84XV5ebXmblW1Bw82oclx7H7xkic1soAuuA437kL9y3R7BmpUs0dbE14W\/+RpfBzjeAGbaAYO134LXnD\/uXepvn1k1P7knfa0ff206362tJb5OBGg\/JKWm6a\/vHyx\/\/LOue9Elh2WA\/fs\/BRMx9753y4QA9PoI3\/65KfR+urzolAkiTpbMGQsMo2mS0YJ+r95R3GQkWxAYTXyb11LgrjGQi1JwGbBeiqoZIIccqNcN2P5k6GLceSCu\/VZKzfnNkYlluXQ2rjCBkEkp91K9Bvj5NG3OYY3sRC6nr+0wuMTrX11e\/rLnROuy6FWWsdxbaQEjJ0a0o6LGFJOMSFyrI22EwAId3+FLykegF70MHAPNny2zoqJ4uacSID+Vqu7Xda72oNQyyxRS2vKscu9TUEbfqExqRQOjHb7N\/L+Lj3cu1\/ja46yv6sqG9GMSyaheT0C1eutigzcPb+juvwe66GAt4\/rFROWS2d54v6p4ufOI59W9qnrbzRy4+rK4WtWLYqMGkkFZxq\/vuJ6VqLiR7Wo1yZcd8AiNriVLgvyyqFrdQeb0Aui5ibfN+js+6qUcW31H4+21dmON9hvmpIxhQGMIqLAzYYNFC+GfiOulEdxOvjxM+lEEtf8u\/X0IMh9F0CcXg5e87IsGmJKfF8VtkrBj0wOjU2FQgyaUuvv3jd4kOYWZ7uzGKxntcHQiOSdDbyMJSImhyCR1cDHLx4HEatLV0pY5GnDzmSvhN\/DYHWIpu6OBxy9pK6E5KMQSRirR4yBTyYVErJsJqPLXb3g6PEPuohs3Cz3upfzCRUeR7ZIxkg8pduLG5bUVD56WNK8AD3niyqEWqrnBbPfaXzVMIIXx9NjYmbA2pXJ7wPdi0qw3u8w6c5o37ZVuwjWhn+gN0SKX97rn1hvG9cC2gva6es4fD\/RGvqkMYOgDY3DRcl74i88g2Bq9WvQ8fCTH+vnikduTITG\/g7pgcvi93P\/d3Zz4rnJAQN9eD3zrUHXg1zq25+6syz98XLXuQ9t1Ly02rAdoswuJ+jZv4H+J\/W3glwpq6SROVXJFaAXkF\/+ybcG+lF0mj8L2aVrBFVM0gV\/6lgc37H\/AnulWfqRn6wFG5SZjHByhshXGuk+a\/CC86LIBFsOhZ6xja0BmyL3AeeGBkn20DL++uPZQDwSJ58v9\/ZbHK4nKkYgE2WMXFB3\/BloS+hXh0gxhYFQaNR3j41lbO\/3bP0n08VEhYu2BZk4gfBkqaCzvAxOMqvBeMW\/BbBcth9zyL9m60yekqPQXGrYwipvsi34cenhG7guWG6RzTZ\/GvagaFE+bg6lxcDvWntSnQZZKOSab4ErRf9gMRS9IHeFzoZy664BXhNaDUT3ZYO7rBH6FeNbWKsivBQGhexHQ2jraBJ0L37n72aktEjG9pYbDpzixlKz8Ezg+DZzEcEWKNCFWjcwocomSZfEwFRoZq5YlAN6qr\/E9LH6LTM5v7mHJ5V0sQbNcJmjpYsmViIz4eDUKFa9WxiMskFLAX8PT\/z2M\/\/hQ7dOLz3504dl22Lr\/3uYUfO7T2jb74288ZeXfFtuetNblPcsI\/GXz\/lOKgdtMFtKyr5akJU24FUyGR06a1JH21SEsTOYPAwrATja+dVhl8K35DJqXX+nqLmFaiPCcpFLvCm\/uFypcAQTG1Mf8Px+sXzdS21I7kgttjW0vz5IXNLyXCWwXiHtWvTXOf0FNNnz3roT0+sBszWX17h6p\/HwwM\/TzB5kh4qusXByMLXZbwH9ggD6g1rVedgEaCalx340lb3r6r2sktgalEA30SRSyfoluenP2DHqzQXqitdRLyOxdUX3wVWd4yCHNwOzJ1XfOl+89CfJ4DY\/VjWe2WM+RVwqW1HRTM5oODxSL2C113LT9I3WJnEoGvYJOpzqLifTUMjLLvTr1FPzdrLzZRXlh+Td51qsOemxNhgHtQ9qZn4XqU1S4vn1qBcnOcZTID57cLVmYW4B9\/hyUDhp0ix8yx7s\/MfVSAix3a5ryZ\/iS0SyX5fRXioNZVxks2voGEWGuG\/\/DZemtwB3vXdht+L7maO+bt7Ogj7f7dnpHJ+NqplX3Tnrq39LJV6w++Vao8XxqXUvqonWo6d\/1NU3j5sNyxbTJrJydUmr1c2rN0Uy1aGoyA6yyuXT1wzl4SkxJBGjitb8q3P9VeePQo\/IoY5T9Sn6B\/ezXxlLheHypkdImLnRd1kdVRg8+aiyr\/vJV0ZHD4vpUek26gFlTlyrk19MlJuAR1C3XvDCPcODwNjqd4LDjU+kMARQs1O2CuNkVOs5svMhobmVfK+qu\/Wddybm5dw\/viZV987a5I3MJpjd\/ScmvaBUJKl18Fd0knZyQmkwzMsWk0ag8PJMBKrkdTypcb\/qrXa+kTkfn4wr3q4Eq95upVUe1tkvGnrdaOfOdMq1GnRzAX\/NgxBrbCTQBm7bgWOU90ojMiYbBRSYYDpUZS1a\/jd0d954ou3aWqs89xdN1KVOii4pKrne1S2PqwGVu\/Y3ajwub4KuYYq1MaJJS46Bp\/MiYHTGGoBh2eAQ9NDScyAyMjOQEQclwR8xbIUuNVUlMaSON4aESiAVIX5KvsITP5dYOskD3TUIsZO\/u7s\/Kq8ovbqBlrAFHOY2PCoLV7iQfXDtF52g0KkkUbTksjdwfwgoRx+qLH4UpCTXaVhGUGnW7h63GnK7\/MEE+p\/SSTDco4aadpjMYaRc0uX9jWPtXT6WrerU6fd9CuqeYWgTDylPgWKUljkSyJuAz4AkIWUE8COKv2ven6kO43ouPoJmrH6NLKzl8Qwt\/L24Py04icwqbcUJhM4ZbSCExHfg9\/L1tjdMHTzvayrRMNS0misELi4vjhUYzoDTbMO1PcrwAi1UISCSlAH\/MgCvp9nO4dz+Jn+WZ+vVK9cCCyG2\/yDcPrtRhLMcSgvCQIhP\/mGxJwqiSExHy\/AQ6pRCGUcCReKUlDrzw6XhS4X7TX+0uVVrCMmKuN9DaEe0sybNoNN0w34Gjn8EqHH0ze3zqlmo\/Era7RcbNxabxIqN3ksjHRxAZgVHucOecZZsvpuKJeUg\/R9oim3ruRfzBW1ZVRkjR96Xbje2iamzNJgWZrW2JlbIOhmBCJNMr+DhUyXtO9zqKcv2u\/mGHPrvrUxbo9X1oxqIfw+AUuova3Lcf3JM8SJfYdz7dDYTgQJYxY4gX+35XvYfwc6smH+0YTVbJFZqa0\/1wflOOSEu3HJZN57YiBQWpEJzL8PYamwXc\/lHGaerKdJOGCnNhfI1q7dPhTLsco\/\/xZo5hKuGiaRPABzGoOL2jEmsKj0EhI6EU2lvwKMgWbpGaK3HmiqKjFEV5WkoAB7AvYsJ13HfRi\/dvRiXDYkeDonDIiHdO+mwPRiQFfjIcEJgCiyfveds7nk5nadNwwSHU3JUx0VBWrgSoHdlsTIVQFwXdVCbV+In3oT84IT811yPnzSCP5z8XD4HEz0L8+wIhkMB+YLOZEO2P2kGBPHLyDYXhsfGJeDKWa7gA5kQqIH0+j39cv9Ef5+8f1beSkQfpZyR91ARYhDgPa5kbuFkkq1VZaiZm\/el9kPj+g+6Evb1aKTCbXKFgnuMBfDeEbi5kdswcUN2A1jMblm9irepj\/aq4xEGeBxbxIFx7RXxPFN3pjzyyXdtH4tWr5MzqFqKy8djQ+rrqnZuK9v73e43n0BNP8Z0KZ\/aXn5cUb3wNXQatvz6575aXLJYWb3jd+KFjh7tOvY1WoqLp2PD6Wk\/hvs8fZe3RWshcAMQ\/YC72XF6p\/9wt4R8HWoDUDegHNybiV0JjRfHxDICcFkGhCgFCa6AW9VlguL77ePIO1gnY+ZXnV\/LWSDZ0L7SR1QpcY0ZOez6PFK\/wqEBHPbEXB7TsrGcxSrzKw3mhuSF4DEyQ5\/UYD5jz1LZgpJc3AcJtS473tgY43VVo\/1nvh+B4vcg0nZ+CbccajVJUJQo73zznH6lKxqjBEH3dQlJbKsA4\/3MeaSuRKprR9vT9k6T48CNkYL1u5dYUtGaHPYkJCwszXQwYM+kAT7BgiNWN77SpyNfyY\/chnj3b5wvlaxX5kuhGsJa+6JbKPdD9SM9+n1iPPF9aq45k\/+Gm8AQYX8o9XF9FEKDXm1eAhfQ39lXjSND1bdgzbDxmqHEobboO5Bf0jnylHCiTkxBByjaC3zFRUDQKDo1F4xCMjHkw63cZVPMP4WENoyPH7wzbXf8YHf5wb8Ot+L3HKUFRSIQZhloiGQFvWgP97BOvIVZbiX7DoqBoJBw6glzOUgV\/4KPy3h\/gXHS+8UQeFy6DQgBl+Qm3\/OQh+I0oF0wqD6Zi816c78IQjehAdD5nWXnwIzaN9Q0beITnbNCoyCL6IPE0eoJlgd\/qcr0HNy+8xOgHZc\/9RxQ0oEd73\/2+xPqw0qX\/7kKzc9ujrd9owBkHRFSyO6AkiGgal4qnzWbx9ITMRCgLXueZ09ESk7rmHlzeh8WWln0bXchgRNd\/U1qKxcWy6fqoVEZDVPdNwyBX+iiqqA2sPUYMg0UbXQ3RjNT66GkfGKuMSitjsWkOg8JiASTGZlmo\/yYBVzivwtGAVSM9K+NrQ0c4uSVnDp7Or0HRbWwyXG+mNSNYe+UBA2pxq9Gs9p52WDf9tf2XSe6aCEoWNkfiTwsyWE40LhdPZysqkMRdpsB5vicT05zhMnx2pbD87b+BOODTGd3xaqvt8ZmiJhh2x3Z0bFPRzL7yvl\/uDL3FK2z6iK2m8sdZiC+x5trfNa1nQ+yJRRoic+s2FllTlBTkOHrmj4ySrK+wzBT+WAblIzZIMEzU+Ymo5ZkYMku7wUTzsMwK9ev2kDYVLZpu4MmStAGeOhSpbKOJT\/6XVT\/7OiQPn5kgMH03vTLEEV8YAg9N3YXBjK3AhuQ7iLRVz1VXhUdsJYYmZq2JiWJ86hqo+G3ZU1lxV9p6dFfRMPE9Wnp1W1qWvjON2Wei7a9Kdu1BXMsa2\/s+ITTofVlWqnq\/KlQLgeEk8TFSTRvxHfaqskMU8Ma4qKH+Fo8S+l4Ifzm9XSxf84KGult11OwASHGdnBiZmByZRO0Cm4c1K0fAXJ6dLZPKZDlmiUQqyTLffVJpdnYGVH0MGvf9QF1g4NiBTwxjZcNV4wpoGjAGOJGnh1cOe+0ZIGmldV8Wdrsmuf7PpeHo8f0lFwM7PPbQMLGmcyYM9Cn0OGbWY3wPiv7cAfNV3jFlhiVBAmHj4MPDduj5g4PlHSjJvpGMMIwZBuGF11GZBph1NOUehJlfDAcOg50pzZPDk83Dxh8ihnpkxQh4zpUlysJ4ScIwGEnOP6nghnI7LTKELkyUJAgLT9IwdyPk3D0pCmFWJPQh0f7TOgtWZ+2GtwSuS8fg6nBRijA8BqNO262lgscSaUE8csEhfI2S9XQ\/nJr\/tjw2LxZ4r0uYTBtZwQK5mxc7v5RfjKk91NgS2AuYnXBbPn5AJiMMWPNCGVM8zO5spAgAc3qELep4rXkE6IJDJkk04mzSmvblhFGshZhng5PPMLdRQMChrGialcmg2myYVejtGMkxmFRrraEdmyLk2hBkBCe21pcK1tCGwfms2rDjmsVyw+G0XL9W6FJfwXWnq951i90pamZzmkQiBomJhGDcQLgVjfyWMLUbTXI5w837pGiSV7N6HqgBmlFNXUudyY4wUSkATHqxNELD8P5yZfOx660DP31+Zh+dvvKxod\/zwg1b57HgGT\/7u9SBJt5n+Sb6pYbWy+x8bndMoWI3esuMO\/DOaNdidt1SXiC2u+3VYNCm2mtfZPSOm4c16VOKTM3QFE9pHtLwppSWTfpKe4a6skMOkgWFz8Y8tBeAm0yXUDIjVuaDfmRR7hmZ4XB2NoMM5Oae3gFKN77Y5raW3BfqUZG\/SBtRmHwKCEt185EkUj4KnUeloPPpbIiBbbQ98hK51jDg16hjQDESEQwzTjCTjW+VTQwJf+HYtJiKyctDIdBCfh4SfgTWjDVirVKKLOq6TXQ1GvW8XH7iFeTmayK1l1DH1yHyzaTS82c08OF3HotzPLrvipk\/WRz7v\/ewrKMDQdon18qCzi8P6KCYDUkoUg4S2IpP5Vmt\/8nPullWlnXzcoE9+6Qukjfl+TB4OybjkyAEAuIUTub\/c3n4dWp2+0rDZW8GKCpU\/nXyyj\/a8onf3f6cEmYc\/WjxM0r1c3Exh9kuV7LaxScUNHJzSjmzTf\/GB8d51T9rPP+pHPj0zUUumc5z7M9KzDKNnOXnyg4laDXQMlLx5MIwo3xEHo9KIESkLNhM1zLrV0eH\/XPlh\/yCj93Os6qrSp548ExpQt3prPRUa0XKeuQ8dmABK0mOQicqVbFwhBIWJ4eH+nHockCePt97v9hyt6zC8uV9S+87YC25HVCnIoE6Bd8YbDiBKNOxnO9MmW3DaAwNyRyOC47PobDlpmm2MQi5qwKfJUbZVtApso0DGQcECcJ+Tb7x7KKxStQQpmNi1VunAz7EVCqkxKyUFD0qKZEnR+ZFleJ2t5M9Cpp7BQtJN\/WrAgUp4jFjecmFX1Qrs5Z1EWChtLDoFG4T2xG+46P+QiI0lB4FjaWaUhh+uajdFuD1yOdcmOv+Q0f0kVln9P3P4bnTM+HuB09cMXP2j\/6PEZKZ4iYg6rioW91SplvrvQXWFjf8Y7z2qW5tc5l2zbkbQCR7Xv7K5vq6pMT5zR3HQVZ3WAdMw0e7ZJ08Xodclt7Rma5Mytlrj9PU8YEpcp31YaFl0Wq1XFssstkW8afCbi9cXCwoomWMypRjKpVibEyRoRpVyscyMhRjo3Jf0ztFoXwSPhlPOzZ9hz347TvfsQ0i4JHhEcjgMH+g90sabNWCfGWZMhW2Smie65BEOiWBuTELB1BaVPUC0EXHifKzuXyrOZ1flMnnWcx8SgwKA43DoSOjMNhYKAoDbAGt7QyPB06Ub+t468Yjh1nBGw\/3jsTbZ24nHE1IAjjtoVFFYnvib2d+JBxJqFi467UAyVkX4pUSsrNbax8F6H+H+om\/neRbKfCjtSNYGw7KA3kbtPsyvqoC1KaN6WgBrQt0\/aNT+f9O693nrqFNMO3cDfAhFjnFvs2xjaIOvwPqq5sRI2syoN0wDdDM8TPOpZqbNkuq\/TZ5B2qyk6lUzuE0G+G2rXdXZTTNpgKlJ08x5likAg68feVXA4PNPMTkcJUUmS+bIpaEjooioWKhZFQUsCOjgbnnq0FtayQHgkLa8BeSVomTQ6y1NB+FaPN\/Q29SEFYK5jTFh4SFxJOdj97kGVBhe8d2+R0EPm+\/1vmlbf7lmK\/\/v4PhBXsfXB2Q14wsI4aiGXHJspxkUlJkOCE+wRezmT9M\/1tk27MKEoPawFyGER4sAL+2iarcAjR\/jCVQ4lMZgwlQHBkXzgoUMJOCETmgYuGi5Rfa8hAwInqu5joACfua2TjD7CdW42Rr0A22zcfT58GklH0oGSg4veRTw96wXTI9x30vlwCwvWfGIaw2PQhJSd+o6wZmaSwnnpU3bO1sH6yU4wkI50\/IbHfxuI8ZLxefYcNQVY2mhM0xxByTZcOsqo3YozsVo6rzsGqP9QQ6dwoIkbkjvpI0Yb844g9xxK\/iKP+klgWDuK\/IxipshsU8FlZrG7tTy3YSbegrDQmFdAkBSUIg1DA19HFL2FWk+IR7QhIGkkZJcTcaBewSBZwuAl4sem4cSZh9w2ry2fWUrQ4\/GOkNQxYBirjn+pQOm0ViXplWnTZrSkTkSQrUkoJqSUGwprVc7RX2NFg5bUqaVorjwT4aG3nMOlhNfJMlStygcDrF88AfasN+qrjz1V3CnnddwnK88XI+QnPUrMMOLXAwASlIwdWd2t8wg7OcvazcZWu1H1hcKwq3fR\/EgSN4KweB8m5dO\/g2xPw+Vvh\/YCBZM0W9rbW\/sCKRm8HHz8MnTnRVvSNVnWbXsSTiHWeT3yvjP6jd1hMbD\/YEdMf8g8SiUC+yqwTYSGAmYTWAXXlsQWzYFbQ3ae5vQ7wPh4lfgnYYfEkcSVL8rMlid9KH9jkxGZxD57qXhl9JyoTmGJJa8lPuP\/kg2FjLLJCVK+yCs+2rG5g7JnygXNHzXC8pbIbJPAVWra14ztqfbPrCbItVDmOAtZ\/Zq6e39D3QLcdoaq8UrIg32sxS7oTpk9sFWxSizawJiZzUDzZaIEy4R0P61u2OJ5xLm8VRebAkmpP+KEJYKHlLpH8rUpfK7ekBkL5UJR1WnD7d1NtGclumk1lhJrEOM71\/9QN4g4SChgsDDz4ChLBIgsGf3Pp3d2bdx\/HPyzr\/Xy1v3EQ\/Bp+TfX5e+qa\/ow9\/AuDM\/ieUn2L2nx+ATbp9H2JQTUdLe8DfsXh1TVpE7mQWCW9A7\/sZwd3yfUxbmh7sDgDU1WfQTS3q9jQ1gzQa9dnJLAK\/xfRjhZmk7NW0jgKkT635lmppX2IUSG\/8DdT9bhAwG3d0NMMgXreMWmJKPWJvfLr5nN\/H40wGzOjohQCkig2inykBFOaqH0EAKkfN4uCrrdp3WGkUTkvHIlrwPa3hJE8xSUiKkYzhd7sf7MJlaT3JUugh2mKvVG8B0AJIJgHI5t+3AWV3+0qDTktHI\/Cl\/3pWNlkqB6uAcfCgyFDSaHRpiS8gqa40CHqqkMXRqyKe2aEMyatfj1fvmMwGF0kPt7CPda8IZ2v3uC3YolE8KB5lLxrcoihQSqFl1jVuGVsHmrxQxUDXsZRGRAwVFwqXpUXa073PwlUiljRaQDuQAoe+s9Its\/SFs+\/SEM1A1NgDEoj+Hikd26kGNqyfua3Ddv+vU7Zua11psET\/wB0HhO7hWuPVu74IwGAR1CNbY4tobLqnqChbDlxX0kP5k+5ucLby9YKeABnait7CT+Tl4tnsebH1rFQ8IBSmgbzmtUPU2li2KwtRPOtIa8Pwi3QoLunJNURHlNAg7YtUQa20HBPgZnsUdUn7NKRLjXYKzuKSQk+Vpf5ARYvo4vGgZ03N2rrbd+uP2+cFWkpPzJOIB9s6nNcAt7moAsyuWudwHDzD2wQki8B0M6AZg6rb04QZNvIWWOhJpgQVqV1AMjEBMXkbjrS4hNJ\/ZAwgOtaiIVk\/lFGax1ZrYyQ6lE3I\/nAs9bIoyAvVzFyoU3DCCk\/jl8tR6Dt\/rBgamxxrNQA7lHRQhfddKr4+CICAWw9IN5dEE9z+Myj0RwD8OfTP1f7yHzZ4bsU2fJENABgwACAA\/tGqwdeKjvThd3YQ\/PomjoqsB7yViIvUPw+2NGj2XBKOuDyAlsuOXRL9OCHhr5+A7kOZz50BG2Nr3g+QGJXekBsmGWa1lnSPP193EJmFgD3DL5UPkNcEp92PSkKdXFZ6HQfRjzGu6VCipABkXH2bygI40GiSD6YdAqiuLH7KnMj7Z7eG8Clj1cH0ZoL1H75PYAMWP8U6iWTwfiMD19jdrWALWF9Qznbr+TJlq1xy\/uBXj7QB3ej2yqU0kW6h3f3OCv+5aWakklJjQy6TIdhJt1TYUIu1xN9+nyrKCble9drMVpL9YpRwN37JqaCbr9dz\/MgKtqIwRIcV0eBySR7aeA6qG5Nb66gDf4rRAc7g\/1GoDezycQrtQJhfIrl7KC8d5ukvdpWQzLrBjjLm5Blgv20C8E624pPmWXA23bqHjR1a9xDNRKmT2MrhZTkltlF34gFw7GgrofItU1Tp3kfqqWPLRkKc\/iFnqmNjmuCjHsPKSRI\/g23bhR7XlHquNutOZVvSwJbv2nW6GfJvBX+3YjUWtrISrpA0rPi\/LO7QMyqznjG7ezzKRdbfZsu5s2T0Ye9dlgahInbdOhSuhzUw0lcyeiSYuc9+YsvoLW253VhhYFP+UGzsajSt8oDzk2\/lM9\/3wSHVCm3+Y74wsnHaPFsqqUsiaFr\/6VHfScvZQOoX2cPK0Z28N9KB7vS9r4nHLTq765Z6S2nkaak\/Okt5za16tmv1FtfrDdta0pXl6E43v4yDKmf9KtJ6UrIHGix7aXU5grdrP6+7XRcb5lwnX3V11qtH6VDXv8P+Toy1K49K5EbUNvqqj9J+vvZ36Ud3\/TznY+n1\/kIvhth25g2D9qbna46+OW09M23w6r3ridOel8wdidf+Up3jq\/wMrPLMlPj278YIJaoNL\/vZOdXF985u9MG96DO6Ve8GS9TZXh54J1HVZ67bPm0xM4LMLFZeheTPlfKIu64Uw\/bX3X8D3XRhtVRGZMt4ErqO7w4Cebh4dGtQIfAuLZ3sFQrkXAyeBIcf0Vbtxyjq8FPYeFCL1\/1UmoGfRjtNP4NaDn45bgn98hza6Wcx7IpfIUMG\/YrsNu5XplhnbqCCVZfHQRDX1qZLr1+BmHVnvtZKtxkpRZJkmQg2rC9pQlRFElhkn6wqZFolLbBwPfRaqyWIM6e9rZd0srWBZVivseR0pvQ80YUVK0lSqo3Wi2UpzlqiwGP7ZUmbPeysetwyC\/P4MCkQopAgXkpIi0QoS8o8tVqYy5L1udSWqzDzmfmHKq2BFkI0xs2mWOurNk++AcBXjVYg+FhVX5dUCTZ\/5OZhJ6YgrbEW0Y2lZi7K02ttkGjcrJQPUZF12g0f1OlVbQCtje0aNOACecpKeMCANByLvJFEvnE8ul6lylO9WYKDZ4xKCFAST8ho5llIBxNKZr50W6XrVGEzMbeaL17wbFn2VIMMrLJhFJiFWCyGNp4iWsGeWW8LDqiJS5VpZDPEnWqWTqBZSxk+3PKMPvCTWJkvgNBe+b3yXCyIkXAz4hGzp9UkZvf8rNpq8T7p8nBgqbvB6LZY\/7QKKYpzlpQBQ9PNwtPWkJGPoSFLxhJaT3fcixzdDxNFMmFqCgtlMkuRzL8v+hfLrx5GCbUsWKaSVWwc3N6yNjdVauZQL5GNRx5L8l80aFZIpoGtL+zYp0WbTg7pNug3HiLH+AT06OfkiR7Jer+fODPe\/7eMSyZMmTHPlZvPsehSIbln1btY5yel8NZItboItqURqeQvwAyAs4sq0KfYQxQkvZhIGUFbVyzngoX4yYVroSUk1CfTBhtLbH1JPJsnrJTmB4eA7H\/hFoSChoFtkwibbbXNlnDwnbDdOZG+ivJXBESkoiM35I+wdomJioYutYXEsu2QFQMTC7tFFsfBlSa9JZYazpIuxm9Zgt5nORExCSkZOUUdrjmmIqUMqo7g4FKlZg51GjRp0S6FhpaOnoGRSSazLNly5MqTr4BFoSJWNnaO2nM2RsLN03gT8pQoVaZchUoHValWo1ZdKpTo0HUGrorASTcUUEDD5kkey3IrefCiXFHnNfJx0y1NmrVoVavOFVdRMVFyUWO5LqPncqfkKaXom++1IRzAx3NQiWKnrVLNW1HNHXXYIX8rryWGThfokbNTvj122yvHCh9IXE+5Q9q069CpS7cevfr0GzBoqP1e8LXPa\/3eeO6lp555ZSCnjWw+4MQG9wDXFFBrNK6ZyOhAlBrMOKA00A41KVijUZNaAw61bH2lFi6FW3Su1qNgr\/kXi1ydJyPXJW+kcI8koJfTwOGq6F2AhlyDPl0Lxz3HdczPlo6qk9jPgJxXErrz8STC+WhO2nO+0AMXO7zPCJf5lX4\/\/cCSgEXLcKkQ\/NnnveLtWkFQBM7lV5Z3kmhzPXl586\/o3X0og2dxw3jwT2PDxhdZuPfYJdHOmUR7mpOU9sUagoIXQYQe1MVCQZ73CMQgMNifXhGJM0X+8dOTFi\/nA8yJp\/Lc70qUAbJrow7Q3jiDQCMalw2wB0hMMg0u1wOcqAdctxe96J3e9ej56Hi4Hj1frpfr3fEuZMNLmOfkhR+cN6ek\/uxG3AnVr23mSrMzaxf\/gqPC7zWqsFUune5heOl3I8CDXvyXiRSU4neSroQ\/8R9EQg3\/4iO8dGmulejXfP\/K4isFBAXwhoBnBAQEJEFAUAAvCAiYlQFabYri0LV+KK2L\/btS9cquookuhphiiS3OOI09ypKMK5lQrERSlj4IvCJ28BJkCbMZlDE1PzBCR2Oe+11HeeF3XoCPwi4V3LXVlCqZoyaMUKNI8YRvQf\/wMkURtxg3M4fjkhG7TOSUBIiZKPhfpEWqfwZn04WEJP73r5mBKgAA\",        \"700\": \"data:font\/woff2;base64,d09GMgABAAAAAEQAABAAAAAAlvwAAEObAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGoF2G6hUHId0BmA\/U1RBVCoAiUARCAqBwESBoGYLhj4AATYCJAOMeAQgBYgQB5FLDAcbyYIV022eAt0B8FSaX0BnIyrYOAAIZSOiKOOkZWb\/f05OxpCtDqBZ2XvKQSg5gUMkEcYUcpUFmdd1D4yBZ0zndZOdJ0e\/CS\/sa2XsrSBQuWeCpKhKMGzDbDxXwycGq95\/GlPsFjLLOmH9u3Vgjp99ayor2T5fUb+rGxafc8MgG4IkeHhR7Aj2JMEq3RaO0OQUrT\/Pz+3Pve+9FduoAaMHbXxo68uciIhIf4wo9E+MGjFyCo4OKQOM4Yjvp23Eqi9gAypfJgbF\/+MP2O55f4zIYJ2RMoFEKWw6QzYWQzQbksbkPv\/gj72e23YAFA8UDygBFRALQ+Smlq83S94tef7nWv63u4esOpWAJIGUqeSf5JJDqDEo0QjUnSrXIdhmtzKWqYKRqKNCqiVKBUFRwWiwAQkLozZz0a4iXFS6te63\/+3zGyDc+lY\/a7qremZ2F26NxaNQ3ArFrVBRUXkRMsLo3Mr0bxXhVAZ3l9ng3wWgD1XTO4CUKByOsGwnmdb0ZSIJtfr8WghioTxSzlhKmTyllcm1zLvpl1vQKcwpZNdw\/apjjhBSSBnhhYRRdcuKe+fUEW9OHlvnW89SAIAFjJSBDj90MGO\/b22PSiZESqNUjpYpUTxELooof2YX08O6TFpnD\/xVwEuYTAo633dBZK\/CbbOgHCgsdb37451j9KWwtv8z1WxnuBhxF0oEJfnBzrDNi6EnFFIlnWMo7U7V35ld7c4OkAlpFxAVyAvAQboDwQtM7x4CpQcuJStcStQ5pAQo2JAj5BhCl8vY20XRpyqF0kXbGf7\/f79W5\/6N2WkjCdERC2Ui2vpD9OEaiaLJLHRaYhESWRspYuZKaaxNH0tIF3QTQAoA9Eh9vX19qDZq4f9tv4y\/\/5VoflnxxFcYQHmSdYZmyzSFeBR+VYEkoBP1JJyqP8Rf+iBN\/PwqF1lHYw4jdvPLn6mfdMWlM5g4Msay2BOL2BM6mZDSmHyV+je2114FPwoTzKZ87vYnEBCMC0AO4ClMB8KCsGlBeHgQXZYQay6QaWZBZguCBAuGLCGFRIuGxEqDZCiAFCmDVDgLOU8BuaIDct0byFvvYB98gPUbgGOJEbgoRiw5ERFBKJL44H79EBKa+gijYUFTrdCsvhrmcA\/EbUx5ADYQ\/6HGlSWEodiJABAAFltB8OGPI2dw7389f4iLBAATEw4ABCPufX\/6EG88NzJ6kDP3MwesYeS0gPBORaKwZ\/08zny5pB0HGAPGqhjiggSgYwO5WgO+8ZyfzjPDMVx9snDEktPLV8wSosOUvQWCbbDRdmISseSKVFPqMNyPfjdijSI1aNQnHk0kgmNxNVIerYibawq2M33Gir84M4TbcD0QrsbKwMPR2yP0AgJAR4sDjXBc4xQmVRybqxidKhk24EIArzPe4JuNGk\/RNkOeDztEMJrghkvcHOdQerJAXKPkpVoeVrb5EvAU2RZgL7wQ++ckVoIWcjohAY7F1ULJijt93eAN\/F2jCBg2\/wg0cLKMVoEF3+spflBgEYOA9ucMAnkNwzgdCWDdv1CatF1DOHlVVWh0QxsVnapEflq8lVwF9GJtnaw5v1kW9zIC\/uZ+3RLtxON+dntrk9RQU1nZxkNlS01JSmnPoLxV+FCtrayanmzjd+uqi6e83EdLhVKJ8ZLM0ZPBegthZBM7xNAm9yJzVQvCXHmo+vLRaBYDwLimKXYDlnb7ir8xXHp6u9dwLl9OVhODN30Fr0F9cc2MBhnFLZOmFvhvAwu6HLly4wHvOe6Pb48mRU2aCpUz\/Tfq1GvUpMMtDz3yIg4uHj4JRRif7iw6R5FcRXITxUMUbzEEe2aANZrtEItYaiRCYoUkia1aiFJIoziaxNUhdbe8hoQ1wgtkEu3ih9sPhzvOCsHMIKmxnkBCKtGb6fz4wYYJB+4aJsUES04lXK8uQ+Z4CTxKiScFgtewOhKpwbPEQqKBJlrQztMaBItqFAtRwiEgVnGnCMfocjAKg99mwIyQAM1HmBAamFBdOeJG4fWB2UAQAC3aEB1kE0wJkCxFY\/0ROjv2GKaZjsXTQuw0rGlYDmnaJi0h0nYsm0cqio4Y6ZF7fgKO6itUxFCtGSsnmWiQqXYJPJeZ7r8z99YXFoYksmuaafkXgVpAdOy2FEvczqSkhaQS154SGPq79F04SZmfKCwTc+GFaiyyBIllwQBwDsGQEJ5KMcijJG5hZPreQ9h0EcK1fQi2xDVMk4018KkGLDTRwgxe5oArPvhylGOcIJVsCih3y746wNomdtO67LG9LO61j\/bFVKHf7TaAphb8sRUwCCHkhgsPpFWWNXmrtgW\/KwugwUYLPibZDjUNyKtWMBt315kfwVpXu\/wWxKdXbhWXuPAQEqKQISc9u6LOA9XXbS47syY63r5fT0FgGoPGpf4Db+ljkOFgtJKG83kxAGEdgU2V8NXAiRkSxkPeCdCGhLKEVY5tGyFHj6Q2jQkHycQ8PQky4\/NTmqrUXG7JdRCdeQg9T7d+5hvvGXAIje91o6MBSFgOXhdmrlnHDltn3gUmit909p4Dx5Nl+DwN0qxhEzsuHjuRoMedMpBIKtkU6uy5KOV5zFXauEmXXh4VvXwMvuQMfk9uh\/O7cwM02GjBxwTL7Gk9Gwz3aVFwb8ELPwdbwTrt6kNejPjiaemKlhRGIUNOOrkUZ57vy2A29u3KUU8THXX3Z0MYmNZl42lsMOM\/3tLHKINPhnGAyWUyAGC8sanoBwYIHMxJM0aogNngPYC3gy1h1dFtr8YkTwgIJ\/TpERDDyYuZkw9m6VRBNVOrxmnR83nIdTodrFvj882\/BwMOEz9R9pKRhcXSkO1rhK4zbw6ziw9617ybXhc8mfVUpPEhiGUXd7x7wXLgTQXHiCSORGW\/hSp72zjLRZRc1c23ly4eBy\/j0AjRcANc2TJGAs+FiB24BPIyEKbtRi\/D6SoFkmN1zFSIoIf0u\/dLAq9x+\/XbPa0jhg6+B1dcOVzB1jIMYkQ8M4BUH+RBD+5ryL5\/4tzo6ZpY7\/yY8\/xQpt7RuTxi3IMrkg5XcIRRFHWPpAnxbAgEDFuJbEcXb9+cAZB8D2d8XgDh6wnBKahftg3S0PyREpPoLX4cpeCGQENAW17BVplYHQvtAhsN6jXKSl5RvJWCxQW6rZzmP7qgBpqEpInoU1uUYe6Jq4G0raHhQrACjTijWV1jjWLgJWAu+i7oEVkj3dzphwhOcnCnt0QMYhZ3q9YyjjSAxdMiLi6cmVDPQYcHPeLopaZVG65ga5mMZDRwh3sfVo1suIKtZTKSVJBv5DhUwU4xBp0EuCBaI2owQyqVUh2kAOg9CQdeN5V38hfw9g1o9ydRvm34T6Glpm6Bz\/+afWPyPY\/GFla1Obl9G1jJuQSUF\/uVkjTTC6HVX7eef0bvq8PsKB6s28kCLpdYf\/f9Q6V7+m2AJQ9y8CW+1iP3j4Qfmd7joFGOj6ePCUYaBY+sOdHdewNPe\/Bu3LiLu12pmmmEFfRLtlYtjZiBSqnRUv1EyM4EFmdxY9bs3SxV7\/D2esNj9GnzJ4AiVoqY3jmNDEaOiIVpZWXJomscfDV9ib3p6p6XN5Tp8Bun5N3MtFDon9IGzNbZ5AF8xItc65FuqGnlmYk+eALM0A2quBDPtyUPcvAlPtTCWzeEHdyWPMjBl\/gKLHCnG4EzKBLTnbkQQIDGJ+S8FR8bUO3kBTQL7NTtRWH7QBtxAQMN2A02ETaojf1laEdX1SVbfsMbvxB8ia\/wA34kT\/gDf+Iv+Ou+vgGhxA3QoHabRNhIl0QlpAqppe0PL+ZPR5k4ovEGBgSsTeVkxiyEX3qnA7CE1xu+NyReWrw38ryRM41aKLxp9cbEW49SObOcuPKhRvq08F7\/Q5ji6HyigMyZd6yAFlBF+UFbOOSyFdoWrLePb4l4Y80VaHHQuYZsF0yuW0QHq+sOtcHhJoMI3F5GQ2Dcp8gCTjmUPxQ2A+9HLPAcgx+ecL0FFzHLmUCSJmZaBH8Suy60lESTKIkhqTei02ZLZtDk3IhGKd86MVJh11LhIAtaJyvdppBfY8wOz2dfBFmmPLd8trS5aazxJhCgYMGGAxfcSIXwIG4CLSWWoVqrG3nCCx\/8CCCIEMKIIAoXwZ5HPcXKuGPLIedFPPkEaoyN8RBhnBcxvd0EYiJ+tAjNR6IREEAynIVg9tkI+RyEfS5EMm5Ek7AFYzEKxYMF2\/UCEA3uPsI8jPIkBH8RbcwAIwksrtJahobaTsxoYmSRsdOoy62WMd89UvVjpctY3vHfCs21IRkvAmyeQbQEC4DgUKMpG5ksuIFWGONm3L5h2OdBdDWjZImnEi2sQX2j4gtiJGnMGWoU7KpuqqfJHC6SFj6EhBEXlzkkRgbZVeVJLFr5Hv0eQa7QR+Q6fIIbuw+2Ug9pWobCzlLenK13F3MyfPCVeOuT64feGYCzD0E5ctbmDvFYwB+3LIBF1ZNGF9s0ld716QvB1\/0JzgH6t6vQJ97qkbmf\/\/8UOW\/NpG8AUgAAOeU+C0CAgMRlAHjlaCP41Y\/bzwNpZWeb0RzrvXoGgCCFCfI\/C+TMXQASIhQhAA57M0nyRMIcgULBIOBQ8IgkypDDbv4Md3aPzkjbawft+Ak7nafyNJ6mV13JrwwpPOhsqB80ABoChUOJUBa0GLqpbu6f7N\/QwAEPAU8BLwHTAmYH+AXAAngB+gBj8IWR\/U8IADgEHMxSGAtpfkJEiIZFQCcglSRbvvnj78zuHkDMtv12\/ISExnzqb4o2dCbUBwptJ7RLg5+xAXm+lWt+AK3LvKh91vjfQ47\/3KVnYnITM1YD6PknoR3607Fn7rP3p\/zdcz\/pBK+\/tcdIF7x+X0KIxvd3AvTi1\/pCAACOAEjPxIC\/81rxTd30+cxvYcMuZvJNFhm\/ftb4\/ZKXvfyu4\/g7t02e7IpXFtijP+4n\/rZJPz\/8gE6YSwxLxaSEBAERhgYMVQScSFFSJNFDKA5h49Ciy5SAJetlS8nR52YB9s4EW77oh7cdPCQyPIpMTPMWsLm0CPlWZCxXhksWsyEHN5jP8f\/5dUdiEyOdDJxCAiW1SmXaHOpzAhloKixwlMFkU8y3VymUhTT7ktAcM\/hARoORWChMajQY0aPPwBQ2bE2ibba5hOaYT5Q2D6utsNIqO3hpd9A++x11wBHHREgQR+aEPFmy5Yhy3iU1LrjiYqurdddtd3R6qd5\/6A4hhGI4jCuMpkjqwvFE0xHDWCJDJ5k4hS+emWQWUplLYSXdVPn+UGCyTA6KOSnlooyz01yVm6HKLGfNdMafzplHwd1lnpQW+Yevf\/m4yl+zQK0CtFjqhiWuW+yate5Z74E1uqxz32ZP7PTKLnv0+Nsbe\/UK0maZm3WTy5AjU4pIUtHiycSKEC5OlJi2emaTx7Z4arfX8fCxcHCx2TmgBQoTbpbZfPmBgPIXIEiwEKGmy5MoTWoIGhOeAACaBADE7gCdDvQ2A7DcDYB1KqD+BwAAgMc1+5SoFtUELt0RJWKjMClylDoJYs0KIZPORr8pIZT6EVxdQHWjb6pHd6cOvCDcDVfbLs6Rs2C0ZJBwMw9DBEvIqLSCCdgmTWPzkBjXRuhJCAHjvZGwfm8odl3Vr1wWg2GTiNXevRS6EIFKTEYxCK4ub7zxoRr9wP6n\/6BUw7l4P5R1Q2sBb7h3OpvavSFIG2e8LhZJ7w9SIiGcVTJJW1I\/ZjW32KZSLKl8nTIZgODJwHYya5UT6LnZWd9ola16NZNyMr9O8BpMS3kkA+U4BuXEc2hjbf4bWRJli2djK1fnci39wEreZgiynB\/EQRFWwIKgVCp2KOF+zBR1u1JiWpQ4QoNWi\/bb1idrMXH7oSkoDrHK5vMFLt7QbrIlq1Wp0tesTkPXxZe6huIjm0qV0OeVk542bOoJrF6KOE9El9+xfgriAXl2uhd3xjy65NvduGuKyKXHryuvX0SOnxFhPLOS1oKumKnoVdbVb\/0NJ724\/rX1i3eex2rcOwiT+r5fdJ8+d8+qV8LS4qx3tlyK6+VpxKGSFDoeTsFCOweTb4tYmIIZxwZZ2c02BrU3KZ6sWQd9qNFERMUND0zITodxYHMbptlXooex6ZvWkz69iLY4qr7EjgsuxHnamhjBYSJtyMKKJGhok46nXRbqQR+0tQZHrmbsP2IwsQlp267VV6CxhzXNG0PsNqE8Sm\/m0zatJC27lK3Ie71Z59JRQbPQtTqBt5kFvfNbTxchO7zwxsSuYu8FgFtUVvJFcx+53j5TRFQLMAXO9PYJpPhe\/VEmpuW3g6D7xPH5vYOuBM1Uuir5e02xyb1RZTfaifhJn7GDduz4T08r2rKIuHVzdck0xVGe77eBS01fwui1vCK0q\/ZbogF3\/e\/e4kaVj+ImR9e+5vKwieLOohNLZ6\/gnJc5n5aN25smdGNbO3szyKNi6Yu22KsHTFcFHDnSmCPNYxmqU1DT9Tyv8uiqJwvJ7Byem6sZX6OaKSg1WTSGT++maPqe6KpT1n0XqRkeWRr\/7UB7bmhRVukPjxlphKRtNPa9cvldDJi+yCdF7+h7Zcb\/NgSTzN7njJaykds0qezQT\/rTZ4R2+m2QGhkZCFRC3MC+B0X2f90wf0XKaU2FFNBiQL+jhnYXa5xtTKF9EZgYcWGH4KYq\/CyvarTRWufoUF0G4ljotDBpvzYqGbUxpk00tHPEX5n3DE6u0on8oJwXZ3rjHYBF7xJ8TQ5448sQDK5KbyX3lFDFFXE9qt3q9iWtet0VRpLNyqpZ2SrXlF5PhZsOT9+fSaaTsqKfcTqlzTOMA225p2BHqe8XpbHHpfBQ7smdwxih3uzG34\/RVMueCtn8iK4sq7mt07HPrHD2OrDLmGR2uyFl63h16KmRvRkG8iLYq5nK4FfAgkCJytXWo8U34RfF14kQhq6bIWmrS0ByUIGyDnay6OVlq9FA7Wxwt8+LLd3rDHdMSLbG9idhGP1aQ33wXXZ1QuzSF8PDrpu6QZlX+fA32wkTORQVu5pjxLtp2XTPRB1\/Id\/bpcLcrE7oGl6xfNuzc0xpx2QxrOqeaHV3I3qSut7iXzFXYiOF6lUzCmIEW5fq9mjpGO1atVEWC\/qSqTo6n1Kg8E\/glDK+Kq4Sephhf\/PG1z25V\/e5JMKU7DkACzG+8oegLVLZTuiufNIhB6Vn1\/5I458LpzjGjZsK2zWzTTVq0zRUshC16PJHr22y23udkzJ6JY0jzKXFODB78a2vGaqeBMPvkjjn2zqJGC6gMnKjieFKrv0KrO6X0HNEQolzDuOXxrFAaXM6LxRaWjJdeBVdRM6b32fE\/CqzLMqD11yBr6hoNc1mx8r0rh3tntm52y9I7xaL19KGhb9VEWzj7r9nZ24q5IjwRdtFs26g7wrDntA6cn2keJcr7PuhqHT8z2aMR1NAoGCDZNxpNzi+jxkb0MkL4pR69Z5mwvLi+3iaUbZCWyyYNcsgh6R4t3jfasF0BvqoxvybgHWCzJ\/tMa+3O3dkoZukkUUYL9aLYBl8MX9GFhY693Qs\/otFH7Ek97ADj0yzAKSbJHSY1QcE3pI\/bZFtdgkPzGMyrbS28KNJZG0cB0nUmBMHeo5mhLGnYtoHdl\/28yQCvSzWnuRIqNsiXvm1Yuz5de2I2XhMAyUXA+8Da\/PkSrcxfWq7\/DZkFOXTpBfgjLJfIIuVHSZDYYF7xWznN+A2g9sys\/NRUySwaTI0475C6mvUBHWQTaCQBd1RfcTGPO0z8Vy0S3Zbz\/ltdbXeCxwqXwifXvlWdlNt8IrRPru5XbuWEiaq0jm4FmfagATBRAk5A0jZ+GaCIVJYT+4mJRAtmWaGwIT7MDb0BrTjNzqfL2BcXxqB8JXBXqR4BbqD1X7qDtd8uxKyvheL9Ac8+53o8zW5SnL30eRbpw+e2MjTxXJyPPY8yzfssls79+T8iAcxouf1R\/i8h9MEz4BAxS1NEYDN7P\/RZqkm0wdwAZBI\/ivILEIiuysU91Q9n3ssy5vSS\/qPYCjLp03CdwalAULTzyBEaQNUSO9tkNgaXiBavv\/RAAzEH6yA1\/pGyU5IUVvNBeK3h81eWbJT2MqHNXA6L6FEFSoLnOsk23z2c+ESHws+XzVgI71NUXzyXB\/AGfSH+69U3AqYtkKnvGX+L5kiTZ5UCSwwsidSS85IDNZiR14ReTvTFneSjTG+y2HdQ7XLdy6DeYFG2r6SbLU0y6A1oRMj4k4fT47RgS\/Rw+FRo\/iSEjJPonC3siLxYY+vy6+tdVqprVRru1p9icRg2JL45mQsrwQ+p6XOkgPga8AYNmB08Cl8YfZSDY9rrRNCrn30+IjMpwUHKx3E8gGkg5c0etnLdsrLSyBftiEeDgxMt6m7XCcWm3O6uaZC7rH8Xt0qCa2qy3i65epZ8015KsqkO7JUh22e3M2KV6R1s+vf4q7Skyt649FgD0vrkYkFG77CYiRRHe4sojYq\/GVnNfS2W3vqhiRj2JptL38+3nksdX9en87UwB6xobt1yHZrrZ65C9NnKpumCmr0hs3WBEUXpTlcNbjzK4mcMgYOlt4hnl\/y+J1mfXkfC9K1\/kYXf+ItCGsFoNgV7q901yuWP4USPShnbCtpXGUKkNY5XWVM+TF1y6ah6nV+n7WWChmU8DPcQskCdWZjogU1m0IOCtTPLY0z1wYdKb0bOENlyWtMZuUqWpKhp7M8RaHi7CyTWUB6Ok\/pror2S+bFEpbX0VCsTEzbJ1nEBmwD94GkrLTy0Nt24KqX0JHhTLIEE3VW+wgcEZaSXyj8Io9QWzKL2pG34bFEvlABX\/eKP8bwUnNUeLpZ11RW\/yj63bHxVhjw1q\/KmyNZ1IzKnRO5tJ1ao91hn8Ch4ATwEN\/7NO7K3WE3tm+ave\/6xnbXlc\/5fRNf3BZWN+WmZ7jT3ULr8t7egryCxaWdy0GME3qQW\/2rrwmzY2cz9p8+TvWB3smqFHbTZAb6KCnLelW2cJ7qpNlsPwIKFrNm9eCB\/w7SMSfFgx6giU9vi6p8\/swO27K1MuL502jbNqe\/rvCwpKlNdKK4SGJN7dZKoQ5wFaVepYrTG2AVrx9VRe7ag4JXDyPLN7hi9UyHpU3zYo+bzILj+gJ6RGbWdUxgqFOZiP10+8hbiD7EeXKfh5+Wy3zWizjRIrXNxyZSewICHLoh2PXgrRW3Z0sR+t4Aqu5o7v2557VSRs\/vJdKhhPLSXXJrF\/VcqYt7zdmzSWaQdqKLkpku0azt\/4787rH9c2fXhA2d5ljrs9Yz9Uzm5qzNj+bMzJp5IHuW3ac44mHyMfDySVVeM1ADeb16Uc4Yi8mUWdxmF7NWDowa4XgZ27RbmyNHzEYyE44179vfrAeoJUofoBa2oNzzcZQB1sdrq71iKYrjsLTRnuaEmX1e4Mv+vgyWhyFyRueIa3o1I2ihkX7nRRbHxbHOf6TAAxladkyokOSMeb8fi8sqsuaMfpbBqhxGXWI7dHNU9Yv3TuyOHQIK5rq5XgeXvVXimsc9U1bGwMBOduY2xhzMAVwv8Gehv70JlxUJO8GdcZ7VEhdVH7YVUSdaxZyQE51g9dZIy\/OndsSeHY7wn89yygY0PrIWgg9hnsyHkOIPt18VdDdKT1nLRac6Wq+J9vstRK74taft4eq+tje\/jqz4VGFrVLUi4vM0ifG5rXBVY2I+HJRPI0PGvM5xv\/sZsfETidKYUk\/mmcRFS1xdjSDrC1bsu1giQlxq+HM+qur5Owdm504n7sLacoocb36j\/F9JxkDF3O0EeBRcM0P5s7hsfMOZ6sZFWRgGfmNSGWef2rLN+TamvJx92tm+TTy0P3vW\/3Og\/vESW\/yZVe5i6Jz5ix7kifJtjcYmgqBQUt7n7GkErZCi48je2DzZ39Vj2Cu5JlpNhJCTDSPH0UkIuZ7RTFOHMHzLY3VGrFOaLNzc7D4hKdfsnLtIpKv7U5pLtARSuakItBwVEfF7eYiqCH4wubaYsyh3afezcaVgHm22+io6A07D6pEdCF5MQjCci0RjaXERqUFxUVgWFjZ6kgc0lphelG+scR\/d\/4hz5G0zfeLa86t+7HSfb+ZDjXDelLEzfWdIAhOiJFxkoarGdeOxBdwAKnilX73fKi1\/0GLACM7DPy+BczsUS8Yiw1mXrrXuWbFCDuvaJVY4MgYL2qdwzPk+yiYfQ1Pe+ZCAZrzHnDmlZs\/0kXuGdH7UJifL90zXzDBsinIY8LYJrBjzT5X0w2xWqbqy561NppOC4CfBRR11Zh6v+9PoCbDFvlL99lVAAb+DCb5gLaTldXPdUP5C14+3rZ15h+QkfiUKOLvZ0t2q8SMDrDy2Q67g2C08qcQQ15ZzHPhrDjwxLd4k1LWk6lPbt8hMypVz16v0rabCuYYpGujItMux+HMYU8O1eCJLwDulMC39HtP4GeSM0R41RcwudlDjpBYygfkwX2D3qK9w3EiQx2lIvaLG4LkH8Jqg5AhYgTaQgEsIIEfAMHRNMPzZUw8aRWdEMZhZGKoOuAJB9v54ptiNAjSlMyaGv1ee0\/mmtfpH7jL34NvG1yNlFTy2XSbnOiv4EomNz3UoZBy7jQdSICWXFUs61adMecqTC3uuxlvS9uCsmZcF2ILkagWrViDj19SJ1LhkX6\/My4078WAVpOllo3uwYHH1j\/etXbl75TF8TI\/7djPF++PHjwy08jgOWTL+QuVLJRY+1ymXse1WHmiA7JrYtGAwvzHr8samfrYRHR9RHZ1Su1CEX7my3u20XyuPHuANk047wtUg57fXNOTnGXl7j7V\/D4LtWrpoUP1EtUegncu1yxV8h50rkdi5AodCzrVXcsE6SNfLea6hDNDrGnw7r6twt5zCL\/Y74\/ev87\/SM9U\/nd0xvL26aSOlFh7HIVfwHFauSGTj8hwKEMRyWHmgELLGIzFrMMccd3pRZ7+8fPmXqLoPS8bhSZPEnCIHTSW1kPHMh\/lcq2dT0YqHC2mqtCgq0xhFVoEevYZ3DX\/lmptrzWWClsgZWbcHYtCsyVrKz2\/vvumBouArs7qp838dDuesUujjq1l8m7w9QeGc8cM1Uue+K1E+PVUfvOvUnMfIbFmyFOeAGissxQj\/Aoog0rdJckp3pBv3WOpR3HyzxcBKxaKTYpJcrc55+frgkoNgF0ABZuojpByOUCCRCJlC9svgcFkMrsAbBhQABaAumNkGPagbeorKW1yG2rz1wPnh0\/9zVASwPCZXhGWEXJEjgLQ+DxhdUdL64\/sYpiy1s6uhShP43b3UOmbpkZmo0CW20clyM7\/7zUJhFzu+9HBWWIJAvzGloGBjYuq6onUopSHDHB+jQaAUKDNKk2wwqUlaBEqFLthhnBG\/SdN2hLBb\/Bfqhr4g8hcfZqKy9DEsciqSoKMnoXZ6A5m7RGklu7My9hbjthy4AC5C1k+QFfwoXL70h0bj+g0m5YMOrRjl5+Dy7QqFAHrFErsGbOv2A3aPmn6K1iLvHVAO2eAlyxgsWNY9yJRVNT3IpqWiaM7ERfC4pd9iGz8tGq0+dfLM91S0XOnRUNlwN1OURtE\/yLGPlDn4PIdMzrNzXCY12y6XtYC9lvU883zTfydc9gQPhnMlWbBXlt35uqVmMHdh9dDb1vas\/XFMSduYgQBLQnLiwHbZUaluGenV5Iwh8\/fIC96AcoOZPa6hdNCCfToSr817IMjKY82X6eJYU473oIUHZqd6tXlI9sdltb9srR7KXlwz+KGlI2ePjCKoRAEaQzggtfI4dvk7AFlsBRMK\/L2gAKgOvKpPm4wtgmQ6hk\/XzA6NySHTUwkx4LFp1SUZU+zspzKbuJzQBhAY1p8YwvO9Z6JzjOLkrPYDMkvsmqik6MxTTnk6gYkICeKg08Oexs4pZTJzEwuyF56TgVOQmQx2LpdsFUvJ1hwOh\/GeQU4iY7OYdKwxiRiDV+HmGljfkYtqBmpSWqoeP3e1Nj+tdN1xl+TszMAlhFgs1OX63vZPf2R9w2EaZMH6E1tPN7xrcKKcz94920r8AIMfjR0kOSH2HLNhVUOOHJ2IIj5b9SynNsr9hlZBZv589Z8n6m+xobbcklq78q8z57+hR4Bj1geyp2ed+7P9d4FaQfKMdM\/0ayd48mSyL0+I55NiXtYtfWvon2waFMwu\/H8eHT6Zp7fbr8ipJ8RPiNfDhxgQEZg2\/cX7t\/XMKe\/B47dFr1LCjXVFpWo3OifnjpfUn4PUF\/xMsux7bVFZkhunzb492hTIPXoRX9991UPNSJoBvuyE1iLN7MRslGypu2qmXx3t4rrzbpS6qBQ1N+0QqwSbuGAjSj6MZc9DUqrCvq8e+hftg8ELpa18j+ulRIhXU4f+aeNivd4hqurIv5HupSa8JNtmbmCdLLuGCu7r1b+rD6uLoTsCJJQm8eTcbL8r8F98PZTtBxtI5M27nX0Xf4Gm2emcnDlV9NOqCMcpxUjMqTU1qMScW54USEiV8ZfdLIIJ4XN+9AkHlfYQ8Ds4dT9vzvJBE0KCLssSJPfkz3VSqcbeXNQbDk1z0NlSyrIUqg0ooDBw7AghYvbL3z6R1\/xofTg5CyhdA7djqnAGuN\/ds+Bm+V2Z+4tfmJZAHKApnd7x4HPyy9LmeHmvXifpaVMn0QuQOtGR8iPKGBNx\/HInYRRMjBTr9Tx4bGSkCIOIEHf1gMmUj5mrVck9aQYBbZqZ0afS9xjSkrtXx2UsgwvCtgSFJr8gci6cmniEJD4AU6ZBv\/zo9w7Vd+fNpBcwFVhxdwBiEGXeq1vW+GbA1t37yVH\/dnF9zr0UwQfIXSDtJVHV8Pw55THamJYMKZORKSG1aClzLPACSjyhtxq8nKObuGra2gktRzQoYUZWZToznUJIxSaggLN5bCrNHIiH0+dgFWBZ2Kq7g0\/77uHf0wYOLXUuGvvYFjjqoRcQdza4\/k5UOdV\/4QL8Tuz\/XQuod94ns6tBBmq2y\/5Xf2Zmd4P\/wjYZ+FcLCAGUy5CQCGhi4L7mRGfgtzunHSuJ9eRYrs3CFwlsAt08v6wJdt\/Cwl1LHaeZRVsnyLN\/FUphC3SLu\/qu72oyLoGCMEjn4Ob1e\/1tsBYPf4GlihVX3lqdJ2ZbSjn8iAd3hfRMGiWHQqakZBEYjEISP8ObCQ7OKehad1\/r6hmwum\/Wc8IqhGkKdpDRhJmv6e4Y8HIDPRqXjix+TAs95nsseovAUQxifWveyTYviygCR32SNxWVJFZxOA5FRvb8E+Ja7WoEd67XjQiBDxbOeAHfLU2CNNbEHizesQJMqQfXTds+qNcvS7xhbaghmBtX\/o5\/Rf0snAArPCxv7hFftm3oGaZ+qnWcqlYYW62Mi62tEcnltWKxWyXnVVXFAmd4Sdwjn0N6bN1k0Gy6ZvzxpQ9a21e+qcJm4UpPFdhaj30qaE8+iO\/NS1ySUWQ5YcTW4Ja\/aW9Z+mBc5ZqZvDwKKY\/FpeTlUjlsa4WSy+PE5OZSuD8oehwumUzGp8BPpiTjANB+wqXgAPXJoy8+\/bC8qyf+qn1pGxiXefU4ZMkyL1iRAllEc2tdRM7K37hkBjkzUiSNzKEoBdUuvlJVI4itUipja2tFoGTq4oGmmp8lq2qGKLZ4CSnVQ\/LP\/mb3ZSViamdmJq2zWCSTlhrqAAb+LwawCun6kTgbqFxrcz5u7WpmF0SFz2XKQ7FIRShDMYN21QhJqWzYyc2vOZWUvyKdhrBlV6y1ldKvPwSFUzufNYWVvy70YKckSPhxfEpkBIsbEukbvxIXfFLgD2X9DQtlQ97VnkiaxsnM7MQn5KySJTariYi0UexwrlWUlrFkrxbUH+LyA1dNG5I2PGg49KD7+yqQOLnrvSUy80ySsYQYl5Idy8XHiArCY4HLglm6Wen8vEvLZ69SePTq0\/2ywgu6UrOKV17SgrIpzddTSzZkJ2W\/KCn++zdKZ8Sy\/XLXa9JWZBXk953RtPWTEkPQrEgYipMYSsRrQ9GcSBiCqQ4FHFMU7dp9Oi\/wxnXQzCs9qMhp1agzuxOCGIESC0eit63hZxjXcFJtMo7IygpMCM7qUqtz2w4qSu5QxTxCiOBZeDgNKgwhSHiUG1guDYHg0bAYfvW7FtifnDOD66vfkljQl2fMXHM6taWuX1uxwUM8Ko2xWGti+odMQxDU4ShuJAzBVoeRiImhaHZUFJarCQXv3TMJIkqAaSbNAD3z4tdX8FD8enYcY44+QboijMW5ufJTWJhScnJaltySsHSqR9YRmXCIU07dMe2ntP5B\/aGHc1jd7w6LZSEpkvLEbIJQ3BimpxTOos\/KTE1XzFolHrWYz4Skh5k6DJlFu1vowJ15dTZm6fT3tFqof\/TuqByMX976xFSUfwZnNa0gAgOkmfJ1KSRQt+RefFCW16pNzO1SBjKDxBa23Gi71tFr19FyLPFckQ1N44JyOhO1+a2HZKY7tFgBbtfxNSzsBJpQvIhP82KwiH9lhcav\/3izovC7rU3f9wLiLRaZFfNr2NmwsC\/WYf1J5SQ\/tS1FnVNr1aOi9IZ0OeFbGNDaNXydVTabW00j1kTD3gdF3owaf3I1JFDv73fWPzBWXoidTsvia3TFstjQIKHPHbgCk+xOBrp9E3NlkYLz7aUSpyR38oeGs0CHesZ8k3rbDNIheA0GrcHh0epEDA6vxmDUeBxGo8YAi4Q4Ti9ODTOqORMlaZz4wlx1Yo7ZUL7YC6o\/tVK\/gA+BavHquoyoVreWnvo0arSJVg3XybvGq5dxCosibaDQWZpOVcaa8r4ZGAZo\/8JRVxGSMM1qy5530eztgAHm8NSrT7nfW+GFs6ljSb3anAVmQXC92hoNuoIASfgPxEnIOdabILUTzTbyORRDCUZe0JY7wfAHPa22++iT9Lplg7HNz9wV+ZcP1JsnHwQVwUuHXo7xvM6S33+w3+ec6rXn7QwCNtU4TdZR030s7blbEOtSarxqGJMB6fIL6LNoTSIaB4yW8EOhPGmBWt2blCSgkMO9BqgVoNtHMYsr998SwhpuMx4veHyHMcEKXlo1i2s3g1D09tPXHoeRPa8LMNuu47YZ0bU+dtu560\/DyaOvWaK2X92bhvcd4irDMAOw+Ixyr\/OQo4GpqLp9Hh8wcItOEFpfZAfQ1cdPMDRZgbYXeMFpJU5mh8Ut+ftF2mXDUJMBi94RrLSViamui+fIzjJZnKN9Qze82iUhIrZKgL6n3kpjZ89xUMIZLHxMXwyLQA+nJLjBb2+Nfs0THkOqFviKyJqzZ8laoa9AqmbwnoC\/PLcdQop2HkUjiq7l6aSzCLPxjAR48oVg44B+DqBbc\/rBJM\/+BYvD7Zc6TwIuH\/GKYpQSzQkXAX0jz3cNT4OfEWJaKUoWkqT6f+FZusSYIlekZWjz2765SHR0pCw0if1ZgNOl1Ms0L739G+kQNEKRlpmY3\/7teIaIXoKUh2jj\/\/ITaWJj2jRF6hG3BYmHpaeBqSNH+tFeDxaq43zma2gSY6qclhali1RXiC7us0BKuwrwRvaykpheuxGop5LfyKWoilwF32GEUPt9HlHsDDAHFM+xG6kkC+gzV9mfcIQ1vA71+r7C7l\/sb15hECYPKxP2A7YjfmPbw3Dt7HIdmDDvYTOQMOxz1IyrvWVPXWXGa7v1A+b\/o+F+8vBVTpsMl2Oz\/AjxTj6nOl7Nq60SKnE5EJLhytR6OM\/zLdxcl53d1FgR3SiRRDeVNzUehzY0LmiKkoibo052Y2a22PVRTT4AmrYGs8GLiSWjOgunrqXosQQ9hcoxPaYA\/Hg9lQL9HyqQOGUoYPgqqy66VeFcPfpqhnYVSsjLjCaoSESM0sBuoCuDU2E9RcqFxjzjmUNtVdOHHR7ZM\/reSjbF\/VdE3MvTMNIiMWIUiR1bgDlbiTySaS+ndqfUFly5WNU0eRjgH4Meknf9Zc3efPDwPAhh8mTsxHmHD0ZWrbv7ZInnkpaFfrIUfuMUDmYfSV9wjNFtQShXHP6AwEQKkB8Or5yrOA85QSvU7yex0ef3iJ7nJwcnQgSNkW8qby+mMBlJXoWjApMbpr5tmPmHnbT7xg5TyTPKJnLWu3D60P\/pzK+Uczq+AMH8L36ilpAaREUIPqRrjL33sJWCjtoExbA76ryQIJ+3sE2PEVLaYdPqpi8\/q9fMf5rWsdnX5OnS5HILzDSVOI9EMClIPg6UG8qr3ZRw8WFgyGQJoVg5J85HOS0Mxw0NE6R+KpmQkFa3kA8avxe\/XtkpRQpoNcRd+HXoIdAOiPL1is4VuOh30CdVVnqvGgKOkkkwgcPcv4+WN+7fS6VM5r5q0gBdMwoFSPaNJljo0UyFkkwWh0CSK8AesTOFbQWZAhWygtJIATRerPQmmCLE1Us9OF+2IaLH28l8ZjXsNZDLV3uQmbSqN9I7\/0wEuM75+Zd4rPfTQ3bpEvCRjWfRVRX75xiRCsGzERXcnzQ1pQ55mPovsopavBd4A7HrvwZdgm7jkMMkKvWRWObdtuHsNrnN26YYrai\/jctr20ZjFlBRFmw6wkBJQ6A5Sl38gjpUxuZmI7UUnkdNhoeitAmJvXUBHFO+nYIb02qWWvOBBn8Oz6eakdmMFGQUISluNmt5qz+roLiBw6aaUdl0PSoKo5f7cFe0BDALius4YGZKTOUvbyIGPCwPLLmzjJtPu\/vnyR9wjdGs57hdkm3Z2RJzO62ORtcnXFATqxKqLunVQq2DOLFL1q42azNcgCHyBmBG43REbQoMlpiSRMCh9RhKCo1GTknB7jUZS7bpZH0fQ+P8UKJbEOdpq8SO9ZnZ0OrS2hs2663qWuvNm5W11Tes6q+rs90cWnVeYmFwKqRSuYCFKZFYmWZXK+MljhiPwbvQa5Tni9tHoTNTnoNPNQDRYNTr0ntDz\/qUDwh+nIMe3vdVCRx7y7fI4yfklntgEDLB+Xl19fRpD6T3Omdi\/nfbou6VavMCfX+FKe50b88lZSm9BKIllPi7Oz\/dOVsbW\/v0lT1OfXgbWK8YufjS3cQVY4NtUlaVUCm2OdmxykpTqmP34GJ+\/r6f3PzyFKqRQEkjHrWEovdJ4mCsWQkKYKaw2U6nFW0vvpvbNWzVuGjguOpjMR7ma1LHU4klJqHxOjJZHB2aRBgHAN1CH6m0niEDyjzXWPe3N7VkEeHRjjtY+847A40lXZXWqTzdxWbFBLVNNWzG5i1sUE\/UDQPpupEiEzj14WF8Gz43LJnNzHmETtz16eP+TjltBkSuF\/sYlT9eNeAPHm7E6Z9xdNvercjCd1drAneaYpanG6uiOTIXciCCMS8+LW9jtmFvSVHavs05JmUrc1\/68XW+s6dHBy\/yT5X3mh4eanvOMncOZKzZnvDc4tI\/3rTmja5+3qVUwYUaBHOddUC8tICegscbaEyCMRVPJqcSCEYmHZeWggPRkOXf9rjPu5eeeX9OQReLbf6mmCrXngf6uvIdnLJSUjvfvr5\/uXJKQMf7\/5uCzh7F0ypc75UZPVv3FadPNRWiYnvoTDKOpAvMqZfH4JVpsDVD84N1\/GgpAhUtlkaikSJYRCwyzDc2RgqEFcdWvGur\/NDUXPn0Xc2KBcBDvBuMagyRPzvgUHDVEWZVgahmgmhazCSOPBvOpqkiYBwYPl7WydGEcfyb44ry6E0jlozKa9jmQKWS09bnl+Yff2BeVrKWWJjKKB+YRurWx8tRgpAwWnhUDE9PykX8WBjQEV+Wz2oavmRkXv1WGzqRYthgbm499mU9KHEJhVEoJiwMwTYL9BG8qj8ycTiSHhWSJMZtXk2HcIBwot82VPX799WYHdurUW8\/oGu3bUfXvPtQg9m+vRrz7j26ettZ94Bhx07DQH294ePOXQNGd917445dho\/tH\/CB7Ts\/GDY9sV4uspwqK6s4faXcKWwP\/+a7+PdyTj6NlsdlUfILqPwIxXSTaHETH9jsHHusv6LiktVWfvmSxW67VGHpr7RbL10qs+TpFiboFiXrtYsWJer0C3SaRUk67cKFibDiU\/PoKgYbg2Nd7Nhtrtrsdf6HYYBvcKgAMgdYjMxHjDCX4MvxZviIHF96AY5ZgPOlZ69xJuUkOdYAny5iqrNIo602JadUmbSJLrM+M7w8Mqon7DIsMhNwwUPJopEw8SW0d3SmRh8OCe5p4z9xdzMVnC+caUD5aNUofPxH7h3mHc5HTvgv+3wENn03mUlJTFaSTnOWufnUzwVq+yejvgXlR6LgMoH6BhZCYXkz3alKvbt\/4dR9wMtS6cpSsEOAkL6z5jo+ff8FfOHfon2dfRcAfdOBkiVrcTPUOognwKCmbS22ZNkCBNQ68An6dfRYQtmycVvvY9IxKSlkHl9PxqbENdCB0+RoAtC6uU1Rz5SWiYDfD\/xxlEr3KiEWmQJFC5rPRYmfg0YK9vkTcBZwgZ2yC5sON1ANCDRbpeN+ELNNX+gRoUidOrGnzv\/o\/4ZR5D2Ha4A\/aEMXxOCYmfM0RHHQLmxC+puSoGg5ASwacWpbpJaX8Do0+iIcfpDMiVsAAqCqebEkYVkCIzEVviwknD2X4LPozVjxl6rIegR97JJIahzZ0OUC\/0LyWqt1rIQNCl07hcdbQoj0ggc8d1XqohgdsZ+7fONhPRghAPTUEiauMUdCLZPsIuWELKrw1QeH++txftr2WGALcVbUwXI7aGbqK9t870dxNCGtaIQxJLqbhlVQg9FlDTIDCkOUylmk2VU9s+43CXxO\/9y+PP87GsV+YsFaVEVd04r6viDf7xTdoSwiLd7+IKO6j7LvKqsLFh0zKZ2gaJhlQ3K16Xpk09WTTMeY5Ar2Lrr5HA0vp6iHyDOgXBmzJlicpiuQy9uriWZOjUVF+dpnfo3GazS\/i7aIFaIEmZ8sFNxoai2gQJKJBQstLleKDYpaMtlZys1gVhKLimN1q2eGLRdHGx+r8z+oN0Y+uk6eYm2n2jxqfmRbnTSkEKoF0ljtxPwl9mp+CZgzh9pysn2UJtKi7cUZpYaAx3kP7bHQJ0hCpZqmBl8xKxyFc1iUkhqftkex58rr9BRN\/UM1GUnhFSU5i\/2OVTV5VdJ5DouYYMkiJ6arzD5VDvhES\/8yR\/wHCBRlTpKfdcXfsgnvIlRlRWIslYTanlLWUnPLChdV5X+LlRmXUVA0bPrKZgT5XOlKUv1wAGpsMitKCWZdYNRiUbYMXbwcNVK6Ehgjq+ukRMBikz7wx8RMYPvPWPsS3K9veQ\/VquM4htnS1oGkf61Dxbr1WLp+gdGLZPgyYeSqYtQiKFs8n7ie3LEYt8KgR4+lPxsw+nFi+OPjIp+nekHpamO0uwz3yUWu\/eqmdOUzRtXAiJULaL0YrTo\/qc5zTidMkNEJfb06aRmAFlqLwJhWNZK\/IWPJIxOi+q7HnMIlvQ0vqmFRpq9zgBHG1oqXCBpAZEnL9VQEokpqoxa5WKTTrjunrqMFajw3ns9H41h\/FWkovGSRUoQUKUmlKClaipFipTgpXpJJCSjxN\/L6342d6T\/lB5Xv59\/azf8va4Zj0kj6of+GrnwHAMAnfqrKgdrEIG0Qu\/tTtZzBM1tGPiHPC33PujBiCnEZKzfnPtWDoUPu7\/J3IRLbSC70APS+n+DWPNif9PrMwWEZ3AYpyLNJXpdXxHZWd8hGD3L+TEWu31kUdAHsUn+6LwA+ZfDEd+CaLXMHYLN6UATANo5wf8iQS7Fh4M7\/Qgwk87AO64kNoMEbDgwMAANj5bZXd3zqccwYvcvSBSArxelUAJFPjBOgwnQencmPg5TcX+XvnhK5NGraRGVWA8ADKBFLo2Y7n6lz\/QkzBl+WlmnkKee9mREPdDEFTJMIUwC9HpHZ5Du2Rl81jHQdkWmFbbRTkyenH7S5uvkrGfOrcZmh5VIdL+\/rxha09R5F+hFaFvN3Ear8ZNGiY9nTAum2UD51UxtaofPOJJEcI+XE3iVNy9Uv5zMaUsnn4SxFLjeKlQMwSQ7eMg0MR36bAi\/DlxmgaBI+3H6Ea+339ci7eV435QUV+Z\/oNKXvjLFPjDGU9hEpzmJnMiorGoDkFiD9IUJpcbFHmiY12zFDz6RUltA37sMssjTjBKgwPUb9npkI1VGVPUfLe565TaRRbobc3+cwb89hUuEkjZo5OIsNOQgin8jHtHG5Hsn5KLXBVdh6h0BvieiayKN8ff7X\/Ie\/QOSEf+KDJgNuJls6JKpvEcKIlXHhpM+qfzkXuer42ACuajPxSXLh4Dv0ARadOZ\/HMd\/npYT3MXdjdEdZpEC+gSEzeym1bOAWWVrqh6ivf1nEe4mvBx\/UMJfiuaBsp37UwIc\/4\/CBtNauSACD15scRODabyTyOfW\/AHwKb8n8+kXVAzXPyrQeXtp2iAkQSTjUI5D\/zB4Xvv\/GfXMQABq0\/1B\/2ZPN7P8ZBL0LAD\/fvs+sXv13jzlf\/p9tY6oHoAENMACABvCdWm3Y8gfyf6yrQ3D9Xdzyn7MgImgXctetYk11Qr\/NuUR89MQhOypZ5lsFme\/vMQbt9F3SE1jjdOhBXcrEC\/RdgTs8wnA\/bMvuZpUQpnp5LBx6w9\/DVVrX5DKkYhzXNdB2WAcxYsy2VXF6MKAfs0rvUIYz\/IvzKuakHj5ic59ln\/YHNY7meJmyionGpAbu2D2EAbb3cZ2z+VvalZbrPAVtLSuYe0OC1dTrxYYVKuWuPmXwhVAEJj+5MrAC5Si3DDUpMrmPSbXFeTdO6qBAGY2p\/ICVg8ZTQYe3qOu11Qr0jVCrY6WgsmTv14GzHqiCAA+n00ZrfTXviJl5uLRUDh4MfrhDR7HKu\/P+2J\/v15VKTP6kDwW+vdXmvpLJ6eE9km3jdcZ1i694lsjPQk6X5i326bseaVgRZt7JmyKm2OPuHKqKuzxMLhkWtcJcHRckK84VJQTDF6lGul9e8sjJVVqzMOVg30l7Ze++rBdHWZan\/qZOz1yq+tge+iRz54TH\/RIdBt8JTWmupRA+O7k8q+gryw+cpHo+UL3e92zGauAc1VweMNA3pY2rqFYPfavMnbkMOXu90y+Oz\/EQz4xuj7I6Gpxlsb0EvEvcwV1TqXd1aLTf6gcBd50JDc6Bf9jMeTdZ5o6TjO2rW0EYyvDh+7LIWo991uc8nGclAsEe5OntJ\/8+U8jaI88QWTuPZiqZDHznrBDPJfIsXbylyuZlYzxnk3Xzt1c28Q\/\/WJHczBC8W3nFCd63TvnWdpF0H7pxMZsiGmyWm7wQLC7FhQRpCTMDL7mpRDcQiFCL53aR0vt4+PrpNjX0fbLAhiG0gjXWcfVJqaeQO71POwTlvWAgWLvegTp+1\/zVH0vstnaGlf0ql9NbJPKHK1pWcRenU3o\/HWI8XvCcTIdnyqtyfXw0TYBWdABiU4DuB3gtZHLJTOIEf93jc\/gy2iXjnRm8mBTNxw8HATRpE7qdKAjC5PdVP3gHAprxEUApMF0IV2kXxnCxi2CnvovE97GLYhDoouF3W753SZlqXcqpQZex6U+X1elfl0vg\/x291TQ4HoKfbdqlhi7lzUQs0NMi0Ea5IgyhM3CKmkrhKDYdxnw9xpDzyp0zX5hDvXyByE6TADd6h\/FakWFxOPfsNJTnjI44IZJTlaDCbUeo4TJMxOFWDvGUFU21ZDVvnXMWTZV5Zf7W132YmZvp+vDWiRXFG7bMDpabISgMxvGx8GnGnPo7ECnXBYssToHickJ5E6UE4lYWdhMy9zWK0qRtojZ1cn+jJ66yB1itGlQnsOwJkg\/Ri46K4+sFP0UQG82t5hQWN8cB7lWudVwY1jCL8mngDE00PefSylknTrxxoVpqWcGmVdWQhpBeyI8FKlapNRRMIOpgITNNSwM9blRIRsaDJjR3CYyXhPKI0vR8wdeVzfVM6Bv28EwRGUhQgunkSGLX8Ykdl2r4rEOTACzdaDhds8G5CDi00XlyVqyNNQHfGkU2PuUBD9nanBdddzNvutVoBGiSyX4KIkRTGk9Tv0P6V8vv7jYB0f5g16Tsm2yKqfVy4Ng0080wsy2cdLlnqwfNMrsk1Wo4+8yFa3P48G1afr01ohe06fkLECioGR56ZJvH31mch13+V2ZW4SLARPan2fqLqiG73Jrb++B52B6inXbZERKqELsVms\/TOII9oVugL4xh5GVv2MT2hevv8Agt5O2XRaQWFZOPJ0IdcDBy+6Og5ssvWv7RMTB7I0BgLGwc3A4JcthRxxyJh1+R4y74yxfBFicgFNuSRL0zaq94S5OQkpG3jES4CGEpKKnEtdyK4iVQ07TSKgMlVt+qVqfrQ0mS6aVIlcbAWJNmefLbIkNmObTx6NClh0+fAUNGZcmWI1eefAUKmZgVKVaiVJlyFSysbCrZOThrLCIVSSqq7w3TYsSKE0\/mhJMSJDpFLilN6oyZOINUwlyxVrE4aLTMoYZtjXWERDSa30WXuGvT7jKFWldUqnLVvygsRC2pRfkHvU5loqXj+mowJYFTzJhKkypFufVKzZVcermyZTkts4wYOtSxwBQnxgkyJ0mt9VGklnplyZYjV558BQoVKVai1GllJXppngSvPdXjhVeeee4\/3a3VcRWZqzLsY7lpQ8SoIzepTh1sJtoa5RAh7HCpgyCjjtRBjEIudWtrE11XSu7u5um+GFk4pFJFnP0r++tA\/SIlDylBw42kMNnbguMn61S3zC2YdZ\/VYWldR0\/PDVEBG4VtwWGPPGfskVbU7qt+UVhr9jBd214VVrvR7Rs1sKu0aZdSPL96XtuuPVtQbcAbv20ZGSSl\/fnuyf2fpvfsnxYO43uN4D8iG45+nUG\/2zEpHR8npdMuuyROaQ3BxBNIYDfk0UJ4zLthgoPxCjR1bKTjpPRzlLZsVmOZkCeS0Z9rYAVZcw84QY5PGw6mhHpYEFvJwEtH56MexAmtXJcggghJeILuQXvgCbpHnsjzbn\/nvjzvz2+SvJOt9JIsaucvEnxQ6+rB1YyMdJ3433OU0z5qx07a2RweUJH4TQnY1or\/CUXaKkV8ylyPhOwPRmKK\/f1H7GyuQxyN\/xbObzP2ioJBA7tgYKcMDBTsVAO70MDAwE5ZLL2ViopgG92yVjGeW5VnhsdMIcJEiBIjToJkfI0Lk5I0UlFoJuElxesQqWHrZ7pPeFe6xFTeOHd9bq++\/uajIvYbMMCmMN8LIWpefXnSxgshj6itxk\/ovW4PV0WQHKJPJgcnlkb2MNkpVBBLeP\/PpEXSvxbnPtcW9Iy\/JvQ2JAAAAAA=\"    },    verticalOffsets: {}};TGE.AssetManager.LoadFontScript(familyName);"};;</script> 	<script type="text/javascript">	var GameConfig = {"PATH":"\/","TGS":{"VERSION":"0.3","ENABLED":false},"SESSION_INITIALIZED":true,"HOST":"http:\/\/scratchoffbuilder.tresensa.com","USE_FONT_OFFSETS":"true","SLUG":"scratchoffbuilder","COLOR_DEFS":{"VideoPlayer_background":"#000000","IdleTimer_emptyColor":"#7d7f7f","tge_isi_background":"#ffffff","promo_video_background":"#000","promo_background_letterbox":"#000","promo_background_landscape_letterbox":"#000","tge_isi_header":"#dadada","IdleTimer_fillColor":"#eaa733","IdleTimer_warningColor":"#ff0000","promo_custom_popupOverlayColor":"rgba(252, 252, 252, 0.91)","promo_background_portrait_letterbox":"#000","IdleTimer_backgroundColor":"#ffffff","promo_custom_smallImage_borderColor":"#fff"},"EXCLUDE_FROM_COMPRESSION":[],"ADS":{},"REMOTE_SETTINGS":{"promo_background_landscape_yPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_landscape_yPosition","description":"","type":"number"},"pointerSize":{"default":"medium","options":["small","medium","large"],"name":"pointerSize","description":"","type":"string"},"promo_fullClickAction":{"default":"none","options":["none","action","replay"],"name":"promo_fullClickAction","description":"","type":"string"},"promo_background_yPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_yPosition","description":"","type":"number"},"VideoPlayer_safeZoneHeight":{"default":0.75,"options":[{"min":0.2,"max":1,"interval":0.01}],"name":"VideoPlayer_safeZoneHeight","description":"","type":"number"},"promo_fullClick":{"default":true,"name":"promo_fullClick","description":"","type":"boolean"},"logoFullscreen_landscape_xPosition":{"options":[{"min":0,"max":1,"interval":0.01}],"name":"logoFullscreen_landscape_xPosition","description":"","type":"number"},"VideoPlayer_muteColor":{"default":"#ffffff","name":"VideoPlayer_muteColor","description":"","type":"string"},"state":{"default":"tutorial","options":["tutorial","game","promo","revealed","testLines","tween","revealAreaPosition"],"type":"string"},"promo_testVideo":{"default":false,"wasSet":false,"name":"promo_testVideo","description":"","type":"boolean","value":false},"promo_custom_bodyText_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_bodyText_portrait_xPosition","description":"","type":"number"},"promo_supportScore":{"default":false,"wasSet":false,"name":"promo_supportScore","description":"","type":"boolean","value":false},"promo_custom_popup_landscape_xPercentage":{"default":0.5,"wasSet":false,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_popup_landscape_xPercentage","description":"","type":"number","value":0.5},"promo_background_portrait_yPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_portrait_yPosition","description":"","type":"number"},"promo_custom_titleText_portrait_yPosition":{"default":0.05,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_titleText_portrait_yPosition","description":"","type":"number"},"promo_custom_largeImage_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_largeImage_portrait_xPosition","description":"","type":"number"},"popup_characterIconPosition":{"default":"positionOne","options":["positionOne","positionTwo"],"name":"popup_characterIconPosition","description":"","type":"string"},"promo_custom_popup_portrait_yPercentage":{"default":0.5,"wasSet":false,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_popup_portrait_yPercentage","description":"","type":"number","value":0.5},"idleTimerMode":{"default":"onScratch","options":["none","onStart","onScratch"],"name":"idleTimerMode","description":"","type":"string"},"promo_custom_buttonB_portrait_size":{"default":0.08,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonB_portrait_size","description":"","type":"number"},"promo_custom_titleText_portrait_wrapWidth":{"default":0.6,"options":[{"min":0.25,"max":1,"interval":0.01}],"name":"promo_custom_titleText_portrait_wrapWidth","description":"","type":"number"},"popup_useCharacterIcon":{"default":false,"name":"popup_useCharacterIcon","description":"","type":"boolean"},"VideoPlayer_letterboxStyle":{"default":"blurred","options":["solid","blurred"],"name":"VideoPlayer_letterboxStyle","description":"","type":"string"},"promo_custom_smallImage_portrait_size":{"default":1,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_smallImage_portrait_size","description":"","type":"number"},"revealPercent":{"default":0.5,"options":[{"min":0.2,"max":1,"interval":0.1}],"name":"revealPercent","description":"","type":"number"},"hiddenImageType":{"default":"image","options":["video","image"],"name":"hiddenImageType","description":"","type":"string"},"promo_custom_smallImage_roundness":{"default":0,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_smallImage_roundness","description":"","type":"number"},"promo_text":{"default":"body","wasSet":false,"options":["header","body","none","nofont"],"name":"promo_text","description":"","type":"string","value":"body"},"promo_custom_popup_portrait_orientation":{"default":"none","options":["none","left","right"],"name":"promo_custom_popup_portrait_orientation","description":"","type":"string"},"promo_custom_bodyText_landscape_yPosition":{"default":0.57,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_bodyText_landscape_yPosition","description":"","type":"number"},"scratchLineImageSpacing":{"default":4,"options":[{"min":2,"max":8,"interval":1}],"name":"scratchLineImageSpacing","description":"","type":"number"},"promo_custom_buttonB_landscape_size":{"default":0.08,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonB_landscape_size","description":"","type":"number"},"pointerPositionY":{"default":0.44,"options":[{"min":0.2,"max":0.8,"interval":0.01}],"name":"pointerPositionY","description":"","type":"number"},"pointerPositionX":{"default":0.35,"options":[{"min":0.2,"max":0.8,"interval":0.01}],"name":"pointerPositionX","description":"","type":"number"},"scratchParticleEffectType":{"default":"none","options":["none","Puff","Sprinkle","Pop"],"name":"scratchParticleEffectType","description":"","type":"string"},"IdleTimer_landscape_yPosition":{"default":0.06,"options":[{"min":0,"max":1,"interval":0.01}],"name":"IdleTimer_landscape_yPosition","description":"","type":"number"},"VideoPlayer_debug":{"default":false,"type":"boolean"},"promo_noVideo":{"default":false,"wasSet":false,"name":"promo_noVideo","description":"","type":"boolean","value":false},"IdleTimer_portrait_yPosition":{"default":0.03,"options":[{"min":0,"max":1,"interval":0.01}],"name":"IdleTimer_portrait_yPosition","description":"","type":"number"},"orientationLock":{"default":"responsive","options":["responsive","portrait","landscape"],"name":"orientationLock","description":"","type":"string"},"idleTimer_resetOnTouch":{"default":false,"name":"idleTimer_resetOnTouch","description":"","type":"boolean"},"promo_custom_buttonB_buttonType":{"default":0,"name":"promo_custom_buttonB_buttonType","description":"","type":"number"},"promo_custom_smallImage_landscape_yPosition":{"default":0.31,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_smallImage_landscape_yPosition","description":"","type":"number"},"promo_custom_titleText_landscape_wrapWidth":{"default":0.6,"options":[{"min":0.25,"max":1,"interval":0.01}],"name":"promo_custom_titleText_landscape_wrapWidth","description":"","type":"number"},"promo_background_portrait_aspectHandling":{"default":"crop","options":["letterbox","crop"],"name":"promo_background_portrait_aspectHandling","description":"","type":"string"},"useEndingAnimation":{"default":true,"name":"useEndingAnimation","description":"","type":"boolean"},"testFallback":{"default":false,"type":"boolean"},"promo_custom_smallImage_landscape_size":{"default":0,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_smallImage_landscape_size","description":"","type":"number"},"promo_custom_buttonA_landscape_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonA_landscape_xPosition","description":"","type":"number"},"logo_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logo_portrait_xPosition","description":"","type":"number"},"promo_videoInterstitial":{"default":false,"name":"promo_videoInterstitial","description":"","type":"boolean"},"popup_showPopup":{"default":false,"name":"popup_showPopup","description":"","type":"boolean"},"promo_custom_buttonA_buttonType":{"default":1,"name":"promo_custom_buttonA_buttonType","description":"","type":"number"},"IdleTimer_portrait_size":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"IdleTimer_portrait_size","description":"","type":"number"},"promo_video_safeZoneX":{"default":0.5,"options":[{"min":0.1,"max":0.9,"interval":0.01}],"name":"promo_video_safeZoneX","description":"","type":"number"},"promo_custom_largeImage_landscape_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_largeImage_landscape_xPosition","description":"","type":"number"},"promo_custom_titleText_enabled":{"default":false,"name":"promo_custom_titleText_enabled","description":"","type":"boolean"},"promo_type":{"default":"custom","options":["static","preset","custom"],"name":"promo_type","description":"","type":"string"},"promo_custom_bodyText_enabled":{"default":true,"name":"promo_custom_bodyText_enabled","description":"","type":"boolean"},"promo_video_safeZoneY":{"default":0.5,"options":[{"min":0.1,"max":0.9,"interval":0.01}],"name":"promo_video_safeZoneY","description":"","type":"number"},"pointerDirection":{"default":146,"options":[{"min":0,"max":360,"interval":1}],"name":"pointerDirection","description":"","type":"number"},"IdleTimer_backgroundOpacity":{"default":1,"options":[{"min":0,"max":1,"interval":0.05}],"name":"IdleTimer_backgroundOpacity","description":"","type":"number"},"popup_useBackgroundImage":{"default":true,"name":"popup_useBackgroundImage","description":"","type":"boolean"},"pointerPreviewPosition":{"default":false,"type":"boolean"},"logo_landscape_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logo_landscape_xPosition","description":"","type":"number"},"promo_custom_buttonA_portrait_size":{"default":1,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonA_portrait_size","description":"","type":"number"},"promo_custom_buttonB_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonB_portrait_xPosition","description":"","type":"number"},"popup_exitAnimation":{"default":"fade","options":["fade","rise","slide","none"],"name":"popup_exitAnimation","description":"","type":"string"},"promo_custom_buttonB_landscape_yPosition":{"default":0.88,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonB_landscape_yPosition","description":"","type":"number"},"promo_custom_bodyText_landscape_wrapWidth":{"default":0.8,"options":[{"min":0.25,"max":1,"interval":0.01}],"name":"promo_custom_bodyText_landscape_wrapWidth","description":"","type":"number"},"promo_custom_largeImage_landscape_size":{"default":0.4,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_largeImage_landscape_size","description":"","type":"number"},"promo_video_safeZoneHeight":{"default":0.75,"options":[{"min":0.2,"max":1,"interval":0.01}],"name":"promo_video_safeZoneHeight","description":"","type":"number"},"promo_custom_smallImage_landscape_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_smallImage_landscape_xPosition","description":"","type":"number"},"promo_custom_popup_landscape_orientation":{"default":"none","options":["none","left","right"],"name":"promo_custom_popup_landscape_orientation","description":"","type":"string"},"VideoPlayer_location":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.001}],"name":"VideoPlayer_location","description":"","type":"number"},"IdleTimer_portrait_xPosition":{"default":0.06,"options":[{"min":0,"max":1,"interval":0.01}],"name":"IdleTimer_portrait_xPosition","description":"","type":"number"},"pointerSpeed":{"default":1,"options":[{"min":0.75,"max":1.25,"interval":0.01}],"name":"pointerSpeed","description":"","type":"number"},"tweenMode":{"default":"wiggle","options":["none","bounce","spin","grow","wiggle"],"name":"tweenMode","description":"","type":"string"},"promo_video":{"default":false,"name":"promo_video","description":"","type":"boolean"},"promo_custom_largeImage_landscape_yPosition":{"default":0,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_largeImage_landscape_yPosition","description":"","type":"number"},"promo_custom_fullscreen_landscape_width":{"default":1.8,"options":[{"min":1,"max":2,"interval":0.1}],"name":"promo_custom_fullscreen_landscape_width","description":"","type":"number"},"promo_video_blurAmount":{"default":100,"options":[{"min":60,"max":140,"interval":1}],"name":"promo_video_blurAmount","description":"","type":"number"},"idleTimerNum":{"default":5,"options":[{"min":1,"max":10,"interval":1}],"name":"idleTimerNum","description":"","type":"number"},"promo_custom_buttonA_landscape_yPosition":{"default":0.75,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonA_landscape_yPosition","description":"","type":"number"},"promo_custom_buttonA_landscape_size":{"default":0.08,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonA_landscape_size","description":"","type":"number"},"debugMode":{"default":true,"type":"boolean"},"promo_custom_titleText_editMode":{"default":false,"wasSet":false,"name":"promo_custom_titleText_editMode","description":"","type":"boolean","value":false},"promo_custom_popup_portrait_xPercentage":{"default":0.5,"wasSet":false,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_popup_portrait_xPercentage","description":"","type":"number","value":0.5},"promo_custom_backgroundStyle":{"default":"overlay","options":["none","image","overlay","video"],"name":"promo_custom_backgroundStyle","description":"","type":"string"},"promo_custom_buttonA_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonA_portrait_xPosition","description":"","type":"number"},"promo_custom_bodyText_portrait_yPosition":{"default":0.57,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_bodyText_portrait_yPosition","description":"","type":"number"},"popup_enterAnimation":{"default":"fade","options":["fade","bounce","drop","slide","none"],"name":"popup_enterAnimation","description":"","type":"string"},"promo_muteStyle":{"default":"none","options":["none","filled","circle","circleFilled"],"name":"promo_muteStyle","description":"","type":"string"},"promo_background_xPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_xPosition","description":"","type":"number"},"promo_custom_bodyText_editMode":{"default":false,"wasSet":false,"name":"promo_custom_bodyText_editMode","description":"","type":"boolean","value":false},"VideoPlayer_zoomedPreview":{"default":false,"name":"VideoPlayer_zoomedPreview","description":"","type":"boolean"},"promo_staticBackground":{"default":"single","options":["single","dual"],"name":"promo_staticBackground","description":"","type":"string"},"promo_video_noCropping":{"default":true,"name":"promo_video_noCropping","description":"","type":"boolean"},"promo_custom_titleText_landscape_yPosition":{"default":0.05,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_titleText_landscape_yPosition","description":"","type":"number"},"fullScreenScratch":{"default":false,"name":"fullScreenScratch","description":"","type":"boolean"},"previewPlatform":{"default":"Android","name":"previewPlatform","description":"for previewing native device buttons\/fonts","type":"string","persistent":true},"logoFullscreen_portrait_size":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logoFullscreen_portrait_size","description":"","type":"number"},"promo_video_safeZoneWidth":{"default":0.75,"options":[{"min":0.2,"max":1,"interval":0.01}],"name":"promo_video_safeZoneWidth","description":"","type":"number"},"pointerCustomPosition":{"default":true,"name":"pointerCustomPosition","description":"","type":"boolean"},"logoFullscreen_portrait_yPosition":{"default":0.1,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logoFullscreen_portrait_yPosition","description":"","type":"number"},"logoClickable":{"default":false,"name":"logoClickable","description":"","type":"boolean"},"testMode":{"default":false,"type":"boolean"},"promo_custom_popup_landscape_yPercentage":{"default":0.5,"wasSet":false,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_popup_landscape_yPercentage","description":"","type":"number","value":0.5},"promo_winOnly":{"default":true,"name":"promo_winOnly","description":"","type":"boolean"},"promo_tween_container_idle":{"default":"None","options":["None","Pulse","Wiggle","Bounce","Hover","Periodic Wiggle","Periodic Bounce","Periodic Shake"],"name":"promo_tween_container_idle","description":"","type":"string"},"promo_custom_smallImage_enabled":{"default":true,"name":"promo_custom_smallImage_enabled","description":"","type":"boolean"},"IdleTimer_landscape_size":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"IdleTimer_landscape_size","description":"","type":"number"},"revealHeight":{"default":0.82,"options":[{"min":0.1,"max":1,"interval":0.01}],"name":"revealHeight","description":"","type":"number"},"blurAmount":{"default":0,"options":[{"min":0,"max":100,"interval":1}],"type":"number"},"IdleTimer_landscape_xPosition":{"default":0.03,"options":[{"min":0,"max":1,"interval":0.01}],"name":"IdleTimer_landscape_xPosition","description":"","type":"number"},"promo_custom_bodyText_portrait_wrapWidth":{"default":0.8,"options":[{"min":0.25,"max":1,"interval":0.01}],"name":"promo_custom_bodyText_portrait_wrapWidth","description":"","type":"number"},"promo_previewBgFocus":{"default":false,"wasSet":false,"name":"promo_previewBgFocus","description":"","type":"boolean","value":false},"VideoPlayer_safeZoneX":{"default":0.5,"options":[{"min":0.1,"max":0.9,"interval":0.01}],"name":"VideoPlayer_safeZoneX","description":"","type":"number"},"VideoPlayer_safeZoneY":{"default":0.5,"options":[{"min":0.1,"max":0.9,"interval":0.01}],"name":"VideoPlayer_safeZoneY","description":"","type":"number"},"promo_custom_largeImage_enabled":{"default":false,"name":"promo_custom_largeImage_enabled","description":"","type":"boolean"},"IdleTimer_isVisible":{"default":false,"name":"IdleTimer_isVisible","description":"","type":"boolean"},"promo_custom_largeImage_portrait_size":{"default":0.4,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_largeImage_portrait_size","description":"","type":"number"},"promo_custom_smallImage_borderWidth":{"default":0,"options":[{"min":0,"max":30,"interval":0.1}],"name":"promo_custom_smallImage_borderWidth","description":"","type":"number"},"scratchLineWidth":{"default":98,"options":[{"min":40,"max":160,"interval":1}],"name":"scratchLineWidth","description":"","type":"number"},"promo_buttons":{"default":1,"options":[0,1,2],"name":"promo_buttons","description":"","type":"number"},"promo_video_orientationLock":{"default":false,"name":"promo_video_orientationLock","description":"","type":"boolean"},"scratchParticleScale":{"default":1,"options":[{"min":0.5,"max":1.5,"interval":0.01}],"name":"scratchParticleScale","description":"","type":"number"},"fillToEdge":{"default":false,"type":"boolean"},"promo_custom_fullscreen_editMode":{"default":false,"wasSet":false,"name":"promo_custom_fullscreen_editMode","description":"","type":"boolean","value":false},"promo_video_location":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.001}],"name":"promo_video_location","description":"","type":"number"},"promo_background_aspectHandling":{"default":"crop","options":["letterbox","crop"],"name":"promo_background_aspectHandling","description":"","type":"string"},"promo_custom_buttonA_nativeTheme":{"default":"light","options":["color","light"],"name":"promo_custom_buttonA_nativeTheme","description":"","type":"string"},"promo_custom_buttonB_nativeTheme":{"default":"light","options":["color","light"],"name":"promo_custom_buttonB_nativeTheme","description":"","type":"string"},"logo_landscape_size":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logo_landscape_size","description":"","type":"number"},"promo_style":{"default":"promoPopupIconSingle","wasSet":false,"name":"promo_style","description":"","type":"string","value":"promoPopupIconSingle"},"promo_custom_smallImage_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_smallImage_portrait_xPosition","description":"","type":"number"},"promo_video_previewVideoCropping":{"default":false,"wasSet":false,"name":"promo_video_previewVideoCropping","description":"","type":"boolean","value":false},"revealWidth":{"default":1,"options":[{"min":0.1,"max":1,"interval":0.01}],"name":"revealWidth","description":"","type":"number"},"promo_background_landscape_xPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_landscape_xPosition","description":"","type":"number"},"activeVariant":{"default":"A","name":"activeVariant","description":"active MV variant","type":"string","persistent":true},"promo_buttonActionA":{"default":"action","options":["action","replay"],"name":"promo_buttonActionA","description":"","type":"string"},"promo_buttonActionB":{"default":"replay","options":["action","replay"],"name":"promo_buttonActionB","description":"","type":"string"},"promo_custom_buttonB_portrait_yPosition":{"default":0.88,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonB_portrait_yPosition","description":"","type":"number"},"promo_custom_largeImage_portrait_yPosition":{"default":0,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_largeImage_portrait_yPosition","description":"","type":"number"},"promo_art":{"default":false,"wasSet":false,"name":"promo_art","description":"","type":"boolean","value":false},"promo_background_landscape_aspectHandling":{"default":"crop","options":["letterbox","crop"],"name":"promo_background_landscape_aspectHandling","description":"","type":"string"},"promo_custom_buttonB_landscape_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonB_landscape_xPosition","description":"","type":"number"},"promo_video_mutePositioning":{"default":false,"wasSet":false,"name":"promo_video_mutePositioning","description":"","type":"boolean","value":false},"promo_custom_titleText_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_titleText_portrait_xPosition","description":"","type":"number"},"promo_video_audioDuringLoop":{"default":true,"wasSet":false,"name":"promo_video_audioDuringLoop","description":"","type":"boolean","value":true},"promo_custom_smallImage_portrait_yPosition":{"default":0.02,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_smallImage_portrait_yPosition","description":"","type":"number"},"promo_video_videoUpload":{"default":false,"wasSet":false,"name":"promo_video_videoUpload","description":"","type":"boolean","value":false},"promo_muteThickness":{"default":0.5,"options":[{"min":0.1,"max":1,"interval":0.1}],"name":"promo_muteThickness","description":"","type":"number"},"promo_video_volume":{"default":1,"wasSet":false,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_video_volume","description":"","type":"number","value":1},"promo_custom_popup_landscape_size":{"default":0.8,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_popup_landscape_size","description":"","type":"number"},"VideoPlayer_blurAmount":{"default":100,"options":[{"min":60,"max":140,"interval":1}],"name":"VideoPlayer_blurAmount","description":"","type":"number"},"promo_custom_bodyText_landscape_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_bodyText_landscape_xPosition","description":"","type":"number"},"logo_portrait_yPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logo_portrait_yPosition","description":"","type":"number"},"VideoPlayer_safeZoneWidth":{"default":0.75,"options":[{"min":0.2,"max":1,"interval":0.01}],"name":"VideoPlayer_safeZoneWidth","description":"","type":"number"},"promo_dualVideo":{"default":false,"name":"promo_dualVideo","description":"","type":"boolean"},"promo_video_useSafeZone":{"default":true,"wasSet":false,"name":"promo_video_useSafeZone","description":"","type":"boolean","value":true},"promo_reason":{"default":"","wasSet":false,"name":"promo_reason","description":"","type":"string","value":""},"popup_characterIconScale":{"default":0.9,"options":[{"min":0.5,"max":1,"interval":0.001}],"name":"popup_characterIconScale","description":"","type":"number"},"legalTextStyle":{"default":"none","options":["none","simple","promo","isiPanel"],"name":"legalTextStyle","description":"","type":"string"},"promo_custom_showPopupImage":{"default":true,"name":"promo_custom_showPopupImage","description":"","type":"boolean"},"promo_custom_buttonA_portrait_yPosition":{"default":0.73,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_buttonA_portrait_yPosition","description":"","type":"number"},"promo_custom_titleText_landscape_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_titleText_landscape_xPosition","description":"","type":"number"},"revealY":{"default":0,"options":[{"min":-0.5,"max":0.5,"interval":0.01}],"name":"revealY","description":"","type":"number"},"revealX":{"default":0,"options":[{"min":-0.5,"max":0.5,"interval":0.01}],"name":"revealX","description":"","type":"number"},"promo_muteColor":{"default":"#ffffff","name":"promo_muteColor","description":"","type":"string"},"VideoPlayer_muteThickness":{"default":0.5,"options":[{"min":0.1,"max":1,"interval":0.1}],"name":"VideoPlayer_muteThickness","description":"","type":"number"},"promo_custom_fullscreen_portrait_height":{"default":1.8,"options":[{"min":1,"max":2,"interval":0.1}],"name":"promo_custom_fullscreen_portrait_height","description":"","type":"number"},"promo_icon":{"default":true,"wasSet":false,"name":"promo_icon","description":"","type":"boolean","value":true},"logoFullscreen_portrait_xPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logoFullscreen_portrait_xPosition","description":"","type":"number"},"promo_video_zoomedPreview":{"default":false,"name":"promo_video_zoomedPreview","description":"","type":"boolean"},"promo_video_muteY":{"default":0.75,"wasSet":false,"options":[{"min":0.5,"max":2.25,"interval":0.01}],"name":"promo_video_muteY","description":"","type":"number","value":0.75},"VideoPlayer_muteX":{"default":0.75,"options":[{"min":0.5,"max":2.25,"interval":0.01}],"name":"VideoPlayer_muteX","description":"","type":"number"},"VideoPlayer_muteY":{"default":0.75,"options":[{"min":0.5,"max":2.25,"interval":0.01}],"name":"VideoPlayer_muteY","description":"","type":"number"},"endingAnimationType":{"default":"confetti","options":["spill","fireworks","fountain","confetti"],"name":"endingAnimationType","description":"","type":"string"},"promo_custom_useDifferentLayouts":{"default":false,"name":"promo_custom_useDifferentLayouts","description":"","type":"boolean"},"promo_video_muteX":{"default":0.75,"wasSet":false,"options":[{"min":0.5,"max":2.25,"interval":0.01}],"name":"promo_video_muteX","description":"","type":"number","value":0.75},"logo_landscape_yPosition":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logo_landscape_yPosition","description":"","type":"number"},"promo_custom_popup_portrait_size":{"default":0.8,"options":[{"min":0,"max":1,"interval":0.01}],"name":"promo_custom_popup_portrait_size","description":"","type":"number"},"promo_bg":{"default":"full","options":["popup","full","twoBox","none"],"name":"promo_bg","description":"","type":"string"},"logoFullscreen_landscape_yPosition":{"options":[{"min":0,"max":1,"interval":0.01}],"name":"logoFullscreen_landscape_yPosition","description":"","type":"number"},"promo_custom_fullscreen_both_ratio":{"default":0.2,"options":[{"min":-1,"max":1,"interval":0.1}],"name":"promo_custom_fullscreen_both_ratio","description":"","type":"number"},"VideoPlayer_orientationLock":{"default":false,"name":"VideoPlayer_orientationLock","description":"","type":"boolean"},"fadeOutTime":{"default":0.6,"options":[{"min":0,"max":1,"interval":0.1}],"name":"fadeOutTime","description":"","type":"number"},"VideoPlayer_muteStyle":{"default":"none","options":["none","filled","circle","circleFilled"],"name":"VideoPlayer_muteStyle","description":"","type":"string"},"promo_background_portrait_xPosition":{"default":0.5,"options":[{"min":0.15,"max":0.85,"interval":0.01}],"name":"promo_background_portrait_xPosition","description":"","type":"number"},"promo_custom_style":{"default":"fullscreen","options":["popup","fullscreen","video"],"name":"promo_custom_style","description":"","type":"string"},"logoFullscreen_landscape_size":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logoFullscreen_landscape_size","description":"","type":"number"},"promo_tween_container_entrance":{"default":"Fade in","options":["None","Fade in","Slide in","Bounce in","Fall in","Elastic pop","Pop in","Spin in"],"name":"promo_tween_container_entrance","description":"","type":"string"},"scratchLineType":{"default":"image","options":["line","image"],"name":"scratchLineType","description":"","type":"string"},"useLegalText":{"default":true,"type":"boolean"},"promo_video_letterboxStyle":{"default":"blurred","options":["solid","blurred"],"name":"promo_video_letterboxStyle","description":"","type":"string"},"VideoPlayer_noCropping":{"default":true,"name":"VideoPlayer_noCropping","description":"","type":"boolean"},"promo_video_loop":{"default":false,"name":"promo_video_loop","description":"","type":"boolean"},"logo_portrait_size":{"default":0.5,"options":[{"min":0,"max":1,"interval":0.01}],"name":"logo_portrait_size","description":"","type":"number"},"promo_previewEntry":{"default":false,"wasSet":false,"name":"promo_previewEntry","description":"","type":"boolean","value":false}},"TEXT_DEFS":{"txt_font_primary":{"fontFamily":"Native System Font"},"txt_promo_bodyB":{"textDef":"txt_promo_body","text":"Lorem ipsum dolor sit amet, consectetur."},"txt_promo_headerB":{"textDef":"txt_promo_header","text":"Nice Try!"},"txt_promo_bodyA":{"textDef":"txt_promo_body","text":""},"tutorialText":{"textDef":"popup_txt","text":"Scratch to Reveal!"},"txt_promo_headerA":{"textDef":"txt_promo_header","text":"Nice Job!"},"txt_promo_header":{"strokeWidth":0,"hAlign":"center","textDef":"txt_font_primary","fontSize":80,"strokeColor":"#000000","textColor":"#ffffff","lineSpacing":0.2,"fontWeight":"bold"},"popup_font":{"fontFamily":"Spartan"},"IdleTimer_font":{"strokeWidth":0,"fontFamily":"Spartan","fontSize":24,"strokeColor":"#737373","textColor":"#000000","fontWeight":"bold"},"tge_isi_header":{"fontSize":11,"text":"IMPORTANT SAFETY INFORMATION","textColor":"#000000","fontWeight":"bold"},"popup_txt":{"strokeWidth":0,"textDef":"popup_font","fontSize":54,"strokeColor":"#000000","textColor":"#ffffff","fontWeight":"normal"},"tge_legal_footer":{"strokeWidth":0,"fontSize":9,"text":"Lorem ipsum dolor sit amet, consectetur adipisicing elit.","strokeColor":"#000","textColor":"#ffffff"},"txt_font_secondary":{"fontFamily":"Native System Font"},"tge_isi_text":{"text":"<h3>Lorem Ipsum?<\/h3>Lorem ipsum dolor sit amet, <strong>consectetur<\/strong> adipisicing <em>elit<\/em>."},"txt_promo_body":{"strokeWidth":0,"hAlign":"center","textDef":"txt_font_secondary","x":0,"fontSize":40,"strokeColor":"#000000","textColor":"#ffffff","lineSpacing":0.2},"txt_promo_buttonA":{"strokeWidth":0,"textDef":"txt_font_primary","fontSize":76,"text":"","strokeColor":"#000000","textColor":"#ffffff","fontWeight":"bold"},"txt_promo_buttonB":{"strokeWidth":0,"textDef":"txt_font_primary","fontSize":76,"text":"REPLAY","strokeColor":"#000000","textColor":"#ffffff","fontWeight":"bold"}},"LOG_LEVEL":3,"GoogleAnalytics":{"LABEL":"Crafty Candy","ENABLED":false,"PROD_ID":"UA-73000303-8","ENHANCED":true,"QA_ID":""},"CSS":[],"GAME_ID":"scratchoffbuilder","MixPanel":{"ENABLED":true,"TOKEN":""},"DEBUG":false,"UNVERSIONED_LOAD":true,"APPCACHE":{"ENABLED":false},"Quantcast":{"ENABLED":false},"IMAGE_COMPRESSION":{"assets\/images\/promoCustom.png":{"type":"tinypng"}},"PROD_ENV":true,"TGE":{"FONT_LOADER":false,"VERSION":"1.2","ENABLED":true},"ELX_DEFS":{"promo_custom_smallImage":{"cropWidth":309,"cropHeight":320},"promo_custom_buttonA":{"cropWidth":600,"cropHeight":146},"gameLogo":{"cropWidth":274,"cropHeight":300}},"BUILDER":"2.0.34","CB_INITIALIZED":true,"ORIENTATION":"unspecified","EXCLUDE":["assets\/source-images\/\/**","js\/lib-debug\/\/**"],"VERSION":"8.55.1","SOURCE":["js\/game\/tps\/gamescreen0.js","js\/game\/tps\/engagement.js","js\/modules\/ELXDisplay\/ELXDisplay.js","js\/modules\/PropertyCombine\/PropertyCombine.js","js\/modules\/BuilderGame\/BuilderGame.js","js\/modules\/Analytics\/Analytics.js","js\/modules\/ParticleEffects\/ParticleEffects.js","js\/modules\/Pointer\/Pointer.js","js\/modules\/Popup\/Popup.js","js\/modules\/DebugWidget\/DebugWidget.js","js\/modules\/Math\/Math.js","js\/modules\/VideoPlayer\/VideoPlayer.js","js\/modules\/LayoutHelpers\/LayoutHelpers.js","js\/modules\/Crosshair\/Crosshair.js","js\/modules\/Timer\/Timer.js","js\/modules\/IdleTimer\/IdleTimer.js","js\/game\/elx\/ELX_gameScreen.js","js\/game\/scratchOffGame\/ScratchOffGame.js","js\/game\/scratchOffGame\/ScratchOffSprite.js","js\/game\/scratchOffGame\/RevealedImage.js","js\/game\/scratchOffGame\/RevealArea.js","js\/game\/GameConstructor.js","js\/game\/GameScreen.js","js\/game\/ui\/Tutorial.js"],"TGL":{"VERSION":"1.0"},"CPE":{},"TITLE":"Scratch Off","CONSTRUCTOR":"GameConstructor","MODULE_SOURCE":{"VideoPlayer":["src\/VideoPlayer.js","src\/MuteButton.js","src\/BuilderConfig.js"],"BuilderGame":["src\/BuilderGame.js","src\/CroppedSprite.js"]},"CPI":{}};</script>	<script type="text/javascript">	function extend(t,e){var i=t.prototype,s=function(){};for(var n in s.prototype=e.prototype,t.prototype=new s,(t.prototype.constructor=t).superclass=e.prototype,e.prototype.constructor===Object.prototype.constructor&&(e.prototype.constructor=e),i)i.hasOwnProperty(n)&&(t.prototype[n]=i[n])}Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),i=this,s=function(){},n=function(){return i.apply(this instanceof s&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return s.prototype=this.prototype,n.prototype=new s,n}),function(){for(var a=0,t=["ms","moz","webkit","o"],e=0;e<t.length&&!window.requestAnimationFrame;++e)window.requestAnimationFrame=window[t[e]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[e]+"CancelAnimationFrame"]||window[t[e]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t,e){var i=(new Date).getTime(),s=Math.max(0,16-(i-a)),n=window.setTimeout(function(){t(i+s)},s);return a=i+s,n}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}();var TGE=TGE||{};if(TGE.Debug=TGE.Debug||{},TGE.Debug.LOG_NONE=0,TGE.Debug.LOG_ERROR=1,TGE.Debug.LOG_WARNING=2,TGE.Debug.LOG_INFO=3,TGE.Debug.LOG_VERBOSE=4,"undefined"!=typeof GameConfig&&"number"==typeof GameConfig.LOG_LEVEL){var debugMode=getQueryString().tgedebug;TGE.Debug.LogLevel="3"<=debugMode?4:GameConfig.LOG_LEVEL}else TGE.Debug.LogLevel=TGE.Debug.LOG_INFO;function getQueryString(){if(window.TreSensa)return TreSensa.Playable.getParameters();if(window.GameConfig&&GameConfig.DIRECT_AD)return GameConfig.DIRECT_AD;for(var t,e={},i=location.search.substring(1),s=/([^&=]+)=([^&]*)/g;t=s.exec(i);)e[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);return e}function getDistributionPartner(){var t=getQueryString().dst;return"string"==typeof t?t:null}function loadScript(t,e){var i=document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript",s.src=t,s.onreadystatechange=e,s.onload=e,i.appendChild(s)}function trimmedFilename(t){var e=t.lastIndexOf("/")+1;return t.substr(e,t.lastIndexOf(".")-e)}TGE.Debug.Log=function(t){if(window.console&&t<=TGE.Debug.LogLevel){var e="TGE: ",i="log";t===TGE.Debug.LOG_ERROR?(e+="**ERROR** ",i="error"):t===TGE.Debug.LOG_WARNING&&(e+="**WARNING** ",i="warn"),window.console[i](e+Array.prototype.slice.call(arguments,1))}},TGE.InCreativeBuilder=function(){return void 0!==window._selfServe&&!window.__gameOnly},TGE.PreferredLanguage=function(){var t,e=navigator.language||navigator.userLanguage||"en",i=((TGE.RemoteSettings.WasSet("lang")?TGE.RemoteSettings("lang"):null)||e).toLowerCase();TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"language first pick is: "+i);var s=i.split("-")[0],n=TGE.RemoteSettings.GetSettings().lang.options||[];return t=(t=-1!==n.indexOf(i)?i:-1!==n.indexOf(s)?s:TGE.RemoteSettings("lang")).toLowerCase(),TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"language best fit is: "+t),t},TGE.BrowserDetect={DEVICES:{IPAD:"iPad",IPHONE_4:"iPhone 4",IPHONE_5:"iPhone 5",IPHONE_6:"iPhone 6",IPHONE_6_PLUS:"iPhone 6+"},init:function(){this.browser=this.searchString(this.dataBrowser)||"an unknown browser",this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version",this.platform=this.searchString(this.dataPlatform)||"an unknown OS or Device",this.OSversion=this.detectOSversion(this.platform),this.onFirefoxMobile=/Firefox/i.test(navigator.userAgent)&&(/Android/i.test(navigator.userAgent)||/Mobile/i.test(navigator.userAgent)),this.oniOS="iPhone"===this.platform||"iPad"===this.platform,this.iOSDevice=this.detectiOSDevice(screen.height),this.onAndroid="Android"===this.platform,this.onWindowsMobile="Windows Phone"===this.platform||"Windows Tablet"===this.platform,this.isMobileDevice=!("Windows"===this.platform||"Mac"===this.platform||"Linux"===this.platform),this.clickEvent=!this.isMobileDevice||this.onWindowsMobile?"click":"touchstart",this.oniOS&&"10_"==this.OSversion&&(this.OSversion="8_")},detectiOSDevice:function(t){if(!this.oniOS)return!1;switch(t){case 1024:return this.DEVICES.IPAD;case 480:return this.DEVICES.IPHONE_4;case 568:return this.DEVICES.IPHONE_5;case 667:return this.DEVICES.IPHONE_6;case 736:return this.DEVICES.IPHONE_6_PLUS}},detectOSversion:function(t){var e="-1",i="",s=navigator.userAgent.toString();switch(t){case"Windows Phone":i=/Windows Phone OS\s+[\d\.]+/,e=String(s.match(i)).substring(17,20);break;case"iPhone":case"iPad":i=/OS\s+[\d\_]+/,e=String(s.match(i)).substring(3).match(/[^_]*/i)[0];break;case"Windows":i=/Windows NT\s+[\d\.]+/;var n=String(s.match(i)).substring(11,14);"6.1"==n?e="7":"5.1"==n?e="XP":"5.2"==n?e="XP":"6.0"==n?e="Vista":"5.01"==n?e="2000 SP1":"5.0"==n&&(e="2000");break;case"Mac":i=/Mac OS X\s+[\d\_]+/,e=String(s.match(i)).substring(9,13);break;case"Android":i=/ndroid\s+[\d\.]+/,e=String(s.match(i)).substring(7,10)}return e},searchString:function(t){for(var e=0;e<t.length;e++)if(null!=t[e]){var i=t[e].string,s=t[e].prop;if(this.versionSearchString=t[e].versionSearch||t[e].identity,i){if(-1!==i.indexOf(t[e].subString))return"Mozilla"===t[e].identity&&navigator.userAgent.match(/Trident\/7\./)?"Explorer":t[e].identity}else if(s)return t[e].identity}},searchVersion:function(t){var e=t.indexOf(this.versionSearchString);if(-1!==e)return parseFloat(t.substring(e+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Explorer",identity:"Explorer",versionSearch:"Explorer"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{prop:window.opera,identity:"Opera"},{string:navigator.userAgent,subString:"Silk",identity:"Silk",versionSearch:"Silk"},{string:navigator.userAgent,subString:"Kindle Fire",identity:"Amazon Web App",versionSearch:"AppleWebKit"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.vendor,subString:"BlackBerry",identity:"BlackBerry"}],dataPlatform:[{string:navigator.userAgent,subString:"Windows Phone",identity:"Windows Phone"},{string:navigator.userAgent,subString:"Tablet PC",identity:"Windows Tablet"},{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"Silk",identity:"Kindle Fire"},{string:navigator.userAgent,subString:"Kindle Fire",identity:"Kindle Fire"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"webOS",identity:"webOS"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]},TGE.BrowserDetect.init();var _vp=document.querySelector("meta[name=viewport]");_vp&&_vp.setAttribute("content"," initial-scale=1, maximum-scale=1, user-scalable=no, minimal-ui"),TGE.Loader=function(r){r=r||{},this.assetManager=TGE.AssetManager.sAssetManagerInstance,null==r.statusInterval&&(r.statusInterval=5e3),null==r.loggingDelay&&(r.loggingDelay=2e4),null==r.noProgressTimeout&&(r.noProgressTimeout=1/0);var o,h=[],l=[],d=+new Date,u=0,m=1,c=2,g=3,f=4;this.add=function(t){h.push({resource:t,state:u})},this.addProgressListener=function(t){l.push({callback:t})},this.addCompletionListener=function(e){l.push({callback:function(t){t.completedCount===t.totalCount&&e()}})},this.start=function(){o=+new Date;for(var t=0,e=h.length;t<e;t++){var i=h[t];i.status=m,i.resource.start(this)}setTimeout(_,100)};var _=function(){for(var t=!1,e=+new Date-d,i=e>=r.noProgressTimeout,s=e>=r.loggingDelay,n=0,a=h.length;n<a;n++){var o=h[n];o.status===m&&(o.resource.checkStatus(),o.status===m&&(i?o.resource.onTimeout():t=!0))}s&&t&&T(),t&&setTimeout(_,r.statusInterval)};this.isBusy=function(){for(var t=0,e=h.length;t<e;t++)if(h[t].status===u||h[t].status===m)return!0;return!1};var i=function(t,e){for(var i=null,s=0,n=h.length;s<n;s++)if(h[s].resource===t){i=h[s];break}if(null!=i&&i.status===m){i.status=e,d=+new Date;s=0;for(var a=l.length;s<a;s++){var o=l[s];p(i,o)}}};this.onLoad=function(t){if(t.url&&(this.assetManager._recordAsset(t.url),!TGE.InCreativeBuilder()&&this.assetManager.allLoaded)){if(GameConfig.PACKAGE_ASSETS)for(var e=0;e<GameConfig.PACKAGE_ASSETS.length;e++)if(t.url===this.assetManager._mRootLocation+GameConfig.PACKAGE_ASSETS[e])return;TGE.Debug.Log(TGE.Debug.LOG_WARNING,"asset "+t.url+" will not be included in packaged builds unless included in GameConfig.PACKAGE_ASSETS")}i(t,c)},this.onError=function(t){i(t,g)},this.onTimeout=function(t){i(t,f)};var p=function(t,e){for(var i=0,s=0,n=0,a=h.length;n<a;n++){var o=h[n];s++,o.status!==c&&o.status!==g&&o.status!==f||i++}e.callback({resource:t.resource,loaded:t.status===c,error:t.status===g,timeout:t.status===f,completedCount:i,totalCount:s})},T=this.log=function(t){if(window.console){var e=Math.round((+new Date-o)/1e3);window.console.log("TGE.Loader elapsed: "+e+" sec");for(var i=0,s=h.length;i<s;i++){var n=h[i];if(t||n.status===m){var a="TGE.Loader: #"+i+" "+n.resource.getName();switch(n.status){case u:a+=" (Not Started)";break;case m:a+=" (Waiting)";break;case c:a+=" (Loaded)";break;case g:a+=" (Error)";break;case f:a+=" (Timeout)"}n.resource.log&&(a+=" "+n.resource.log()),window.console.log(a)}}}}},Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),TGE.ElementLoader=function(s,n,t){var a,o=this,r=null,e=t&&t.attributes,i=t&&t.listeners,h=e&&e.preload||"auto",l=(this.url=s).split("/"),d=l[l.length-1],u=document.getElementById(d);if(this.el=u||document.createElement(n),this.bind=function(t,e){o.el.addEventListener?o.el.addEventListener(t,e,!1):o.el.attachEvent&&o.el.attachEvent("on"+t,e)},this.unbind=function(t,e){o.el.removeEventListener?o.el.removeEventListener(t,e,!1):o.el.detachEvent&&o.el.detachEvent("on"+t,e)},"video"===n){a="none"===h||"metadata"===h?"loadstart":"auto"===h?"canplaythrough":h,e&&"false"===e.playsinline||(this.el.setAttribute("webkit-playsinline",""),this.el.setAttribute("playsinline",""));var m=TGE.VideoPlayer.Wrappers[t.id]=new TGE.VideoWrapper(this.el,t&&t.muted);if(m.assetId=t.id,e)for(var c in e){var g=e[c];"preload"===c&&"none"!==g&&"metadata"!==g&&(g="auto"),this.el.setAttribute(c,g)}if(i)for(var f in i)this.bind(f,i[f])}else this.img=this.el,a="load";var _=function(){"complete"==o.el.readyState&&(G(),r.onLoad(o))},p=function(){TGE.Game.GetInstance()._mFullStage.addEventListener("mouseup",T)},T=function(){TGE.Game.GetInstance()._mFullStage.removeEventListener("mouseup",T);var t=o.el;if(!m._videoPlayer){t.muted=!0;var e=t.play();e?e.then(function(){t.pause()}).catch(function(t){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"video preload failed: "+t),E()}):t.pause()}},E=function(){G(),r.onLoad(o)},v=function(){G(),r.onError(o)},G=function(){o.unbind(a,E),o.unbind("error",v),"img"===n?o.unbind("readystatechange",_):TGE.BrowserDetect.isMobileDevice&&"auto"===h&&o.unbind("loadstart",p)},y=function(){return"video"===n?1<=o.el.readyState:o.el.complete};this.start=function(t){r=t,o.bind(a,E),o.bind("error",v),"img"===n?o.bind("readystatechange",_):TGE.BrowserDetect.isMobileDevice&&"auto"===h&&o.bind("loadstart",p),getQueryString().draft&&(o.el.crossOrigin="anonymous");var e=s.split("/"),i=e[e.length-1];if(o.el.width)E();else if(window._TREIMAGES&&_TREIMAGES[i])o.el.src=_TREIMAGES[i];else{if(window.TreSensa&&window.TreSensa.Playable.inlinedAssets&&"false"!==getQueryString().inlinedAssets)return void v();o.el.src=TGE.AssetManager._sFullPathTransformation(s)}},this.checkStatus=function(){y()&&(G(),r.onLoad(o))},this.log=function(){return"readyState: "+this.el.readyState},this.onTimeout=function(){G(),y()?r.onLoad(o):r.onTimeout(o)},this.getName=function(){return s}},TGE.Loader.prototype.addImage=function(t){var e=new TGE.ElementLoader(t,"img");return this.add(e),e.el},TGE.Loader.prototype.addVideo=function(t,e){var i=new TGE.ElementLoader(t,"video",e);return this.add(i),i.el},TGE.MapValue=function(t,e,i,s,n,a){var o=(t-e)/(i-e)*(n-s)+s;return a&&(o=s<n?Math.min(Math.max(o,s),n):Math.min(Math.max(o,n),s)),o},TGE.GetClass=function(t){if("string"!=typeof t)return null;for(var e=window,i=t.split("."),s=0,n=i.length;s<n;s++)if(!(e=e[i[s]]))return null;return e},TGE.DeepClone=function(t,e){if(e||(e=t),t&&"object"==typeof t){if(Array.isArray(t)){for(var i=[],s=0;s<t.length;++s)i.push(TGE.DeepClone(t[s],e[s]));return i}var n={},a=Object.keys(e);for(s=0;s<a.length;++s){var o=a[s];n[o]=TGE.DeepClone(t[o],e[o]),"number"!=typeof e[o]||null!=n[o]&&!isNaN(n[o])||(n[o]=t[o])}return n}return t},TGE.DeepCopy=function(t,e,i){for(var s in i||(i=t),i)i.hasOwnProperty(s)&&(e[s]=TGE.DeepClone(t[s]))},TGE.getClass=function(t){return TGE.GetClass(t)},TGE.mapValue=function(t,e,i,s,n,a){return TGE.MapValue(t,e,i,s,n,a)},TGE.clamp=function(t,e,i){return TGE.Math.Clamp(t,e,i)},TGE.Vector2=function(t,e){return this.x=t||0,this.y=e||0,this},TGE.Vector2.Lerp=function(t,e,i){return i<=0?new TGE.Vector2(t.x,t.y):1<=i?new TGE.Vector2(e.x,e.y):new TGE.Vector2(t.x+i*(e.x-t.x),t.y+i*(e.y-t.y))},TGE.Vector2.Distance=function(t,e){return Math.abs(t.subtract(e).magnitude())},TGE.Vector2.SqrDistance=function(t,e){return Math.abs(t.subtract(e).sqrMagnitude())},TGE.Vector2.Dot=function(t,e){return t.dotProduct(e)},TGE.Vector2.Cross=function(t,e){return t.crossProduct(e)},TGE.Vector2.prototype={toString:function(){return"("+this.x+","+this.y+")"},clone:function(t){return this.multiplyNumber(1)},setTo:function(t,e){this.x=t,this.y=e},copyFrom:function(t){return this.x=t.x,this.y=t.y,this},add:function(t){return new this.constructor(this.x+t.x,this.y+t.y)},subtract:function(t){return new this.constructor(this.x-t.x,this.y-t.y)},multiplyNumber:function(t){return"number"!=typeof t&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Only a number type is accepted as a scalar when multiplying a vector."),new this.constructor(this.x*t,this.y*t)},divideNumber:function(t){return"number"!=typeof t&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Only a number type is accepted as a scalar when dividing a vector."),new this.constructor(this.x/t,this.y/t)},offset:function(t,e){return this.x+=t,this.y+=e,this},rotate:function(t){var e=t*TGE.DEG2RAD;return new this.constructor(this.x*Math.cos(e)-this.y*Math.sin(e),this.y*Math.cos(e)+this.x*Math.sin(e))},rotateThis:function(t){var e=t*TGE.DEG2RAD,i=this.x*Math.cos(e)-this.y*Math.sin(e),s=this.y*Math.cos(e)+this.x*Math.sin(e);return this.setTo(i,s),this},magnitude:function(){return Math.sqrt(this.sqrMagnitude())},sqrMagnitude:function(){return this.x*this.x+this.y*this.y},dotProduct:function(t){return this.x*t.x+this.y*t.y},crossProduct:function(t){return this.x*t.y-this.y*t.x},angleBetween:function(t){var e=this.magnitude()*t.magnitude();return 0===e?0:Math.acos(this.dotProduct(t)/e)*TGE.RAD2DEG},normalized:function(){var t=this.magnitude();return 0!==t?this.divideNumber(t):new this.constructor(0,0)}},TGE.Point=function(t,e){TGE.Point.superclass.constructor.call(this,t,e)},extend(TGE.Point,TGE.Vector2),TGE.Vector2D=function(t,e){TGE.Vector2D.superclass.constructor.call(this,t,e)},extend(TGE.Vector2D,TGE.Vector2),TGE.Matrix=function(t,e,i,s,n,a){t=void 0!==t?t:1,s=void 0!==s?s:1,this._internal=[t,i||0,n||0,e||0,s,a||0]},TGE.Matrix.RotationMatrix=function(t){var e=new TGE.Matrix;return e._internal[0]=Math.cos(t),e._internal[1]=-Math.sin(t),e._internal[3]=Math.sin(t),e._internal[4]=Math.cos(t),e},TGE.Matrix.ScaleMatrix=function(t,e){return(new TGE.Matrix).scale(t,e)},TGE.Matrix.TranslationMatrix=function(t,e){return(new TGE.Matrix).translate(t,e)},TGE.Matrix.prototype={_internal:null,toString:function(){var t=this._internal;return"TGE.Matrix["+t[0]+","+t[1]+","+t[2]+","+t[3]+","+t[4]+","+t[5]+"]"},identity:function(){var t=this._internal;return t[1]=t[2]=t[3]=t[5]=0,t[0]=t[4]=1,this},copyFrom:function(t){var e=this._internal,i=t._internal;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],this},concat:function(t){var e=this._internal,i=t._internal,s=e[0],n=e[1],a=e[2],o=e[3],r=e[4],h=e[5],l=i[0],d=i[1],u=i[2],m=i[3],c=i[4],g=i[5];return e[0]=s*l+n*m,e[1]=s*d+n*c,e[2]=s*u+n*g+a,e[3]=o*l+r*m,e[4]=o*d+r*c,e[5]=o*u+r*g+h,this},rotate:function(t){return this.concat(TGE.Matrix.RotationMatrix(t*TGE.DEG2RAD))},scale:function(t,e){var i=this._internal;return i[0]*=t,i[1]*=e,i[3]*=t,i[4]*=e,this},translate:function(t,e){return this._internal[2]+=t,this._internal[5]+=e,this},transformPoint:function(t){var e=this._internal,i=t.x,s=t.y;return t.x=i*e[0]+s*e[1]+e[2],t.y=i*e[3]+s*e[4]+e[5],t},inverseTransformPoint:function(t){var e=this._internal,i=1/(e[0]*e[4]-e[3]*e[1]),s=t.x,n=t.y;return t.x=e[4]*i*s+-e[1]*i*n+(e[5]*e[1]-e[2]*e[4])*i,t.y=e[0]*i*n+-e[3]*i*s+(-e[5]*e[0]+e[2]*e[3])*i,t}},TGE.Rectangle=function(t,e,i,s){this.x=t||0,this.y=e||0,this.width=i||0,this.height=s||0},TGE.Rectangle.prototype={toString:function(){return"TGE.Rectangle["+this.x+","+this.y+","+this.width+","+this.height+"]"},intersects:function(t,e,i){e=void 0===e?1:e,i=void 0===i?1:i;var s=this.width*(1-e)/2,n=this.height*(1-e)/2,a=this.x+s,o=this.y+n,r=this.x+this.width-s,h=this.y+this.height-n;s=t.width*(1-i)/2,n=t.height*(1-i)/2;var l=t.x+s,d=t.y+n,u=t.x+t.width-s,m=t.y+t.height-n;return a<=l&&u<=r&&o<=d&&m<=h||!(r<l||u<a||h<d||m<o)},union:function(t){var e=this.x+this.width,i=this.y+this.height,s=t.x+t.width,n=t.y+t.height;this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y);var a=Math.max(e,s),o=Math.max(i,n);this.width=a-this.x,this.height=o-this.y},contains:function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},lineIntersects:function(t,e,i,s,n){if(this.contains(t,e))return n&&(n.x=t,n.y=e),!0;var a,o,r,h=this.x+this.width,l=this.y+this.height;return i>=this.x&&t<this.x&&(a=(this.x-t)/(i-t),o=this.x,(r=e+(s-e)*a)>=this.y&&r<=l)?(n&&(n.x=o,n.y=r),!0):i<=h&&h<t&&(r=e+(s-e)*(a=((o=h)-t)/(i-t)))>=this.y&&r<=l?(n&&(n.x=o,n.y=r),!0):s<=l&&l<e&&(o=t+(i-t)*(a=((r=l)-e)/(s-e)))>=this.x&&o<=h?(n&&(n.x=o,n.y=r),!0):s>=this.y&&e<this.y&&(o=t+(i-t)*(a=(this.y-e)/(s-e)),r=this.y,o>=this.x&&o<=h)&&(n&&(n.x=o,n.y=r),!0)}},TGE.Math={},TGE.Math.Clamp=function(t,e,i){return Math.min(Math.max(t,e),i)},TGE.Math.Clamp01=function(t){return TGE.Math.Clamp(t,0,1)},TGE.Math.Lerp=function(t,e,i){return t+TGE.Math.Clamp01(i)*(e-t)},TGE.Math.InverseLerp=function(t,e,i){return TGE.Math.Clamp01((i-t)/(e-t))},TGE.Math.IsSameSign=function(t,e){return Math.sign(t)===Math.sign(e)},TGE.Math.Root=function(t,e){var i=Math.pow(Math.abs(t),1/(e||2));return t<0?-i:i},TGE.Math.Mod=function(t,e){return(t%e+e)%e},TGE.Math.ModRange=function(t,e,i){var s=i-e,n=(t-e)%s;return n<0&&(n+=s),e+n},TGE.Math.GetAngleDifference=function(t,e){return Math.atan2(Math.sin(e-t),Math.cos(e-t))},TGE.Math.Sort=function(t,e,i,s){i="number"==typeof i?i:0,s="number"==typeof s?s:t.length-1,e||(e="number"==typeof t[0]?function(t,e){return t-e}:function(t,e){return(""+t).localeCompare(e)});var n=null;if(i<s){n=t[s];for(var a=i-1,o=i;o<=s-1;o++)if(e(t[o],n)<=0){var r=t[a+=1];t[a]=t[o],t[o]=r}r=t[a+1];t[a+1]=t[s],t[s]=r,n=a+1,TGE.Math.Sort(t,e,i,n-1),TGE.Math.Sort(t,e,n+1,s)}},TGE.Math.PI=Math.PI,TGE.PI=TGE.Math.PI,TGE.Math.TWO_PI=6.2831853072,TGE.TWO_PI=TGE.TAU=TGE.Math.TWO_PI,TGE.Math.RAD2DEG=57.2957795,TGE.RAD2DEG=TGE.Math.RAD2DEG,TGE.Math.DEG2RAD=.0174532925,TGE.DEG2RAD=TGE.Math.DEG2RAD,TGE.Math.IDENTITY=new TGE.Matrix,TGE.IDENTITY=TGE.Math.IDENTITY,TGE.Math.POSITIVE_X_VECTOR=new TGE.Vector2(1,0),TGE.POSITIVE_X_VECTOR=TGE.Math.POSITIVE_X_VECTOR,TGE.Math.NEGATIVE_X_VECTOR=new TGE.Vector2(-1,0),TGE.NEGATIVE_X_VECTOR=TGE.Math.NEGATIVE_X_VECTOR,TGE.Math.POSITIVE_Y_VECTOR=new TGE.Vector2(0,1),TGE.POSITIVE_Y_VECTOR=TGE.Math.POSITIVE_Y_VECTOR,TGE.Math.NEGATIVE_Y_VECTOR=new TGE.Vector2(0,-1),TGE.NEGATIVE_Y_VECTOR=TGE.Math.NEGATIVE_Y_VECTOR,TGE.Random=function(t){this.setSeed(t)},TGE.Random.prototype={setSeed:function(t){this._boolMask=null,this._s0=0,this._s1=0,this._s2=0,this._c=1,"number"==typeof t?t=[t]:t||(t=[+new Date]),this._seed=t;var e=this._mash();this._s0=e(" "),this._s1=e(" "),this._s2=e(" ");for(var i=0;i<t.length;i++)this._s0-=e(t[i]),this._s0<0&&(this._s0+=1),this._s1-=e(t[i]),this._s1<0&&(this._s1+=1),this._s2-=e(t[i]),this._s2<0&&(this._s2+=1);return this},getSeed:function(){return this._seed},next:function(){var t=2091639*this._s0+2.3283064365386963e-10*this._c;return this._s0=this._s1,this._s1=this._s2,this._s2=t-(this._c=0|t)},nextFloat:function(t){return t&&"number"==typeof t?this.next()*t:this.next()*Math.MAX_VALUE},nextInt:function(t){return t&&"number"==typeof t?Math.floor(this.next()*t):4294967296*this.next()},range:function(t,e){return"object"==typeof t&&(e=(t=t.min).max),(t=t||0)+((e=e||0)-t)*this.next()},rangeInt:function(t,e){return Math.floor(this.range(t,e))},nextBoolean:function(){return this._boolMask&&1!==this._boolMask||(this._boolBuffer=this.nextInt(),this._boolMask=268435456),this._boolMask>>=1,0!=(this._boolBuffer&this._boolMask)},nextChance:function(t){return this.next()<t},getWeightedElement:function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].weight;var s=this.nextFloat(i);for(e=0;e<t.length;e++){if(s<t[e].weight)return t[e].value;s-=t[e].weight}return null},getElementInArray:function(t){if(Array.isArray(t))return t[this.nextInt(t.length)];TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Cannot get random element from an object that is not an array.")},getColor:function(t){if(t){var e=360*TGE.Math.Clamp01(this.range(t.minH||0,t.maxH||1)),i=100*TGE.Math.Clamp01(this.range(t.minS||0,t.maxS||1)),s=100*TGE.Math.Clamp01(this.range(t.minL||0,t.maxL||1));return void 0===t.minA&&void 0===t.maxA?"hsl("+e+","+i+"%,"+s+"%)":"hsla("+e+","+i+"%,"+s+"%,"+TGE.Math.Clamp01(this.range(t.minA||0,t.maxA||1))+")"}return"#"+Math.floor(16777216*this.next()).toString(16)},getPointInCircle:function(t,e,i){t=t||0,e=e||0,i=i||1,i*=Math.sqrt(this.next());var s=2*Math.PI*this.next();return new TGE.Vector2(t+Math.cos(s)*i,e+Math.sin(s)*i)},getPointInRectangle:function(t,e,i,s){return t=t||0,e=e||0,i=i||1,s=s||1,new TGE.Vector2(this.range(t,t+i),this.range(e,e+s))},_mash:function(){var s=4022871197;return function(t){t=t.toString();for(var e=0;e<t.length;e++){var i=.02519603282416938*(s+=t.charCodeAt(e));i-=s=i>>>0,s=(i*=s)>>>0,s+=4294967296*(i-=s)}return 2.3283064365386963e-10*(s>>>0)}}},TGE.Random._sInstance=null,TGE.Random.GetInstance=function(){return TGE.Random._sInstance||(TGE.Random._sInstance=new TGE.Random),TGE.Random._sInstance},TGE.Random.SetSeed=function(t){TGE.Random.GetInstance().setSeed(t)},TGE.Random.GetSeed=function(){return TGE.Random.GetInstance().getSeed()},TGE.Random.Next=function(){return TGE.Random.GetInstance().next()},TGE.Random.NextFloat=function(t){return TGE.Random.GetInstance().nextFloat(t)},TGE.Random.NextInt=function(t){return TGE.Random.GetInstance().nextInt(t)},TGE.Random.NextBoolean=function(){return TGE.Random.GetInstance().nextBoolean()},TGE.Random.NextChance=function(t){return TGE.Random.GetInstance().nextChance(t)},TGE.Random.GetWeightedElement=function(t){return TGE.Random.GetInstance().getWeightedElement(t)},TGE.Random.Range=function(t,e){return TGE.Random.GetInstance().range(t,e)},TGE.Random.RangeInt=function(t,e){return TGE.Random.GetInstance().rangeInt(t,e)},TGE.Random.GetElementInArray=function(t){return TGE.Random.GetInstance().getElementInArray(t)},TGE.Random.Color=function(t){return TGE.Random.GetInstance().getColor(t)},TGE.Random.GetPointInCircle=function(t,e,i){return TGE.Random.GetInstance().getPointInCircle(t,e,i)},TGE.Random.GetPointInRectangle=function(t,e,i,s){return TGE.Random.GetInstance().getPointInRectangle(t,e,i,s)},TGE.Renderer=function(t){return this.isTGERenderer=!0,this.deprecatedDrawCycle=!1,this.textures=[],this.imageToTextureMap={},this},TGE.Renderer._sIgnoreOrientationLock=!1,TGE.Renderer.prototype={type:function(){return"Abstract"},functional:function(){return!1},getCanvasContext:function(){return null},resizedGameDiv:function(){},processImage:function(t,e){var i=this.imageToTextureMap[t.src];if("number"==typeof i)return this.textures[i];var s=this.createTexture();return s.htmlImageElement=t,s.htmlImageWidth=t.width,s.htmlImageHeight=t.height,s.spriteSheet=e,this.rendererProcessImage(s,t,e),this.imageToTextureMap[t.src]=s.id,s},rendererProcessImage:function(t,e,i){},getImageSize:function(t){return t},beginScene:function(t){},endScene:function(){},resetTransform:function(){this.setWorldTransform(TGE.IDENTITY,1)},setWorldTransform:function(t,e){},setAlpha:function(t){},fillRectangle:function(t,e,i,s,n){},gradientFill:function(t,e,i,s,n,a){},drawImage:function(t,e,i,s,n,a,o,r,h){},alphamapOffscreenText:function(){return!1},updateTextImage:function(t,e){return null},drawTextImage:function(t,e,i,s,n,a,o){},createTexture:function(){var t=new TGE.Renderer.Texture;return this.textures[t.id]=t},getTextureByID:function(t){return this.textures[t]}},TGE.Renderer.Texture=function(){return this.id=TGE.Renderer.Texture._sNextID++,this.htmlImageElement=null,this.htmlImageWidth=0,this.htmlImageHeight=0,this.glTexture=null,this.spriteSheet=!1,this},TGE.Renderer.Texture._sNextID=0,TGE.CanvasRenderer=function(t,e){return e=!1!==e,TGE.CanvasRenderer.superclass.constructor.call(this),TGE.CanvasRenderer._sNumInstances++,this._mFunctional=!1,t&&(this._mCanvasContext=t.getContext("2d",{alpha:e}),this._mFunctional=!0),this},TGE.CanvasRenderer._sNumInstances=0,TGE.CanvasRenderer.prototype={type:function(){return"Canvas"},functional:function(){return this._mFunctional},swapContext:function(t){this._mCanvasContext=t,this._mFunctional=!0,this.deprecatedDrawCycle=!1},getCanvasContext:function(){return this._mCanvasContext},beginScene:function(t){this._mCanvasContext.globalAlpha=1,this._mCanvasContext.globalCompositeOperation="source-over"},setWorldTransform:function(t,e){var i=t._internal;if(TGE.GameStage._sOrientationLock.active&&!0!==TGE.Renderer._sIgnoreOrientationLock){var s=new TGE.Matrix,n=(i=s._internal,TGE.GameStage._sOrientationLock);n.gameHeight<n.gameWidth?(i[2]=n.gameHeight,s.rotate(90)):(i[5]=n.gameWidth,s.rotate(-90)),s.concat(t)}1!==e?this._mCanvasContext.setTransform(i[0]*e,i[3]*e,i[1]*e,i[4]*e,i[2]*e,i[5]*e):this._mCanvasContext.setTransform(i[0],i[3],i[1],i[4],i[2],i[5])},setAlpha:function(t){this._mCanvasContext.globalAlpha=t},fillRectangle:function(t,e,i,s,n){this._mCanvasContext.fillStyle=n,this._mCanvasContext.fillRect(t,e,i,s)},gradientFill:function(t,e,i,s,n,a,o){var r;if("circular"===t){var h=Math.max(n,a);r=this._mCanvasContext.createRadialGradient(n/2,a/2,0,n/2,a/2,h*(.5*s+.5))}else{var l=0,d=0,u=0,m=0;if(o)switch(t){case"horizontal":l=Math.max(0,(s-.5)*n*1.85),u=Math.min(n,n-(.5-s)*n*1.85);break;case"vertical":d=Math.max(0,(s-.5)*a*1.85),m=Math.min(a,a-(.5-s)*a*1.85);break;default:var c=Math.sqrt(n*n+a*a),g=Math.max(0,(s-.5)*c*1.5),f=Math.min(c,c-(.5-s)*c*1.5);l=g/c*n,u=f/c*n,d=("leftDiagonal"===t?g:c-g)/c*a,m=("leftDiagonal"===t?f:c-f)/c*a}else"vertical"!==t&&(u=2*n*s),"vertical"===t||"leftDiagonal"===t?d=2*a*s:m=2*a*s;r=this._mCanvasContext.createLinearGradient(l,d,u,m)}r.addColorStop(0,e),r.addColorStop(1,i),this._mCanvasContext.fillStyle=r,this._mCanvasContext.fillRect(0,0,n,a)},drawImage:function(t,e,i,s,n,a,o,r,h){this._mCanvasContext.drawImage(t.htmlImageElement,e,i,s,n,a,o,r,h)},updateTextImage:function(t,e){return e},drawTextImage:function(t,e,i,s,n,a,o){this._mCanvasContext.drawImage(t,-n,-n,i+2*n,s+2*n)}},extend(TGE.CanvasRenderer,TGE.Renderer),TGE.DisplayObject=function(){return this.x=0,this.y=0,this.worldX=0,this.worldY=0,this.scaleX=1,this.scaleY=1,this.rotation=0,this.alpha=1,this.colorDef=null,this.backgroundColor=null,this.visible=!0,this.width=0,this.height=0,this.registrationX=TGE.DisplayObject.DefaultRegistrationX,this.registrationY=TGE.DisplayObject.DefaultRegistrationY,this.parent=null,this.stage=TGE.Game.GetInstance().stage,this.mouseEnabled=!1,this.cameraShakeTag="DEFAULT",this.instanceName="",this.pointerLocal=new TGE.Vector2(0,0),this.pointerStage=new TGE.Vector2(0,0),this.rectMask=null,this.mouseX=0,this.mouseY=0,this._mPreviousX=0,this._mPreviousY=0,this._mPreviousScaleX=1,this._mPreviousScaleY=1,this._mPreviousRotation=0,this._mPreviousRegistrationX=0,this._mPreviousRegistrationY=0,this._mPreviousWidth=0,this._mPreviousHeight=0,this._mPreviousVisibility=!1,this._mPreviousAlpha=1,this._mRegistrationOffset=new TGE.Vector2(0,0),this._mLocalTransformNoReg=new TGE.Matrix,this._mLocalTransformDirty=!0,this._mWorldTransform=new TGE.Matrix,this._mWorldTransformNoReg=new TGE.Matrix,this._mWorldTransformUpdated=!0,this._mTopLeft=new TGE.Vector2,this._mTopRight=new TGE.Vector2,this._mBottomLeft=new TGE.Vector2,this._mBottomRight=new TGE.Vector2,this._mAABB=new TGE.Rectangle,this._mBoundingInfoDirty=!0,this._mWorldAlpha=1,this._mIgnoreProperties=!1,this._mMouseDown=!1,this._mMouseDownX=0,this._mMouseDownY=0,this._mMouseDownTime=0,this._mMouseOver=null,this._mVisibilityChanged=!1,this._mMarkedForRemoval=!1,this._mEventListeners={},this._mUseDrawEvents=!1,this._mDrawing=!1,this._mLastUpdate=-1,this._mViewportCulling=null,this._mWorldPositionListener=-1,this._mTweens=[],this._mTweenListener=null,this._mShakes=[],this._mShakeListener=null,this._mActions=[],this._mActionsListener=null,this._mBackgroundGradient=null,this._mAddedToStage=!1,this._mPreviousParent=null,this._mLayoutResizeListener=null,this._mLayout=null,this._mFullStage=TGE.Game.GetInstance()._mFullStage,this},TGE.DisplayObject.DefaultRegistrationX=.5,TGE.DisplayObject.DefaultRegistrationY=.5,TGE.DisplayObject._sNextEventListenerID=0,TGE.DisplayObject._sOneShotListeners={},TGE.DisplayObject.prototype={setup:function(t){return this.settingsPrefix=this.settingsPrefix||t.settingsPrefix||"","string"==typeof t.instanceName&&(this.instanceName=t.instanceName),"boolean"==typeof t.visible&&(this.visible=t.visible),"boolean"==typeof t.mouseEnabled&&(this.mouseEnabled=t.mouseEnabled),"number"==typeof t.x&&(this.x=t.x),"number"==typeof t.y&&(this.y=t.y),"number"==typeof t.worldX&&(this.worldX=t.worldX),"number"==typeof t.worldY&&(this.worldY=t.worldY),"number"==typeof t.width&&(this.width=t.width),"number"==typeof t.height&&(this.height=t.height),"number"==typeof t.scaleX&&(this.scaleX=t.scaleX),"number"==typeof t.scaleY&&(this.scaleY=t.scaleY),"number"==typeof t.scale&&(this.scaleX=this.scaleY=t.scale),"number"==typeof t.rotation&&(this.rotation=t.rotation),this.colorDef=null,t.colorDef&&(GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS[t.colorDef]?this.colorDef=t.colorDef:TGE.Debug.Log(TGE.Debug.LOG_WARNING,"GameConfig.COLOR_DEFS is missing entry for: "+t.colorDef)),"string"==typeof t.backgroundColor&&(this.backgroundColor=t.backgroundColor),"object"==typeof t.backgroundGradient&&(this._mBackgroundGradient=this._makeGradient(t.backgroundGradient)),"number"==typeof t.alpha&&(this.alpha=t.alpha),"number"==typeof t.registrationX&&(this.registrationX=t.registrationX),"number"==typeof t.registrationY&&(this.registrationY=t.registrationY),"string"!=typeof t.cameraShakeTag||(this.cameraShakeTag=t.cameraShakeTag),void 0!==t.parent&&t.parent.addChild(this),this.rectMask=t.rectMask||null,t.layout&&this._setLayout(t.layout),t.onResize&&this._setLayout(t.onResize),this},getRemoteSettingName:function(t){var e=this.assetId||this.image;return e&&TGE.RemoteSettings.HasSetting(e+"_"+t)||(e=this.settingsPrefix),e+"_"+t},getRemoteSetting:function(t){return TGE.RemoteSettings(this.getRemoteSettingName(t))},hasRemoteSetting:function(t){return TGE.RemoteSettings.HasSetting(this.getRemoteSettingName(t))},_setLayout:function(t){if(this._mLayoutResizeListener&&(this.removeEventListener("resize",this._mLayoutResizeListener),this._mLayoutResizeListener=null,this._mLayout=null),t){if("object"==typeof t){var e=0;for(var i in t)t[i]&&("object"==typeof t[i]&&this._checkLayout(t[i],i.toString()),"object"!=typeof t[i]&&"string"!=typeof t[i]&&"function"!=typeof t[i]||e++);e<2&&this._checkLayout(t,"default")}this._mLayout=TGE.DeepClone(t),this._mLayoutResizeListener=this.addEventListener("resize",this._resize.bind(this,null)),this.parent&&(TGE._ResizeEvent.target=this,(TGE._ResizeEvent.currentTarget=this)._resize(null,TGE._ResizeEvent),this._dispatchToChildren(TGE._ResizeEvent))}},_checkLayout:function(t,e){var i=!0===t.useCustomPosition,s=!0===t.useCustomScale,n="number"==typeof t.xPercentage,a="number"==typeof t.yPercentage,o="number"==typeof t.scaleToWidth,r="number"==typeof t.scaleToHeight,h="number"==typeof t.matchWidth,l="number"==typeof t.matchHeight,d="number"==typeof t.topAnchor||"number"==typeof t.anchorTop,u="number"==typeof t.bottomAnchor||"number"==typeof t.anchorBottom,m="number"==typeof t.leftAnchor||"number"==typeof t.anchorLeft,c="number"==typeof t.rightAnchor||"number"==typeof t.anchorRight;m||c||n||i||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no way to determine object's horizontal position in "+e+" responsive layout strategy"),t.xPercentage=0),d||u||a||i||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no way to determine object's vertical position in "+e+" responsive layout strategy"),t.yPercentage=0),o||r||h||l||s||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no way to determine object's scale in "+e+" responsive layout strategy"),t.scaleToWidth=t.scaleToHeight=1),"number"!=typeof t.anchorLeft&&"number"!=typeof t.anchorRight&&"number"!=typeof t.anchorTop&&"number"!=typeof t.anchorBottom||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using deprecated layout code! Use topAnchor, bottomAnchor, leftAnchor, and rightAnchor instead of anchorTop, anchorBottom, anchorLeft, and anchorRight."),h&&r&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchWidth with scaleToHeight. Use matchHeight with matchWidth"),l&&o&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchHeight with scaleToWidth. Use matchHeight with matchWidth"),0==this.width&&l&&!h&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchHeight without matchWidth or defining objects width"),0==this.height&&h&&!l&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Using matchWidth without matchHeight or defining objects height")},_resize:function(t,e){if(this.parent)if(t||(t=this._mLayout),"string"==typeof t){var i=this.parent.width/this.width,s=this.parent.height/this.height;"match"===t?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.width=this.parent.width,this.height=this.parent.height,this.scale=1):"fill"===t?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.scaleX=i,this.scaleY=s):"aspect-fill"===t?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.scale=Math.max(i,s)):"fit-width"===t||"best-fit"===t&&i<=s?(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=(this.parent.height-this.height*i)/2+this.registrationY*this.height*i,this.scale=i):("fit-height"===t||"best-fit"===t&&s<i)&&(this.x=(this.parent.width-this.width*s)/2+this.registrationX*this.width*s,this.y=this.parent.percentageOfHeight(this.registrationY),this.scale=s)}else if("function"==typeof t)this._executeLayoutFunction(t,e);else if("object"==typeof t){if(t.pickLayout){var n=t.pickLayout.call(this,e.height/e.width);if(t[n])return void this._resize(t[n],e);TGE.Debug.Log(TGE.Debug.LOG_ERROR,n+" layout substrategy is not defined")}else{if(t.portrait&&e.height>=e.width)return void this._resize(t.portrait,e);if(t.landscape&&e.height<e.width)return void this._resize(t.landscape,e)}"number"==typeof t.percentageX&&(t.xPercentage=t.percentageX,t.percentageX=void 0),"number"==typeof t.percentageY&&(t.yPercentage=t.percentageY,t.percentageY=void 0),"number"==typeof t.scaleWidthToFit&&(t.scaleToWidth=t.scaleWidthToFit,t.scaleWidthToFit=void 0),"number"==typeof t.scaleHeightToFit&&(t.scaleToHeight=t.scaleHeightToFit,t.scaleHeightToFit=void 0),"number"==typeof t.xPercentage&&(this.x=this.parent.percentageOfWidth(t.xPercentage)),"number"==typeof t.yPercentage&&(this.y=this.parent.percentageOfHeight(t.yPercentage));var a=this.parent.height>this.parent.width?this.parent.height:this.parent.width;if("number"==typeof t.anchorTop&&(this.registrationY=0,this.y=t.anchorTop*a),"number"==typeof t.anchorBottom&&(this.registrationY=1,this.y=this.parent.height-t.anchorBottom*a),"number"==typeof t.anchorLeft&&(this.registrationX=0,this.x=t.anchorLeft*a),"number"==typeof t.anchorRight&&(this.registrationX=1,this.x=this.parent.width-t.anchorRight*a),!0!==t.allowSubPixel&&(this.x=Math.round(this.x),this.y=Math.round(this.y)),!t.useCustomScale)i=s=!1===t.useMinScale?-Number.MAX_VALUE:Number.MAX_VALUE,"number"==typeof t.scaleToWidth&&(i=this.parent.width/this.width*t.scaleToWidth),"number"==typeof t.scaleToHeight&&(s=this.parent.height/this.height*t.scaleToHeight),this.scale=!1===t.useMinScale?Math.max(Math.abs(i),Math.abs(s)):Math.min(Math.abs(i),Math.abs(s)),this.scaleX*=i<0?-1:1,this.scaleY*=s<0?-1:1;"number"==typeof t.matchWidth&&(this.scale=1,this.width=this.parent.width*t.matchWidth),"number"==typeof t.matchHeight&&(this.scale=1,this.height=this.parent.height*t.matchHeight),"number"==typeof t.topAnchor&&(this.y=t.topAnchor*this.parent.height+this.height*this.scaleY*this.registrationY),"number"==typeof t.bottomAnchor&&(this.y=this.parent.height*(1-t.bottomAnchor)-this.height*this.scaleY*(1-this.registrationY)),"number"==typeof t.leftAnchor&&(this.x=t.leftAnchor*this.parent.width+this.width*this.scaleX*this.registrationX),"number"==typeof t.rightAnchor&&(this.x=this.parent.width*(1-t.rightAnchor)-this.width*this.scaleX*(1-this.registrationX)),"function"==typeof t.custom&&this._executeLayoutFunction(t.custom,e)}},_executeLayoutFunction:function(t,e){var i=t.call(this,e);i&&(this._checkLayout(i,"custom function"),this._resize(i,e))},_layoutHasDynamicDimensions:function(t){return!!t&&("match"===t||(!(!t.matchWidth&&!t.matchHeight)||(this._layoutHasDynamicDimensions(t.portrait)||this._layoutHasDynamicDimensions(t.landscape))))},isResponsive:function(){return null!==this._mLayout||this._mEventListeners.resize&&0<this._mEventListeners.resize.length},reapplyLayout:function(){this.dispatchEvent(TGE._ResizeEvent)},setLocalTransform:function(t,e,i,s,n,a){var o=this._mLocalTransformNoReg._internal;o[0]=t,o[1]=i,o[2]=n,o[3]=e,o[4]=s,o[5]=a,this._mIgnoreProperties=!0,this._mLocalTransformDirty=!0},useDisplayProperties:function(){this._mIgnoreProperties=!1,this._mLocalTransformDirty=!0},getBounds:function(t){return t=!0===t,this._checkVisibilityChange(),(this._mBoundingInfoDirty||t)&&(this._updateAABB(t),t&&(this._mBoundingInfoDirty=!0)),this._mAABB},hitTestPoint:function(t,e){var i=this.getBounds();return t>i.x&&t<i.x+i.width&&e>i.y&&e<i.y+i.height},markForRemoval:function(){this._mMarkedForRemoval||(this._mMarkedForRemoval=!0,this._mFullStage._trashObject(this))},markedForRemoval:function(){return this._mMarkedForRemoval},removeChildByName:function(t){var e;if("string"==typeof t)for(e=this._mChildren.length;0<=--e;){var i=this._mChildren[e];i.instanceName===t&&this.removeChild(i)}else for(e=t.length;0<=--e;)this.removeChildByName(t[e])},removeFromScene:function(){this.handleEvent({type:"remove"}),this.clearEventListeners(),null!==this.parent&&(this.parent._setBoundingInfoDirty(),this.parent.removeChild(this),this.parent=null),this._mMarkedForRemoval=!0},numChildren:function(t){return 0},isDescendantOf:function(t,e){return this===t||!(!1===e||!this.parent)&&this.parent.isDescendantOf(t,e)},isCached:function(){return!1},getIndex:function(){return null!==this.parent?this.parent.getChildIndex(this):-1},bringForward:function(){if(null!==this.parent){var t=this.parent.getChildIndex(this);if(t<this.parent._mChildren.length-1){var e=this.parent._mChildren[t+1];(this.parent._mChildren[t+1]=this).parent._mChildren[t]=e}}},bringToFront:function(){if(null!==this.parent){var t=this.parent.getChildIndex(this);this.parent._mChildren.splice(t,1),this.parent._mChildren.push(this)}},sendBackward:function(){if(null!==this.parent){var t=this.parent.getChildIndex(this);if(0<t){var e=this.parent._mChildren[t-1];(this.parent._mChildren[t-1]=this).parent._mChildren[t]=e}}},sendToBack:function(){if(null!==this.parent){var t=this.parent.getChildIndex(this);this.parent._mChildren.splice(t,1),this.parent._mChildren.unshift(this)}},isPointerDown:function(){return this._mMouseDown},isPointerOver:function(){return!0===this._mMouseOver},isMouseOver:function(){return!0===this._mMouseOver},addEventListener:function(t,e,i){this._mEventListeners[t]||(this._mEventListeners[t]=[]);var s={id:++TGE.DisplayObject._sNextEventListenerID,listener:e};return this._mEventListeners[t].push(s),i&&"object"==typeof i&&(i.oneShot&&(TGE.DisplayObject._sOneShotListeners[s.id]=!0),i.onRemove&&i.onRemove.addEventListener("remove",this.removeEventListener.bind(this,t,s.id))),"mouse"===t.substring(0,5)||"click"===t?(this.mouseEnabled=!0,this instanceof TGE.GameStage&&TGE.Game.GetUpdateRoot()&&TGE.Game.GetUpdateRoot()!==this&&!TGE.Game.GetInstance()._mBufferingScreen&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Adding mouse event listener to stage when SetUpdateRoot is pointing elsewhere. See PAN-1239.")):"drawbegin"===t||"drawend"===t?this._mUseDrawEvents=!0:"update"===t&&this.stage&&this._mFullStage._addUpdateObj(this),s.id},removeEventListener:function(t,e){if(this._mEventListeners[t])for(var i=this._mEventListeners[t].length;0<=--i;){var s=this._mEventListeners[t][i];if(s.id===e||s.listener===e)return s.id=0,void(this._mFullStage._mListenerRemovals.indexOf(this)<0&&this._mFullStage._mListenerRemovals.push(this))}this._mMarkedForRemoval||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"removeEventListener could not find listener specified for "+t+" event")},removeEventListenersFor:function(t){this._mEventListeners[t]&&(this._mEventListeners[t]=[])},clearEventListeners:function(){this._mEventListeners={}},dispatchEvent:function(t){void 0===t.target&&(t.target=this),(t.currentTarget=this).handleEvent(t)},handleEvent:function(t){var e=this._mEventListeners[t.type];if(e&&e.length){t.currentTarget=this;for(var i=e.length,s=0;s<i;++s){var n=e[s].id;if(n&&(e[s].listener.call(this,t),TGE.DisplayObject._sOneShotListeners[n]&&(delete TGE.DisplayObject._sOneShotListeners[n],this.removeEventListener(t.type,n))),!this._mEventListeners[t.type]||this._mMarkedForRemoval)break}}},_handleMouseEvent:function(t){var e=this._mMouseDown;switch(t.type){case"mousedown":this._mMouseDown=!0,this._mMouseDownX=t.x,this._mMouseDownY=t.y,this._mMouseDownTime=+new Date;break;case"mouseup":case"mouseupoutside":this._mMouseDown=!1}if(this.handleEvent(t),"mouseup"===t.type){var i=Math.max(this.stage.width,this.stage.height);if(i){var s=Math.abs(t.x-this._mMouseDownX)/i,n=Math.abs(t.y-this._mMouseDownY)/i;e&&+new Date-this._mMouseDownTime<1e3*TGE.CLICK_TIME&&s<TGE.CLICK_DISTANCE_FRACTION&&n<TGE.CLICK_DISTANCE_FRACTION&&(t.type="click",this.handleEvent(t),t.type="mouseup")}}},percentageOfWidth:function(t){return this.width*t},percentageOfHeight:function(t){return this.height*t},pixelsFromLeft:function(t){return t},pixelsFromRight:function(t){return this.width-t},pixelsFromTop:function(t){return t},pixelsFromBottom:function(t){return this.height-t},cullToViewport:function(t,e,i,s){null===this._mViewportCulling&&this.addEventListener("camerachange",this._checkViewportCulling.bind(this)),this._mViewportCulling=[t,e,i,s]},useWorldPosition:function(t){t&&-1===this._mWorldPositionListener?this._mWorldPositionListener=this.addEventListener("camerachange",this._updateScreenPosition.bind(this)):t||-1===this._mWorldPositionListener||(this.removeEventListener("camerachange",this._mWorldPositionListener),this._mWorldPositionListener=-1)},tweenTo:function(t){t.target=t.target||this;var e=(new TGE.Tween).setup(t);return this._mTweens.push(e),"number"!=typeof this._mTweenListener&&(this._mTweenListener=this.addEventListener("update",this._updateTweens.bind(this))),e},tweenFrom:function(t){return t.startFromEnd=!0,this.tweenTo(t)},removeTween:function(t,e,i){e=void 0===e||e,i=void 0===i||i;for(var s=0;s<this._mTweens.length;s++)if(this._mTweens[s].id===t)return void this._mTweens[s].endTween(e,i);TGE.Debug.Log(TGE.Debug.LOG_WARNING,"removeTween could not find tween with id: "+t)},clearTweens:function(){0<this._mTweens.length&&(this._mTweens=[],this.removeEventListener("update",this._mTweenListener),this._mTweenListener=null)},addCameraShake:function(t,e){if("function"==typeof t){e.target=this;var i=(new t).setup(e);return this._mShakes.push(i),"number"!=typeof this._mShakeListener&&(this._mShakeListener=this.addEventListener("update",this._updateShakes.bind(this))),i}},clearCameraShakes:function(){0<this._mShakes.length&&(this._mShakes=[],this.removeEventListener("update",this._mShakeListener),this._mShakeListener=null)},performAction:function(t){t._timer=0,t._prev=0,t.delay="number"==typeof t.delay?t.delay:0,t.interval="number"==typeof t.interval?t.interval:0<t.delay?t.delay:1,t.repeat="number"==typeof t.repeat?t.repeat:!0===t.repeat?Number.MAX_VALUE:1,this._mActions.push(t),"number"!=typeof this._mActionsListener&&(this._mActionsListener=this.addEventListener("update",this._updateActions.bind(this)))},removeAction:function(t,e){for(var i=0;i<this._mActions.length;i++)if(this._mActions[i].id===t)return this._mActions.splice(i,1),void this._removeActionsListener();e&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"removeAction could not find action with id: "+t)},clearAction:function(t){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"clearAction is deprecated, use removeAction instead!"),this.removeAction(t)},clearActions:function(){0<this._mActions.length&&(this._mActions=[],this._removeActionsListener())},_removeActionsListener:function(){0===this._mActions.length&&"number"==typeof this._mActionsListener&&(this.removeEventListener("update",this._mActionsListener),this._mActionsListener=null)},doesDrawing:function(){return!!(this._mUseDrawEvents||this.backgroundColor||this._mBackgroundGradient||this._mRendererTexture||this._mPreviousText)},localToStage:function(t,e){return this._updateWorldTransform(),this._localToStage(t,e)},_localToStage:function(t,e){return t||(t=new TGE.Vector2),e?this._mWorldTransformNoReg.transformPoint(t):this._mWorldTransform.transformPoint(t),t},stageToLocal:function(t,e){return this._updateWorldTransform(),this._stageToLocal(t,e)},_stageToLocal:function(t,e){return t||(t=new TGE.Vector2),e?this._mWorldTransformNoReg.inverseTransformPoint(t):this._mWorldTransform.inverseTransformPoint(t),t},localToObject:function(t,e,i){return this._updateWorldTransform(),e=this._localToStage(e,i),t._stageToLocal(e,i),e},stageTolocal:function(t){this.stageToLocal(t)},_injectTween:function(t){this._mTweens.push(t)},_updateTweens:function(t){for(var e=this._mTweens.length-1;0<=e;e--){var i=this._mTweens[e];i._update(t.elapsedTime),i.finished()&&i===this._mTweens[e]&&this._mTweens.splice(e,1)}0===this._mTweens.length&&"number"==typeof this._mTweenListener&&(this.removeEventListener("update",this._mTweenListener),this._mTweenListener=null)},_updateShakes:function(t){for(var e=this._mShakes.length-1;0<=e;e--){var i=this._mShakes[e];i._update(t.elapsedTime),i.finished()&&i===this._mShakes[e]&&this._mShakes.splice(e,1)}0===this._mShakes.length&&(this.removeEventListener("update",this._mShakeListener),this._mShakeListener=null)},_updateActions:function(t){for(var e=this._mActions.length-1;0<=e;e--){var i=this._mActions[e];i._timer+=t.elapsedTime;var s=TGE.clamp(Math.ceil(i._timer-i.delay),0,1)+Math.max(0,Math.floor((i._timer-i.delay)/i.interval));s!==i._prev&&(i.action.call(this),i._prev=s),s>=i.repeat&&this._mActions.splice(e,1)}this._removeActionsListener()},_updateScreenPosition:function(t){var e=this.stage.width/2+(this.worldX-t.cx),i=this.stage.height/2-(this.worldY-t.cy);this.x=e,this.y=i},_checkViewportCulling:function(t){if(null!==this._mViewportCulling){var e=this.getBounds(),i=!1;this._mViewportCulling[0]&&e.y+e.height<0&&(i=!0),this._mViewportCulling[1]&&e.x>this.stage.width&&(i=!0),this._mViewportCulling[2]&&e.y>this.stage.height&&(i=!0),this._mViewportCulling[3]&&e.x+e.width<0&&(i=!0),i&&this.markForRemoval()}},_draw:function(t){var e=t._mCanvasContext;if(!t.isTGERenderer)return this._mFullStage._mSpareCanvasRenderer.swapContext(t),this._draw(this._mFullStage._mSpareCanvasRenderer);if(this._checkVisibilityChange(),this.visible){this._updateTransforms(),null!==this.stage&&this.mouseEnabled&&this._mFullStage._mMouseTargets.push(this);var i=null!==this._mFullStage&&1!==this._mFullStage._mScale?this._mFullStage._mScale:1;if(t.setWorldTransform(this._mWorldTransform,i),t.setAlpha(this._mWorldAlpha),this.rectMask&&(e.save(),this._drawMask(e),e.clip()),this.colorDef&&GameConfig.COLOR_DEFS){var s=GameConfig.COLOR_DEFS[this.colorDef];"string"==typeof s?this.backgroundColor=s:s&&(this._mBackgroundGradient=TGE.DeepClone(s),this._mBackgroundGradient.colorDef=this.colorDef)}if(this._mBackgroundGradient){var n=this._mBackgroundGradient;t.gradientFill(n.direction,n.color1,n.color2,n.transitionPoint,this.width,this.height,n.colorDef)}else this.backgroundColor&&t.fillRectangle(0,0,this.width,this.height,this.backgroundColor);this._mUseDrawEvents?(this._mDrawing=!0,this.handleEvent({type:"drawbegin",renderer:t,canvasContext:t.getCanvasContext()}),this._objectDraw(t),this.handleEvent({type:"drawend",renderer:t,canvasContext:t.getCanvasContext()}),this._mDrawing=!1):this._objectDraw(t),this._mFullStage._mNumVisibleObjects++,this._mFullStage._mNumDrawnObjects+=this.doesDrawing()?1:0,this.rectMask&&(e.restore(),this.rectMask.borderWidth&&(e.save(),e.strokeStyle=this.rectMask.borderColorDef?GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS[this.rectMask.borderColorDef]:this.rectMask.borderColor,e.lineWidth=this.rectMask.borderWidth,this._drawMask(e),e.stroke(),e.restore()))}},_drawMask:function(t){t.beginPath();var e=this.width,i=this.height,s=this.rectMask.roundness||0;if(this.rectMask.useEllipse||1===s&&e===i)t.ellipse(e/2,i/2,e/2,i/2,0,0,2*Math.PI);else{var n=.5*Math.min(e,i)*s;t.moveTo(n,0),t.arcTo(e,0,e,n,n),t.arcTo(e,i,e-n,i,n),t.arcTo(0,i,0,i-n,n),t.arcTo(0,0,n,0,n),t.closePath()}},_objectDraw:function(t){this._drawClass(t.getCanvasContext(),!0)},_drawClass:function(t,e){e||(this._mFullStage._mSpareCanvasRenderer.swapContext(t),this._mFullStage._mSpareCanvasRenderer.deprecatedDrawCycle=!0,this._objectDraw(this._mFullStage._mSpareCanvasRenderer))},_updateTransforms:function(){var t=this.x!==this._mPreviousX||this.y!==this._mPreviousY||this.scaleX!==this._mPreviousScaleX||this.scaleY!==this._mPreviousScaleY||this.rotation!==this._mPreviousRotation||this._mVisibilityChanged,e=this._mPreviousParent&&this.parent!=this._mPreviousParent;if(t&&!this._mIgnoreProperties&&(this._mVisibilityChanged=!1,this._mPreviousX=this.x,this._mPreviousY=this.y,this._mPreviousScaleX=this.scaleX,this._mPreviousScaleY=this.scaleY,this._mPreviousRotation=this.rotation,this._mLocalTransformDirty=!0),this.registrationX===this._mPreviousRegistrationX&&this.registrationY===this._mPreviousRegistrationY&&this.width===this._mPreviousWidth&&this.height===this._mPreviousHeight||(this._mPreviousRegistrationX=this.registrationX,this._mPreviousRegistrationY=this.registrationY,this._mPreviousWidth=this.width,this._mPreviousHeight=this.height,this._mRegistrationOffset.x=-this.width*this.registrationX,this._mRegistrationOffset.y=-this.height*this.registrationY,this._mLocalTransformDirty=!0),this.alpha!==this._mPreviousAlpha&&(this.alpha=Math.min(Math.max(this.alpha,0),1),this._mPreviousAlpha=this.alpha),this._mLocalTransformDirty&&!this._mIgnoreProperties){this._mLocalTransformNoReg.identity();var i=this._mLocalTransformNoReg._internal;i[2]=this.x,i[5]=this.y,0!==this.rotation&&this._mLocalTransformNoReg.rotate(this.rotation),i[0]*=this.scaleX,i[1]*=this.scaleY,i[3]*=this.scaleX,i[4]*=this.scaleY}if(null!==this.parent){if(this._mLocalTransformDirty||this.parent._mWorldTransformUpdated||e){var s=this.parent._mWorldTransformNoReg._internal,n=this._mLocalTransformNoReg._internal,a=this._mWorldTransform._internal,o=this._mWorldTransformNoReg._internal,r=s[0],h=s[1],l=s[2],d=s[3],u=s[4],m=s[5],c=n[0],g=n[1],f=n[2],_=n[3],p=n[4],T=n[5],E=c*this._mRegistrationOffset.x+g*this._mRegistrationOffset.y,v=_*this._mRegistrationOffset.x+p*this._mRegistrationOffset.y;a[0]=o[0]=r*c+h*_,a[1]=o[1]=r*g+h*p,o[2]=r*f+h*T+l,a[2]=o[2]+r*E+h*v,a[3]=o[3]=d*c+u*_,a[4]=o[4]=d*g+u*p,o[5]=d*f+u*T+m,a[5]=o[5]+d*E+u*v,this._mWorldTransformUpdated=!0,this._mPreviousParent=this.parent,++this.stage._mFullStage._mTransformsUpdated}}else this._mWorldTransformUpdated=this._mLocalTransformDirty;this._mWorldTransformUpdated&&this._setBoundingInfoDirty(),this._mWorldAlpha=null!==this.parent?this.parent._mWorldAlpha*this.alpha:this.alpha,this._mLocalTransformDirty=!1},_updateWorldTransform:function(){for(var t=this.getParentage(),e=t.length;0<=--e;)t[e]._updateTransforms()},getParentage:function(t){return t||(t=[]),t.push(this),this.parent&&this.parent!==this.stage&&this.parent.getParentage(t),t},_clearDirtyTransforms:function(){this._mWorldTransformUpdated=!1},_updateAABB:function(){this._updateWorldTransform(),this._mTopLeft.x=this._mBottomLeft.x=0,this._mBottomRight.x=this._mTopRight.x=this.width,this._mTopLeft.y=this._mTopRight.y=0,this._mBottomLeft.y=this._mBottomRight.y=this.height,this._mWorldTransform.transformPoint(this._mTopLeft),this._mWorldTransform.transformPoint(this._mTopRight),this._mWorldTransform.transformPoint(this._mBottomLeft),this._mWorldTransform.transformPoint(this._mBottomRight);var t=Math.min(this._mTopLeft.x,this._mTopRight.x,this._mBottomLeft.x,this._mBottomRight.x),e=Math.max(this._mTopLeft.x,this._mTopRight.x,this._mBottomLeft.x,this._mBottomRight.x),i=Math.min(this._mTopLeft.y,this._mTopRight.y,this._mBottomLeft.y,this._mBottomRight.y),s=Math.max(this._mTopLeft.y,this._mTopRight.y,this._mBottomLeft.y,this._mBottomRight.y);this._mAABB.x=t,this._mAABB.y=i,this._mAABB.width=e-t,this._mAABB.height=s-i,this._mBoundingInfoDirty=!1},_setBoundingInfoDirty:function(){this._mBoundingInfoDirty=!0,null!==this.parent&&this.parent._setBoundingInfoDirty()},_checkVisibilityChange:function(){this.visible!==this._mPreviousVisibility&&(this._mVisibilityChanged=!0,this._mPreviousVisibility=this.visible,this._setBoundingInfoDirty())},_setStage:function(t,e){this.stage=t,this._mAddedToStage=e,this._mFullStage=this._mFullStage||t._mFullStage},_makeGradient:function(t){var e="vertical";return t.direction="string"==typeof t.direction?t.direction:e,t.color1="string"==typeof t.color1?t.color1:"#fff",t.color2="string"==typeof t.color2?t.color2:"#000",t.transitionPoint="number"==typeof t.transitionPoint?t.transitionPoint:.5,"vertical"!=t.direction&&"horizontal"!=t.direction&&"leftDiagonal"!=t.direction&&"rightDiagonal"!=t.direction&&"circular"!=t.direction&&(t.direction=e,TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Invalid gradient direction.  Valid directions are 'circular', 'vertical', 'horizontal', 'rightDiagonal', and 'leftDiagonal'.")),(t.transitionPoint<0||1<t.transitionPoint)&&(t.transitionPoint=Math.min(Math.max(t.transitionPoint,0),1),TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Transition point must be between 0 and 1.")),t}},Object.defineProperty(TGE.DisplayObject.prototype,"scale",{set:function(t){this.scaleX=this.scaleY=t}}),Object.defineProperty(TGE.DisplayObject.prototype,"layout",{get:function(){return this._mLayout},set:function(t){this._setLayout(t)}}),Object.defineProperty(TGE.DisplayObject.prototype,"backgroundGradient",{set:function(t){this._mBackgroundGradient=this._makeGradient(t)}}),TGE.DisplayObjectContainer=function(){return TGE.DisplayObjectContainer.superclass.constructor.call(this),this._mChildren=[],this._mCached=!1,this._mCacheDirty=!1,this.canvas=null,this.offscreenRenderer=null,this},TGE.DisplayObjectContainer.prototype={setup:function(t){return TGE.DisplayObjectContainer.superclass.setup.call(this,t),this.canvasScale=t.canvasScale?t.canvasScale:1,this},addChild:function(t){return this.addChildAt(t,this._mChildren.length)},addChildAt:function(t,e,i){if(e<0||e>this._mChildren.length){if(1!=i)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.DisplayObjectContainer.addChildAt called with invalid index: "+e),t;e=Math.min(this._mChildren.length,Math.max(0,e))}return t.parent&&(t._mPreviousParent=t.parent,t.parent.removeChild(t)),(t.parent=this)._mChildren.splice(e,0,t),t._setStage(this.stage,this._mAddedToStage),t.dispatchEvent(TGE._ResizeEvent),this._mAddedToStage&&t.dispatchEvent(TGE._AddedToStageEvent),TGE.Game.GetInstance().debugResizeMode&&this._layoutHasDynamicDimensions(this._mLayout)&&t.doesDrawing()&&!t.isResponsive()&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"adding a child without a layout strategy to an object with responsive dimensions"),t},getChildAt:function(t){return this._mChildren[t]},getChildByName:function(t,e){e=!0===e;for(var i=this._mChildren.length,s=0;s<i;s++){if(this._mChildren[s].instanceName===t)return this._mChildren[s];if(e){var n=this._mChildren[s].getChildByName(t,!0);if(null!==n)return n}}return null},getChildIndex:function(t){for(var e=this._mChildren.length,i=0;i<e;i++)if(this._mChildren[i]===t)return i;return-1},removeChild:function(t){var e=this.getChildIndex(t);return-1!==e&&(this._mChildren[e].parent=null,this._mChildren.splice(e,1)),t},removeFromScene:function(){this.removeChildren(),TGE.DisplayObjectContainer.superclass.removeFromScene.call(this)},removeChildren:function(){for(;this._mChildren.length;)this._mChildren.pop().removeFromScene()},clearChildren:function(){this.removeChildren()},numChildren:function(t){t=!0===t;var e=this._mChildren.length;if(t)for(var i=e;0<=--i;)e+=this._mChildren[i].numChildren(!0);return e},sortChildren:function(t){t&&this._mChildren.sort(t)},eachChild:function(t){if(t)for(var e=Array.prototype.slice.call(arguments,1),i=this._mChildren.length,s=0;s<i;++s)t.apply(this._mChildren[s],e)},dispatchEvent:function(t){TGE.DisplayObjectContainer.superclass.dispatchEvent.call(this,t),this._dispatchToChildren(t),t.endEvent&&this.handleEvent(t.endEvent)},_dispatchToChildren:function(t){for(var e=this._mChildren.length,i=0;i<e;i++)this._mChildren[i]&&this._mChildren[i].dispatchEvent(t)},cache:function(t){if(t&&t._mCached)return this.canvas=t.canvas,this.offscreenRenderer=t.offscreenRenderer,this.width=t.width,this.height=t.height,this._mCached=!0,void(this._mCacheDirty=!1);if(!this.canvas){if(!this.width||!this.height){var e=this.getBounds();this.width=e.width,this.height=e.height}this.canvas=document.createElement("canvas"),this.offscreenRenderer=new TGE.CanvasRenderer(this.canvas)}this._mWorldTransformNoReg=TGE.Matrix.TranslationMatrix(this.width*this.registrationX,this.height*this.registrationY),this._mWorldAlpha=1,this.canvas.width=Math.ceil(this.width*this.canvasScale)||1,this.canvas.height=Math.ceil(this.height*this.canvasScale)||1,this.offscreenRenderer.getCanvasContext().clearRect(0,0,this.canvas.width,this.canvas.height),this._mFullStage._mScale=this.canvasScale,this._mCached=!1;var i=this.offscreenRenderer;this._mUseDrawEvents&&!this._mDrawing?(this._mDrawing=!0,this.handleEvent({type:"drawbegin",renderer:i,canvasContext:i.getCanvasContext()}),this._objectDraw(i),this.handleEvent({type:"drawend",renderer:i,canvasContext:i.getCanvasContext()}),this._mDrawing=!1):this._objectDraw(i),this._mCached=!0,this._mCacheDirty=!1,this._resetTransforms(),this._mFullStage._mScale=1},updateCache:function(){this.isCached()&&this.cache(),this.parent&&this.parent!=this.stage&&this.parent.updateCache()},_resetTransforms:function(){this._mLocalTransformDirty=!0;for(var t=this._mChildren.length;0<=--t;)this._mChildren[t]._resetTransforms&&this._mChildren[t]._resetTransforms()},isCached:function(){return this._mCached},_objectDraw:function(t){if(this._mCached){if(this._mCacheDirty&&this.cache(),this.canvas){var e=t.getCanvasContext();e&&e.drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,this.width,this.height)}}else{t.deprecatedDrawCycle||TGE.DisplayObjectContainer.superclass._objectDraw.call(this,t);for(var i=this._mChildren.length,s=0;s<i;s++){var n=this._mChildren[s];n._checkVisibilityChange(),n.visible&&n._draw(t)}}},_updateAABB:function(t){if(TGE.DisplayObjectContainer.superclass._updateAABB.call(this),!(t=!0===t)&&!this._mCached&&!this.rectMask)for(var e=this._mChildren.length,i=0;i<e;i++)this._mChildren[i].visible&&this._mAABB.union(this._mChildren[i].getBounds())},_setStage:function(t,e){TGE.DisplayObjectContainer.superclass._setStage.call(this,t,e);for(var i=this._mChildren.length;0<=--i;)this._mChildren[i]._setStage(t,e)},_clearDirtyTransforms:function(){TGE.DisplayObjectContainer.superclass._clearDirtyTransforms.call(this),this.numChildren()&&this.eachChild(this._clearDirtyTransforms)}},extend(TGE.DisplayObjectContainer,TGE.DisplayObject),TGE.GameStage=function(t){return TGE.GameStage.superclass.constructor.call(this),(this.stage=this)._mFullStage=t,this._mRenderer=t._mRenderer,this._mHeightRatio=1,this._mScale=1,this.mouseEnabled=!0,this.registrationX=this.registrationY=0,this.layout=this._layoutFunction.bind(this),this},TGE.GameStage._sOrientationLock={active:!1,gameWidth:1,gameHeight:1},TGE.GameStage.prototype={numVisibleObjects:function(){return this._mFullStage.numVisibleObjects()},numDrawnObjects:function(){return this._mFullStage.numDrawnObjects()},maxDrawnObjects:function(){return this._mFullStage.maxDrawnObjects()},averageDrawnObjects:function(){return this._mFullStage.averageDrawnObjects()},isLandscape:function(){return this.height<this.width},isMouseDown:function(){return this._mMouseDown},dispatchResize:function(){this._layoutFunction(),TGE._ResizeEvent.width=TGE._ResizeEvent.endEvent.width=this.width,TGE._ResizeEvent.height=TGE._ResizeEvent.endEvent.height=this.height,this.dispatchEvent(TGE._ResizeEvent)},forceOrientationLock:function(t){TGE.GameStage._sOrientationLock.active=t},getHeight:function(){return this._mHeightRatio},setHeight:function(t){this._mHeightRatio=t,this.dispatchResize()},_draw:function(t){TGE.Renderer._sIgnoreOrientationLock=!1,TGE.GameStage.superclass._draw.call(this,t),TGE.Renderer._sIgnoreOrientationLock=!0},_layoutFunction:function(){TGE.GameStage._sOrientationLock.active?(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"orientation lock is being applied"),this.width=TGE.GameStage._sOrientationLock.gameWidth=this.parent.height,this.height=TGE.GameStage._sOrientationLock.gameHeight=this.parent.width):(this.x=this.parent.percentageOfWidth(this.registrationX),this.y=this.parent.percentageOfHeight(this.registrationY),this.width=this.parent.width,this.height=this.parent.height*this._mHeightRatio,this.scale=1)},getBounds:function(){return TGE.GameStage.superclass.getBounds.call(this,!0)}},extend(TGE.GameStage,TGE.DisplayObjectContainer),TGE.FullStage=function(t,e,i){TGE.FullStage.superclass.constructor.call(this),this._mRenderer=null,this._mMouseTargets=[],this._mListenerRemovals=[],this._mObjectTrash=[],this._mUpdateGroup=[],this._mUpdateCycle=0,this._mNumVisibleObjects=0,this._mNumDrawnObjects=0,this._mMaxDrawnObjects=0,this._mTotalDrawnObjects=0,this._mTotalFramesDrawn=0,this._mTransformsUpdated=0,this._mSpareCanvasRenderer=new TGE.CanvasRenderer,this.mouseEnabled=!0;var s,n=!(this._mAddedToStage=!0);t&&(t instanceof HTMLDivElement?n=!1:t instanceof HTMLCanvasElement?n=!0:t=document.body),n?s=t:(s=document.createElement("canvas"),t.appendChild(s)),this.registrationX=0,this.registrationY=0,s.width=t.clientWidth,s.height=t.clientHeight;var a=t.clientWidth,o=t.clientHeight;return"number"==typeof e||"number"==typeof i?(a=e,o=i):0!=t.clientWidth&&0!=t.clientHeight||(a=640,o=1138),this.width=this._mOriginalWidth=a,this.height=this._mOriginalHeight=o,TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"TGE.FullStage initialized with dimensions: "+this.width+"x"+this.height),this._mAABB.x=this._mAABB.y=0,this._mAABB.width=this.width,this._mAABB.height=this.height,this._mScale=1,this._mCanvas=s,"webgl"===getQueryString().renderer&&(window.TGE.WebGLRenderer?"file:"!=document.location.protocol?this._mRenderer=new TGE.WebGLRenderer(this._mCanvas):TGE.Debug.Log(TGE.Debug.LOG_INFO,"WebGL can only be used when running on a webserver!"):TGE.Debug.Log(TGE.Debug.LOG_INFO,"WebGL is not available in this build of TGE.")),this._mRenderer&&this._mRenderer.functional()||(this._mRenderer=new TGE.CanvasRenderer(this._mCanvas,!1)),TGE.Debug.Log(TGE.Debug.LOG_INFO,"created "+this._mRenderer.type()+" renderer."),this._mRenderer.resizedGameDiv(),this.stage=this._mFullStage=this,this.gameStage=this.addChild(new TGE.GameStage(this).setup({})),this.gameStage.stage=this.gameStage,this},TGE.FullStage.prototype={setGameStageHeight:function(t){this.gameStage.setHeight(t)},forceOrientationLock:function(t){this.gameStage.forceOrientationLock(t)},draw:function(){TGE.Renderer._sIgnoreOrientationLock=!0,this._mMouseTargets=[],this._mRenderer.beginScene(this.backgroundColor),this._mNumVisibleObjects=0,this._mNumDrawnObjects=0,this._draw(this._mRenderer),this._mRenderer.endScene(),this._mTotalDrawnObjects+=this._mNumDrawnObjects,this._mTotalFramesDrawn++,this._mNumDrawnObjects>this._mMaxDrawnObjects&&(this._mMaxDrawnObjects=this._mNumDrawnObjects),this._clearDirtyTransforms()},numVisibleObjects:function(){return this._mNumVisibleObjects},numDrawnObjects:function(){return this._mNumDrawnObjects},maxDrawnObjects:function(){return this._mMaxDrawnObjects},averageDrawnObjects:function(){return Math.round(this._mTotalDrawnObjects/this._mTotalFramesDrawn)},setSize:function(t,e){this._mScale=1,this._mCanvas.width=t,this._mCanvas.height=e,this.width=this._mAABB.width=t,this.height=this._mAABB.height=e,this._mRenderer.resizedGameDiv(),this.dispatchResize()},isMouseDown:function(){return this._mMouseDown},getBounds:function(){return this._mAABB},dispatchUpdate:function(t,e){if(e===this.gameStage)this._updateAllObjects(t);else{var i=this.gameStage;this.eachChild(function(){this!==i&&this.dispatchEvent(t)}),e.stage!==this&&e.dispatchEvent(t)}},dispatchResize:function(){TGE._ResizeEvent.width=TGE._ResizeEvent.endEvent.width=this.width,TGE._ResizeEvent.height=TGE._ResizeEvent.endEvent.height=this.height;var t=this.gameStage;this.eachChild(function(){this!==t&&this.dispatchEvent(TGE._ResizeEvent)}),this.gameStage.dispatchResize()},_pruneListeners:function(){var t=this._mListenerRemovals.length;if(t){for(;0<=--t;){var e=this._mListenerRemovals[t];for(var i in e._mEventListeners)for(var s=e._mEventListeners[i],n=s.length;0<=--n;)s[n].id||s.splice(n,1)}this._mListenerRemovals=[]}},_updateAllObjects:function(t){for(var e=this._mUpdateGroup.length;0<=--e;){var i=this._mUpdateGroup[e];i._mMarkedForRemoval||i._mLastUpdate===this._mUpdateCycle?this._mUpdateGroup.splice(e,1):(i.handleEvent(t),i._mLastUpdate=this._mUpdateCycle)}this._mUpdateCycle++},_addUpdateObj:function(t){this._mUpdateGroup.push(t)},_trashObject:function(t){this._mObjectTrash.push(t)},_emptyTrash:function(){for(;this._mObjectTrash.length;)this._mObjectTrash.pop().removeFromScene()},_notifyObjectsOfMouseEvent:function(t,e,i,s){var n={type:"mouse"+t,x:e,y:i,stageX:e,stageY:i,identifier:s};this._handleMouseEvent(n);var a=TGE.Game.GetUpdateRoot();a.mouseEnabled&&a.visible&&this._processMouseTarget(a,n);for(var o=this._mMouseTargets.length;0<=--o;){var r=this._mMouseTargets[o];if(r!==a&&r!==this){if(this._processMouseTarget(r,n))return}else if(r!==this&&r.hitTestPoint(e,i))return}},_processMouseTarget:function(t,e){if(t===this)t._handleMouseEvent(e);else{if(this._setPointerPositionsForObject(t,e.x,e.y),t.hitTestPoint(e.x,e.y))return t._handleMouseEvent(e),!0;"mouseup"===e.type&&t._mMouseDown&&(e.type="mouseupoutside",t._handleMouseEvent(e),e.type="mouseup")}return!1},_updateObjectMouseOverStates:function(t,e){for(var i=this._mMouseTargets.length;0<=--i;){var s=this._mMouseTargets[i],n={x:t,y:e,stageX:t,stageY:e},a=(!TGE.BrowserDetect.isMobileDevice||this._mMouseDown)&&s.hitTestPoint(t,e);a!==s._mMouseOver&&(s._mMouseOver=a,n.type=a?"mouseover":"mouseout",s.handleEvent(n)),this._setPointerPositionsForObject(s,t,e)}},_setPointerPositionsForObject:function(t,e,i){t._mLocalTransformDirty&&t._updateTransforms(),t.pointerLocal.setTo(e,i),t._mWorldTransform.inverseTransformPoint(t.pointerLocal),t.pointerStage.x=e,t.pointerStage.y=i,t.mouseX=t.pointerLocal.x,t.mouseY=t.pointerLocal.y},_notifyObjectsOfKeyEvent:function(t,e){var i={type:t,keyCode:e};this.dispatchEvent(i)}},extend(TGE.FullStage,TGE.DisplayObjectContainer),TGE.Sprite=function(){return TGE.Sprite.superclass.constructor.call(this),this._mRendererTexture=null,this._mCellWidth=0,this._mCellHeight=0,this._mSpriteIndex=0,this._mOffsetX=0,this._mOffsetY=0,this._mCoordinateCache=null,this._mColorize=null,this._mImage=null,TGE.Sprite.UseCorrectGridCuts?(this._mSplitFunc1=function(t){return t},this._mSplitFunc2=function(t){return Math.round(t)},this._mSplitFunc3=function(t){return Math.round(t)}):(this._mSplitFunc1=function(t){return Math.floor(t)},this._mSplitFunc2=function(t){return t},this._mSplitFunc3=function(t){return Math.floor(t)}),this},TGE.Sprite.UseCorrectGridCuts=!0,TGE.Sprite.prototype={setup:function(t){if(TGE.Sprite.superclass.setup.call(this,t),t.image){if(this.setSizedImage(t.image,t.width,t.height),this.uncroppedWidth=this.width,this.uncroppedHeight=this.height,!t.cropWidth){var e=GameConfig.ELX_DEFS&&GameConfig.ELX_DEFS[t.image]||{};t.cropWidth=e.cropWidth,t.cropHeight=e.cropHeight}t.cropWidth&&this.setSize(t.cropWidth,t.cropHeight)}var i=t.colorize;return i&&this.colorize(i),this},setSize:function(t,e){this.width=this._mDrawWidth=this._mOriginalWidth=t,this.height=this._mDrawHeight=this._mOriginalHeight=e,this.parent&&this.dispatchEvent(TGE._ResizeEvent)},setSizedImage:function(t,e,i){this.setImage(t,1,1,e,i)},setImage:function(t,e,i,s,n){if(e=void 0===e?1:e,i=void 0===i?1:i,s="number"==typeof s?s:null,n="number"==typeof n?n:null,this._mSourceImage=t,this._mNumRows=e,this._mNumColumns=i,this._mOffsetX=0,this._mOffsetY=0,this._mRendererTexture=null,"string"==typeof t)this._mRendererTexture=TGE.AssetManager.GetTexture(t);else if(t instanceof Image)this._mRendererTexture=this._mFullStage._mRenderer.processImage(t,!1);else if(t&&t.spriteSheet instanceof Image){this._mRendererTexture=this._mFullStage._mRenderer.processImage(t.spriteSheet,!0);var a=t}if(this._mRendererTexture){if(this._mRendererTexture.spriteSheet){var o,r,h=a||TGE.AssetManager.Get(t);this._mCellWidth=this._mSplitFunc1(h.width/i),this._mCellHeight=this._mSplitFunc1(h.height/e),this._mCoordinateCache=[];for(var l=0;l<e*i;l++)o=this._mSplitFunc2(h.x+(l%i|0)*this._mCellWidth),r=this._mSplitFunc2(h.y+(l/i|0)*this._mCellHeight),this._mCoordinateCache.push([o,r]);this._mDrawWidth=this._mOriginalWidth=this._mSplitFunc2(this._mCellWidth),this._mDrawHeight=this._mOriginalHeight=this._mSplitFunc2(this._mCellHeight),h.hasOwnProperty("offsetX")&&(this._mOffsetX=h.offsetX,this._mOffsetY=h.offsetY,this._mDrawWidth=h.drawWidth/i,this._mDrawHeight=h.drawHeight/e)}else this._mDrawWidth=this._mOriginalWidth=this._mSplitFunc3(this._mRendererTexture.htmlImageWidth/i),this._mDrawHeight=this._mOriginalHeight=this._mSplitFunc3(this._mRendererTexture.htmlImageHeight/e),this._resetCoordinateCache();this.width=s||this._mOriginalWidth,this.height=n||this._mOriginalHeight,(this._mRendererTexture.htmlImageWidth<=0||this._mRendererTexture.htmlImageHeight<=0)&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Sprite.setImage: HTMLImageElement has invalid dimensions ("+this._mRendererTexture.htmlImageWidth+"x"+this._mRendererTexture.htmlImageHeight+"), image likely did not load"),this._mRendererTexture=null)}this._mSpriteIndex=0,this._mImage=this._mRendererTexture?this._mRendererTexture.htmlImageElement:null,this.updateCache(),this.parent&&this.dispatchEvent(TGE._ResizeEvent)},setSpriteIndex:function(t){null!==this._mRendererTexture?(this._mSpriteIndex=t,this._mSpriteIndex>=this._mCoordinateCache.length&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Attempt to call TGE.Sprite.setSpriteIndex with an out of range index ("+t.toString()+")"),this._mSpriteIndex=0)):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Attempt to call TGE.Sprite.setSpriteIndex on null image")},colorize:function(t){t!=this._mColorize&&(t||(this._mCacheDirty=!0),this._mColorize=t,this.cache(this.isCached()&&!this._mCacheDirty?this:void 0))},cache:function(t){if(TGE.Sprite.superclass.cache.call(this,t),this._mColorize&&this.canvas){var e=this.offscreenRenderer.getCanvasContext();e.save(),e.globalCompositeOperation="source-atop",e.setTransform(1,0,0,1,0,0),e.fillStyle=this._mColorize,e.fillRect(0,0,this.width,this.height),e.restore()}},_objectDraw:function(t){if(null!==this._mRendererTexture&&!this._mCached){var e=this.width/this._mOriginalWidth,i=this.height/this._mOriginalHeight,s=this._mCoordinateCache[this._mSpriteIndex][0]>>0,n=this._mCoordinateCache[this._mSpriteIndex][1]>>0,a=this._mOffsetX*e,o=this._mOffsetY*i,r=this._mDrawWidth*e,h=this._mDrawHeight*i;t.drawImage(this._mRendererTexture,s,n,this._mDrawWidth,this._mDrawHeight,a,o,r,h)}TGE.Sprite.superclass._objectDraw.call(this,t)},_resetCoordinateCache:function(){var t,e;this._mCellWidth=this._mSplitFunc1(this._mRendererTexture.htmlImageWidth/this._mNumColumns),this._mCellHeight=this._mSplitFunc1(this._mRendererTexture.htmlImageHeight/this._mNumRows),this._mCoordinateCache=[];for(var i=0;i<this._mNumRows*this._mNumColumns;i++)t=this._mSplitFunc2((i%this._mNumColumns|0)*this._mCellWidth),e=this._mSplitFunc2((i/this._mNumColumns|0)*this._mCellHeight),this._mCoordinateCache.push([t,e])}},extend(TGE.Sprite,TGE.DisplayObjectContainer),Object.defineProperty(TGE.Sprite.prototype,"image",{get:function(){return this._mSourceImage},set:function(t){t!==this.image&&this.setImage(t)}}),Object.defineProperty(TGE.Sprite.prototype,"originalWidth",{get:function(){return this._mOriginalWidth}}),Object.defineProperty(TGE.Sprite.prototype,"originalHeight",{get:function(){return this._mOriginalHeight}}),TGE.RectMask=function(){TGE.RectMask.superclass.constructor.apply(this,arguments)},TGE.RectMask.prototype={setup:function(t){return TGE.RectMask.superclass.setup.call(this,t),this.maskX=t.maskX||0,this.maskY=t.maskY||0,this.maskWidth=t.maskWidth,this.maskHeight=t.maskHeight,this},_objectDraw:function(t){var e=t._mCanvasContext;e.save(),e.beginPath(),e.rect(this.maskX,this.maskY,void 0!==this.maskWidth?this.maskWidth:this.width,void 0!==this.maskHeight?this.maskHeight:this.height),e.clip(),TGE.RectMask.superclass._objectDraw.call(this,t),e.restore()},_updateAABB:function(){TGE.DisplayObject.prototype._updateAABB.call(this)}},extend(TGE.RectMask,TGE.Sprite),TGE.NativeButton=function(){return TGE.NativeButton.superclass.constructor.call(this),this.textObject=null,this.minWidth=0,this.textPadding=0,this._mUseNative=!0,this},TGE.NativeButton.Platforms={iOS:{rectMask:{roundness:1,borderWidth:0},minWidth:20,textPadding:6,fontFamily:"SF Pro",fontSize:3.75,fontWeight:"bold",light:{backgroundColor:"#eeeeef",textColor:"#007aff"},color:{backgroundColor:"#007aff",textColor:"#fefefe"}},Android:{rectMask:{roundness:.22,borderWidth:0},minWidth:15,textPadding:5,fontFamily:"Roboto",fontSize:3.25,fontWeight:"normal",light:{backgroundColor:"#ffffff",textColor:"#00875f",rectMask:{roundness:.22,borderWidth:.25,borderColor:"#dbdce0"}},color:{backgroundColor:"#00875f",textColor:"#ffffff"}}},TGE.NativeButton.prototype={setup:function(t){if(TGE.NativeButton.superclass.setup.call(this,t),this.height||(this.height=100),this._mUseNative=!this.hasRemoteSetting("buttonType")||0===this.getRemoteSetting("buttonType"),this.theme=this.hasRemoteSetting("nativeTheme")?this.getRemoteSetting("nativeTheme"):t.theme||"color",t.textObject?this.textObject=this.addChild(t.textObject):t.textDef&&(this.textObject=this.addChild((new TGE.Text).setup({textDef:t.textDef,textStyleLocked:this._mUseNative}))),this._mUseNative){this.image=null;var e=getQueryString().previewPlatform||TGE.BrowserDetect.platform;this.setPlatform(e)}return TGE.InCreativeBuilder()&&CB.addEventListener&&CB.addEventListener("modified",this._onModified.bind(this)),this},setPlatform:function(t){if(this._mUseNative){"iPhone"!==t&&"iPad"!==t&&"Mac"!==t||(t="iOS"),TGE.NativeButton.Platforms[t]||(t="Android");var e=TGE.DeepClone(TGE.NativeButton.Platforms[t]),i=e[this.theme];for(var s in i)e[s]=TGE.DeepClone(i[s]);for(var n in e)this._setPlatformProp(n,e[n]);this._setButtonSize()}},_setPlatformProp:function(t,e){var i=this.height/7;switch(t){case"fontSize":e*=i;case"fontFamily":case"fontWeight":case"textColor":this.textObject&&(this.textObject[t]=e);break;case"rectMask":e.borderWidth*=i;default:this[t]=e}},_setButtonSize:function(){if(this._mUseNative){this.textObject._textChanged();var t=this.height/7;this.width=Math.max(t*this.minWidth,t*this.textPadding+this.textObject.textWidth)}this.reapplyLayout()},_onModified:function(t){"remoteSetting"===t.change&&"previewPlatform"===t.id&&this.setPlatform(t.value),"textDef"===t.change&&this.textObject&&this.textObject.textDef===t.id&&this._setButtonSize()}},extend(TGE.NativeButton,TGE.Sprite),TGE.VideoPlayer=function(){TGE.VideoPlayer.superclass.constructor.apply(this,arguments)},TGE.VideoPlayer.Globals={},TGE.VideoPlayer.Wrappers={},TGE.VideoPlayer.State={muted:void 0,hasPlayed:!1,_unlockFunction:null},TGE.VideoPlayer.Analytics="",TGE.VideoPlayer.LoadEvents=["loadstart","loadedmetadata","loadeddata","canplay","canplaythrough","rendered"],TGE.VideoPlayer.PlayEvents=["seeked","playing","waiting","timeupdate","ended"],TGE.VideoPlayer.Log=function(t){"5"!==getQueryString().tgedebug&&TGE.Debug.LogLevel!==TGE.Debug.LOG_VERBOSE||TGE.Debug.Log(TGE.Debug.LOG_INFO,t)},TGE.VideoPlayer.Get=function(t){var e=TGE.VideoPlayer.Wrappers[t];return e&&e._videoPlayer},TGE.VideoPlayer.Suspend=function(t){TGE.VideoPlayer.Log("video: ["+t+"] suspending");var e=TGE.Game.GetInstance().assetManager.getAsset(t,!1);e&&(TGE.VideoPlayer.Wrappers[t]._clearEventCounts(TGE.VideoPlayer.LoadEvents),e.setAttribute("preload","none"),e.load())},TGE.VideoPlayer.Mute=function(t,e){for(var i in TGE.VideoPlayer.Wrappers){var s=TGE.VideoPlayer.Wrappers[i]._videoPlayer;!s||e&&!s.muteSync||s.mute(t)}},TGE.VideoPlayer.prototype={setup:function(t){if(this.assetId=t.assetId,void 0===t.colorDef&&(t.colorDef=(GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS[this.assetId+"_background"]?this.assetId:this.settingsPrefix)+"_background"),t.rotation&&this.getRemoteSetting("orientationLock")&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"video: orientationLock controls the rotation, and is not compatible with a rotation specified in setup"),this.audioManager=TGE.AudioManager.GetInstance(),this.audioSupported="NoAudio"!==this.audioManager.pluginType(),this.audioSupported||(t.muted=!0),TGE.VideoPlayer.superclass.setup.call(this,t),this._playPromise=null,this.paused=!0,this.completed=!1,this.firstPlay=!0,this.frameCache=null,this.cacheTime=-1,this._persistentFrameCache=!1,this._mVolume=void 0!==t.volume?t.volume:this.getRemoteSetting("volume"),this.muteStyle=this.audioSupported||TGE.InCreativeBuilder()?t.muteStyle||this.getRemoteSetting("muteStyle"):"none",t.muted&&"none"===t.muteStyle&&(this.muteStyle="muted",t.muteSync=!1),this.muted=t.muted,this.muteColor=t.muteColor||"#ffffff",this.muteThickness=t.muteThickness||.5,this.muteSync=!1!==t.muteSync,this.aspectHandling=t.aspectHandling||(this.getRemoteSetting("noCropping")?"letterbox":"crop"),this.skipCountdown=t.skipCountdown||0,this.suspendOnRemove=!!t.suspendOnRemove,this.hideVideo="boolean"==typeof t.hideVideo&&t.hideVideo,this._skipable=!0,this._prevFrameTime=0,this._prevEventTime=0,this._progressEvent=0,this._locationEvent=-1,this.loop=!!t.loop,this._loopStart=-1,this._loopEnd=-1,this._loopDir=0,this.videoScale=1,this.xPosition=.5,this.yPosition=.5,this.blurAmountBase=1920,t.muteSync&&(void 0!==t.muted?TGE.VideoPlayer.State.muted=t.muted:void 0===TGE.VideoPlayer.State.muted&&(TGE.VideoPlayer.State.muted=this.audioManager.isMuted()||!this.audioManager.canPlayAudio())),t.assetId){if(this.video=TGE.Game.GetInstance().assetManager.getAsset(t.assetId,!1),this.video){void 0!==t.analytics?TGE.VideoPlayer.Analytics=t.analytics:TGE.VideoPlayer.Analytics||(TGE.VideoPlayer.Analytics=t.assetId);var e=this.wrapper=TGE.VideoPlayer.Wrappers[this.assetId];this.wrapper._videoPlayer=this,e.eventCounts.rendered=0,TGE.VideoPlayer.State._unlockFunction&&(this.stage.removeEventListener("mousedown",TGE.VideoPlayer.State._unlockFunction),this.stage.removeEventListener("mouseup",TGE.VideoPlayer.State._unlockFunction),TGE.VideoPlayer.State._unlockFunction=null),"none"===this.muteStyle&&this.audioSupported&&(TGE.VideoPlayer.State._unlockFunction=function(t){this.log("_unlockFunction "+t.type+" -- current video/global states: "+this.video.muted+" "+TGE.VideoPlayer.State.muted),!this.video.muted&&!TGE.VideoPlayer.State.muted||this.audioManager.isMuted()||"none"!==this.muteStyle||this.mute(!1)}.bind(this),this.log("adding _unlockListeners"),this.stage.addEventListener("mousedown",TGE.VideoPlayer.State._unlockFunction),this.stage.addEventListener("mouseup",TGE.VideoPlayer.State._unlockFunction)),t.loop||!1!==t.loop&&this.getRemoteSetting("videoUpload")?this.video.setAttribute("loop",""):this.video.removeAttribute("loop"),this.addEventListener("deactivate",e._onDeactivate.bind(e)),this.addEventListener("activate",e._onActivate.bind(e)),this.addEventListener("remove",this._onRemove),t.autoplay&&!TGE.Game.IsViewable()?(TGE.Game.AddEventListener("tgeGameViewable",this.play.bind(this)),this.play(!0)):(this.play(!t.autoplay),this.getRemoteSetting("previewVideoCropping")&&(this.addEventListener("resize",this.setLocation),this.setLocation())),this.addEventListener("addedToStage",this._onValidSize.bind(this,t),{oneShot:!0})}this.videoContainer=this.addChild((new TGE.DisplayObjectContainer).setup({})),this.topContainer=this.addChild((new TGE.DisplayObjectContainer).setup({})),this.videoContainer.layout=function(){var t=this.parent,e=t.width,i=t.height;this.x=t.topContainer.x=e*(.5-t.registrationX),this.y=t.topContainer.y=i*(.5-t.registrationY);var s=t.video;if(s){var n=s.videoWidth,a=s.videoHeight;if(this.rotation=0,t.getRemoteSetting("orientationLock")&&n&&a&&i<e!=a<n){this.rotation=this.stage.isLandscape()?-90:90;var o=e;e=i,i=o}}this.width=e,this.height=i,t.topContainer.width=e,t.topContainer.height=i,t.topContainer.rotation=this.rotation,t._resizeVideo()}}return this},_onValidSize:function(t){"blurred"===this.getRemoteSetting("letterboxStyle")&&this._setupLetterboxBlur(),this.videoContainer.addEventListener("drawbegin",this._drawVideo.bind(this)),this.addEventListener("update",this._onUpdate)},log:function(t){TGE.VideoPlayer.Log("video: ["+this.assetId+"] "+t)},addEventListener:function(t,e,i){var s=TGE.VideoPlayer.superclass.addEventListener.call(this,t,e,i);return 0<=TGE.VideoPlayer.LoadEvents.indexOf(t)&&this.wrapper.eventCounts[t]&&(e.call(),i&&i.oneShot&&(this.removeEventListener(t,e),s=null)),s},setLocation:function(t,e){"number"!=typeof t&&(t=this.getRemoteSetting("location")),this.video.duration?(this.pause(),this.seek(t*this.video.duration,e)):this.addEventListener("oncanplaythrough",this.setLocation.bind(this,t,e),{oneShot:!0})},setLocationEvent:function(t){t<0||1<t?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"video: setLocationEvent should be a fraction value 0-1"):this._locationEvent=void 0!==t?t:-1},setLoopPoints:function(t,e){t<0||1<t||e<0||1<e||e<t?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"video: setLoopPoints invalid, need to be fractions 0-1, with location2 > location1"):(this.log("setLoopPoints: "+t+" "+e),this._loopStart=void 0!==t?t:-1,this._loopEnd=void 0!==e?e:-1,this._loopDir=0<this._loopEnd?1:0)},play:function(t){var e=this.video;if(e&&(this.paused||t)){this.paused=!0===t,this.paused||0!==this._progressEvent||this._logProgress(0),this.completed=!1,this._destroyFrameCache(),this._prevEventTime=0,this._skipable=0===this.skipCountdown;var i=this.shouldBeMuted();return this.muteSync&&(TGE.VideoPlayer.State.muted=i),e.muted=i||this.paused,this.volume=this._mVolume,this._playPromise&&0===this.video.currentTime?(this.log("play with already-pending Promise, just setting muted: "+TGE.VideoPlayer.State.muted+" pauseState: "+this.paused),this._setPlaying(),this._playPromise):(this._setCurrentTime(0),this.log("play with muted: "+TGE.VideoPlayer.State.muted+" pauseState: "+this.paused),this._play("play"))}},_play:function(e){var i=this,s=this.video;return this._setPlaying(),this._playPromise?this.log("skipping play, with previous Promise unresolved"):(this._playPromise=s.play(),this._playPromise&&this._playPromise.then(function(){i._playPromise=null,i.log("Promise resolved with pause state: "+i.paused+" video: "+s.paused+" muted: "+s.muted),i.paused!==s.paused&&(i.paused?s.pause():i.firstPlay&&(i.firstPlay=!1,i._play("promise")))}).catch(function(t){i._playPromise=null,i.paused?i.log("play with pauseState caught: "+t):s.muted?i.log(e+" failed: "+t):(i.log(e+" failed, switching to muted: "+t),i.mute(!0),s.play())}).finally(function(){i.paused&&i.muteSync&&(s.muted=TGE.VideoPlayer.State.muted,i.log("Promise restored muted state: "+s.muted))})),this._playPromise},_setPlaying:function(){this.paused||(this.wrapper._playTime=(new Date).getTime(),TGE.VideoPlayer.State.hasPlayed=!0)},resume:function(){this.volume=this._mVolume,this.paused&&(this.paused=!1,this._resume("resume()"))},_resume:function(t){if(this.video&&this.video.paused&&this.width&&this.height)return this.log("_resume via "+t),this._play(t)},pause:function(){this.log("pause, from current state: "+this.paused),this.paused||(this.paused=!0,this._pause())},_pause:function(){!this.video||this.video.paused||this._playPromise||this.video.pause()},suspend:function(){this.video&&(this.stop(),this._destroyFrameCache(),TGE.VideoPlayer.Suspend(this.assetId))},unsuspend:function(t){this.video&&"none"===this.video.getAttribute("preload")?(this.log("unsuspend"),this.addEventListener("canplaythrough",t,{oneShot:!0}),this.video.setAttribute("preload","auto"),this.video.load()):t.call(this)},_onUpdate:function(){var t=this.video;if(this.paused)0===this._locationEvent&&(this._locationEvent=-1,this._sendEvent("location"));else{this._checkProgress();var e=t.currentTime,i=e/t.duration;if(0<=this._locationEvent&&1!==this._locationEvent&&i>=this._locationEvent&&(this._locationEvent=-1,this._sendEvent("location")),0<this._loopDir){var s=e-this._prevFrameTime;this._prevFrameTime=e,(i+=s/t.duration)>this._loopEnd&&this._loop()}}var n=TGE.Game.GetInstance().audioManager;!TGE.InCreativeBuilder()&&!this.muteSync||window.PromoBuilder&&PromoBuilder._sInstance||n.isMuted()&&TGE.InCreativeBuilder()||n._mPlugin.mute(TGE.VideoPlayer.State.muted,n.volume)},stop:function(){this.pause(),this.removeEventListenersFor("seeked"),this.setLoopPoints()},seek:function(t,e){this.volume=this._mVolume,this._seek(t,e)},_seek:function(t,e){if(this.video){if(t>this.video.duration)return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"video: seek offset > duration");"function"==typeof e&&this.addEventListener("seeked",e,{oneShot:!0}),this.log("seek to: "+t),this.completed=!1,this._persistentFrameCache||this._destroyFrameCache(),this._setCurrentTime(t)}},mute:function(t){if(this.video&&(this.log("set mute: "+t+" -- current video/global states: "+this.video.muted+" "+TGE.VideoPlayer.State.muted),this.video.muted=TGE.VideoPlayer.State.muted=!1!==t,this.handleEvent({type:"mute",muted:TGE.VideoPlayer.State.muted}),this.muteSync)){var e=TGE.Game.GetInstance().audioManager;e._mPlugin.mute(TGE.VideoPlayer.State.muted,e.volume)}},shouldBeMuted:function(){var t=this.audioManager,e=TGE.VideoPlayer.State.hasPlayed;return this.log("shouldBeMuted check, AM:"+t.isMuted()+" locked:"+!t.canPlayAudio()+" State:"+TGE.VideoPlayer.State.muted+" loadedMuted:"+this.wrapper.loadedMuted+" this.muted:"+this.muted+" Paused:"+this.paused),!!t.isMuted()||(void 0!==this.muted?this.muted:e?TGE.VideoPlayer.State.muted:!(TGE.Game.GetInstance().timeSinceLastInteraction()||t.canPlayAudio()))},getScreenRect:function(t,e){t||(t=this.assetId+"_safeZone",TGE.RemoteSettings.HasSetting(t+"X")||(t=this.settingsPrefix+"_safeZone"));var i,s,n=this.videoContainer,a=this.video.videoWidth||n.width,o=this.video.videoHeight||n.height,r=TGE.RemoteSettings(t+"X")-this.xPosition,h=TGE.RemoteSettings(t+"Y")-this.yPosition,l=r*a*this.videoScale,d=h*o*this.videoScale,u=Math.max(a,o)*this.videoScale;TGE.RemoteSettings.HasSetting(t+"Width")?(i=TGE.RemoteSettings(t+"Width")*(e?u:a*this.videoScale),s=TGE.RemoteSettings(t+"Height")*(e?u:o*this.videoScale)):i=s=0;var m,c,g=Math.min(a*this.videoScale,n.width)/2,f=Math.min(o*this.videoScale,n.height)/2;return(m=l-i/2)<-g&&(i-=c=-g-m,l+=c/2,m=-g),g<m+i&&(i-=c=m+i-g,l-=c/2),(m=d-s/2)<-f&&(s-=c=-f-m,d+=c/2,m=-f),f<m+s&&(s-=c=m+s-f,d-=c/2),new TGE.Rectangle(l,d,i,s)},_setCurrentTime:function(t){this._prevFrameTime=t,this.video.currentTime!==t&&(this.video.currentTime=t)},_nearEnd:function(){return!this.paused&&this.video.duration-this.video.currentTime<.1},_setupLetterboxBlur:function(){var t=this._getBlurAmount();this.blurHelper=new TGE.BlurHelper({width:this.width/2,height:this.height/2,blurAmount:t,fillToEdge:!0})},_getBlurAmount:function(){var t=this.width>this.height?this.width:this.height,e=this.getRemoteSetting("blurAmount");return TGE.BrowserDetect.onAndroid&&100<e&&(e=100),e/this.blurAmountBase*t},_resizeVideo:function(){var t,e,i,s,n,a,o,r,h=this.video,l=h.videoWidth,d=h.videoHeight,u=this.videoContainer,m=u.width,c=u.height;l&&d&&m&&c&&("blurred"===this.getRemoteSetting("letterboxStyle")&&this.blurHelper&&(this.blurHelper.blurAmount=this._getBlurAmount()),i=l,s=d,"letterbox"===this.aspectHandling||!this.getRemoteSetting("zoomedPreview")&&this.getRemoteSetting("previewVideoCropping")?(o=m/i,r=c/s,this.videoScale=Math.min(o,r),this.xPosition=.5,this.yPosition=.5):(this.getRemoteSetting("useSafeZone")&&(i*=this.getRemoteSetting("safeZoneWidth"),s*=this.getRemoteSetting("safeZoneHeight")),o=m/i,r=c/s,this.videoScale=Math.min(o,r,Math.max(m/l,c/d)),i=Math.max(i,Math.min(l,Math.ceil(m/this.videoScale))),s=Math.max(s,Math.min(d,Math.ceil(c/this.videoScale))),a=l-(n=.5*i),t=TGE.Math.Clamp(l*this.getRemoteSetting("safeZoneX"),n,a),this.xPosition=t/l,a=d-(n=.5*s),e=TGE.Math.Clamp(d*this.getRemoteSetting("safeZoneY"),n,a),this.yPosition=e/d),this.overlay&&this.overlay.reapplyLayout())},_drawVideo:function(t){var e,i,s,n,a,o,r,h;this._resizeVideo();var l=t.canvasContext,d=this.video,u=d.videoWidth,m=d.videoHeight,c=this.videoContainer,g=Math.ceil(c.width),f=Math.ceil(c.height),_=this.videoScale;if((this.frameCache||(TGE.BrowserDetect.oniOS||"Safari"===TGE.BrowserDetect.browser)&&!TGE.Game.GetInstance().timeSinceLastInteraction()&&!this.loop&&this._nearEnd())&&(this._createFrameCache(),u&&m&&!this.completed&&d.currentTime>this.cacheTime&&this._updateFrameCache(),d=this.frameCache),l.fillStyle=this.backgroundColor||"black",l.fillRect(0,0,g,f),u&&m){if(!this.hideVideo||"blurred"===this.getRemoteSetting("letterboxStyle")){if(s=u,n=m,"letterbox"===this.aspectHandling||!this.getRemoteSetting("zoomedPreview")&&this.getRemoteSetting("previewVideoCropping"))a=g-(r=Math.ceil(s*_))>>1,o=f-(h=Math.ceil(n*_))>>1,l.drawImage(d,a,o,r,h);else{e=this.xPosition*u,i=this.yPosition*m,e=e-.5*(s=Math.min(2*Math.min(e,u-e),Math.ceil(g/_)))|0,i=i-.5*(n=Math.min(2*Math.min(i,m-i),Math.ceil(f/_)))|0,a=g-(r=Math.min(Math.ceil(s*_),g))>>1,o=f-(h=Math.min(Math.ceil(n*_),f))>>1;var p=TGE.BrowserDetect.oniOS?parseInt(TGE.BrowserDetect.OSversion.match(/\d+$/)[0],10):0;!TGE.BrowserDetect.oniOS||12<p?l.drawImage(d,e,i,s,n,a,o,r,h):(l.save(),l.beginPath(),l.rect(0,0,this.videoContainer.rotation?this.height:this.width,this.videoContainer.rotation?this.width:this.height),l.clip(),p<10?l.drawImage(d,a,o,r,h):(s=u*_,n=m*_,e*=-_,i*=-_,e+=a,i+=o,l.drawImage(d,0|e,0|i,0|s,0|n)),l.restore())}if("blurred"===this.getRemoteSetting("letterboxStyle")){TGE.InCreativeBuilder()&&(this.blurHelper.blurAmount=this._getBlurAmount()),this.blurHelper.applySizes(this.width,this.height),l.save(),l.setTransform(1,0,0,1,0,0);var T=new TGE.Vector2,E=new TGE.Vector2(g,f),v=new TGE.Vector2(a,o),G=new TGE.Vector2(a+r,o+h);c._mWorldTransform.transformPoint(T),c._mWorldTransform.transformPoint(E),c._mWorldTransform.transformPoint(v),c._mWorldTransform.transformPoint(G);var y=TGE.GameStage._sOrientationLock.active&&t.renderer===this._mFullStage._mRenderer,b=y?l.canvas.height:l.canvas.width,w=y?l.canvas.width:l.canvas.height;T.x=TGE.Math.Clamp(T.x,0,b),T.y=TGE.Math.Clamp(T.y,0,w),E.x=TGE.Math.Clamp(E.x,0,b),E.y=TGE.Math.Clamp(E.y,0,w),v.x=TGE.Math.Clamp(v.x,0,b),v.y=TGE.Math.Clamp(v.y,0,w),G.x=TGE.Math.Clamp(G.x,0,b),G.y=TGE.Math.Clamp(G.y,0,w);var S,C=Math.min(T.x,E.x),L=Math.min(T.y,E.y),A=Math.max(T.x,E.x)-C,x=Math.max(T.y,E.y)-L;if(a=Math.min(v.x,G.x),o=Math.min(v.y,G.y),r=Math.max(v.x,G.x)-a,h=Math.max(v.y,G.y)-o,y)o=this.stage.isLandscape()?(S=C,C=w-L-x,L=S,S=a,a=w-o-h,S):(S=C,C=L,L=b-S-A,S=a,a=o,b-S-r),S=A,A=x,x=S,S=r,r=h,h=S;var D=Math.ceil(a-C),R=Math.ceil(C+A-a-r),O=Math.ceil(o-L),P=Math.ceil(L+x-o-h);(1<D||1<R||1<O||1<P||this.hideVideo)&&(this.hideVideo||(l.beginPath(),1<D&&l.rect(C,L,D,x),1<R&&l.rect(a+r,L,R,x),1<O&&l.rect(C,L,A,O),1<P&&l.rect(C,o+h,A,P),l.clip()),this.blurHelper.drawBlurredImage(l.canvas,l,a,o,r,h,C,L,A,x)),l.restore()}}if(this.wrapper.eventCounts.rendered||!this.wrapper.eventCounts.playing&&!this.wrapper.eventCounts.canplay||this.wrapper._onVideoEvent({type:"rendered",renderer:t.renderer,canvasContext:t.canvasContext}),!this._playPromise){var I=this.video;if(!(TGE.Game.GetUpdateRoot().stage instanceof TGE.GameStage)&&!this.paused||this.paused&&!I.paused)this.paused&&!I.paused&&this.log("pause due to sync mismatch"),this._pause();else if(!this.paused&&!this.completed&&!this._nearEnd()&&this.wrapper._playTime){var M=(new Date).getTime(),F=TGE.RemoteSettings.HasSetting("VideoPlayer_watchdogTimer")?TGE.RemoteSettings("VideoPlayer_watchdogTimer"):500;M>this.wrapper._playTime+F&&(this.log("watchdog playTime: "+this.wrapper._playTime+", now: "+M),this._play("watchdog"))}}}},_createFrameCache:function(t){this._persistentFrameCache=!!t,this.frameCache||(this.log("creating frameCache at currentTime: "+this.video.currentTime),this.frameCache=document.createElement("canvas"),this.cacheTime=-1)},_destroyFrameCache:function(){this.frameCache&&(this.log("destroy frameCache"),this.frameCache.remove(),this.frameCache=null)},_updateFrameCache:function(){var t=this.video,e=this.frameCache;this.cacheTime=t.currentTime,e.width=t.videoWidth,e.height=t.videoHeight,e.getContext("2d").drawImage(t,0,0,t.videoWidth,t.videoHeight)},_loop:function(){0<=this._locationEvent&&1!==this._locationEvent&&this._locationEvent<=this._loopEnd&&(this._locationEvent=-1,this._sendEvent("location")),this._progressEvent/100<=this._loopEnd&&this._logProgress(this._progressEvent),this.getRemoteSetting("audioDuringLoop")||(this.volume=0),this._sendEvent("loop"),0<this._loopDir&&(this._loopDir=0,this._seek(this._loopStart*this.video.duration,function(){0<this._loopEnd&&(this._loopDir=1)}.bind(this)))},_checkProgress:function(){if(this.video.duration&&!this.paused){var t=this.video.currentTime/this.video.duration*100;(t>this._progressEvent||t<25&&100===this._progressEvent)&&this._logProgress(this._progressEvent)}var e=0|this.video.currentTime;e!==this._prevEventTime&&(this._prevEventTime=e,this._sendEvent("timeupdate"),!this._skipable&&this.skipButton&&(e>=this.skipCountdown?(this._skipable=!0,this._sendEvent("skippable")):this._sendEvent("skipcountdown",{countdown:this.skipCountdown-e})))},_logProgress:function(t){this.assetId===TGE.VideoPlayer.Analytics&&(TGE.Events.logVideoProgress(t),this._progressEvent=t+25)},_sendEvent:function(t,e){var i={type:t,video:this.video,currentTime:this.video.currentTime,duration:this.video.duration};if(e)for(var s in e)i[s]=e[s];this.handleEvent(i)},_onComplete:function(t){0<this._loopEnd?this._loop():(this.completed=!0,(this.paused=!0)!==t&&100===this._progressEvent&&this._logProgress(100),1===this._locationEvent&&(this._locationEvent=-1,this._sendEvent("location")),this._sendEvent("complete",{skipped:!0===t}))},_onRemove:function(){this.paused||this.stop(),this.video&&this._setCurrentTime(0),this.completed||!this.suspendOnRemove||TGE.InCreativeBuilder()||this.suspend(),this.wrapper._videoPlayer===this&&(this.wrapper._videoPlayer=null),this.blurHelper&&this.blurHelper.cleanupCanvases()}},extend(TGE.VideoPlayer,TGE.DisplayObjectContainer),TGE.Window=function(t,e){TGE.Window.superclass.constructor.call(this),this._mLayers={},this._mFadeDuration=0,this._mFadeColor=null,this._mFadePanel=null,this._mFadingOut=!1,this._mCallback=null,this._mUpdateListenerID=null,this.registrationX=0,this.registrationY=0,this.width=t,this.height=e,this.mouseEnabled=!0},TGE.Window._sTrackWindows=!1,TGE.Window._sActiveWindows=[],TGE.Window.prototype={setup:function(t){return void 0!==t.layout||void 0!==t.onResize||this._mEventListeners.resize&&0!==this._mEventListeners.resize.length||(t.layout="match"),TGE.Window.superclass.setup.call(this,t),this},transitionToWindow:function(t){var e=this._createNewWindow(t);return this._mFadeDuration=0,e.show(this.stage,this.close.bind(this)),e},overlayWindow:function(t){var e=this._createNewWindow(t);return e.show(this),e},resetToWindow:function(t){var e=this._createNewWindow(t);return this.stage.removeChildren(),e.show(this.stage),e},createLayer:function(t){var e=this.addChild((new TGE.DisplayObjectContainer).setup({registrationX:0,registrationY:0,width:this.width,height:this.height,instanceName:t,layout:"match"}));this._mLayers[t]=e},getLayer:function(t){return t in this._mLayers?this._mLayers[t]:null},show:function(t,e){if(t.addChild(this),this._mCallback="function"==typeof e?e:null,0<this._mFadeDuration?(this.alpha=0,this._mUpdateListenerID=this.addEventListener("update",this._updateTransitions.bind(this))):null!==this._mCallback&&(this._mCallback.call(),this._mCallback=null),TGE.Window._sTrackWindows){var i=this._windowName();TGE.Window._sActiveWindows.push(i),this.addEventListener("remove",this._removeFromDebugList.bind(this,i))}},close:function(t){this._mCallback="function"==typeof t?t:null,0<this._mFadeDuration?(this._mFadingOut=!0,"number"!=typeof this._mUpdateListenerID&&(this._mUpdateListenerID=this.addEventListener("update",this._updateTransitions.bind(this)))):this._forceClose()},setupFade:function(t,e){this._mFadeColor=e||null,this._mFadeDuration=t,null!==this._mFadePanel&&null===this._mFadeColor&&this._destroyFadePanel(),null!==this._mFadePanel&&(this._mFadePanel.backgroundColor=this._mFadeColor)},_createNewWindow:function(t){var e=new t.windowClass(this.width,this.height);return e.setup(t),"number"==typeof t.fadeTime&&e.setupFade(t.fadeTime),e},_forceClose:function(){this.markForRemoval(),null!==this._mCallback&&(this._mCallback.call(),this._mCallback=null)},_windowName:function(){for(var t in window)if(window[t]==this.constructor)return t;return"TGE.Window"},_removeFromDebugList:function(t){if(TGE.Window._sTrackWindows)for(var e=TGE.Window._sActiveWindows.length-1;0<=e;e--)if(TGE.Window._sActiveWindows[e]===t)return void TGE.Window._sActiveWindows.splice(e,1)},_updateTransitions:function(t){var e=!1,i=t.elapsedTime;null!==this._mFadeColor&&null===this._mFadePanel&&this._setupFadePanel();var s=null===this._mFadePanel?this.alpha:1-this._mFadePanel.alpha;0<this._mFadeDuration?this._mFadingOut?(s-=i*(1/this._mFadeDuration))<0&&(s=0,this._forceClose()):s<1&&1<=(s+=i*(1/this._mFadeDuration))&&(s=1,e=!0,this.removeEventListener("update",this._mUpdateListenerID),this._mUpdateListenerID=null):(s=1,e=!0),null===this._mFadePanel?this.alpha=s:(this._mFadePanel.visible=!0,this._mFadePanel.alpha=1-s,this.alpha=1),e&&null!==this._mCallback&&(this._mCallback.call(),this._mCallback=null)},_setupFadePanel:function(){this._mFadePanel=(new TGE.DisplayObjectContainer).setup({width:this.width,height:this.height,backgroundColor:this._mFadeColor}),this._mFadePanel.registrationX=this._mFadePanel.registrationY=0,this.addChild(this._mFadePanel)},_destroyFadePanel:function(){null!==this._mFadePanel&&(this._mFadePanel.markForRemoval(),this._mFadePanel=null)}},extend(TGE.Window,TGE.Sprite),TGE.NativeSystemFont="Native System Font",TGE.Text=function(){return TGE.Text.superclass.constructor.call(this),this.text="",this.textID="",this.fontFamily="Arial",this.fontSize=20,this.fontWeight="normal",this.fontStyle="normal",this.hAlign="center",this.vAlign="middle",this.textColor=null,this.wrapWidth=-1,this.lineSpacing=.05,this.strokeWidth=0,this.strokeColor=null,this.cacheAsBitmap=TGE.Text.CacheByDefault,this.cacheBitmapScale=1,this._mPreviousText=null,this._mPreviousTextID=null,this._mPreviousFont=null,this._mPreviousWrapWidth=null,this._mPreviousLineSpacing=0,this._mLines=[],this._mLineHeight=0,this._mLineSpace=0,this._mCachePadding=0,this._mFontFallbacks=[],this._mVerticalPosition=0,this._mOffscreenCanvas=null,this._mOffscreenContext=null,this._mTx=1,this._mTy=1,this._mRendererImage=null,this.cacheAsBitmap&&(this._mOffscreenCanvas=document.createElement("canvas"),this._mOffscreenContext=this._mOffscreenCanvas.getContext("2d")),this},TGE.Text.CacheByDefault=!1,TGE.Text.DefaultBitmapScale=2,TGE.Text.CachePaddingPercent=.4,TGE.Text.LoggedFontDeprecated=!1,TGE.Text._sAsianLanguages=["ja","zh","tw","ko","th"],TGE.Text._sRightToLeftLangages=["ar","he","he-il","ar-ae","ar-bh","ar-dz","ar-eg","ar-iq","ar-jo","ar-sa"],TGE.Text.TextIDs=null,TGE.Text.Language="en",TGE.Text.LocalizedStrings=null,TGE.Text.GetString=function(t){TGE.Text.TextIDs=TGE.Text.LocalizedStrings=TGE.Text.LocalizedStrings||TGE.Text.TextIDs||{};var e=TGE.Text.TextIDs[t];return e?"string"==typeof e?e:e[TGE.RemoteSettings("lang")]||e.en||"":(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Text.TextIDs has no translations for id '"+t+"'"),"")},TGE.Text.prototype={setup:function(t){if(TGE.Text.superclass.setup.call(this,t),this.textDef=t.textDef||null,this.textStyleLocked=t.textStyleLocked||!1,("string"==typeof t.text||"number"==typeof t.text)&&(this.text=t.text),"string"==typeof t.textID&&(this.textID=t.textID),"string"==typeof t.fontFamily&&(this.fontFamily=t.fontFamily),"number"==typeof t.fontSize&&(this.fontSize=t.fontSize),"string"==typeof t.fontStyle&&(this.fontStyle=t.fontStyle),"string"==typeof t.hAlign&&(this.hAlign=t.hAlign),"string"==typeof t.vAlign&&(this.vAlign=t.vAlign),"string"==typeof t.color&&(this.textColor=t.color),"string"==typeof t.textColor&&(this.textColor=t.textColor),"number"==typeof t.wrapWidth&&(this.wrapWidth=t.wrapWidth),"number"!=typeof t.lineSpacing||(this.lineSpacing=t.lineSpacing),"number"==typeof t.strokeWidth&&(this.strokeWidth=t.strokeWidth),"string"==typeof t.strokeColor&&(this.strokeColor=t.strokeColor),this.cacheAsBitmap="boolean"==typeof t.cacheAsBitmap?t.cacheAsBitmap:TGE.Text.CacheByDefault,this.cacheBitmapScale="number"==typeof t.cacheBitmapScale?t.cacheBitmapScale:TGE.Text.DefaultBitmapScale,Array.isArray(t.fontFallbacks)&&(this.fontFallbacks=t.fontFallbacks),"string"!=typeof t.fontWeight||"bold"!==t.fontWeight&&"bolder"!==t.fontWeight&&"lighter"!==t.fontWeight&&"normal"!==t.fontWeight){if("number"==typeof t.fontWeight){var e=parseInt(this.fontWeight);e&&(e<100||900<e)?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"fontWeight must be bold, bolder, lighter, normal, or an int between 100 and 900"):this.fontWeight=t.fontWeight}}else this.fontWeight=t.fontWeight;return"string"==typeof t.font&&this._splitUpFont(t.font),"string"==typeof t.textDef&&(GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS[t.textDef]?this._applyTextDef(t.textDef):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"GameConfig.TEXT_DEFS is missing entry for: "+t.textDef)),this.cacheAsBitmap&&!this._mOffscreenCanvas&&(this._mOffscreenCanvas=document.createElement("canvas"),this._mOffscreenContext=this._mOffscreenCanvas.getContext("2d")),this.text=this._getText(),this._textChanged(),this.text=this._rtlLanguage()?this._reverseSymbols():this.text,this._textChanged(),this},_getText:function(){return this.textID?TGE.Text.GetString(this.textID):this.text.toString()},_textChanged:function(t){if(!TGE.GameWorldEntity||this._mOffscreenCanvas){var e=this._mOffscreenContext?this._mOffscreenContext:this._mFullStage._mRenderer.getCanvasContext();e.save(),e.font=this.font,this._mLines=[],this._mLineHeight=30,this._mLineSpace=0;try{var i=this.font.indexOf("px"),s=this.font.substring(0,i).replace(/[^\d.]/g,"");this._mLineHeight=parseInt(s,10),this._mLineSpace=this._mLineHeight*this.lineSpacing>>0,this._mLineHeight+=this._mLineSpace}catch(t){}if(0<this.wrapWidth||-1!==this.text.indexOf("\n")){var n=this._asianLanguage(),a=1;if("justify"===this.hAlign)a=e.measureText("     ").width/5;this.width=this.wrapWidth;var o=0<this.wrapWidth?this.wrapWidth:Number.MAX_VALUE;this.textWidth=0;for(var r=this.text.split("\n"),h=0;h<r.length;++h){for(var l=this._splitLine(r[h]),d=l[0],u=e.measureText(d).width,m=1;m<l.length;m++){var c=d+(n?"":" ")+l[m];u=(g=e.measureText(c)).width>o?(this._addLine(d,u,a,!1),d=l[m],e.measureText(d).width):(d=c,g.width)}this._addLine(d,u,a,!0)}}else{this._mLines.push(this.text);var g=e.measureText(this.text);this.textWidth=this.width=g.width}if(this.height=this._mLineHeight*this._mLines.length-this._mLineSpace,this.registrationX=null===this.hAlign||"center"===this.hAlign?.5:"left"===this.hAlign||"justify"===this.hAlign?0:1,this.registrationY=null===this.vAlign||"middle"===this.vAlign?.5:"top"===this.vAlign?0:1,this._mLocalTransformDirty=!0,this._mVerticalPosition=0,"top"===this.vAlign){var f=this.measureTextAdvanced(e,this._mLines[0]);this._mVerticalPosition=f.actualBoundingBoxAscent}else if("middle"===this.vAlign){var _=(this._mLines.length-1)*this._mLineHeight;f=this.measureTextAdvanced(e,this._mLines[this._mLines.length-1]);this._mVerticalPosition=-_/2+f.actualBoundingBoxAscent/2}else if("bottom"===this.vAlign){_=(this._mLines.length-1)*this._mLineHeight;_+=(f=this.measureTextAdvanced(e,this._mLines[this._mLines.length-1])).actualBoundingBoxDescent,this._mVerticalPosition=-_}if(e.restore(),this.cacheAsBitmap)if(t){this._mCachePadding=this._mLineHeight*TGE.Text.CachePaddingPercent,this._mOffscreenCanvas.width=0;m=(this.width+2*this._mCachePadding)*this.cacheBitmapScale;var p=(this.height+2*this._mCachePadding)*this.cacheBitmapScale,T=t.getImageSize(m),E=t.getImageSize(p);if(this._mTx=m/T,this._mTy=p/E,this._mOffscreenCanvas.width=T,this._mOffscreenCanvas.height=E,this._mOffscreenContext.clearRect(0,0,this._mOffscreenCanvas.width,this._mOffscreenCanvas.height),t.alphamapOffscreenText()){this._mOffscreenContext.fillStyle="#000",this._mOffscreenContext.fillRect(0,0,this._mOffscreenCanvas.width,this._mOffscreenCanvas.height);var v=this.textColor;this.textColor="#fff",this._objectDraw(null,this._mOffscreenContext),this.textColor=v}else this._objectDraw(null,this._mOffscreenContext);this._mRendererImage=t.updateTextImage(this._mRendererImage,this._mOffscreenCanvas)}else this._mPreviousText=this._mPreviousTextID=null;this.parent&&this.handleEvent(TGE._ResizeEvent)}},_rtlLanguage:function(){return-1!==TGE.Text._sRightToLeftLangages.indexOf(TGE.RemoteSettings("lang"))&&this._endPunctuation()},_asianLanguage:function(){var t=TGE.RemoteSettings("lang").split("-")[0];return-1!==TGE.Text._sAsianLanguages.indexOf(t)},_endPunctuation:function(){if("!"==this.text[this.text.length-1]||"."==this.text[this.text.length-1]||"?"==this.text[this.text.length-1]||":"==this.text[this.text.length-1])return!0},_reverseSymbols:function(){for(var t="",e=this._mLines[this._mLines.length-1],i="",s=this.text[this.text.length-1],n=0;n<e.length-1;n++)t+=e[n];for(n=0;n<this._mLines.length;n++)n!=this._mLines.length-1&&(i+=this._mLines[n],i+=" ");return i+s+t},_splitLine:function(t){return this._asianLanguage()?t||[""]:t.split(" ")},_addLine:function(t,e,i,s){if(0<this.wrapWidth&&"justify"===this.hAlign&&!s){var n=this.wrapWidth-e,a=Math.round(n/i),o=t.split(" "),r=o.length;if(1<r){for(var h=[],l=1;l<=r-1;l++){var d=Math.floor(a/(r-1)),u=Array(d+2).join(" ");h.push(u)}var m=a-d*h.length;if(0<m){for(var c=[],g=h.length,f=0;f<g;f++)c.push(f);for(f=0;f<g;f++){var _=Math.floor(Math.random()*g),p=c[f];c[f]=c[_],c[_]=p}for(f=0;f<m;f++)h[c[f]]=h[c[f]]+" "}t="";for(l=0;l<r-1;l++)t=(t=t.concat(o[l])).concat(h[l]);t=t.concat(o[l])}e+=a*i}this._mLines.push(t),this.width=Math.max(this.width,e),this.textWidth=Math.max(this.textWidth,e)},_applyTextDef:function(t){var e,i=t;if("string"==typeof t&&(GameConfig.TEXT_DEFS?(i=GameConfig.TEXT_DEFS[t],(e=GameConfig.TEXT_DEFS[t+"_"+TGE.RemoteSettings("lang")])&&e.textDef===t&&(e=null)):i=null),i)if(i.textDef&&this._applyTextDef(i.textDef),i.pickTextDef){var s=i.pickTextDef.call(this,this.stage.height/this.stage.width);i[s]?this._applyTextDef(i[s]):TGE.Debug.Log(TGE.Debug.LOG_ERROR,s+" sub-object is not defined for textDef: "+t)}else i.portrait?this._applyTextDef(this.stage.isLandscape()?i.landscape:i.portrait):(this._applyTextDefProps(i),e&&this._applyTextDefProps(e))},_applyTextDefProps:function(t){for(var e in t)"textDef"===e||null==t[e]||this.textStyleLocked&&"text"!==e||(this[e]=t[e])},_objectDraw:function(t,e){if(this.textDef&&this._applyTextDef(this.textDef),this.textID||null!==this.text&&""!==this.text)if(this._mPreviousText===this._getText()&&this._mPreviousTextID===this.textID&&this._mPreviousLineSpacing===this.lineSpacing&&this._mPreviousFont===this.font&&this._mPreviousWrapWidth===this.wrapWidth||(this._mPreviousTextID=this.textID,this._mPreviousText=this.text=this._getText(),this._mPreviousLineSpacing=this.lineSpacing,this._mPreviousFont=this.font,this._mPreviousWrapWidth=this.wrapWidth,this._mLines=[],e||this._textChanged(t)),0===this._mLines.length&&this._mLines.push(this.text),this.cacheAsBitmap&&!e)this._mRendererImage||(this._mRendererImage=t.updateTextImage(this._mRendererImage,this._mOffscreenCanvas)),t.drawTextImage(this._mRendererImage,this.textColor,this.width,this.height,this._mCachePadding,this._mTx,this._mTy);else{var i=e||t.getCanvasContext();if(e){var s="center"===this.hAlign?this.width/2:"justify"===this.hAlign||"left"===this.hAlign?0:this.width;s+=this._mCachePadding,s*=this.cacheBitmapScale;var n=(this.height/2+this._mCachePadding)*this.cacheBitmapScale;i.setTransform(this.cacheBitmapScale,0,0,this.cacheBitmapScale,s,n)}else{var a=null!==this._mFullStage&&1!==this._mFullStage._mScale?this._mFullStage._mScale:1;t.setWorldTransform(this._mWorldTransformNoReg,a)}i.textAlign=null!==this.hAlign?"justify"===this.hAlign?"left":this.hAlign:"center",i.textBaseline="alphabetic",i.font=null!==this.font?this.font:"Arial",i.fillStyle=null!==this.textColor?this.textColor:"#000",0<this.strokeWidth&&(i.lineWidth=this.strokeWidth,i.strokeStyle=null!==this.strokeColor?this.strokeColor:"#fff",i.lineJoin="round");n=this._mVerticalPosition;for(var o=0;o<this._mLines.length;o++)0<this.strokeWidth&&i.strokeText(this._mLines[o],0,n),null===this.textColor&&0!==this.strokeWidth||i.fillText(this._mLines[o],0,n),n+=this._mLineHeight;0<this.strokeWidth&&(i.lineJoin="miter")}},measureTextAdvanced:function(t,e){var i=t.measureText(e);if("number"==typeof i.actualBoundingBoxAscent&&"number"==typeof i.actualBoundingBoxDescent)return i;var s=Math.ceil(i.width)||1,n=2*this._mLineHeight,a=document.createElement("canvas");a.width=s,a.height=n;var o=a.getContext("2d");o.beginPath(),o.rect(0,0,s,n),o.fillStyle="white",o.fill();var r=Math.floor(s/2),h=Math.floor(n/2);o.font=this.font,o.fillStyle="black",o.textAlign="center",o.textBaseline="alphabetic",o.fillText(e,r,h);for(var l=r,d=h,u=o.getImageData(0,0,s,n),m=0;m<n;m++)for(var c=0;c<s;c++){var g=m*(4*s)+4*c;u.data[g]<=100&&(m<l&&(l=m),d<m&&(d=m))}return{width:i.width,actualBoundingBoxAscent:h-l,actualBoundingBoxDescent:d-h}},_splitUpFont:function(t){t.match(/^(normal\s|italic\s|)(bolder\s|bold\s|lighter\s|normal\s|[0-9]{3}\s|)[0-9]+\.?[0-9]*(px|pt)\s[A-z0-9-,\s]+$/)||t.match(/^(bolder\s|bold\s|lighter\s|normal\s|)(normal\s|italic\s|[0-9]{3}\s|)[0-9]+\.?[0-9]*(px|pt)\s[A-z0-9-,\s]+$/)||TGE.Debug.Log(TGE.Debug.LOG_ERROR,t+" is incorrect font format. Correct format is: [fontStyle](optional) [fontWeight](optional) [fontSize]px [fontFamily]"),TGE.Text.LoggedFontDeprecated||(TGE.Text.LoggedFontDeprecated=!0,TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Font property is deprecated. Use fontFamily, fontSize, fontWeight, and fontStyle."));var e=t.match(/\bitalic\b/);e&&(this.fontStyle=e[0]);var i=t.match(/\b(bolder|bold|lighter|[0-9]{1,3})(?=\s)/g);i&&(this.fontWeight=isNaN(i[0])?i[0]:parseFloat(i[0]));var s=t.match(/[0-9]+\.?[0-9]*(?=(px|pt))/g);s&&(this.fontSize=parseFloat(s[0]));var n=t.match(/(?:px\s|pt\s)([A-z0-9-,\s]+)$/);n&&(this.fontFamily=n[1])}},extend(TGE.Text,TGE.DisplayObjectContainer),Object.defineProperty(TGE.Text.prototype,"font",{get:function(){var t=this.fontFamily;if(t===TGE.NativeSystemFont)switch(getQueryString().previewPlatform||TGE.BrowserDetect.platform){case"iPhone":case"iPad":case"iOS":case"Mac":t="SF Pro";break;case"Android":t="Roboto";break;case"Windows":t="Arial";break;default:t="Roboto"}var e=window._TREFONTS&&_TREFONTS[t],i=TGE.BrowserDetect.oniOS&&"bold"===this.fontWeight&&e&&("string"==typeof e.data||void 0===e.data[700]);return this.fontStyle+" "+(i?"":this.fontWeight+" ")+this.fontSize+"px '"+t+"'"+this.fontFallbacks+", sans-serif"},set:function(t){this._splitUpFont(t)}}),Object.defineProperty(TGE.Text.prototype,"color",{get:function(){return this.textColor},set:function(t){this.textColor=t}}),Object.defineProperty(TGE.Text.prototype,"fontFallbacks",{get:function(){var t="";for(var e in this._mFontFallbacks)t+=", '"+this._mFontFallbacks[e]+"'";return t},set:function(t){this._mFontFallbacks=t}}),TGE.AdHeader=function(){if(null!==TGE.AdHeader._sInstance)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"there can be only one instance of a TGE.AdHeader object"),TGE.AdHeader._sInstance;TGE.AdHeader._sInstance=this,TGE.AdHeader.superclass.constructor.call(this),this.closeButtonImage=null,this.closeFunction=null,this.width=this.height=100},TGE.AdHeader._sInstance=null,TGE.AdHeader._sCustomSettings={},TGE.AdHeader._sButtonSize=100,TGE.AdHeader.Create=function(t,e){if(!TGE.Game.GetInstance()||!TGE.Game.GetInstance().stage)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AdHeader.Create was called too early - wait until the TGE game object has been launched"),null;null!==TGE.AdHeader._sInstance&&(TGE.AdHeader._sInstance.markForRemoval(),TGE.AdHeader._sInstance=null);var i=TGE.Game.GetInstance()._mFullStage.addChild((new TGE.AdHeader).setup({registrationX:0,registrationY:0,width:125,height:125,layout:function(){this.rotation=0,this.x=this.y=0,this.width=this.stage.width,this.height=this.stage.height}}));i.header=i.addChild((new TGE.DisplayObjectContainer).setup({registrationX:0,registrationY:0,width:125,height:125,layout:function(){this.x=this.y=0,this.width=this.stage.width,this.height=Math.min(.1*this.stage.width,.1*this.stage.height)}})),i.closeButton=i.header.addChild((new TGE.DisplayObjectContainer).setup({width:TGE.AdHeader._sButtonSize,height:TGE.AdHeader._sButtonSize,layout:{topAnchor:0,rightAnchor:0,scaleToHeight:1},visible:!0===e})),i.closeFunction=t,i.closeButton.addEventListener("mousedown",t),i.closeButton.addEventListener("drawbegin",function(t){if(!this.parent.parent.closeButtonImage){var e=t.canvasContext;e.save(),this.offscreenContext||(this.offscreenCanvas=document.createElement("canvas"),this.offscreenContext=this.offscreenCanvas.getContext("2d"),this.offscreenCanvas.width=0,this.offscreenCanvas.width=100,this.offscreenCanvas.height=100,this.offscreenContext.strokeStyle="white",this.offscreenContext.lineWidth=16,this.offscreenContext.lineCap="round",this.offscreenContext.shadowColor="black",this.offscreenContext.shadowBlur=21,this.offscreenContext.moveTo(25,25),this.offscreenContext.lineTo(75,75),this.offscreenContext.moveTo(75,25),this.offscreenContext.lineTo(25,75),this.offscreenContext.stroke()),e.globalAlpha=.3*this.alpha,e.drawImage(this.offscreenCanvas,22,22,57,57),e.restore()}}),i.applyCustomSettings()},TGE.AdHeader.GetInstance=function(){return TGE.AdHeader._sInstance},TGE.AdHeader.ShowClose=function(){TGE.AdHeader._sInstance&&TGE.AdHeader._sInstance.showCloseButton()},TGE.AdHeader.ShowCountdown=function(t){TGE.AdHeader._sInstance&&0<t&&TGE.AdHeader._sInstance.showCountdown(t)},TGE.AdHeader.ShowRewardedPlayableOverlay=function(){TGE.AdHeader._sInstance&&TGE.AdHeader._sInstance.showRewardedPlayableOverlay()},TGE.AdHeader.CustomSettings=function(t){TGE.AdHeader._sCustomSettings=t,TGE.AdHeader._sInstance&&TGE.AdHeader._sInstance.applyCustomSettings()},TGE.AdHeader.prototype={applyCustomSettings:function(){var t=TGE.AdHeader._sCustomSettings;t.closeImage&&(this.closeButtonImage=this.closeButton.addChild((new TGE.Sprite).setup({image:t.closeImage,scale:t.closeImageScale?t.closeImageScale:1}))),this.closeButton.layout={topAnchor:t.closeBoxTop?t.closeBoxTop:0,rightAnchor:t.closeBoxRight?t.closeBoxRight:0,scaleToHeight:t.closeBoxScale?t.closeBoxScale:1}},showCloseButton:function(){this.closeButton.visible||(this.closeButton.visible=!0,this.closeButton.tweenFrom({alpha:0,duration:1}))},showCountdown:function(t){this.closeButton.visible||(this.countdown=t,this.countdownText=this.header.addChild((new TGE.Text).setup({text:t.toString(),fontFamily:"Arial",fontSize:25,fontWeight:"bold",fontStyle:"normal",textColor:"#fff",hAlign:"left",vAlign:"top",layout:{topAnchor:.013,leftAnchor:.017,scaleToHeight:.6}})),this.countdownText.addEventListener("drawbegin",function(t){var e=t.canvasContext;e.save(),e.shadowColor="rgba(0, 0, 0, 1)",e.shadowBlur=4*this.scaleY}),this.countdownText.addEventListener("drawend",function(t){t.canvasContext.restore()}),this._countdownSecond())},showRewardedPlayableOverlay:function(){this.rewardedOverlay=this.addChild((new TGE.DisplayObjectContainer).setup({registrationX:0,registrationY:0,width:125,height:125,layout:function(){this.x=this.y=0,this.width=this.stage.width,this.height=this.stage.height}})),this.rewardedOverlay.sendToBack(),this.rewardedOverlay.timeVisible=3,this.rewardedOverlay.timer=0,this.rewardedOverlay.addEventListener("mousedown",function(){this.exitRewardedPlayableOverlay()}.bind(this)),this.rewardedOverlay.addEventListener("update",function(t){this.rewardedOverlay.timer+=t.elapsedTime,this.rewardedOverlay.timer>=this.rewardedOverlay.timeVisible&&this.exitRewardedPlayableOverlay()}.bind(this));var t=this.rewardedOverlay.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"black",alpha:.8,width:125,height:125,layout:"match"})),e=this.rewardedOverlay.addChild((new TGE.DisplayObjectContainer).setup({width:65,height:15,layout:{xPercentage:.5,yPercentage:.59,scaleToWidth:.25,scaleToHeight:.08}}));e.fillStyle="#5c8c43",e.strokeStyle="white";var i=e.addChild((new TGE.Text).setup({text:"Play this game to earn your reward!",fontFamily:"Arial",fontSize:20,color:"white",layout:{xPercentage:0,yPercentage:-2,scaleToWidth:3,scaleToHeight:1}})),s=e.addChild((new TGE.Text).setup({text:"Play Now",fontFamily:"Arial",fontSize:8,color:"white",layout:{xPercentage:.07,yPercentage:.05,scaleToWidth:.5,scaleToHeight:.7}})),n=e.addChild((new TGE.DisplayObjectContainer).setup({width:40,height:50,layout:{anchorLeft:-.35,yPercentage:0,scaleToWidth:.2,scaleToHeight:.6}})),a=this.rewardedOverlay.addChild((new TGE.DisplayObjectContainer).setup({width:240,height:30,layout:{anchorLeft:0,anchorBottom:0,scaleToWidth:.4,scaleToHeight:.05}}));a.addChild((new TGE.Text).setup({text:"Playable Ads by",fontFamily:"Arial",fontSize:16,color:"white",y:-15,x:65,scaleX:.9})),a.addChild((new TGE.Text).setup({text:"TRESENSA",fontFamily:"Arial",fontSize:16,fontStyle:"bold",color:"white",y:-15,x:160,scaleX:.9})),e.addEventListener("drawbegin",function(t){this.cornerRadius=1;var e=t.canvasContext,i=this.width,s=this.height,n=this.cornerRadius;i<2*n&&(n=i/2),s<2*n&&(n=s/2),e.beginPath(),e.moveTo(0+n,0),e.arcTo(0+i,0,0+i,0+s,n),e.arcTo(0+i,0+s,0,0+s,n),e.arcTo(0,0+s,0,0,n),e.arcTo(0,0,0+i,0,n),e.closePath(),e.fillStyle=this.fillStyle,e.strokeStyle=this.strokeStyle,e.lineWidth=2,e.stroke(),e.fill()}),n.addEventListener("drawbegin",function(t){var e=this.width,i=this.height,s=t.canvasContext;s.beginPath(),s.moveTo(0,0),s.lineTo(0,i),s.lineTo(e,i/2),s.closePath(),s.fillStyle="white",s.fill()}),a.addEventListener("drawbegin",function(t){var e=this.width,i=this.height,s=t.canvasContext;s.beginPath(),s.moveTo(0,i),s.lineTo(0,0),s.lineTo(e,0),s.lineTo(e-20,i),s.lineTo(0,i),s.closePath(),s.fillStyle="#ef2e24",s.fill()});var o=TGE.AdHeader._sCustomSettings;o.rewardedOverlayMessageText&&(i.text=o.rewardedOverlayMessageText),o.rewardedOverlayButtonText&&(s.text=o.rewardedOverlayButtonText),o.rewardedOverlayButtonColor&&(e.fillStyle=o.rewardedOverlayButtonColor),o.rewardedOverlayBackgroundColor&&(t.backgroundColor=o.rewardedOverlayBackgroundColor),o.rewardedOverlayBackgroundOpacity&&(t.alpha=o.rewardedOverlayBackgroundOpacity),o.rewardedOverlayTimeVisible&&(this.rewardedOverlay.timeVisible=o.rewardedOverlayTimeVisible),this.enterRewardedPlayableOverlay()},enterRewardedPlayableOverlay:function(){this.rewardedOverlay.tweenFrom({alpha:0,duration:.3})},exitRewardedPlayableOverlay:function(){this.rewardedOverlay.tweenTo({y:this.rewardedOverlay.height,duration:.8,easing:TGE.Tween.Back.Out})},_countdownSecond:function(){this.countdown<=0?(this.countdownText.markForRemoval(),this.countdownText=null):(this.countdownText.text=this.countdown,this.countdownText.clearTweens(),this.countdownText.alpha=1,this.countdownText.tweenTo({alpha:0,delay:.7,duration:.25}),this.performAction({delay:1,action:this._countdownSecond})),this.countdown--}},extend(TGE.AdHeader,TGE.DisplayObjectContainer),TGE.AdFooter=function(){TGE.AdFooter.__sInstance=this,TGE.AdFooter.superclass.constructor.call(this),this.instanceName="tge_isi_text",this.style="none",this.expandable=!1,this.expanded=!1,this.previousUpdateRoot=TGE.Game.GetUpdateRoot(),this.htmlPanel=null,this.panelSettings=null,this.panelHeaderText=null},TGE.AdFooter.__sInstance=null,TGE.AdFooter.Create=function(){var t,e=TGE.Game.GetInstance();return e&&e._mFullStage?(TGE.AdFooter.Destroy(),TGE.RemoteSettings.HasSetting("legalTextStyle")?t=TGE.RemoteSettings("legalTextStyle"):(t=getQueryString().legalTextStyle)||(t=TGE.RemoteSettings.HasSetting("useLegalText")&&TGE.RemoteSettings("useLegalText")?"simple":"none"),"none"===t?null:void e._mFullStage.addChild((new TGE.AdFooter).setup({style:t}))):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AdFooter.Create was called too early - wait until the TGE game object has been launched"),null)},TGE.AdFooter.GetInstance=function(){return TGE.AdFooter.__sInstance},TGE.AdFooter.Destroy=function(){null!==TGE.AdFooter.__sInstance&&(TGE.AdFooter.__sInstance.removeFromScene(),TGE.Game.GetInstance()._mFullStage.setGameStageHeight(1))},TGE.AdFooter.prototype={setup:function(t){switch(this.style=t.style,this.style){case"isiPanel":this.expandable=!0,this.panelSettings={expandedSize:.92,padding:4,toggleButtonRadius:.03};break;case"simple":case"promo":default:this.expandable=!1,this.panelSettings=null}if(this.expandable){var i=this.panelSettings;TGE.Game.GetInstance()._mFullStage.setGameStageHeight(1-this._panelCollapsedSize()),GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_background?t.colorDef="tge_isi_background":t.backgroundColor="#ffffff",t.registrationX=0,t.registrationY=0,t.layout=function(){this.adjustPanelPosition()};var e={registrationX:0,registrationY:0,layout:function(){this.x=this.y=0,this.width=this.parent.width,this.height=this.parent._headerBarSize()}};GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_header?e.colorDef="tge_isi_header":e.backgroundColor="#dadada",this.addChild((new TGE.DisplayObjectContainer).setup(e)),this.panelHeaderText=this.addChild((new TGE.Text).setup({text:"IMPORTANT SAFETY INFORMATION",textColor:this._headerTextColor(),textDef:GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS.tge_isi_header?"tge_isi_header":void 0,fontSize:11,fontWeight:"bold",hAlign:"left",vAlign:"middle",fontFamily:"Arial",layout:function(){var t=this.parent._uiScalingDimension(),e=t*(i.padding/100);this.x=e,this.y=.5*this.parent._headerBarSize(),this.scale=t/300}})),this.addChild((new TGE.DisplayObject).setup({registrationX:1,registrationY:0,layout:function(){this.x=this.parent.width,this.y=0,this.width=this.height=this.parent._headerBarSize()}})).addEventListener("drawend",this._drawButton),this.makeHtmlPanel(),this.addEventListener("click",this._onClick),this.addEventListener("resize",this._onResize)}else t.registrationX=.5,t.registrationY=1,t.width=125,t.height=125,t.layout=function(){this.x=this.stage.width/2,this.y=.995*this.stage.height,this.width=this.stage.width,this.height=.05*this.stage.height},this.addChild((new TGE.Text).setup({textDef:"tge_legal_footer",textColor:"#ffffff",fontSize:6,text:"",hAlign:"center",vAlign:"bottom",fontFamily:"Arial",layout:function(){var t=Math.max(this.stage.width,this.stage.height)/Math.min(this.stage.width,this.stage.height),e=1+Math.max(t-2,0),i=Math.max(this.stage.height,this.stage.width)/(640*e);this.scale=i,this.wrapWidth=.96*this.parent.width*(1/i)}})),"promo"===this.style&&(this.visible=this._footerShouldBeVisible(),this.addEventListener("update",this._updateFooterVisibility));return TGE.AdFooter.superclass.setup.call(this,t),this},makeHtmlPanel:function(){this.expanded?this.expandPanel():this.collapsePanel()},togglePanel:function(){this.expanded?this.collapsePanel():this.expandPanel()},collapsePanel:function(){this.panelSettings;this._removeIFrame(),this.expanded=!1,TGE.Game.SetUpdateRoot(this.previousUpdateRoot||this._mFullStage),TGE.Game.GetInstance()._active("panel",!0),this.adjustPanelPosition();var t=Math.floor(this._panelCollapsedSize()*this.height),e=Math.floor(this.width),i=this._headerBarSize();this.htmlPanel=document.createElement("iframe"),this.htmlPanel.setAttribute("style","user-select: none; pointer-events: none; border: none; margin: 0px; padding: 0px; position: absolute; top: 0px; left: 1px; overflow: hidden; width: "+(e-2)+"px; height: "+this.height+"px;"),TGE.Game.GameDiv().appendChild(this.htmlPanel);var s=this.htmlPanel.contentWindow.document;s.open(),s.write("<style>body {margin: 0px; overflow: hidden;}</style><div style='position: absolute; top: "+(this.height-t+i)+"px; height: "+(t-i-5)+"px; color: black; overflow-x: hidden; overflow-y: hidden; font-family: Arial; font-size: "+this._fontSize()+"px; padding: 0% "+this.panelSettings.padding+"%  0% "+this.panelSettings.padding+"%;'>"+this._panelText()+"</div>"),s.close()},expandPanel:function(){this.panelSettings;this._removeIFrame(),this.expanded=!0,TGE.Game.GetUpdateRoot()instanceof TGE.AdFooter||(this.previousUpdateRoot=TGE.Game.GetUpdateRoot()),TGE.Game.SetUpdateRoot(this),TGE.Game.GetInstance()._active("panel",!1),this.adjustPanelPosition();var t=Math.floor(this.width),e=Math.floor(this.height-this._panelExpandedSize()*this.height),i=this._headerBarSize(),s=Math.floor(this.height-e-i);this.htmlPanel=document.createElement("iframe"),this.htmlPanel.setAttribute("style","border: none; margin: 0px; padding: 0px; position: absolute; top: "+(e+i)+"px; left: 1px; overflow: hidden; width: "+(t-2)+"px; height: "+(s-1)+"px;"),TGE.Game.GameDiv().appendChild(this.htmlPanel);var n=this.htmlPanel.contentWindow.document;n.open(),n.write("<style>body {margin: 0px;}</style><div style='color: black; height: 98%; overflow-x: hidden; overflow-y: scroll; font-family: Arial; font-size: "+this._fontSize()+"px; padding: 0% "+this.panelSettings.padding+"%  0% "+this.panelSettings.padding+"%;'>"+this._panelText()+"</div>"),n.close()},adjustPanelPosition:function(){this.x=0,this.y=this._mFullStage.height*(1-(this.expanded?this._panelExpandedSize():this._panelCollapsedSize())),this.width=this._mFullStage.width,this.height=this._mFullStage.height},cleanup:function(){this._removeIFrame()},isCached:function(){return this.expandable},cache:function(t){this.makeHtmlPanel()},_removeIFrame:function(){this.htmlPanel&&(this.htmlPanel.remove(),this.htmlPanel=null)},_drawButton:function(t){var e=t.canvasContext,i=this.parent,s=(i._uiScalingDimension(),i.panelSettings.padding,i._uiScalingDimension()*i.panelSettings.toggleButtonRadius),n=this.width/2,a=this.height/2,o=.6*s;e.beginPath(),e.arc(n,a,s,0,2*Math.PI,!1),e.fillStyle=i._headerTextColor(),e.fill(),e.beginPath(),e.strokeStyle=i._headerColor(),e.lineWidth=Math.round(1.75*window.devicePixelRatio),e.lineCap="round",e.moveTo(n-o,a),e.lineTo(n+o,a),i.expanded||(e.moveTo(n,a-o),e.lineTo(n,a+o)),e.stroke()},_onClick:function(t){if(this.expandable){var e=t.x-this.x,i=t.y-this.y,s=.15*this._uiScalingDimension();i<=s&&e>=this.width-s&&(TGE.Analytics.CustomEvent("footer"+(this.expanded?"Collapse":"Expand")),this.togglePanel())}},_onResize:function(t){var e=this._mFullStage.gameStage.getHeight(),i=this.expandable?1-this._panelCollapsedSize():1;e!==i&&this._mFullStage.setGameStageHeight(i),this.expandable&&this.makeHtmlPanel()},_panelText:function(){var t="tge_isi_text";if(GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS[t]){var e=t+"_"+TGE.RemoteSettings("lang");return GameConfig.TEXT_DEFS[e]?GameConfig.TEXT_DEFS[e].text:GameConfig.TEXT_DEFS[t].text}return""},_uiScalingDimension:function(){return Math.min(this._portraitTablet()?.8*this.width:this.width,this.height)},_panelCollapsedSize:function(){return this._mFullStage.width>this._mFullStage.height||this._portraitTablet()?.2:.25},_panelExpandedSize:function(){return this.panelSettings.expandedSize*(this._mFullStage.width>this._mFullStage.height?.9:1)},_fontSize:function(){var t=this._mFullStage.width>this._mFullStage.height||this._portraitTablet(),e=this.htmlPanel.offsetWidth,i=t?62:32;return Math.round(e/i)},_headerBarSize:function(){return Math.floor(3.5*this.panelSettings.toggleButtonRadius*this._uiScalingDimension())},_backgroundColor:function(){return GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_background||"#ffffff"},_headerColor:function(){return GameConfig.COLOR_DEFS&&GameConfig.COLOR_DEFS.tge_isi_header||"#dadada"},_headerTextColor:function(){var t=GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS.tge_isi_header;return t?t.textColor:"#000"},_footerShouldBeVisible:function(){return"promo"!==this.style||(window.TreSensa&&"boolean"==typeof TreSensa.Playable.promoScreenShowing?TreSensa.Playable.promoScreenShowing:TGE.RemoteSettings.HasSetting("state")&&"promo"===TGE.RemoteSettings("state")||!(!window.PromoBuilder||!PromoBuilder._sInstance))},_updateFooterVisibility:function(){this.visible=this._footerShouldBeVisible()},_portraitTablet:function(){return this._mFullStage.width<=this._mFullStage.height&&1.34*this._mFullStage.width>this._mFullStage.height},removeFromScene:function(){TGE.AdFooter.superclass.removeFromScene.call(this),this.cleanup(),TGE.AdFooter.__sInstance===this&&(TGE.AdFooter.__sInstance=null)}},extend(TGE.AdFooter,TGE.DisplayObjectContainer),TGE.CrossfadeSprite=function(){return TGE.CrossfadeSprite.superclass.constructor.call(this),this._mCrossfadeTexture=null,this._mCrossfadeCellWidth=0,this._mCrossfadeCellHeight=0,this._mCrossfadeOffsetX=0,this._mCrossfadeOffsetY=0,this._mCrossfadeCoordinateCache=null,this._mCrossfadeImg=null,this._mCrossfadeAlpha=0,this._mCrossfadeDuration=0,this._mCrossfadeDefaultDuration=.5,this._mCrossfadeUpdate=null,this},TGE.CrossfadeSprite.prototype={setup:function(t){return TGE.CrossfadeSprite.superclass.setup.call(this,t),this.intendedWidth="number"==typeof t.width?t.width:null,this.intendedHeight="number"==typeof t.height?t.height:null,this},crossfade:function(t,e){if(this._mCrossfadeTexture=null,"string"==typeof t&&(this._mCrossfadeTexture=TGE.AssetManager.GetTexture(t)),this._mCrossfadeTexture&&(this._mCrossfadeTexture.htmlImageWidth<=0||this._mCrossfadeTexture.htmlImageHeight<=0)&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Crossfade sprite has invalid dimensions ("+this._mCrossfadeTexture.htmlImageWidth+"x"+this._mCrossfadeTexture.htmlImageHeight+"), image likely did not load"),this._mCrossfadeTexture=null),this._mCrossfadeTexture){if(this._mCrossfadeDuration="number"==typeof e?e:this._mCrossfadeDefaultDuration,this._mCrossfadeImg=t,this._mCrossfadeOffsetX=0,this._mCrossfadeOffsetY=0,this._mCrossfadeTexture.spriteSheet){var i=TGE.AssetManager.Get(t);this._mCrossfadeCellWidth=i.width,this._mCrossfadeCellHeight=i.height,this._mCrossfadeCoordinateCache=[],this._mCrossfadeCoordinateCache=[[Math.round(i.x),Math.round(i.y)]],this._mCrossfadeDrawWidth=this._mCrossfadeOriginalWidth=Math.round(this._mCrossfadeCellWidth),this._mCrossfadeDrawHeight=this._mCrossfadeOriginalHeight=Math.round(this._mCrossfadeCellHeight),i.hasOwnProperty("offsetX")&&(this._mCrossfadeOffsetX=i.offsetX,this._mCrossfadeOffsetY=i.offsetY,this._mCrossfadeDrawWidth=i.drawWidth,this._mCrossfadeDrawHeight=i.drawHeight)}else this._mCrossfadeDrawWidth=this._mCrossfadeOriginalWidth=Math.round(this._mCrossfadeTexture.htmlImageWidth),this._mCrossfadeDrawHeight=this._mCrossfadeOriginalHeight=Math.round(this._mCrossfadeTexture.htmlImageHeight),this._mCrossfadeCellWidth=this._mCrossfadeTexture.htmlImageWidth,this._mCrossfadeCellHeight=this._mCrossfadeTexture.htmlImageHeight,this._mCrossfadeCoordinateCache=[],this._mCrossfadeCoordinateCache=[[0,0]];null===this._mRendererTexture&&(this.width=this.intendedWidth?this.intendedWidth:this._mCrossfadeCellWidth,this.height=this.intendedHeight?this.intendedHeight:this._mCrossfadeCellHeight,this.parent&&this.handleEvent(TGE._ResizeEvent)),this._mCrossfadeUpdate&&this.removeEventListener("update",this._mCrossfadeUpdate),this._mCrossfadeUpdate=this.addEventListener("update",this._updateCrossfade.bind(this))}},_updateCrossfade:function(t){this._mCrossfadeAlpha+=t.elapsedTime/this._mCrossfadeDuration*this.alpha,this._mCrossfadeAlpha>=this.alpha&&this._finishCrossfade()},_finishCrossfade:function(){this.removeEventListener("update",this._mCrossfadeUpdate),this._mCrossfadeTexture=null,this._mCrossfadeUpdate=null,this._mCrossfadeAlpha=0;var t=this.intendedWidth?this.intendedWidth:this.width,e=this.intendedHeight?this.intendedHeight:this.height;this.setSizedImage(this._mCrossfadeImg,t,e)},_objectDraw:function(t){if(this.alpha<1&&(t._mCanvasContext.globalAlpha=this.alpha-this._mCrossfadeAlpha),TGE.CrossfadeSprite.superclass._objectDraw.call(this,t),null!==this._mCrossfadeTexture){var e=this.width/this._mCrossfadeOriginalWidth,i=this.height/this._mCrossfadeOriginalHeight,s=this._mCrossfadeCoordinateCache[0][0]>>0,n=this._mCrossfadeCoordinateCache[0][1]>>0,a=this._mCrossfadeOffsetX*e,o=this._mCrossfadeOffsetY*i,r=this._mCrossfadeDrawWidth*e,h=this._mCrossfadeDrawHeight*i;t._mCanvasContext.globalAlpha=this._mCrossfadeAlpha,t.drawImage(this._mCrossfadeTexture,s,n,this._mCrossfadeDrawWidth,this._mCrossfadeDrawHeight,a,o,r,h)}}},extend(TGE.CrossfadeSprite,TGE.Sprite),TGE.ProgressiveLoadingSprite=function(){return TGE.ProgressiveLoadingSprite.superclass.constructor.call(this),this},TGE.ProgressiveLoadingSprite.prototype={setup:function(t){t.image="string"!=typeof t.lowResImage||getQueryString().draft?null:t.lowResImage,TGE.ProgressiveLoadingSprite.superclass.setup.call(this,t);var e="number"==typeof t.assetList?t.assetList:null,i="number"==typeof t.duration?t.duration:null;return"string"==typeof t.highResImage&&this.setHighResImage(t.highResImage,e,i),this},setHighResImage:function(t,e,i){t&&(TGE.Game.GetInstance().isAssetLoaded(t)?this.image=t:TGE.Game.GetInstance().waitForAsset(t,this.crossfade.bind(this,t,i),!1))}},extend(TGE.ProgressiveLoadingSprite,TGE.CrossfadeSprite),Object.defineProperty(TGE.ProgressiveLoadingSprite.prototype,"highResImage",{set:function(t){this.setHighResImage(t)}}),TGE.NoAudio=function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"NoAudio..."),_mSoundInstances=[]},TGE.NoAudio.prototype={type:function(){return"NoAudio"},playSound:function(t,e,i){return new TGE.NoAudioSoundInstance},mute:function(t,e){},stopAll:function(){},pauseAll:function(){},resumeAll:function(){},soundDuration:function(t){return 0}},TGE.NoAudioLoader=function(t,e,i){this.loader=null,this.complete=!1,this.start=function(t){this.loader=t,this.complete=!0,t.onLoad(this)},this.checkStatus=function(){!0===this.complete&&this.loader.onLoad(self)},this.getName=function(){return e}},TGE.NoAudioSoundInstance=function(){},TGE.NoAudioSoundInstance.prototype={init:function(t,e){return!0},play:function(t,e){},resume:function(){},restart:function(){},seek:function(t){},stop:function(){},pause:function(){},mute:function(){},unmute:function(t){},duration:function(){return 0},_cleanup:function(t){}},TGE.WebAudioAPIPlugin=function(){this._mSoundInstances=[],this._mPausedInstances=[],this._mFunctioning=!1,this._mContext=null;try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this._mContext=new AudioContext,this._mUnlockedAudio="running"===this._mContext.state,TGE.Debug.Log(TGE.Debug.LOG_INFO,"created WebAudioAPIPlugin, state: "+this._mContext.state),this._backwardCompatibility(),this._mMasterCompressorNode=this._mContext.createDynamicsCompressor(),this._mMasterCompressorNode.connect(this._mContext.destination),this._mMasterGainNode=this._mContext.createGain(),this._mMasterGainNode.connect(this._mMasterCompressorNode),this._mVolume=1,Object.defineProperty(this,"volume",{get:function(){return this._mVolume},set:function(t){this._mVolume=t,this._mMasterGainNode&&(this._mMasterGainNode.gain.value=t)}}),this._mFunctioning=!0}catch(t){return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error creating WebAudio context: "+t.toString())}},TGE.WebAudioAPIPlugin.prototype={type:function(){return"WebAudioAPI"},playSound:function(t,e,i){if(this._mFunctioning){var s=new TGE.WebAudioAPIPlugin.SoundInstance(this);return s.init(t,i)?(this._mSoundInstances.push(s),s.play(e,i),i||(s._mTimeout=setTimeout(s._cleanup.bind(s),1e3*s._mBuffer.duration)),s):null}},mute:function(t,e){this._mFunctioning&&(this._mMasterGainNode.gain.value=t?0:e)},stopAll:function(){for(var t=0;t<this._mSoundInstances.length;t++)this._mSoundInstances[t]._cleanup(!1);this._mSoundInstances=[]},pauseAll:function(){for(var t=0;t<this._mSoundInstances.length;t++){var e=this._mSoundInstances[t];e._mPausedAt||(e.pause(),this._mPausedInstances.push(e))}},resumeAll:function(){for(;this._mPausedInstances.length;)this._mPausedInstances.pop().resume()},soundDuration:function(t){var e=TGE.AssetManager.Get(t),i=e?e.buffer:null;return i?i.duration:0},unlockAudioOnTouch:function(){this._mTouchListenerDown=TGE.Game.GetInstance()._mFullStage.addEventListener("mousedown",this.unlockAudio.bind(this)),this._mTouchListenerUp=TGE.Game.GetInstance()._mFullStage.addEventListener("mouseup",this.unlockAudio.bind(this))},testUnlock:function(){return this._mUnlockedAudio||"running"!==this._mContext.state||this._setUnlocked(),this._mUnlockedAudio},unlockAudio:function(){if(!this.testUnlock())if(TGE.BrowserDetect.oniOS){var t=this._mContext.createBuffer(1,1,22050),e=this._mContext.createBufferSource();e.onended=this._setUnlocked.bind(this),e.buffer=t,e.connect(this._mContext.destination),e.start(0)}else if("suspended"===this._mContext.state){var i=this,s=this._mContext.resume();s&&s.then(function(){console.log("audio unlocked"),i._setUnlocked()}).catch(function(t){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"AudioContext.resume() failed: "+t)})}},_setUnlocked:function(){this._mUnlockedAudio=!0,this._mTouchListenerUp&&(TGE.Game.GetInstance()._mFullStage.removeEventListener("mousedown",this._mTouchListenerDown),TGE.Game.GetInstance()._mFullStage.removeEventListener("mouseup",this._mTouchListenerUp),this._mTouchListenerUp=null,this._mTouchListenerDown=null)},_removeInstance:function(t){for(var e=0;e<this._mSoundInstances.length;e++)if(this._mSoundInstances[e]===t)return void this._mSoundInstances.splice(e,1)},_backwardCompatibility:function(){if(!this._mContext.createGain)if(this._mContext&&this._mContext.createGainNode&&this._mContext.createBufferSource){TGE.Debug.Log(TGE.Debug.LOG_INFO,"deprecated WebAudio API detected - using backward compatibility mode"),this._mContext.createGain=this._mContext.createGainNode;var t=this._mContext.createBufferSource();t.__proto__.start=t.__proto__.noteGrainOn,t.__proto__.stop=t.__proto__.noteOff}else TGE.Debug.Log(TGE.Debug.LOG_INFO,"unable to setup WebAudio API backward compatibility mode")}},TGE.WebAudioAPIPlugin.SoundInstance=function(t){this._mID=null,this._mPlugin=t,this._mBuffer=null,this._mAudioNode=null,this._mTimeout=null,this._mStartedAt=null,this._mPausedAt=null,this._mVolume=1,this._mLoop=!1,Object.defineProperty(this,"volume",{get:function(){return this._mVolume},set:function(t){this._mVolume=t,this._mGainNode&&(this._mGainNode.gain.value=t)}})},TGE.WebAudioAPIPlugin.SoundInstance.prototype={init:function(t,e){return TGE.AssetManager.Exists(t)?(this._mBuffer=TGE.AssetManager.Get(t).buffer,this._mBuffer?(this._mID=t,!0):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Trying to play a sound that didn't load correctly: "+t),!1)):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Unknown audio id: "+t),!1)},play:function(t,e){this._mVolume=t,this._mLoop=e;try{this._mAudioNode=this._mPlugin._mContext.createBufferSource(),this._mAudioNode.buffer=this._mBuffer,this._mAudioNode.loop=this._mLoop,this._mGainNode=this._mPlugin._mContext.createGain(),this._mGainNode.gain.value=t,this._mAudioNode.connect(this._mGainNode),this._mGainNode.connect(this._mPlugin._mMasterGainNode),this._mPausedAt?(this._mAudioNode.start(0,this._mPausedAt,e?3600:this._mBuffer.duration-this._mPausedAt),this._mStartedAt=Date.now()/1e3-this._mPausedAt):(TGE.BrowserDetect.oniOS||"Safari"===TGE.BrowserDetect.browser?this._mAudioNode.start(0,0):this._mAudioNode.start(),this._mStartedAt=Date.now()/1e3),this._mPausedAt=null}catch(t){TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error playing webaudio buffer: "+t.toString())}},seek:function(t){t>this._mBuffer.duration?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"AudioManager.seek offset > sound duration"):this._mPausedAt?this._mPausedAt=t:(this.pause(),this._mPausedAt=t,this.play(this._mVolume,this._mLoop))},stop:function(){this._cleanup()},restart:function(){this._cleanup(!1),this.play(this._mVolume,this._mLoop)},pause:function(){this._mPausedAt=Date.now()/1e3-this._mStartedAt,this._mPausedAt>this._mBuffer.duration&&(this._mPausedAt=this._mPausedAt-Math.floor(this._mPausedAt/this._mBuffer.duration)*this._mBuffer.duration),this._cleanup(!1)},resume:function(){this._mPausedAt&&this.play(this._mVolume,this._mLoop)},mute:function(){},unmute:function(t){},duration:function(){return this._mBuffer.duration},_cleanup:function(t){t=void 0===t||t,this._mAudioNode&&(this._mAudioNode.stop(0),this._mAudioNode.disconnect(0),this._mAudioNode=null),this._mGainNode&&(this._mGainNode.disconnect(0),this._mGainNode=null),null!==this._mTimeout&&(clearTimeout(this._mTimeout),this._mTimeout=null),t&&this._mPlugin._removeInstance(this)}},TGE.AudioManager=function(){return null!==TGE.AudioManager._sInstance?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"you can only create one instance of the TGE.AudioManager"):(TGE.AudioManager._sInstance=this,window.TreSensa&&TreSensa.Playable.getAudioInfo&&(TreSensa.Playable.getAudioInfo().allowed&&!0!==TreSensa.Playable.getAudioInfo().startMuted||(TGE.AudioManager._sMuted=!0)),this.enabled=TGE.RemoteSettings("audio"),this._mVolume=1,Object.defineProperty(this,"volume",{get:function(){return this._mVolume},set:function(t){this._mVolume=t,this._mPlugin&&(this._mPlugin.volume=t)}}),this._mPlugin=null,this._initPlugin(),this._mPlugin.mute(this.isMuted(),this.volume),"function"==typeof TGE.Loader&&(this.enabled&&"WebAudioAPI"===this.pluginType()?TGE.Loader.prototype.addAudio=function(t,e,i){var s=new TGE.WebAudioLoader(t,e,i);return this.add(s),s.audio}:TGE.Loader.prototype.addAudio=function(t,e,i){var s=new TGE.NoAudioLoader(t,e,i);return this.add(s),null})),this},TGE.AudioManager._sInstance=null,TGE.AudioManager._sMuted=!1,TGE.AudioManager.GetInstance=function(){return TGE.AudioManager._sInstance},TGE.AudioManager.prototype={mute:function(t){t!==this.isMuted()&&(TGE.AudioManager._sMuted=t,this._mPlugin.mute(t,this.volume),TGE.VideoPlayer.Mute(t,!0))},toggleMute:function(){this.mute(!this.isMuted())},isMuted:function(){return TGE.AudioManager._sMuted},playSound:function(t,e,i){if(!(window.GameConfig&&GameConfig.NATIVE_APP&&TGE.BrowserDetect.onAndroid&&"4.2"==TGE.BrowserDetect.OSversion))return e=void 0!==e&&e,i="number"==typeof i?i:1,this._mPlugin.playSound(t,i,e)},pause:function(){this._mPlugin.pauseAll()},resume:function(){this._mPlugin.resumeAll()},stop:function(){this._mPlugin.stopAll()},pluginType:function(){return this._mPlugin.type()},soundDuration:function(t){return this._mPlugin.soundDuration(t)},_initPlugin:function(){this.enabled&&(window.AudioContext||window.webkitAudioContext)?(this._mPlugin=new TGE.WebAudioAPIPlugin,this._mPlugin.volume=this.volume):this._mPlugin=new TGE.NoAudio},_cleanupSound:function(t){t._cleanup()},_unlockAudioOnTouch:function(){this._mPlugin instanceof TGE.WebAudioAPIPlugin&&this._mPlugin.unlockAudioOnTouch()},canPlayAudio:function(){return this._mPlugin instanceof TGE.WebAudioAPIPlugin&&this._mPlugin.testUnlock()},Play:function(t){t.loop=!0===t.loop||"1"===t.loop||1===t.loop,t.callbackFunction,this.playSound(t.id,t.loop)},Pause:function(t){for(var e=0;e<this._mPlugin._mSoundInstances.length;e++)if(this._mPlugin._mSoundInstances[e]._mID===t)return void this._mPlugin._mSoundInstances[e].stop();TGE.Debug.Log(TGE.Debug.LOG_WARNING,"could not find audio to pause: "+t)},Mute:function(){this.mute(!0)},Unmute:function(){this.mute(!1)},ToggleMute:function(){this.toggleMute()},StopAll:function(){this.stop()},PauseAll:function(){this.pause()},ResumeAll:function(){this.resume()}},Object.defineProperty(TGE.AudioManager.prototype,"mMuted",{get:function(){return this.isMuted()},set:function(t){this.mute(t)}}),TGE.WebAudioLoader=function(t,e,i){if(this.loader=null,this.audio={},this.id=t,this.pollCount=0,i&&i.indexOf(".mp3")===i.length-4)this.url=i;else{var s=e.split(".");s[s.length-1]="mp3",this.url=s.join(".")}this.start=function(t){this.loader=t;var e=this,i=function(t){e.audio.buffer=t,e.loader.onLoad(e)},s=function(){TGE.Debug.Log(TGE.Debug.LOG_ERROR,"error decoding audio file: "+e.url),e.loader.onError(e)},n=this.url;if(window._TREAUDIO){var a=n.split("/"),o=a[a.length-1];n=_TREAUDIO[o]}else n=TGE.AssetManager._sFullPathTransformation(n);fetch(n).then(function(t){return t.arrayBuffer()}).then(function(t){TGE.AudioManager.GetInstance()._mPlugin._mContext.decodeAudioData(t,i,s)}).catch(function(t){s()})},this.checkStatus=function(){3<=this.pollCount?this.loader.onTimeout(this):this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},TGE.Events={debugMode:!0,engagements:0,countedEvents:{},customEventWarnings:{},_notifyAdContainer:function(){return void 0!==window.TreSensa},logInteraction:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"first user interaction"),this._notifyAdContainer()&&TreSensa.Playable.interaction(),window.TGS&&(TGS.Analytics.engagementTime=(new Date).getTime())},logEngagement:function(){this.engagements++,1===this.engagements&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,"user engagement event triggered"),this._notifyAdContainer()&&TreSensa.Playable.engagement()),TGE.Game.GetInstance()._checkOnPoliteLoading()},logCompletion:function(t){t||(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"completion events require a reason parameter"),t="unknown"),TGE.Debug.Log(TGE.Debug.LOG_INFO,"completion event triggered, reason is: "+t),TGE.Game.GetInstance()._mCompletionCount++,this._notifyAdContainer()&&TreSensa.Playable.promoScreenShown(t)},logReplay:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"replay event triggered"),this._sendAdContainerEvent("replay",{})},logCustomEvent:function(t,e){if(!t||50<t.length)TGE.Debug.Log(TGE.Debug.LOG_ERROR,"invalid custom event: "+t+"(>50 characters)");else{if(/^[a-zA-Z0-9_]+$/.test(t)||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"invalid custom event: "+t+"(only alphanumeric and underscores permitted)"),"replay"===t&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"do not log replay as a custom event, use TGE.Analytics.Replay instead"),this.countedEvents.hasOwnProperty(t)){var i=this.countedEvents[t];if(++i.counted%i.interval!=0)return}!0!==this.customEventWarnings[t]&&void 0!==e&&(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"sub-parameters are no longer supported on custom events: "+t),this.customEventWarnings[t]=!0),TGE.Debug.Log(TGE.Debug.LOG_INFO,"custom event triggered: "+t),this._sendAdContainerEvent("custom",{name:t})}},setEventInterval:function(t,e){var i=this.countedEvents[t];e=e||i&&i.interval||1,this.countedEvents[t]={interval:e,counted:0}},logVideoProgress:function(t){-1!==[0,25,50,75,100].indexOf(t)?(TGE.Debug.Log(TGE.Debug.LOG_INFO,"video progress: "+t+"%"),this._sendAdContainerEvent("video",{progress:t})):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"video progress events must specify progress of either 0, 25, 50, 75, or 100")},doClickthrough:function(t,e){window.TreSensa?TreSensa.Playable.clickthrough(t,e):window.mraid?window.mraid.open(e):window.open(e,"_blank")},doAppstoreClickthrough:function(){this.doClickthrough("default")},_sendAdContainerEvent:function(t,e){this._notifyAdContainer()&&TreSensa.Playable.logEvent(t,e)}},TGE.Analytics={},TGE.Analytics.Interaction=function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"games should not be calling TGE.Analytics.Interaction")},TGE.Analytics.Engagement=function(){TGE.Events.logEngagement.call(TGE.Events)},TGE.Analytics.Completion=function(t){TGE.Events.logCompletion.call(TGE.Events,t)},TGE.Analytics.Replay=function(){TGE.Events.logReplay.call(TGE.Events)},TGE.Analytics.CustomEvent=function(t,e){TGE.Events.logCustomEvent.call(TGE.Events,t,e)},TGE.Analytics.SetEventInterval=function(t,e){TGE.Events.setEventInterval(t,e)},TGE.Analytics.VideoProgress=function(t){TGE.Events.logVideoProgress.call(TGE.Events,t)},TGE.Game=function(){if(null!==TGE.Game._sInstance)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"you can only create one instance of a TGE.Game object"),this;TGE.Game._sInstance=this,window.TGS&&!TGS.Analytics&&TGE.SetupTGSProxy(),this.mCanvasDiv=null,this.mLoadingScreen=null,this._mAssetListLoaded={},this._mWaitingForAssets=[],this._mBuffering=!1,this._mShowBuffering=!1,this._mBufferingScreen=null,this._mBufferingOccurrences={},this._mNumInteractions=0,this._mLastInteraction=(new Date).getTime(),this._mGameViewableReceived=!1,this._mAdInactivityTimeLimit=0,this._mAdInactivityTimer=0,this._mCompletionCount=0,this._mFinalScore=null,window.GameConfig=window.GameConfig||{},GameConfig.REMOTE_SETTINGS=GameConfig.REMOTE_SETTINGS||{},window._TREFONTS=window._TREFONTS||{},_TREFONTS[TGE.NativeSystemFont]={version:1,data:"",native:!0},window.TGS&&TGS.Language.SupportedLanguages&&!GameConfig.REMOTE_SETTINGS.lang&&(GameConfig.REMOTE_SETTINGS.lang={type:"string",default:"en",options:TGS.Language.SupportedLanguages}),"6"===getQueryString().tgedebug&&this._printRemoteSettings(),this._initializeRemoteSettings(),this._initializeTextDefSettings(),this.stage=null,this._mFullStage=null,this.assetManager=new TGE.AssetManager,TGE.AudioManager&&(this.audioManager=new TGE.AudioManager(this.assetManager)),this.onLoad=null,this.mGameTime=0,this._mFilterStrength=10,this._mFrameTime=0,this._mLastLoop=(new Date).getTime(),this._mLastDisplay=(new Date).getTime(),this._mThisLoop=0,this._mCurrentFPS=0,this._mLaunchTime=0,this.slowMotion=0,this._mUpdateSkips=0,this.mMaxTickTime=.25,this.mMinTickTime=Number.MIN_VALUE,this._mPointerX=0,this._mPointerY=0,this._mPointerDown=!1,this._mCurrentPointer=-1,this._mKeysDown={},this._mActive={running:!0,activated:!0,panel:!0},this._mUpdateRoot=null,this.canvasWidth=0,this.canvasHeight=0,this._isiFramed=window.self!=window.top,this.scaleToFitOnDesktop=this._isiFramed,this.horizontalAlignment="center",this.verticalAlignment=isNaN(getQueryString()["padding-top"])?TGE.BrowserDetect.isMobileDevice||this.scaleToFitOnDesktop?"middle":"top":"bottom",this.resizeCanvasToParent=!1,this.desktopMaxCanvasWidth=Number.MAX_VALUE,this.desktopMaxCanvasHeight=Number.MAX_VALUE,this.maxCanvasWidth=Number.MAX_VALUE,this.maxCanvasHeight=Number.MAX_VALUE,this.mobileResCap=getQueryString().resCap||1e3,this.blockBrowserKeys=!0,this.blockTGEKeys=!1,this.allowMultitouch=!0,this._mResizeCanvasToFit=!1,this._mViewportScale=1,this._mDivResized=!1,this._mOldScreenWidth=-1,this._mOldScreenHeight=-1,this._mSnapchatSession="B0135"===getDistributionPartner(),TGE.BrowserDetect.onWindowsMobile&&(window.devicePixelRatio=window.screen.deviceXDPI/window.screen.logicalXDPI,-1!==navigator.userAgent.indexOf("Lumia 920")&&(window.devicePixelRatio=2));var t=getQueryString();this._mAdInactivityTimeLimit=parseInt(t.adanimation)||0,this.debugResizeMode=this._mDebugResize="4"===t.tgedebug,this._mTestBuffering=parseInt(t.testbuffering)||("3"===t.tgedebug?1:0),this._mPreviewMode=t.simulateBanner?1:parseInt(t.previewMode)||0,this._mTestAdHeader=parseInt(t.testadheader)||0,this._mCustomLoader=parseInt(t.customloader)||0,this._mTestGameViewable=parseInt(t.testgameviewable)||0,this._mPoliteLoadingLevel=parseInt(t.politeload)||0,this._mPoliteLoadCallback=null,this._mPortraitGame=null,this.setLanguage(TGE.PreferredLanguage())},TGE.LoadingWindow=null,TGE.FirstGameWindow=null,TGE.GameViewableParameter=null,TGE.CLICK_TIME=1,TGE.CLICK_DISTANCE_FRACTION=.025,TGE._ResizeEvent={type:"resize",width:0,height:0,endEvent:{type:"resizeEnd",width:0,height:0}},TGE._AddedToStageEvent={type:"addedToStage"},TGE.DisableViewportResizing=!1,TGE.DisableLostFocusPause=!1,TGE.Game._sInstance=null,TGE.Game.GetInstance=function(){return TGE.Game._sInstance},TGE.Game.OpenURL=function(t){TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Game.OpenURL is deprecated, use TGE.Game.Clickthrough"),TGE.Game.Clickthrough("deprecated",t)},TGE.Game.GameDiv=function(){return TGE.Game.GetInstance().mCanvasDiv},TGE.Game.IsViewable=function(){return TGE.Game.GetInstance()._mGameViewableReceived},TGE.Game.SetUpdateRoot=function(t){TGE.Game.GetInstance()._mUpdateRoot=t},TGE.Game.GetUpdateRoot=function(){return TGE.Game.GetInstance()._mUpdateRoot},TGE.Game.Hibernate=function(t){var e=TGE.Game.GetInstance();e&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,(t?"hibernating":"waking up")+" game..."),e._mFullStage._mCanvas.style.display=t?"none":"block",e.halt=t)},TGE.Game.prototype={halt:!1,_mPauseObject:null,_mViewportScale:1,setLanguage:function(t){TGE.RemoteSettings.GetSettings().lang.value=t,TGE.Text.Language=t},getLanguage:function(){return TGE.RemoteSettings("lang")},setPoliteLoading:function(t){-1!==this._mPoliteLoadingLevel&&(this._mPoliteLoadingLevel=t)},setFinalScore:function(t){this._mFinalScore=t},getFinalScore:function(){return null===this._mFinalScore&&window.PromoBuilder&&PromoBuilder._sInstance&&"number"==typeof PromoBuilder._sInstance.score?PromoBuilder._sInstance.score:this._mFinalScore},pause:function(){this._mPauseObject||(this._mPauseObject=this._mFullStage.addChild((new TGE.DisplayObject).setup({layout:"match",mouseEnabled:!0})),this._mPauseObject.previousUpdateRoot=TGE.Game.GetUpdateRoot(),TGE.Game.SetUpdateRoot(this._mPauseObject),this._active("running",!1))},resume:function(){this._mPauseObject&&(TGE.Game.SetUpdateRoot(this._mPauseObject.previousUpdateRoot),this._mPauseObject.markForRemoval(),this._mPauseObject=null,this._active("running",!0))},assetListAvailable:function(t,e,i){i=!1!==i;var s=this.assetManager._mLoadingOrder.indexOf(t);if(1===this._mTestBuffering&&void 0!==e&&0<s)for(var n=1;n<=s;n++){var a=this.assetManager._mLoadingOrder[n];this._mAssetListLoaded[a]||(this._mAssetListLoaded[a]="queued")}var o="loaded"===this._mAssetListLoaded[t],r=1==this._mTestBuffering&&"required"!==t&&(!this._mBufferingOccurrences[t]||0<this._mBufferingOccurrences[t].testTimer);if(o&&!r)return e&&e.call(),!0;if(this._mBuffering=!0,this._mBufferingOccurrences[t]){if(e){var h=this._mBufferingOccurrences[t];h.callbacks.push(e),h.showBuffering=i||h.showBuffering}}else this._mBufferingOccurrences[t]={completeFired:!1,callbacks:e?[e]:[],testTimer:.5,showBuffering:i},1!=this._mTestBuffering&&i&&TGE.Analytics.CustomEvent("buffering_"+t);return i&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,"buffering, waiting for assetList: "+t),this._mShowBuffering=!0,this._showBufferingScreen()),!1},assetAvailable:function(t,e,i){var s=this.getAssetList(t);return s?this.waitForAssetList(s,e,i):(null!=e&&(this._mWaitingForAssets.push({id:t,callback:e,showBuffering:i}),1===this._mTestBuffering&&this._loadNextAssetList()),!1)},isAssetLoaded:function(t){return this.assetAvailable(t,void 0,!1)},isAssetListLoaded:function(t){return this.assetListAvailable(t,void 0,!1)},waitForAsset:function(t,e,i){return this.assetAvailable(t,e||null,i)},waitForAssetList:function(t,e,i){return this.assetListAvailable(t,e||null,i)},_loadNextAssetList:function(){for(var t=1;t<this.assetManager._mLoadingOrder.length;++t){var e=this.assetManager._mLoadingOrder[t],i=this._mAssetListLoaded[e];if("loaded"!==i&&"loading"!==i){this.waitForAssetList(e,null,!1);break}}},getAssetList:function(t){if(!t)return TGE.Debug.Log(TGE.Debug.LOG_WARNING,"attempting to check for a  null asset id"),"required";for(var e in this.assetManager._mAssetLists)for(var i=this.assetManager._mAssetLists[e].list,s=0;s<i.length;s++)if(i[s].id===t||i[s].sheet&&trimmedFilename(i[s].sheet)===t)return e},_showBufferingScreen:function(){if(!this._mBufferingScreen){this._checkOnPoliteLoading(),this._mBufferingScreen=this.stage.addChild((new TGE.DisplayObjectContainer).setup({layout:"match",registrationX:0,registrationY:0,mouseEnabled:!0})),this._mBufferingScreen.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"#fff",alpha:.4,layout:"match"}));var t=this._mBufferingScreen.addChild((new TGE.DisplayObject).setup({width:25,height:25,layout:{xPercentage:.5,yPercentage:.5,scaleToWidth:.25}}));t.addEventListener("drawend",function(t){var e=t.canvasContext;e.translate(this.width/2,this.height/2);for(var i=0;i<16;i++)e.beginPath(),e.rotate(2*Math.PI/16),e.moveTo(this.width/6,0),e.lineTo(this.width/4,0),e.lineWidth=this.width/30,e.strokeStyle="rgba(255, 0, 0,"+i/16+")",e.stroke()}),t.tweenTo({rotation:360,duration:1.2,loop:!0,repeat:!0}),TGE.Game.SetUpdateRoot(this._mBufferingScreen)}},_closeBufferingScreen:function(){this._mBufferingScreen&&(this._mBufferingScreen.markForRemoval(),this._mBufferingScreen=null)},gameAsAd:function(){return 0<this._mPreviewMode},gameAsBannerAd:function(){return 1===this._mPreviewMode},getCampaignID:function(){return getQueryString().campaign},timeSinceLastInteraction:function(){return this._mNumInteractions?Math.max(Number.MIN_VALUE,((new Date).getTime()-this._mLastInteraction)/1e3):0},getVideoInfo:function(){var t={},e=this.getVideoKeyframes();for(var i in e)t[i]={keyframes:e[i]};return t},getVideoKeyframes:function(){return{}},launch:function(t){var e="string"==typeof t.gameDiv?t.gameDiv:null,i="number"==typeof t.width?t.width:-1,s="number"==typeof t.height?t.height:-1,n="number"==typeof t.initialWidth?parseInt(t.initialWidth):-1,a="number"==typeof t.initialHeight?parseInt(t.initialHeight):-1;switch(getQueryString().simulateBanner){case"mrec":i=300,s=250}if(this.onLoad="function"==typeof t.onLoad?t.onLoad:this.onLoad,this.mCanvasDiv=document.getElementById(e),null==this.mCanvasDiv)return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Could not find canvas div '"+e+"'"),!1;var o,r=this.mCanvasDiv.getAttribute("style")||"",h="B0039"===getDistributionPartner()?"":"z-index: 1; ";(this.mCanvasDiv.setAttribute("style",r+" "+h+"overflow: hidden; touch-action: none; -webkit-user-select: none; -ms-touch-action:none; -webkit-tap-highlight-color: transparent; -moz-tap-highlight-color: transparent; -webkit-transform: translateZ(0);"),0<i&&0<s&&(this.mCanvasDiv.style.width=i+"px",this.mCanvasDiv.style.height=s+"px"),this.canvasWidth=this.mCanvasDiv.clientWidth,this.canvasHeight=this.mCanvasDiv.clientHeight,window.addEventListener("resize",this._onResize.bind(this),!1),TGE.DisableLostFocusPause)||(void 0!==document.hidden?o="visibilitychange":void 0!==document.mozHidden?o="mozvisibilitychange":void 0!==document.msHidden?o="msvisibilitychange":void 0!==document.webkitHidden&&(o="webkitvisibilitychange"),o?(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"using "+o+" visibility change event"),document.addEventListener(o,this._onVisibilityChange.bind(this),!1),this._mSnapchatSession&&(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden)&&this._onDeactivate()):(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"using blur/focus and pagehide/show for visibility change events"),window.addEventListener("blur",this._onDeactivate.bind(this),!1),window.addEventListener("focus",this._onActivate.bind(this),!1),window.addEventListener("pagehide",this._onDeactivate.bind(this),!1),window.addEventListener("pageshow",this._onActivate.bind(this),!1)));"ontouchstart"in window?(this.mCanvasDiv.addEventListener("touchstart",this._mouseDown.bind(this),!1),this.mCanvasDiv.addEventListener("touchmove",this._mouseMove.bind(this),!1),this.mCanvasDiv.addEventListener("touchend",this._mouseUp.bind(this),!1)):(this.mCanvasDiv.addEventListener("click",this._preventBehavior.bind(this),!1),this.mCanvasDiv.addEventListener("mousedown",this._mouseDown.bind(this),!1),this.mCanvasDiv.addEventListener("mouseup",this._mouseUp.bind(this),!1),this.mCanvasDiv.addEventListener("mousemove",this._mouseMove.bind(this),!1)),document.addEventListener("keydown",this._keyDown.bind(this),!1),document.addEventListener("keyup",this._keyUp.bind(this),!1);var l=getQueryString().tgedebug;if(l&&"5"!==l){var d=document.createElement("div");d.id="debug_widget",d.style.backgroundColor="#0c0",d.style.position="absolute",d.style.display="block",d.style.top=0,d.style.padding="6px",d.style.zIndex=200,document.body.insertBefore(d,document.body.firstChild),"2"===getQueryString().tgedebug&&(TGE.Window._sTrackWindows=!0);var u=function(){var t=TGE.Game.GetInstance(),e="<div style='font-weight: bold; font-size: 14px; padding-bottom: 3px;'>"+t._mCurrentFPS+" fps</div>";if("2"===getQueryString().tgedebug){e+=(t._mFullStage?t._mFullStage.numChildren(!0):0)+" scene objects<br>"+(t._mFullStage?t._mFullStage.numVisibleObjects():0)+" visible objects<br>"+(t._mFullStage?t._mFullStage.numDrawnObjects():0)+" drawn objects<br>"+(t._mFullStage?t._mFullStage._mUpdateGroup.length:0)+" updating objects<br>"+(t._mFullStage?t._mFullStage._mTransformsUpdated:0)+" transforms updated<br>",e+="<div style='font-weight: bold; font-size: 14px; padding-top: 4px; padding-bottom: 2px;'>Active Windows:</div>";for(var i=0;i<TGE.Window._sActiveWindows.length;i++)e+=TGE.Window._sActiveWindows[i]+"<br>"}else if("3"===getQueryString().tgedebug){0<t._mCompletionCount&&(e+="<div style='font-weight: normal; font-size: 12px; padding-bottom: 3px;'>COMPLETION FIRED</div>");var s=TGE.TestPlayableAdRequirements("code");if(0===s){d.style.backgroundColor="#c00",e+="<div style='font-weight: bold; font-size: 12px; padding-top: 4px; padding-bottom: 2px;'>Playable Ad Violation"+(1<(a=TGE.TestPlayableAdRequirements("errors")).length?"s":"")+" Detected!</div>";for(var n=0;n<a.length;n++)e+="<div style='font-weight: normal; font-size: 10px;'>"+a[n]+"</div>"}else if(2===s){var a;d.style.backgroundColor="#fa0",e+="<div style='font-weight: bold; font-size: 12px; padding-top: 4px; padding-bottom: 2px;'>Playable Ad Warning"+(1<(a=TGE.TestPlayableAdRequirements("errors")).length?"s":"")+" Detected</div>";for(n=0;n<a.length;n++)e+="<div style='font-weight: normal; font-size: 10px;'>"+a[n]+"</div>"}}d.innerHTML=e};u(),setInterval(u,250)}if(this._mDebugResize?this._initializeRenderer(this._innerWidth(),this._innerHeight()):0<n&&0<a?this._initializeRenderer(n,a):this._initializeRenderer(),TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"game launch calling _resizeViewport"),this._resizeViewport(),!window.TreSensa){var m=function(){document.addEventListener("touchmove",function(t){t.preventDefault()},!1)};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){m()},!1):m()}return this.assetManager._setRootLocation(t.imageRoot),this._beginLoad(),!0},gameMadeViewable:function(){this._mGameViewableReceived||(this._mGameViewableReceived=!0,document.dispatchEvent(new Event("tgeGameViewable")),TGE.GameViewableCallback&&(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"game is using deprecated TGE.GameViewableCallback, use TGE.Game.AddEventListener('tgeGameViewable') instead"),TGE.GameViewableCallback.call()),(window.applovinMraid||this._mSnapchatSession)&&this._resizeViewport())},preferredLanguage:function(){return TGE.PreferredLanguage()},_updateFPS:function(){this._mThisLoop-this._mLastDisplay<500||(this._mLastDisplay=this._mThisLoop,0<this._mFrameTime&&(this._mCurrentFPS=Math.floor(1e3/this._mFrameTime).toFixed(0)))},_onResize:function(){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_onResize"),this._resizeViewport()},_scaleByCSS2D:function(t){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"resizing game using a 2D CSS transform"),this._mViewportScale=t;var e=this.mCanvasDiv.getAttribute("style")||"";this.mCanvasDiv.setAttribute("style",e+" -ms-transform-origin: 0% 0%; -webkit-transform-origin: 0% 0%; -moz-transform-origin: 0% 0%; -o-transform-origin: 0% 0%; transform-origin: 0% 0%; -ms-transform: scale("+t+"); -webkit-transform: scale("+t+"); -moz-transform: scale("+t+"); -o-transform: scale("+t+"); transform: scale("+t+");"),this._mDivResized=!1},_scaleByCSS3D:function(t){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"resizing game using a 3D CSS transform");var e=t+","+t;this._mViewportScale=t;var i=this.mCanvasDiv.getAttribute("style")||"";this.mCanvasDiv.setAttribute("style",i+" -webkit-transform: rotateZ(360deg); -ms-transform-origin: left top; -webkit-transform-origin: left top; -moz-transform-origin: left top; -o-transform-origin: left top; transform-origin: left top; -ms-transform: scale("+e+"); -webkit-transform: scale3d("+e+", 1); -moz-transform: scale("+e+"); -o-transform: scale("+e+"); transform: scale("+e+");"),this._mDivResized=!1},_innerWidth:function(){if(this._mDebugResize)return getQueryString().debug_resize_width?parseInt(getQueryString().debug_resize_width):1;var t=getDistributionPartner();return this._mResizeCanvasToFit&&this.resizeCanvasToParent&&this.mCanvasDiv.parentNode?this.mCanvasDiv.parentNode.offsetWidth:window.applovinMraid&&applovinMraid.getMaxSize?applovinMraid.getMaxSize().width:"B0099"===t&&window.mraid&&mraid.getMaxSize&&mraid.getMaxSize().width?Math.min(mraid.getMaxSize().width,document.documentElement.clientWidth):"B0159"===t&&window.dapi&&dapi.getScreenSize&&dapi.isViewable()&&dapi.getScreenSize().width?dapi.getScreenSize().width:"B0119"===t?document.body.clientWidth:window.innerWidth&&!TGE.BrowserDetect.oniOS?window.innerWidth:document.documentElement&&0!=document.documentElement.clientWidth?document.documentElement.clientWidth:document.body?document.body.clientWidth:0},_innerHeight:function(){if(this._mDebugResize)return getQueryString().debug_resize_height?parseInt(getQueryString().debug_resize_height):1;var t=getDistributionPartner();return this._mResizeCanvasToFit&&this.resizeCanvasToParent&&this.mCanvasDiv.parentNode?this.mCanvasDiv.parentNode.offsetHeight:window.applovinMraid&&applovinMraid.getMaxSize?applovinMraid.getMaxSize().height:"B0099"===t&&window.mraid&&mraid.getMaxSize&&mraid.getMaxSize().height?Math.min(mraid.getMaxSize().height,document.documentElement.clientHeight):"B0159"===t&&window.dapi&&dapi.getScreenSize&&dapi.isViewable()&&dapi.getScreenSize().height?dapi.getScreenSize().height:"B0119"===t?document.body.clientHeight:window.innerWidth&&!TGE.BrowserDetect.oniOS?window.innerHeight:document.documentElement&&0!=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body?document.body.clientHeight:0},_getBrowserWidth:function(){return this._innerWidth()},_getBrowserHeight:function(){return this._innerHeight()},mraidResized:function(t,e){(window.applovinMraid||"B0099"===getDistributionPartner()||"B0159"===getDistributionPartner())&&this._resizeViewport()},_centerCanvasDiv:function(t,e,i,s){var n=i||(1===this._mPreviewMode?"left":this.horizontalAlignment),a=s||(1===this._mPreviewMode?"top":this.verticalAlignment),o=0;if("center"===n?o=Math.floor(this._getBrowserWidth()/2-t/2):"right"===n&&(o=Math.floor(this._getBrowserWidth()-t)),"none"!==n){this.mCanvasDiv.style.position="absolute",this.mCanvasDiv.style.align="left",this.mCanvasDiv.style.left=o+"px";var r=document.getElementById("viewporter");r&&(r.style.align="left")}var h=0;"middle"===a?h=Math.floor(this._getBrowserHeight()/2-e/2):"bottom"===a&&(h=Math.floor(this._getBrowserHeight()-e)),"none"!==a&&(this.mCanvasDiv.style.position="absolute",this.mCanvasDiv.style.top=h+"px")},_resizeViewport:function(){if(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_resizeViewport"),TGE.DisableViewportResizing)TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"abandoning _resizeViewport - viewport resizing disabled");else if(this._mFullStage){maximize="boolean"!=typeof maximize||maximize;this.mCanvasDiv.getAttribute("style");var t=getQueryString()["padding-top"];t=isNaN(t)?0:parseInt(t);var e=this._mFullStage._mOriginalWidth,i=this._mFullStage._mOriginalHeight,s=this._innerWidth(),n=this._innerHeight()-t;if(0!=s&&0!=n){if(this._mOldScreenWidth=s,this._mOldScreenHeight=n,this._mResizeCanvasToFit){var a=e,o=i,r=TGE.BrowserDetect.isMobileDevice?Number.MAX_VALUE:this.desktopMaxCanvasWidth,h=TGE.BrowserDetect.isMobileDevice?Number.MAX_VALUE:this.desktopMaxCanvasHeight,l=window.devicePixelRatio||1;if(e=Math.min(Math.max(s*l,0),r),i=Math.min(Math.max(n*l,0),h),e>this.maxCanvasWidth||i>this.maxCanvasHeight)this.maxCanvasWidth/e<=this.maxCanvasHeight/i?(i=Math.round(i*this.maxCanvasWidth/e),e=this.maxCanvasWidth):(e=Math.round(e*this.maxCanvasHeight/i),i=this.maxCanvasHeight);else if(TGE.BrowserDetect.isMobileDevice&&(s>=this.mobileResCap||n>=this.mobileResCap)){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"clamping large screen game size...");var d=this.mobileResCap*(e<i?.914:1.463);i=Math.round(i*d/e),e=Math.round(d)}var u=getDistributionPartner();if("B0099"===u||"B0159"===u||e!==a||i!==o){if(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"resizing canvas to: "+e+"x"+i+"..."),this.mCanvasDiv.style.width=e+"px",this.mCanvasDiv.style.height=i+"px",this.canvasWidth=e,this.canvasHeight=i,this._mFullStage){var m=TGE.RemoteSettings("orientationLock"),c=n<s?"landscape":"portrait";this._mFullStage.forceOrientationLock("responsive"!==m&&c!==m),this._mFullStage.setSize(e,i)}}else TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"no change in game size detected");this._mDivResized=!0}else TGE._ResizeEvent.width===this._mFullStage.width&&TGE._ResizeEvent.height===this._mFullStage.height||this._mFullStage.dispatchResize();TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_resizeViewport::game size: "+e+"x"+i+", \nscreen size: "+s+"x"+n);var g=this._determineViewportScale(e,i,s,n),f=e*g,_=i*g;TGE.BrowserDetect.isMobileDevice?(TGE.BrowserDetect.onAndroid&&parseInt(TGE.BrowserDetect.OSversion.charAt(0))<4?this._scaleByCSS2D(g):this._scaleByCSS3D(g),this._centerCanvasDiv(f,_)):this._mResizeCanvasToFit||this.scaleToFitOnDesktop?(this._scaleByCSS2D(g),this._centerCanvasDiv(f,_)):this._centerCanvasDiv(e,i)}else TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"_resizeViewport abandoned due to invalid screen dimensions: "+s+"x"+n)}else TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"abandoning _resizeViewport - stage not ready")},_determineViewportScale:function(t,e,i,s){var n={x:1,y:1};n.x=i/t,n.y=s/e;var a=!TGE.BrowserDetect.isMobileDevice||TGE.BrowserDetect.onAndroid&&"chrome"===TGE.BrowserDetect.browser.toLowerCase()?1e3:100;n.x=Math.ceil(n.x*a)/a,n.y=Math.ceil(n.y*a)/a;var o=1;return o=n.x<n.y?n.x:n.y,Math.abs(1-o)<=.01&&(o=1),o},_active:function(t,e){var i=this._isActive();this._mActive[t]=e,i!==this._isActive()&&(this._mCurrentPointer=-1,e?this.audioManager.resume():this.audioManager.pause(),this._mFullStage&&this._mFullStage.dispatchEvent({type:e?"activate":"deactivate"}))},_isActive:function(){for(var t in this._mActive)if(!this._mActive[t])return!1;return!0},_onVisibilityChange:function(t){TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"game visibility has changed"),document.hidden||document.mozHidden||document.msHidden||document.webkitHidden?this._onDeactivate():this._onActivate()},_onDeactivate:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"game has been put in the background, killing audio and sending deactivate event..."),this._active("activated",!1)},_onActivate:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"game has been put to foreground, restoring audio and sending activate event..."),this._active("activated",!0)},_initializeRenderer:function(t,e){this._mFullStage=new TGE.FullStage(this.mCanvasDiv,t,e),this.stage=this._mFullStage.gameStage,this.audioManager.canPlayAudio()||this.audioManager._unlockAudioOnTouch(),document.dispatchEvent(new Event("tgeStageReady")),TGE.StageReady&&(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"game is using deprecated TGE.StageReadyCallback, use TGE.Game.AddEventListener('tgeStageReady') instead"),TGE.StageReady.call())},_beginLoad:function(){this.gameAsAd()&&0===this._mCustomLoader?this._loadRequiredAssets():this.assetManager.loadAssetList("loading",null,this._loadRequiredAssets.bind(this))},_loadRequiredAssets:function(){if(!this.assetManager._mLoadingOrder.length)for(var t=1;;++t){var e=this.assetManager.getAssetListFromNumber(t);if(!this.assetManager._assetListExists(e))break;this.assetManager._mLoadingOrder.push(e)}var i=null;TGE.LoadingWindow=this.gameAsAd()&&0===this._mCustomLoader?TGE.GenericLoadingWindow:TGE.LoadingWindow||TGE.GenericLoadingWindow,TGE.LoadingWindow?(this.mLoadingScreen=new TGE.LoadingWindow(this.stage.width,this.stage.height).setup({}),this.mLoadingScreen.show(this.stage)):this.mLoadingScreen=this.showManagedScreen("loading"),null!==this.mLoadingScreen&&(i=this._loadRequiredAssetsCallback.bind(this)),this._update(),this.assetManager.loadAssetList("required",i,this._finishedLoadingRequiredAssets.bind(this,0))},_loadRequiredAssetsCallback:function(t){null!==this.mLoadingScreen&&this.mLoadingScreen.handleEvent({type:"progress",percentComplete:t})},_logFinishedLoadingRequiredAssets:function(t){TGE.Debug.Log(TGE.Debug.LOG_INFO,"Finished loading "+t)},_finishedLoadingRequiredAssets:function(t){var e=this.assetManager._mLoadingOrder[t];if(this._mAssetListLoaded[e]="loaded",this._logFinishedLoadingRequiredAssets(e),0===t){document.dispatchEvent(new Event("tgeGameReady"));var i=window.TreSensa&&TreSensa.Playable.sessionID;0<this._mTestGameViewable?i?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"the testgameviewable parameter is not supported in production"):setTimeout(this.gameMadeViewable.bind(this),1e3*this._mTestGameViewable):i||this.gameMadeViewable(),null!==TGE.GameReadyCallback?(TGE.Debug.Log(TGE.Debug.LOG_WARNING,"game is using deprecated TGE.GameReadyCallback, use TGE.Game.AddEventListener('tgeGameReady') instead"),TGE.GameReadyCallback.call()):this._startGame()}var s=t+1;if(s<this.assetManager._mLoadingOrder.length){var n=this._loadRequiredAssetList.bind(this,s);if(0<this._mPoliteLoadingLevel&&0===this._mNumInteractions&&s===this._mPoliteLoadingLevel)return TGE.Debug.Log(TGE.Debug.LOG_INFO,"waiting for user interaction before loading more assets"),void(this._mPoliteLoadCallback=n);this._mTestBuffering||n.call()}else if(this.assetManager.allLoaded=!0,this.assetManager._mLoadedAssetsCallback&&TGE.AssetManager.GetLoadedAssets(this.assetManager._mLoadedAssetsCallback),document.dispatchEvent(new Event("tgeAssetListsLoaded")),"4"===getQueryString().tgedebug&&setTimeout(function(){var t=TGE.Game.GetInstance();t._mDebugResize=!1,t._onResize()},getQueryString().debug_resize_delay?parseInt(getQueryString().debug_resize_delay):250),this._mWaitingForAssets.length){for(var a="",o=0;o<this._mWaitingForAssets.length;++o)o&&(a+=", "),a+=this._mWaitingForAssets[o].id;TGE.Debug.Log(TGE.Debug.LOG_WARNING,"These assetAvailable() ids were not found in any asset list: "+a)}},_loadRequiredAssetList:function(t){var e=this.assetManager._mLoadingOrder[t];"loading"!==this._mAssetListLoaded[e]&&"loaded"!==this._mAssetListLoaded[e]?this.assetManager._assetListExists(e)&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,"loading asset list "+e+"..."),this._mAssetListLoaded[e]="loading",this.assetManager.loadAssetList(e,null,this._finishedLoadingRequiredAssets.bind(this,t))):TGE.Debug.Log(TGE.Debug.LOG_WARNING,"attempted to load asset list "+e+" more than once")},_update:function(){if(this.halt)requestAnimationFrame(this._update.bind(this));else{if(TGE.BrowserDetect.oniOS||"Safari"===TGE.BrowserDetect.browser)for(var t in TGE.VideoPlayer.Wrappers){var e=TGE.VideoPlayer.Wrappers[t],i=window.VideoPlayerGlobals&&window.VideoPlayerGlobals[t],s=e._video,n=i?i._videoPlayer:e._videoPlayer;s.paused||n&&!n.paused||(TGE.VideoPlayer.Log("video: ["+e.assetId+"] pausing due to "+(n?"VideoPlayer paused":"no VideoPlayer")),s.pause())}var a=(this._mThisLoop=(new Date).getTime())-this._mLastLoop;this._mFrameTime+=(a-this._mFrameTime)/this._mFilterStrength,this._mLastLoop=this._mThisLoop,this._mUpdateSkips<0||(0<this._mUpdateSkips&&0<this._mUpdateSkips--?requestAnimationFrame(this._update.bind(this)):(this._mUpdateSkips=this.slowMotion,this._doUpdate(a)))}},_doUpdate:function(t){if(this._updateFPS(),t/=1e3,this._mBuffering){for(var e in this._mBuffering=!1,this._mShowBuffering=!1,this._mBufferingOccurrences){var i=this._mBufferingOccurrences[e];1==this._mTestBuffering&&(i.testTimer-=t);var s=1!=this._mTestBuffering||i.testTimer<=0,n=this._mAssetListLoaded[e];if("queued"===n)for(var a=this.assetManager._mLoadingOrder.indexOf(e),o=1;o<=a;o++){var r=this._mAssetListLoaded[this.assetManager._mLoadingOrder[o]];if("queued"===r&&this._loadRequiredAssetList(o),"loading"===r)break}if("loaded"===n&&s){if(!i.completeFired){!this._mTestBuffering&&i.showBuffering&&TGE.Analytics.CustomEvent("buffering_complete_"+e);for(var h=0;h<i.callbacks.length;h++)i.callbacks[h].call();i.completeFired=!0}}else this._mBuffering=!0,this._mShowBuffering=this._mShowBuffering||i.showBuffering}this._mShowBuffering||this._closeBufferingScreen()}t=Math.max(this.mMinTickTime,t),t=Math.min(this.mMaxTickTime,t),this._mAdInactivityTimer+=!this._mGameViewableReceived||0<this._mNumInteractions?0:t;var l=0===this._mNumInteractions&&0<this._mAdInactivityTimeLimit&&this._mAdInactivityTimer>=this._mAdInactivityTimeLimit;if(0<this._mLaunchTime&&(this.mGameTime+=t),this._mFullStage._mTransformsUpdated=0,!l){this._mBufferingScreen||this._mFullStage._updateObjectMouseOverStates(this._mPointerX,this._mPointerY);var d={type:"update",elapsedTime:t};this._mUpdateRoot&&!this._mUpdateRoot.markedForRemoval()&&null!==this._mUpdateRoot.parent||(this._mUpdateRoot=this.stage),this._mFullStage.dispatchUpdate(d,this._mUpdateRoot)}this._mFullStage._emptyTrash(),this._mFullStage._pruneListeners(),requestAnimationFrame(this._update.bind(this)),this._mFullStage.draw()},_startGame:function(){TGE.Debug.Log(TGE.Debug.LOG_INFO,"starting game..."),this._mLaunchTime=(new Date).getTime(),this._resetGame(),null!==this.onLoad&&this.onLoad.call(this),window.TreSensa&&TreSensa.Playable.initialGameLoadComplete(),1===this._mTestAdHeader?(TGE.AdHeader.Create(function(){alert("AD CLOSE")}),TGE.AdHeader.ShowCountdown(5),setTimeout(function(){TGE.AdHeader.ShowClose()},5e3)):2===this._mTestAdHeader&&(TGE.AdHeader.Create(function(){alert("AD CLOSE")}),TGE.AdHeader.ShowCountdown(30),TGE.AdHeader.ShowRewardedPlayableOverlay(),setTimeout(function(){TGE.AdHeader.ShowClose()},5e3))},_resetGame:function(){if(this.stage.removeChildren(),TGE.FirstGameWindow){var t=new TGE.FirstGameWindow(this.stage.width,this.stage.height);t.setup({}),t.show(this.stage)}},_processMousePosition:function(t,e){if(this._mPointerX=t,this._mPointerY=e,TGE.GameStage._sOrientationLock.active){var i=TGE.GameStage._sOrientationLock;i.gameHeight<i.gameWidth?(this._mPointerX=e,this._mPointerY=i.gameHeight*this._mViewportScale-t):(this._mPointerX=i.gameWidth*this._mViewportScale-e,this._mPointerY=t)}this._mPointerX/=this._mViewportScale,this._mPointerY/=this._mViewportScale},_preventBehavior:function(t){t.stopPropagation(),t.preventDefault()},_handleMouseEvent:function(t,e){for(var i,s,n=e.changedTouches?e.changedTouches.length:0;;){var a=e.target.getBoundingClientRect();s=0<=--n?(i=e.changedTouches[n].clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.changedTouches[n].clientY+document.body.scrollTop+document.documentElement.scrollTop):(i=e.clientX,e.clientY),i-=a.left,s-=a.top;var o=e.changedTouches&&0<=n?e.changedTouches[n].identifier:e.button;if((this.allowMultitouch||this._mCurrentPointer<0||o===this._mCurrentPointer)&&(this._processMousePosition(i,s),this._mFullStage._notifyObjectsOfMouseEvent(t,this._mPointerX,this._mPointerY,o),this.allowMultitouch||("down"===t&&this._mCurrentPointer<0?this._mCurrentPointer=o:"up"===t&&o===this._mCurrentPointer&&(this._mCurrentPointer=-1))),n<=0)break}this._preventBehavior(e)},_mouseDown:function(t){this._interaction(),window.focus(),this._mPointerDown=!0,this._handleMouseEvent("down",t)},_mouseUp:function(t){this._mPointerDown=!1,this._handleMouseEvent("up",t)},_mouseMove:function(t){this._handleMouseEvent("move",t)},_keyDown:function(t){this.blockTGEKeys||(this._interaction(),this._mKeysDown[t.keyCode]=!0,this._mFullStage._notifyObjectsOfKeyEvent("keydown",t.keyCode)),this.blockBrowserKeys&&-1<[8,32,37,38,39,40].indexOf(t.keyCode)&&t.preventDefault()},_keyUp:function(t){this.blockTGEKeys||(this._mKeysDown[t.keyCode]=!1,this._mFullStage._notifyObjectsOfKeyEvent("keyup",t.keyCode)),this.blockBrowserKeys&&-1<[8,32,37,38,39,40].indexOf(t.keyCode)&&t.preventDefault()},isKeyDown:function(t){return!0===this._mKeysDown[t]},_interaction:function(){this._mNumInteractions++,this._mLastInteraction=(new Date).getTime(),1===this._mNumInteractions&&(this._mFullStage.dispatchEvent({type:"engagement",name:"primary"}),TGE.Events.logInteraction(),this._checkOnPoliteLoading())},_checkOnPoliteLoading:function(){this._mPoliteLoadCallback&&(TGE.Debug.Log(TGE.Debug.LOG_INFO,"resuming asset loading..."),this._mPoliteLoadCallback.call(),this._mPoliteLoadCallback=null)},accumulatorIncrement:function(t,e,i){this.serverRequest(null,null,i)},accumulatorGetTotals:function(t){this.serverRequest(null,null,t)},serverRequest:function(t,e,i){i&&i.call(null,{success:!1,error:"server offline"})}},TGE.KEY_ARROW_LEFT=37,TGE.KEY_ARROW_RIGHT=39,TGE.KEY_ARROW_UP=38,TGE.KEY_ARROW_DOWN=40,TGE.KEY_SPACEBAR=32,TGE.TestCPIRequirements=function(t){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGE.TestCPIRequirements is deprecated, use TGE.TestPlayableAdRequirements instead.")},TGE.TestPlayableAdRequirements=function(t){if(TGE.AssetManager.TrackAssets&&"file:"!==document.location.protocol){if(window.console){var i=TGE.Game.GetInstance(),s=!0,n=!1,a=[],o=void 0===t?function(t,e){console.log(t,e)}:function(t,e){};o("",""),o("%cTEST RESULTS FOR PLAYABLE AD REQUIREMENTS:","font-weight: bold"),o("","");for(var r={pass:"#00aa00",warn:"#f69c00",fail:"#ff0000"},h="pass",l="fail",d="warn",e=function(t){var e=t();if(e.message&&o("%c"+e.message,"color: "+r[e.conclusion]),"string"==typeof e.conclusion&&e.conclusion!==h)if(s=!1,e.conciseMessage)a.push(e.conciseMessage);else if(e.message){var i=e.message.replace(/^#[0-9]+\s+(.*)/,"$1");a.push(i)}e.conclusion===d&&(n=!0)},u=[function(){var t={};return i.resizeCanvasToFit?(t.message="#1 Responsive Layout: PASS (note this does not guarantee layouts are visually acceptable across all screen sizes)",t.conclusion=h):(t.message="#1 Responsive Layout: FAIL",t.conclusion=l),t},function(){var t={},e=Math.round(i.assetManager.totalAssetFootprint(!0)/1024);return e<200?(t.message="#2 Asset Footprint: PASS ("+e+" KB)",t.conclusion=h):200===e?(t.message="#2 Asset Footprint: PASS with warning ("+e+" KB)",t.conciseMessage="Asset Footprint: WARNING ("+e+" KB)",t.conclusion=d):(t.message="#2 Asset Footprint: FAIL ("+e+" KB)",t.conclusion=l),t},function(){var t={},e=i.assetManager.totalImagesLoadedBeforeStart();return e<=3?(t.message="#3 Initial Load Image Count: PASS ("+e+" images, max 3)",t.conclusion=h):(t.message="#3 Initial Load Image Count: FAIL ("+e+" images, max 3)",t.conclusion=l),t},function(){var t={},e=i.assetManager.totalImagesLoadedAfterStart();return e<=8?(t.message="#4 Progressive Load Image Count: PASS ("+e+" images, max 8)",t.conclusion=h):(t.message="#4 Progressive Load Image Count: FAIL ("+e+" images, max 8)",t.conclusion=l),t},function(){var t={},e=i.assetManager.totalFontsLoadedBeforeStart();return e<=1?(t.message="#5 Initial Load Font Count: PASS ("+e+" fonts, max 1)",t.conclusion=h):(t.message="#5 Initial Load Font Count: FAIL ("+e+" fonts, max 1)",t.conclusion=l),t},function(){var t={},e=i.assetManager.totalFontsLoadedAfterStart();return e<=1?(t.message="#6 Progressive Load Font Count: PASS ("+e+" fonts, max 1)",t.conclusion=h):(t.message="#6 Progressive Load Font Count: FAIL ("+e+" fonts, max 1)",t.conclusion=l),t},function(){var t={};return i.assetManager.largestImageDimension()<=1024?(t.message="#7 Image Dimension Cap: PASS",t.conclusion=h):(t.message="#7 Image Dimension Cap: FAIL (an image exists that has width/height greater than 1024px)",t.conclusion=l),t},function(){var t={},e=TGE.Events.engagements||window.TGS&&TGS.Analytics.engagementLevel&&TGS.Analytics.engagementLevel()-1;return 0===i._mNumInteractions||1<=e?(t.message="#8 Secondary Engagement: PASS "+(0===i._mNumInteractions?"(not required yet)":"(event was fired)"),t.conclusion=h):i._mNumInteractions<=2&&e<1?(t.message="#8 WARNING: Secondary engagement event has not been fired yet",t.conclusion=d):(t.message="#8 FAIL: Secondary engagement event has not been fired",t.conclusion=l),t},function(){var t={};0!==Object.keys(TGE.AdHeader._sCustomSettings).length?i.assetManager.getAsset(TGE.AdHeader._sCustomSettings.closeImage,!1)?(t.message="#9 Custom Close Button: PASS (asset was loaded)",t.conclusion=h):(t.message="#9 Custom Close Button: FAIL (custom close image not loaded)",t.conclusion=l):(t.message="#9 Custom Close Button: PASS (asset not required)",t.conclusion=h);return t},function(){var t={};return 0<i._mLaunchTime&&window.GameConfig&&GameConfig.TGE.FONT_LOADER&&0===TGE.AssetManager._sTotalFonts&&(t.message="WARNING: No fonts have been loaded but FONT_LOADER is true",t.conclusion=d),t},function(){var t={},e=TGE.AssetManager._sTotalAssetsOverFootprintLimit;return 0<e&&(t.message="WARNING: "+e+" image"+(1<e?"s":"")+" over 400KB.  Check if all images are getting TinyPNGed.",t.conclusion=d),t}],m=0;m<u.length;m++)e(u[m]);return o("",""),s||(o("%cThis game does not meet Playable Ad Technical Requirements and is NOT production ready!","color: "+r.fail+"; font-weight: bold"),o("","")),"errors"===t?a:"code"===t?s?n?2:1:0:s?"PASS":"FAIL"}}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TestPlayableAdRequirements can only be run from a webserver and with the trackassets querystring parameter set, tgedebug=3, or TGE.AssetManager.TrackAssets set to true in code.")},TGE.Completion=function(t){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGE.Completion is deprecated, use TGE.Analytics.Completion"),TGE.Analytics.Completion(t)},TGE._DefaultTimeBetweenClicks=1,TGE._ReadyForNextClick={},TGE.Game.Clickthrough=function(t,e,i){if(t&&(e||"default"===t)){if(!1!==TGE._ReadyForNextClick[t]){TGE._ReadyForNextClick[t]=!1,i="number"==typeof i?i:TGE._DefaultTimeBetweenClicks;if(setTimeout(function(){TGE._ReadyForNextClick[t]=!0},1e3*i),"object"==typeof e){var s=TGE.Game.GetInstance().getCampaignID();if("string"==typeof e[s])e=e[s];else{if("string"!=typeof e.default)return;e=e.default}}else if("string"==typeof e){var n=Math.round((new Date).getTime()/1e3);e=e.replace("=[timestamp]","="+n)}TGE.Events.doClickthrough.call(TGE.Events,t,e)}}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.Game.Clickthrough requires name and URL parameters")},TGE.Game.AppstoreClickthrough=function(){TGE.Game.Clickthrough("default")},TGE.GetFromStorage=function(t){try{return"B0153"===getDistributionPartner()?null:window.localStorage.getItem(t)}catch(t){return null}},TGE.SetInStorage=function(t,e){try{return"B0153"===getDistributionPartner()?null:window.localStorage.setItem(t,e)}catch(t){}},Object.defineProperty(TGE.Game.prototype,"resizeCanvasToFit",{get:function(){return this._mResizeCanvasToFit},set:function(t){this._mResizeCanvasToFit=1!==this._mPreviewMode&&t}}),TGE.RedirectUser=TGE.ClickThrough=function(t,e,i){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"TGE.ClickThrough and TGE.RedirectUser are deprecated, use TGE.Game.Clickthrough"),TGE.Game.Clickthrough(t,e,i)},TGE.GameState={PROMO:"promo",GAME:"game",TUTORIAL:"tutorial",_mState:getQueryString().state,RegisterStates:function(){},GetInstance:function(){return TGE.GameState},GetState:function(){return TGE.GameState._mState}},TGE.GameReadyCallback=null,TGE.GameViewableCallback=null,TGE.SessionEndedCallback=null,TGE.StageReady=null,TGE.Game._sEventListeners={},TGE.Game.AddEventListener=function(t,e){document.addEventListener(t,e),TGE.Game._sEventListeners[t]||(TGE.Game._sEventListeners[t]=[]),TGE.Game._sEventListeners[t].push(e);var i=TGE.Game.GetInstance();return"tgeGameReady"===t&&"loaded"===i._mAssetListLoaded.required?e.call():"tgeGameViewable"===t&&i._mGameViewableReceived?e.call():"tgeStageReady"===t&&i.stage?e.call():"tgeAssetListsLoaded"===t&&i.assetManager.allLoaded?e.call():"tresensaSessionEnded"===t&&window.TreSensa&&TreSensa.Playable.sessionEnded&&e.call(),e},TGE.Game.RemoveEventListener=function(t,e){if(e){document.removeEventListener(t,e);var i=TGE.Game._sEventListeners[t];if(i)for(var s=e.toString(),n=0;n<i.length;n++)if(i[n].toString()===s)return void i.splice(n,1)}},TGE.Game.RemoveAllListeners=function(){for(var e in TGE.Game._sEventListeners)TGE.Game._sEventListeners[e].forEach(function(t){document.removeEventListener(e,t)});TGE.Game._sEventListeners={}},TGE.AssetLoader=function(){return this.mAssetList=null,this.mUpdateCallback=null,this.mCompleteCallback=null,this},TGE.AssetLoader.prototype={getAssetURL:function(t,e,i){return(!(!0===t.absolutePath)?e:"")+(t.localized?i:"")+t.url},loadAssetFromAssetList:function(t,e,i,s,n,a){var o,r=i.url?i.url.split(".").pop().toLowerCase():null,h="audio"===i.assetType||"ogg"===r||"mp3"===r;s&&(o=s.slice(0,-i.url.length));var l=null;if(h)a&&(l=e.addAudio(i.id,s,o+i.backup_url));else if(i.googleFamilies)l=e.addFont(i.googleFamilies);else if("font"===i.assetType||"ttf"===r||"woff"===r||"woff2"===r||"otf"===r)l=e.addFont(i.id,s);else if("js"===r)l=e.addJavascript(s);else if("json"===r)i.id!==trimmedFilename(s)&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"id field not supported for JSON asssets"),l=e.addJSON(s);else if("mp4"===r)l=e.addVideo(s,i);else if(t.useSpriteSheets&&i.sheet){var d=i.sheet,u=t._mSpriteSheets[d];u&&!n||(null!==(u=e.addImage(o+i.sheet))&&t.addLoadedAsset(trimmedFilename(i.sheet),u),t._mSpriteSheets[i.sheet]=u);var m=TGE.AssetManager.SpriteSheets[trimmedFilename(d)];if(m){var c=m[trimmedFilename(s)];c&&(l={spriteSheet:u,x:c[0],y:c[1],width:c[2],height:c[3]},4<c.length&&(l.offsetX=c[4],l.offsetY=c[5],l.drawWidth=l.width,l.drawHeight=l.height,6<c.length&&(l.width=c[6],l.height=c[7])))}}else l=e.addImage(s);null!==l&&t.addLoadedAsset(i.id,l)},loadAssetList:function(t,e,i,s,n,a,o){if(null===(i=i||t._mRootLocation))return TGE.Debug.Log(TGE.Debug.LOG_WARNING,"asset list manually loaded before game launch, will be deferred until after all required assets have loaded"),void TGE.Game.AddEventListener("tgeAssetListsLoaded",this.loadAssetList.bind(this,t,e,i,s,n,a,o));var r=!0===e.errors;if(e.errors=!1,e.loaded=!1,0===e.list.length)return a&&a(1),void(o&&o({errors:!1}));s=g(s,0<(i=g(i,"")).length?"/":""),s+=n+"/",this.mAssetList=e,this.mUpdateCallback=a,this.mCompleteCallback=o;for(var h=new TGE.Loader({statusInterval:3e3}),l=!1,d=0;d<e.list.length;d++){var u=e.list[d];if(r||!t._mAssetCache[u.id]){var m=u.url?u.url.split(".").pop().toLowerCase():null,c=(u.assetType,u.url?this.getAssetURL(u,i,s):null);this.loadAssetFromAssetList(t,h,u,c,r,t.loadAudio),l=!0}}function g(t,e){return 0<(t="string"==typeof t?t:e).length&&"/"!==t.charAt(t.length-1)?t+"/":t}l||(a&&a(1),o&&o({errors:!1})),h.addProgressListener(TGE.AssetLoader.prototype._loaderCallback.bind(this)),h.addCompletionListener(TGE.AssetLoader.prototype._completeCallback.bind(this)),h.start()},_loaderCallback:function(t){if(t.error)TGE.Debug.Log(TGE.Debug.LOG_ERROR,"could not load asset '"+t.resource.getName()+"'"),this.mAssetList.errors=!0;else if(TGE.AssetManager.TrackAssets){var e=!TGE.Game.GetInstance().assetManager._mAssetLists.required.loaded,i=t.resource&&t.resource.img,s=t.resource&&t.resource.font;if(i?e?TGE.AssetManager._sTotalImagesLoadedBeforeStart++:TGE.AssetManager._sTotalImagesLoadedAfterStart++:s&&(e?TGE.AssetManager._sTotalFontsLoadedBeforeStart++:TGE.AssetManager._sTotalFontsLoadedAfterStart++),t.resource&&t.resource.img){var n=Math.max(t.resource.img.width,t.resource.img.height);n>TGE.AssetManager._sLargestImageDimension&&(TGE.AssetManager._sLargestImageDimension=n)}this._trackFilesize(t.resource,e)}if(this.mUpdateCallback){var a=t.completedCount/t.totalCount;this.mUpdateCallback(a)}},_completeCallback:function(){for(var t=TGE.Game.GetInstance().assetManager,e=TGE.Game.GetInstance()._mFullStage._mRenderer,i=0;i<this.mAssetList.list.length;i++){var s=this.mAssetList.list[i];if(!s.assetType){var n=t.getAsset(s.id,!1);if(n&&(n.src||n.spriteSheet)){var a=e.processImage(n.spriteSheet?n.spriteSheet:n,!!n.spriteSheet);a&&(t._mRendererTextures[s.id]=a)}}}var o=!1;null!==this.mAssetList&&(this.mAssetList.loaded=!0,o=this.mAssetList.errors,this.mAssetList=null),this.mCompleteCallback&&this.mCompleteCallback({errors:o})},_trackFilesize:function(s,n){var a=new XMLHttpRequest;a.open("HEAD",s.getName(),!0),a.onreadystatechange=function(){if(this.readyState==this.DONE){var t=parseInt(a.getResponseHeader("Content-Length"));TGE.AssetManager._sTotalAssetFootprint+=t,n&&(TGE.AssetManager._sTotalAssetFootprintBeforeStart+=t);var e=400<t/1024,i=s.img;e&&i&&TGE.AssetManager._sTotalAssetsOverFootprintLimit++}},a.send()}},TGE.FontLoader=function(t,e){this.loader=null,this.font=null,this.id=t,this.url=e,this.pollCount=0,this.start=function(t){this.loader=t;var e=this;if("[object Array]"===Object.prototype.toString.call(this.id)){this.url=this.id;for(var i=function(){},s=0;s<this.id.length;s++){var n,a=!1,o=(m=this.id[s].split(":"))[0];if(m.length<=2){if(!window._TREFONTS||!_TREFONTS[o]){WebFontConfig={google:{families:this.id},active:function(){e.loader.onLoad(e)},fontinactive:function(){e.loader.onError(e)}};var r=document.createElement("script");r.src=("https:"==document.location.protocol?"https":"http")+"://googleapis.tresensa.com/ajax/libs/webfont/1/webfont.js",r.type="text/javascript",r.async="true";var h=document.getElementsByTagName("script")[0];return void h.parentNode.insertBefore(r,h)}if(1===m.length)TGE.AssetManager.LoadFontData(o,_TREFONTS[o].data,null,i);else for(var l=m[1].split(","),d=0;d<l.length;d++)_TREFONTS[o].data[l[d]]?TGE.AssetManager.LoadFontData(o,_TREFONTS[o].data[l[d]],parseInt(l[d]),i):(a=!0,n="no inlined font found for '"+o+"' weight "+l[d])}else a=!0,n="could not parse Google Font entry";a&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,n),this.loader.onError(this))}e.loader.onLoad(e)}else{TGE.AssetManager._sTotalFonts++;try{var u=this.url;if(window._TREFONTS&&_TREFONTS[c]){var m,c=(m=this.url.split("/"))[m.length-1];u=_TREFONTS[c]}TGE.AssetManager.LoadFontData(this.id,u,null,e.loader.onLoad.bind(e.loader,e))}catch(t){e.loader.onError(e)}}},this.checkStatus=function(){3<=this.pollCount?this.loader.onTimeout(this):this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},TGE.ScriptLoader=function(url){this.loader=null,this.scriptNode=null,this.url=url,this.pollCount=0,this.scriptLoaded=function(){if(this.scriptNode&&(this.scriptNode.onreadystatechange=null,this.scriptNode.onload=null),-1!==this.url.indexOf("assets/fonts/")){var t=this.url.match(/([^\/]+)(?=\.\w+$)/)[0];return t=t.replace(/_/g," "),void TGE.AssetManager.LoadFontScript(t,!0,this.loader.onLoad.bind(this.loader,this))}this.loader.onLoad(this)},this.start=function(loader){if(this.loader=loader,window._TRESCRIPTS){var parts=this.url.split("/"),filename=parts[parts.length-1],script=_TRESCRIPTS[filename];if(script)try{window.Function?Function(script)():eval(script),this.scriptLoaded()}catch(t){this.loader.onError(this)}else this.loader.onError(this)}else{var h=document.getElementsByTagName("head")[0];this.scriptNode=document.createElement("script"),this.scriptNode.type="text/javascript",this.scriptNode.src=TGE.AssetManager._sFullPathTransformation(this.url),this.scriptNode.onreadystatechange=this.scriptLoaded.bind(this),this.scriptNode.onload=this.scriptLoaded.bind(this),h.appendChild(this.scriptNode)}},this.checkStatus=function(){3<=this.pollCount?this.loader.onTimeout(this):this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},TGE.JSONLoader=function(a){this.loader=null,this.json={},this.url=a,this.pollCount=0,this.start=function(t){if(this.loader=t,window._TREJSON){var e=this.url.split("/"),i=e[e.length-1],s=_TREJSON[i];s?this.jsonData(s):this.loader.onError(this)}else{var n=this;fetch(TGE.AssetManager._sFullPathTransformation(a)).then(function(t){return t.json()}).then(n.jsonData.bind(n)).catch(function(t){TGE.Debug.Log(TGE.Debug.LOG_ERROR,t),n.loader.onError(n)})}},this.jsonData=function(t){TGE.DeepCopy(t,this.json),this.loader.onLoad(this)},this.checkStatus=function(){3<=this.pollCount?this.loader.onTimeout(this):this.pollCount++},this.onTimeout=function(){this.loader.onTimeout(this)},this.getName=function(){return this.url}},"function"==typeof TGE.Loader&&(TGE.Loader.prototype.addFont=function(t,e){var i=new TGE.FontLoader(t,e);return this.add(i),i.font},TGE.Loader.prototype.addJSON=function(t){var e=new TGE.JSONLoader(t);return this.add(e),e.json},TGE.Loader.prototype.addJavascript=function(t){var e=new TGE.ScriptLoader(t);return this.add(e),e.scriptNode}),TGE.AssetManager=function(t){return null!==TGE.AssetManager.sAssetManagerInstance?TGE.AssetManager.sAssetManagerInstance:(void 0===t&&(t=!0),(TGE.AssetManager.sAssetManagerInstance=this).useSpriteSheets=!0,this.loadAudio=t,this.allLoaded=!1,this.languagesFolder="languages",this._mSpriteSheets={},this._mAssetLists={},this._mLoadingOrder=[],this._mAssetCache={},this._mRendererTextures={},this._mGroupToListKey=null,this._mListToGroupKey=null,this._mLoadedAssetsCallback=null,this._mLoadedAssets=[],this._mRootLocation=null,this._verifyAssetListExists("loading"),this._verifyAssetListExists("required"),"1"!==getQueryString().trackassets&&"true"!==getQueryString().trackassets&&"3"!==getQueryString().tgedebug||(TGE.AssetManager.TrackAssets=!0),this._parseAssets&&this._parseAssets(),this)},TGE.AssetManager.TrackAssets=!1,TGE.AssetManager.SpriteSheets={},TGE.AssetManager.sAssetManagerInstance=null,TGE.AssetManager._sTotalFonts=0,TGE.AssetManager._sTotalImagesLoadedBeforeStart=0,TGE.AssetManager._sTotalImagesLoadedAfterStart=0,TGE.AssetManager._sTotalFontsLoadedBeforeStart=0,TGE.AssetManager._sTotalFontsLoadedAfterStart=0,TGE.AssetManager._sTotalAssetFootprint=0,TGE.AssetManager._sTotalAssetFootprintBeforeStart=0,TGE.AssetManager._sTotalAssetsOverFootprintLimit=0,TGE.AssetManager._sLargestImageDimension=0,TGE.AssetManager._sFullPathTransformation=function(t){return t},TGE.AssetManager.SetFullPathTransformation=function(t){TGE.AssetManager._sFullPathTransformation=t},TGE.AssetManager.Get=function(t){return null===TGE.AssetManager.sAssetManagerInstance?null:TGE.AssetManager.sAssetManagerInstance.getAsset(t)},TGE.AssetManager.Exists=function(t){return null!==TGE.AssetManager.sAssetManagerInstance&&null!==TGE.AssetManager.sAssetManagerInstance.getAsset(t,!1)},TGE.AssetManager.GetTexture=function(t){return null===TGE.AssetManager.sAssetManagerInstance?null:TGE.AssetManager.sAssetManagerInstance.getTexture(t)},TGE.AssetManager.GetLoadedAssets=function(t){var e=TGE.AssetManager.sAssetManagerInstance;e&&(e._mLoadedAssetsCallback=t,e.allLoaded&&t(e._mLoadedAssets))},TGE.AssetManager.LoadFontScript=function(t,e,i){if(!window._TREFONTS||!_TREFONTS[t]){var s=t.replace(/ /g,"_");if(!window._TREFONTS||!_TREFONTS[s])return void TGE.Debug.Log(TGE.Debug.LOG_ERROR,"inlined font '"+t+"' was not found");t=s}var n=_TREFONTS[t];if(n.data){if("string"==typeof n.data)e?TGE.AssetManager.WaitForFont(t,null,i):TGE.AssetManager.LoadFontData(t,n.data);else if("object"==typeof n.data){var a=0,o=Object.keys(n.data).length;for(var r in n.data)n.data.hasOwnProperty(r)&&(e?TGE.AssetManager.WaitForFont(t,r,function(){++a===o&&i()}):TGE.AssetManager.LoadFontData(t,n.data[r],r))}}else i&&i();return n},TGE.AssetManager.LoadFontData=function(t,e,i,s){var n=document.createElement("style"),a=i?"font-weight: "+i+";":"";n.appendChild(document.createTextNode("@font-face {font-family: '"+t+"'; "+a+" src: url('"+e+"');}")),TGE.AssetManager.WaitForFont(t,i,s),document.head.appendChild(n)},TGE.AssetManager.WaitForFont=function(t,e,i){var s=new FontFaceObserver(t,e?{weight:e}:null);s.load(null,1e3).then(function(){i&&i()},function(){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"could not load '"+t+(e?":"+e:"")+"' font within 1000ms, is it too big?")})},TGE.AssetManager.prototype={_setRootLocation:function(t){this._mRootLocation=t,window.GameConfig&&GameConfig.PACKAGE_ASSETS&&GameConfig.PACKAGE_ASSETS.forEach(function(t){this._recordAsset(this._mRootLocation+t)}.bind(this))},getAssetListFromNumber:function(t){return"required"+(1<t?t:"")},_assetListExists:function(t){return this._mAssetLists.hasOwnProperty(t)},_verifyAssetListExists:function(t){this._assetListExists(t)||(this._mAssetLists[t]={loaded:!1,list:[]})},_recordAsset:function(t){-1===this._mLoadedAssets.indexOf(t)&&this._mLoadedAssets.push(t)},registerAssetLists:function(t){if(Array.isArray(t)&&"required"===t[0]){this._mLoadingOrder=t.slice();for(var e=this._mLoadingOrder.length;0<=--e;)this._assetListExists(this._mLoadingOrder[e])||(TGE.Debug.Log(TGE.Debug.LOG_INFO,"removing unused assetList '"+this._mLoadingOrder[e]+"' from registerAssetLists"),this._mLoadingOrder.splice(e,1))}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,'registerAssetLists must be called with an Array, and the first entry must be "required"')},addAssets:function(t,e){if(this._verifyAssetListExists(t),Array.isArray(e))for(var i=0;i<e.length;++i)this.addAsset(t,e[i]);else this.addAsset(t,e)},addAsset:function(t,e){this._verifyAssetListExists(t),!e.id&&e.url&&(e.id=trimmedFilename(e.url)),this._mAssetLists[t].list.push(e)},addSheetImages:function(t,e,i,s){var n;"object"==typeof e&&(n=e.subsheetURL,i=i||e.layoutURL,s=void 0!==s?s:e.localized||!1,e=e.sheetURL||e.url),2==parseInt(getQueryString().testbuffering)&&(t="required"),this._verifyAssetListExists(t);var a=this._mAssetLists[t];"boolean"==typeof i&&i?(a.localizedSheets=a.localizedSheets||[],a.localizedSheets.push(e)):"string"==typeof i||n?(a.layoutFiles=a.layoutFiles||[],a.layoutFiles.push({sheetURL:e,subsheetURL:n,layoutURL:i,localized:s})):this._addSheetImagesToAssetList(a,e,s)},_prepSubsheet:function(t,e){var i=TGE.AssetManager.SpriteSheets[e];if(i){var s=TGE.AssetManager.SpriteSheets[t];if(s){var n=i[t];if(n){for(var a in s){var o=s[a].slice();o[0]+=n[0],o[1]+=n[1],i[a]=o}delete TGE.AssetManager.SpriteSheets[t]}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"subsheet '"+t+"' not found in main sheet "+e)}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager can't find subsheet '"+t+"'")}},addTFXImages:function(t,e){this._verifyAssetListExists(t);for(var i=0;i<e.length;i++){var s=e[i];s.imageList=this._mAssetLists[t].list,s.tfxClass.AddRequiredImagesToAssetList(s)}},addTFXAssets:function(t,e){this.addTFXImages(t,e)},loadAssetList:function(t,e,i){var s=this._mAssetLists[t];s?this._loadAssetList(s,e,i):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager could not locate asset list '"+t+"'"),i&&i({errors:!1}))},addImage:function(t,e){this.addLoadedAsset(t,e)},addLoadedAsset:function(t,e){this._mAssetCache[t]=e},trimAsset:function(t,e){"string"!=typeof e&&(e="top bottom left right");var i=this.getAsset(t);i.spriteSheet&&(0<=e.indexOf("top")&&(++i.y,--i.height),0<=e.indexOf("bottom")&&--i.height,0<=e.indexOf("left")&&(++i.x,--i.width),0<=e.indexOf("right")&&--i.width)},getAsset:function(t,e){e=void 0===e||e;var i=this._mAssetCache[t];return e&&null!=t&&!i&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.getAsset could not find the asset '"+t+"'"),i||null},getTexture:function(t,e){e=void 0===e||e;var i=this._mRendererTextures[t];return e&&null!=t&&!i&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.getTexture could not find a texture for '"+t+"'"),i||null},addSheetImagesToAssetList:function(t,e){this.addSheetImages(t,e)},totalAssetFootprint:function(t){return t?TGE.AssetManager._sTotalAssetFootprintBeforeStart:TGE.AssetManager._sTotalAssetFootprint},totalImagesLoadedBeforeStart:function(){return TGE.AssetManager._sTotalImagesLoadedBeforeStart},totalImagesLoadedAfterStart:function(){return TGE.AssetManager._sTotalImagesLoadedAfterStart},totalFontsLoadedBeforeStart:function(){return TGE.AssetManager._sTotalFontsLoadedBeforeStart},totalFontsLoadedAfterStart:function(){return TGE.AssetManager._sTotalFontsLoadedAfterStart},largestImageDimension:function(){return TGE.AssetManager._sLargestImageDimension},_addSheetImagesToAssetList:function(t,e,i){var s=trimmedFilename(e),n=TGE.AssetManager.SpriteSheets[s];if(n){for(var a in n)if(n.hasOwnProperty(a)&&(t.list.push({id:a,url:a+".png",sheet:e,localized:!0===i}),t.layoutFiles))for(var o=TGE.Game.GetInstance(),r=o._mWaitingForAssets,h=r.length;0<=--h;){var l=r[h];if(l.id===a||l.id===s)for(var d in this._mAssetLists)this._mAssetLists[d]===t&&(o.waitForAssetList(d,l.callback,l.showBuffering),r.splice(h,1))}}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.addSheetImages could not locate sheet '"+e+"'")},_loadAssetList:function(t,e,i){if(!0===t.loaded&&!0!==t.errors)e&&e(1),i&&i({errors:!1});else{var s=TGE.RemoteSettings("lang");if(t.localizedSheets)for(var n=0;n<t.localizedSheets.length;n++){var a=trimmedFilename(t.localizedSheets[n]),o=a+("en"!==s?"_"+s:""),r=TGE.AssetManager.SpriteSheets[o];r?(TGE.AssetManager.SpriteSheets[a]=r,this._addSheetImagesToAssetList(t,t.localizedSheets[n],!0)):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"TGE.AssetManager.addSheetImages could not locate localized layout file '"+o+".js'")}if(t.layoutFiles){for(var h={loaded:!1,list:[]},l=0;l<t.layoutFiles.length;l++){var d=t.layoutFiles[l];if(d.subsheetURL)if(Array.isArray(d.subsheetURL))for(var u=d.subsheetURL.length;0<=--u;)m(h,d.subsheetURL[u]);else m(h,d.subsheetURL);d.layoutURL&&h.list.push({url:d.layoutURL,localized:d.localized})}this._loadAssetList(h,null,this._processSheetLayouts.bind(this,t,e,i))}else{(new TGE.AssetLoader).loadAssetList(this,t,this._mRootLocation,this.languagesFolder,s,e,i)}}function m(t,e){TGE.AssetManager.SpriteSheets[trimmedFilename(e)]||t.list.push({url:e})}},_processSheetLayouts:function(t,e,i){for(var s=0;s<t.layoutFiles.length;s++){var n=t.layoutFiles[s];if(n.subsheetURL)if(Array.isArray(n.subsheetURL))for(var a=n.subsheetURL.length;0<=--a;)this._prepSubsheet(trimmedFilename(n.subsheetURL[a]),trimmedFilename(n.sheetURL));else this._prepSubsheet(trimmedFilename(n.subsheetURL),trimmedFilename(n.sheetURL));this._addSheetImagesToAssetList(t,n.sheetURL,n.localized)}(new TGE.AssetLoader).loadAssetList(this,t,this._mRootLocation,this.languagesFolder,TGE.RemoteSettings("lang"),e,i);var o=TGE.Game.GetInstance();1===o._mTestBuffering&&o._mWaitingForAssets.length&&o._loadNextAssetList()}},TGE.Tween=function(){this.id=null,this.target=null,this.duration=1,this.easing=TGE.Tween.Linear,this.delay=0,this.loop=!1,this.rewind=!1,this.onBegin=null,this.onComplete=null,this.onLoopComplete=null,this.startFromEnd=!1,this.removeOnComplete=!1,this._mAge=0,this._mForward=!0,this._mSetup=!1,this._mFinished=!1,this._mStartValues={},this._mEndValues={},this._mChainedTweens=[],this._mEaseParam=0,this._mRepeats=-1},TGE.Tween.prototype={setup:function(t){this.id=t.id;for(var e=Object.keys(t),i=0;i<e.length;++i){var s=e[i];this.hasOwnProperty(s)?this[s]=t[s]:this._mEndValues["layout"===s?"_mLayout":s]="object"==typeof t[s]?TGE.DeepClone(t[s]):t[s]}var n=this.easing===TGE.Tween.Back.In||this.easing===TGE.Tween.Back.Out||this.easing===TGE.Tween.Back.InOut?1.70158:1;return this._mEaseParam=void 0!==t.easingParam?t.easingParam:n,"number"==typeof t.loop&&(this._mRepeats=2*t.loop),this.startFromEnd&&this._setupValues(),this},finished:function(){return this._mFinished},thenTweenTo:function(t){t.target=this.target;var e=(new TGE.Tween).setup(t);return this._mChainedTweens.push(e),e},_setupValues:function(){if(!this._mSetup){null!==this.onBegin&&this.onBegin();for(var t=Object.keys(this._mEndValues),e=0;e<t.length;++e){var i=t[e],s=this.target.hasOwnProperty(i)||"scale"!==i?this.target[i]:this.target.scaleX;this._mStartValues[i]=TGE.DeepClone(s,this._mEndValues[i])}if(this.startFromEnd){var n=this._mStartValues;for(this._mStartValues=this._mEndValues,this._mEndValues=n,t=Object.keys(this._mStartValues),e=0;e<t.length;++e)i=t[e],this._setProp(this.target,this._mStartValues,this._mEndValues,i,0)}this._mSetup=!0}},_update:function(t){if(!(this.finished()||(this._mAge+=t,this._mAge<this.delay))){this._mSetup||this._setupValues();var e=(this._mAge-this.delay)/this.duration;1<=e&&(!0===this.loop||2<=this._mRepeats?(this._mAge=Math.min(this.duration,this._mAge-this.duration),e=Math.min(1,e-1),this.rewind&&(this._mForward=!this._mForward),null!==this.onLoopComplete&&this.onLoopComplete(),this._mRepeats--):(null!==this.onLoopComplete&&this.onLoopComplete(),this._mFinished=!0));var i=this._mFinished?1:this.easing(e,this._mEaseParam);i=this._mForward?i:1-i;for(var s=Object.keys(this._mStartValues),n=0;n<s.length;++n){var a=s[n];this._setProp(this.target,this._mStartValues,this._mEndValues,a,i)}this._mFinished&&this.endTween()}},_setProp:function(t,e,i,s,n){if("object"==typeof e[s]){if(t[s]){for(var a=Object.keys(e[s]),o=0;o<a.length;++o){var r=a[o];this._setProp(t[s],e[s],i[s],r,n)}"_mLayout"===s&&t._setLayout(t._mLayout)}}else t[s]=e[s]+(i[s]-e[s])*n},endTween:function(t,e){if(t=void 0===t||t,e=void 0===e||e,this._mFinished=!0,t&&0<this._mChainedTweens.length)for(var i=0;i<this._mChainedTweens.length;i++)this.target._injectTween(this._mChainedTweens[i]);this._mChainedTweens=null,e&&null!==this.onComplete&&this.onComplete(),this.removeOnComplete&&this.target.markForRemoval()}},TGE.Tween.To=function(t){return TGE.Game.GetInstance().stage.tweenTo(t)},TGE.Tween.From=function(t){return TGE.Game.GetInstance().stage.tweenFrom(t)},TGE.Tween.Linear=function(t){return t},TGE.Tween.Quadratic={In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},TGE.Tween.Cubic={In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},TGE.Tween.Quartic={In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},TGE.Tween.Quintic={In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},TGE.Tween.Sine={In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},TGE.Tween.Exponential={In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},TGE.Tween.Circular={In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},TGE.Tween.Elastic={In:function(t,e){return-e*Math.pow(2,10*(t-=1))*Math.sin(2*(t-.3/(2*Math.PI)*(Math.asin(1/e)||0))*Math.PI/.3)},Out:function(t,e){return e*Math.pow(2,-10*t)*Math.sin(2*(t-.3/(2*Math.PI)*(Math.asin(1/e)||0))*Math.PI/.3)+1},InOut:function(t,e){var i=.3/(2*Math.PI)*(Math.asin(1/e)||0),s=2*Math.PI;return(t*=2)<1?-.5*e*Math.pow(2,10*(t-=1))*Math.sin((t-i)*s/.45):e*Math.pow(2,-10*(t-=1))*Math.sin((t-i)*s/.45)*.5+1}},TGE.Tween.Back={In:function(t,e){return t*t*((e+1)*t-e)},Out:function(t,e){return(t-=1)*t*((e+1)*t+e)+1},InOut:function(t,e){var i=1.525*e;return(t*=2)<1?.5*t*t*((i+1)*t-i):.5*((t-=2)*t*((i+1)*t+i)+2)}},TGE.Tween.Bounce={In:function(t){return 1-TGE.Tween.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*TGE.Tween.Bounce.In(2*t):.5*TGE.Tween.Bounce.Out(2*t-1)+.5}},TGE.VideoWrapper=function(t,e){this._video=t,this._videoPlayer=null,this.assetId=null,this.muted=e,this.loadedMuted=void 0,this.eventCounts={},this._initEvents(TGE.VideoPlayer.LoadEvents),this._initEvents(TGE.VideoPlayer.PlayEvents),this._playTime=0,this._deactivateTime=-1},TGE.VideoWrapper.prototype={_initEvents:function(t){for(var e=t.length;0<=--e;)"rendered"!==t[e]&&this._video.addEventListener(t[e],this._onVideoEvent.bind(this));this._clearEventCounts(t)},_clearEventCounts:function(t){for(var e=t.length;0<=--e;)this.eventCounts[t[e]]=0},_onVideoEvent:function(t){var e=this.eventCounts[t.type]++;if(TGE){switch("timeupdate"!==t.type&&TGE.VideoPlayer.Log("video: ["+this.assetId+"] "+t.type+" global callback"),t.type){case"canplay":var i=TGE.Game.GetInstance(),s=this.muted||TGE.AudioManager._sMuted||TGE.InCreativeBuilder()&&i&&!i.timeSinceLastInteraction();s&&!e&&"Chrome"===TGE.BrowserDetect.browser&&(this._video.muted=s,this.loadedMuted=this._video.muted,this._videoPlayer&&this._videoPlayer.handleEvent({type:"mute",muted:s}))}if(this._videoPlayer){switch(t.type){case"loadstart":if(TGE.InCreativeBuilder()&&e){if(1===e&&window.__isLocal&&window._CB_SESSION_&&_CB_SESSION_.video[this._videoPlayer.assetId])break;"none"!==this._video.getAttribute("preload")&&(this._videoPlayer.paused=!1)}break;case"metadata":this._videoPlayer.reapplyLayout();break;case"timeupdate":this._playTime=(new Date).getTime();break;case"ended":this._videoPlayer._onComplete()}this._videoPlayer.dispatchEvent(t)}}},_onDeactivate:function(t){if(TGE&&this._videoPlayer){var e=this._videoPlayer;!TGE.BrowserDetect.oniOS&&"Safari"!==TGE.BrowserDetect.browser||!e.completed||e.frameCache||(e._createFrameCache(),e._updateFrameCache()),this._deactivateTime=this._video.currentTime,this._videoPlayer.paused||this._video.pause()}},_onActivate:function(t){TGE&&this._videoPlayer&&(0<=this._deactivateTime&&(this._videoPlayer.log("setting currentTime to: "+this._deactivateTime),this._video.currentTime=this._deactivateTime,this._deactivateTime=-1),this._videoPlayer._playPromise=null,this._videoPlayer.paused||this._videoPlayer._resume("activate"))}},TGE.BlurHelper=function(t){this.SIZE_UP_MULTIPLIER=6,this.fillToEdge="boolean"==typeof t.fillToEdge&&t.fillToEdge,this.smoothingQuality=t.smoothingQuality?t.smoothingQuality:"high",this.debugMode="boolean"==typeof t.debugMode&&t.debugMode,this._offscreenCanvasComposite=document.createElement("canvas"),this.filterSupported=!TGE.BrowserDetect.oniOS&&!!this._offscreenCanvasComposite.getContext("2d").filter,this.filterSupported||(this._offscreenCanvasA=document.createElement("canvas"),this._offscreenCanvasB=document.createElement("canvas")),this._setBlur(t.blurAmount||0),this.applySizes(t.width?t.width:256,t.height?t.height:256),Object.defineProperty(this,"blurAmount",{get:function(){return this._originalBlurValue},set:function(t){this._originalBlurValue!==t&&(this._setBlur(t),this._calculateSizes())}})},TGE.BlurHelper.prototype={applySizes:function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(TGE.Debug.Log(TGE.Debug.LOG_VERBOSE,"resizing blur to: "+t+"x"+e),t&&(this.width=t),e&&(this.height=e),this.filterSupported||(this._offscreenCanvasA.width=this._offscreenCanvasB.width=Math.ceil(t/2)+2,this._offscreenCanvasA.height=this._offscreenCanvasB.height=Math.ceil(e/2)+2),this._calculateSizes())},drawBlurredImage:function(t,e,i,s,n,a,o,r,h,l){(t instanceof HTMLVideoElement?t.videoWidth&&t.videoHeight:t.width&&t.height)&&(this.compositeBlur(t,i,s,n,a),this.drawCompositedBlur(e,o,r,h,l))},compositeBlur:function(t,e,i,s,n){return this.filterSupported?this._compositeBlurFilter(t,e,i,s,n):this._compositeBlurResize(t,e,i,s,n),this.debugMode&&this._compositeDebugDraw(),this._offscreenCanvasComposite},drawCompositedBlur:function(t,e,i,s,n){var a=s/this.width*this.compositeWidth,o=n/this.height*this.compositeHeight,r=(a-s)/2,h=(o-n)/2;t.drawImage(this._offscreenCanvasComposite,0,0,this.compositeWidth,this.compositeHeight,e-r,i-h,a,o)},cleanupCanvases:function(){this._offscreenCanvasComposite.remove(),this.filterSupported||(this._offscreenCanvasA.remove(),this._offscreenCanvasB.remove())},_setBlur:function(t){this._blurAmount=this.filterSupported?t:Math.round(.8*Math.pow(t,1.2)),this._originalBlurValue=t},_calculateSizes:function(){this._offscreenCanvasComposite.width=this.compositeWidth=this.fillToEdge?this.width:this.width+this.SIZE_UP_MULTIPLIER*this._originalBlurValue,this._offscreenCanvasComposite.height=this.compositeHeight=this.fillToEdge?this.height:this.height+this.SIZE_UP_MULTIPLIER*this._originalBlurValue,this.xCompositeOffset=(this.compositeWidth-this.width)/2,this.yCompositeOffset=(this.compositeHeight-this.height)/2,this._sizeUpAmount=this.fillToEdge?this.SIZE_UP_MULTIPLIER*this._originalBlurValue:-1*this._originalBlurValue,this.filterSupported||this._calculateResizeMethodSizes()},_calculateResizeMethodSizes:function(){var t=0!==this._blurAmount?1:0,e=0!==this._blurAmount?.5:0,i=2*t+2*e,s=Math.max(this.width/(1+this._blurAmount),4),n=Math.max(this.height/(1+this._blurAmount),4);this._smallA_width=Math.floor(s),this._smallA_height=Math.floor(n),this._smallA_offset=t+e,this._smallA_sw=this._smallA_width+i,this._smallA_sh=this._smallA_height+i,this._smallB_width=s===this._smallA_width?s+1:Math.ceil(s),this._smallB_height=n===this._smallA_height?n+1:Math.ceil(n),this._smallB_offset=t+e,this._smallB_sw=this._smallB_width+i,this._smallB_sh=this._smallB_height+i;var a=(this.width+this._sizeUpAmount)/this._smallA_width,o=(this.height+this._sizeUpAmount)/this._smallA_height;this._smallA_dw=this._getNearestEvenPadding(a*this._smallA_sw,this.width),this._smallA_dh=this._getNearestEvenPadding(o*this._smallA_sh,this.height),this._smallA_dx=(this.compositeWidth-this._smallA_dw)/2,this._smallA_dy=(this.compositeHeight-this._smallA_dh)/2,this._smallB_dw=this._getNearestEvenPadding(a*this._smallB_sw,this.width),this._smallB_dh=this._getNearestEvenPadding(o*this._smallB_sh,this.height),this._smallB_dx=(this.compositeWidth-this._smallB_dw)/2,this._smallB_dy=(this.compositeHeight-this._smallB_dh)/2,this._smallB_dxOffset=(this._smallA_dx-this._smallB_dx)/2,this._smallB_dyOffset=(this._smallA_dy-this._smallB_dy)/2},_compositeBlurFilter:function(t,e,i,s,n){var a=this._offscreenCanvasComposite.getContext("2d");a.clearRect(0,0,this.compositeWidth,this.compositeHeight),a.filter="blur("+this._blurAmount+"px)",a.globalAlpha=1,this._drawVideoSafeImage(a,t,e,i,s,n,this.xCompositeOffset-this._sizeUpAmount/2,this.yCompositeOffset-this._sizeUpAmount/2,this.width+this._sizeUpAmount,this.height+this._sizeUpAmount),0===this.blurAmount||this.fillToEdge||(a.globalAlpha=.8,this._drawVideoSafeImage(a,t,e,i,s,n,this.xCompositeOffset-this._sizeUpAmount/2,this.yCompositeOffset-this._sizeUpAmount/2,this.width+this._sizeUpAmount,this.height+this._sizeUpAmount))},_compositeBlurResize:function(t,e,i,s,n){var a=this._offscreenCanvasComposite.getContext("2d");if(0!==this.blurAmount){var o=this._offscreenCanvasA.getContext("2d");o.imageSmoothingQuality=this.smoothingQuality,o.clearRect(0,0,this.width,this.height),this._drawVideoSafeImage(o,t,e,i,s,n,this._smallA_offset,this._smallA_offset,this._smallA_width,this._smallA_height);var r=this._offscreenCanvasB.getContext("2d");r.imageSmoothingQuality=this.smoothingQuality,r.clearRect(0,0,this.width,this.height),this._drawVideoSafeImage(r,t,e,i,s,n,this._smallB_offset,this._smallB_offset,this._smallB_width,this._smallB_height),a.imageSmoothingQuality=this.smoothingQuality,a.globalCompositeOperation="source-over",a.globalAlpha=1,a.clearRect(0,0,this.compositeWidth,this.compositeHeight),a.drawImage(this._offscreenCanvasA,0,0,this._smallA_sw,this._smallA_sh,this._smallA_dx,this._smallA_dy,this._smallA_dw,this._smallA_dh),a.globalAlpha=.5,a.drawImage(this._offscreenCanvasB,0,0,this._smallB_sw,this._smallB_sh,this._smallB_dx,this._smallB_dy,this._smallB_dw,this._smallB_dh),a.globalCompositeOperation="source-atop",a.globalAlpha=.33,a.drawImage(this._offscreenCanvasB,0,0,this._smallB_sw,this._smallB_sh,this._smallB_dx-this._smallB_dxOffset,this._smallB_dy-this._smallB_dyOffset,this._smallB_dw,this._smallB_dh),a.globalAlpha=.25,a.drawImage(this._offscreenCanvasB,0,0,this._smallB_sw,this._smallB_sh,this._smallB_dx+this._smallB_dxOffset,this._smallB_dy+this._smallB_dyOffset,this._smallB_dw,this._smallB_dh)}else this._drawVideoSafeImage(a,t,e,i,s,n,this.xCompositeOffset,this.yCompositeOffset-this._sizeUpAmount/2|0,this.width+this._sizeUpAmount,this.height+this._sizeUpAmount)},_compositeDebugDraw:function(){var t=this._offscreenCanvasComposite.getContext("2d");this.filterSupported&&(t.filter="none"),t.save(),t.globalCompositeOperation="source-over",t.globalAlpha=1,t.lineWidth=2,t.beginPath(),t.strokeStyle="red",t.rect(this.xCompositeOffset+1,this.yCompositeOffset+1,this.width-2,this.height-2),t.stroke(),t.closePath(),t.beginPath(),t.strokeStyle="cyan",t.rect(1,1,this.compositeWidth-2,this.compositeWidth-2),t.stroke(),t.closePath(),t.restore()},_getNearestEvenPadding:function(t,e){return((t=Math.floor(t))-e)%2!=0&&(t+=1),t},_drawVideoSafeImage:function(t,e,i,s,n,a,o,r,h,l){e instanceof HTMLVideoElement&&TGE.BrowserDetect.oniOS&&parseInt(TGE.BrowserDetect.OSversion.match(/\d+$/)[0],10)<13?t.drawImage(e,o,r,h,l):t.drawImage(e,i,s,n,a,o,r,h,l)}},TGE.CameraShake=function(){this.target=null,this.duration=1,this.delay=0,this.loop=!1,this.exclusionList=[],this.onComplete=null,this._mPreviousX=0,this._mPreviousY=0,this._mX=0,this._mY=0,this._mTimeElapsed=0,this._mFinished=!1},TGE.CameraShake.prototype={setup:function(t){this.target=t.target,"number"!=typeof t.duration||(this.duration=t.duration),"number"==typeof t.delay&&(this.delay=t.delay),"boolean"==typeof t.loop&&(this.loop=t.loop),"function"==typeof t.onComplete&&(this.onComplete=t.onComplete),Array.isArray(t.exclusionList)&&(this.exclusionList=t.exclusionList);for(var e=0;e<this.exclusionList.length;e++){var i=this.exclusionList[e];"object"!=typeof i||i.isDescendantOf(this.target)||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"One or more objects in the TGE.CameraShake exclusion list are not direct children of the object")}return this},finished:function(){return this._mFinished},updateMembers:function(t){console.log("updateMembers should be overridden by a subclass")},stop:function(){if(this.target.x-=this._mX,this.target.y-=this._mY,null!=this.exclusionList&&0<this.exclusionList.length)for(var t=0;t<this.target.numChildren(!1);t++){var e=this.target.getChildAt(t);-1==this.exclusionList.indexOf(e.cameraShakeTag)&&-1==this.exclusionList.indexOf(e)||(e.x+=this._mX,e.y+=this._mY)}this._mFinished=!0},_update:function(t){if(!(this._mFinished||(this._mTimeElapsed+=t,this._mTimeElapsed<this.delay))){this.updateMembers(t);var e=this._mX-this._mPreviousX,i=this._mY-this._mPreviousY;if(this.target.x+=e,this.target.y+=i,null!=this.exclusionList&&0<this.exclusionList.length)for(var s=0;s<this.target.numChildren(!1);s++){var n=this.target.getChildAt(s);-1==this.exclusionList.indexOf(n.cameraShakeTag)&&-1==this.exclusionList.indexOf(n)||(n.x-=e,n.y-=i)}this._mFinished&&null!=this.onComplete&&this.onComplete()}}},TGE.NoiseShake=function(){TGE.NoiseShake.superclass.constructor.call(this),this.intensityX=0,this.intensityY=0,this.easeInTime=0,this.easeOutTime=0,this.period=-1,this._mPeriodsExecuted=0,this._mIntensityX=0,this._mIntensityY=0},TGE.NoiseShake.prototype={setup:function(t){return TGE.NoiseShake.superclass.setup.call(this,t),"number"==typeof t.intensity&&(this.intensityX=t.intensity,this.intensityY=t.intensity),"number"==typeof t.intensityX?this.intensityX=t.intensityX:this.intensityX,"number"==typeof t.intensityY?this.intensityY=t.intensityY:this.intensityY,"number"==typeof t.period?this.period=t.period:this.period,"number"==typeof t.easeInTime?this.easeInTime=t.easeInTime:this.easeInTime,"number"==typeof t.easeOutTime?this.easeOutTime=t.easeOutTime:this.easeOutTime,this},updateMembers:function(t){if(this._mPreviousX=this._mX,this._mPreviousY=this._mY,this._mTimeElapsed>this.delay+this.duration)this._mX=0,this._mY=0,this.loop?this._mTimeElapsed=this.delay:this._mFinished=!0;else{if(this._mTimeElapsed-this.delay<this.easeInTime)this._mIntensityX=this.intensityX*((this._mTimeElapsed-this.delay)/this.easeInTime),this._mIntensityY=this.intensityY*((this._mTimeElapsed-this.delay)/this.easeInTime);else if(this._mTimeElapsed-this.delay>this.duration-this.easeOutTime){var e=this._mTimeElapsed-this.delay-(this.duration-this.easeOutTime);this._mIntensityX=this.intensityX-this.intensityX*(e/this.easeOutTime),this._mIntensityY=this.intensityY-this.intensityY*(e/this.easeOutTime)}else this._mIntensityX=this.intensityX,this._mIntensityY=this.intensityY;this._mTimeElapsed>this._mPeriodsExecuted*this.period&&(this._mX=Math.random()*this._mIntensityX*this.target.width*2-this._mIntensityX*this.target.width,this._mY=Math.random()*this._mIntensityY*this.target.width*2-this._mIntensityY*this.target.width,this._mPeriodsExecuted++)}}},extend(TGE.NoiseShake,TGE.CameraShake),TGE.GenericLoadingWindow=function(t,e){TGE.GenericLoadingWindow.superclass.constructor.apply(this,arguments),this.backgroundColor="#000";var i=this.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"#fff",width:300,height:25,layout:{xPercentage:.5,yPercentage:.5,scaleToWidth:.5,scaleToHeight:.05}}));bar=i.addChild((new TGE.DisplayObjectContainer).setup({registrationX:1,x:i.width/2-1.5,backgroundColor:"#000",width:297,height:22,scaleX:1})),this.addEventListener("progress",function(t){bar.scaleX=1-t.percentComplete})},extend(TGE.GenericLoadingWindow,TGE.Window),TGE.Game.prototype._mRemoteSettings=null,TGE.RemoteSettings=function(t){return TGE.Game.GetInstance()._getRemoteSetting(t)},TGE.RemoteSettings._getDefaultAudioSetting=function(){if(window.TreSensa&&TreSensa.Playable.getAudioInfo)return TreSensa.Playable.getAudioInfo().allowed;var e=!1;switch(getDistributionPartner()){case"B0039":case"B0113":case"B0119":case"B0134":case"B0135":case"B0149":case"B0154":case"B0159":case"B0172":e=!0;break;case"B0003":case"B0158":e=!0;try{window.fetch("data:@file/x-empty;base64,")}catch(t){TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Fetch API not supported, disabling audio"),e=!1}break;case"B0094":default:e=!1}return e},TGE.RemoteSettings._persistentSettings=null,TGE.RemoteSettings._initPersistentSettings=function(){TGE.RemoteSettings._persistentSettings={activeVariant:{type:"string",default:"A",description:"active MV variant",persistent:!0},audio:{type:"boolean",default:TGE.RemoteSettings._getDefaultAudioSetting(),description:"enable audio",persistent:!0},lang:{type:"string",default:"en",description:"game language",options:["en"],persistent:!0},orientationLock:{type:"string",default:"responsive",description:"orientation settings",options:["responsive","portrait","landscape"],persistent:!0},previewPlatform:{type:"string",default:"",description:"for previewing native device buttons/fonts",persistent:!0}}},TGE.RemoteSettings.GetSettings=function(){return TGE.Game.GetInstance()._mRemoteSettings},TGE.RemoteSettings.Print=function(){return TGE.Game.GetInstance()._printRemoteSettings()},TGE.RemoteSettings.HasSetting=function(t){if("string"!=typeof t)return!1;var e=TGE.Game.GetInstance()._mRemoteSettings;return e&&!!e[t]},TGE.RemoteSettings.AddSetting=function(t,e){"string"==typeof t&&"object"==typeof e&&(TGE.Game.GetInstance()._initRemoteSetting(t,e),TGE.Game.GetInstance()._mRemoteSettings[t]=e)},TGE.RemoteSettings.WasSet=function(t){if("string"!=typeof t)return!1;var e=TGE.Game.GetInstance()._mRemoteSettings;return e&&e[t].wasSet},TGE.Game.prototype._getRemoteSetting=function(t){if(this._mRemoteSettings&&this._mRemoteSettings[t]){var e=this._mRemoteSettings[t].value;if(TGE.BrowserDetect.oniOS&&15===parseInt(TGE.BrowserDetect.OSversion.match(/\d+$/)[0],10)&&0<t.indexOf("_letterboxStyle")&&"blurred"===e&&!(0<=t.indexOf("promo_video")?window.PBVideoPlayer&&PBVideoPlayer.superclass===TGE.VideoPlayer.prototype:window.VideoPlayer&&VideoPlayer.IOS15_BLUR_FIXED)){e="solid";var i=t.slice(0,t.lastIndexOf("_"));GameConfig.COLOR_DEFS[i+"_background"]="#000000"}return e}return TGE.Debug.Log(TGE.Debug.LOG_ERROR,"remote setting ["+t+"] does not exist"),null},TGE.Game.prototype._initializeRemoteSettings=function(){var t,e=GameConfig.REMOTE_SETTINGS;for(t in TGE.RemoteSettings._initPersistentSettings(),GameConfig.REMOTE_SETTINGS=null,TGE.RemoteSettings._persistentSettings)e[t]||(e[t]=TGE.RemoteSettings._persistentSettings[t]);var i=window.TreSensa&&TreSensa.Playable.getSetting("remoteSettings");if(i)for(t in i)void 0===e[t]&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,'dashboard specified remote setting "'+t+'" is invalid');for(t in e)this._initRemoteSetting(t,e[t]);this._mRemoteSettings=e},TGE.Game.prototype._initRemoteSetting=function(t,e){var i;"qa"===getQueryString().env?TGE.Debug.LOG_WARNING:TGE.Debug.LOG_ERROR;e.name=t,e.description=e.description||"",e.wasSet=!1,this._errorHandleRemoteSettings(e),e.value=TGE.DeepClone(e.default);var s=window.TreSensa&&window.TreSensa.Playable.getSetting("remoteSettings");if(s)i=s[e.name];else{var n=getQueryString()[e.name];void 0!==n&&(i=this._convertStringToType(n,e.type))}null!=i&&this.validateSettingValue(i,e)===i&&(e.value=i,e.wasSet=!0)},TGE.Game.prototype._errorHandleRemoteSettings=function(t){if("lang"!==t.name&&"orientationLock"!==t.name&&!t.persistent&&TGE.RemoteSettings._persistentSettings[t.name])return TGE.Debug.Log(TGE.Debug.LOG_ERROR,'remote setting "'+t.name+'" is reserved as a persistent TGE setting'),!0;var e=this.validateSettingValue(t.default,t),i=e!==t.default;return t.default=e,i},TGE.Game.prototype.validateSettingValue=function(t,e){var i;if(!("Array"===e.type&&Array.isArray(t)||typeof t===e.type||null==t))switch(TGE.Debug.Log(TGE.Debug.LOG_WARNING,'replacing remote setting "'+e.name+'", which has a value that does not match the required data type'),e.type){case"string":t="";break;case"number":t=0;break;case"boolean":t=!1;break;case"Array":t=[];break;case"object":t={}}if(Array.isArray(e.options)&&e.options.length){var s=!1,n=!1;(0<=e.options.indexOf(t)||null==t)&&(n=!0);for(var a=e.options.length;0<=--a;)"number"==typeof e.options[a].min||"number"==typeof e.options[a].max?"number"!==e.type?s=!0:(n=n||this._numberExistsInRange(e.options[a].min,e.options[a].max,t,e.options[a].interval),i=e.options[a].min||0):s=s||typeof e.options[a]!==e.type;s&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,'remote setting "'+e.name+'" has an option that is not the correct data type'),n||(TGE.Debug.Log(TGE.Debug.LOG_WARNING,'replacing remote setting "'+e.name+'", which has a default value that is not in the valid options array'),t=void 0!==i?i:e.options[0])}return t},TGE.Game.prototype._numberExistsInRange=function(t,e,i,s){"number"!=typeof s&&(s=1),"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=Number.MAX_SAFE_INTEGER);var n=(i-t)%s,a=1e3*Number.EPSILON;return t<=i&&i<=e&&(n<=a||s-n<=a)},TGE.Game.prototype._convertStringToType=function(t,e){var i=null;switch(e){case"string":i=t;break;case"number":isNaN(t)||(i=parseFloat(t));break;case"boolean":"true"==t&&(i=!0),"false"==t&&(i=!1);break;case"object":case"Array":try{i=JSON.parse(t)}catch(t){}}return i},TGE.Game.prototype._printRemoteSettings=function(){var t="\nREMOTE SETTINGS (includes replacement of invalid values)\n",e=this._mRemoteSettings;for(var i in e||(t="\nREMOTE SETTINGS (raw initial values)\n",e=GameConfig.REMOTE_SETTINGS),e){var s=e[i];if(t+="\nName: "+i,t+="\nValue: "+(void 0!==s.value?s.value:s.default),s.options){t+="\nOptions: ";for(var n=0;n<s.options.length;n++){var a=s.options[n];if("object"==typeof a&&(a.min||a.max))t+=("number"==typeof a.min?a.min.toString():"0")+"-"+("number"==typeof a.max?a.max.toString():"infinity");else t+=a;t+=n==s.options.length-1?"":", "}}t+="\nDescription: "+s.description,t+="\n"}return console.log("%c "+t,"color: green"),""},TGE.Game.prototype._initializeTextDefSettings=function(){var t=window.TreSensa&&TreSensa.Playable.getSetting("textDefs");if(t)for(var e in t){var i=GameConfig.TEXT_DEFS&&GameConfig.TEXT_DEFS[e];if(i){var s=t[e];for(var n in s)i[n]=s[n]}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,'dashboard specified textDef setting "'+e+'" is invalid')}},function(){function n(t,e){document.addEventListener?t.addEventListener("scroll",e,!1):t.attachEvent("scroll",e)}function E(t){this.a=document.createElement("div"),this.a.setAttribute("aria-hidden","true"),this.a.appendChild(document.createTextNode(t)),this.b=document.createElement("span"),this.c=document.createElement("span"),this.h=document.createElement("span"),this.f=document.createElement("span"),this.g=-1,this.b.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.c.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.f.style.cssText="max-width:none;display:inline-block;position:absolute;height:100%;width:100%;overflow:scroll;font-size:16px;",this.h.style.cssText="display:inline-block;width:200%;height:200%;font-size:16px;max-width:none;",this.b.appendChild(this.h),this.c.appendChild(this.f),this.a.appendChild(this.b),this.a.appendChild(this.c)}function v(t,e){t.a.style.cssText="max-width:none;min-width:20px;min-height:20px;display:inline-block;overflow:hidden;position:absolute;width:auto;margin:0;padding:0;top:-999px;white-space:nowrap;font-synthesis:none;font:"+e+";"}function a(t){var e=t.a.offsetWidth,i=e+100;return t.f.style.width=i+"px",t.c.scrollLeft=i,t.b.scrollLeft=t.b.scrollWidth+100,t.g!==e&&(t.g=e,!0)}function G(t,e){function i(){var t=s;a(t)&&t.a.parentNode&&e(t.g)}var s=t;n(t.b,i),n(t.c,i),a(t)}function t(t,e){var i=e||{};this.family=t,this.style=i.style||"normal",this.weight=i.weight||"normal",this.stretch=i.stretch||"normal"}var y=null,s=null,i=null,e=null;function o(){return null===e&&(e=!!document.fonts),e}function b(t,e){return[t.style,t.weight,function(){if(null===i){var t=document.createElement("div");try{t.style.font="condensed 100px sans-serif"}catch(t){}i=""!==t.style.font}return i}()?t.stretch:"","100px",e].join(" ")}t.prototype.load=function(t,e){var g=this,f=t||"BESbswy",_=0,p=e||3e3,T=(new Date).getTime();return new Promise(function(m,c){if(o()&&!function(){if(null===s)if(o()&&/Apple/.test(window.navigator.vendor)){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))(?:\.([0-9]+))/.exec(window.navigator.userAgent);s=!!t&&parseInt(t[1],10)<603}else s=!1;return s}()){var t=new Promise(function(i,t){!function e(){(new Date).getTime()-T>=p?t(Error(p+"ms timeout exceeded")):document.fonts.load(b(g,'"'+g.family+'"'),f).then(function(t){1<=t.length?i():setTimeout(e,25)},t)}()}),e=new Promise(function(t,e){_=setTimeout(function(){e(Error(p+"ms timeout exceeded"))},p)});Promise.race([e,t]).then(function(){clearTimeout(_),m(g)},c)}else i=function(){function i(){var t;(t=-1!=o&&-1!=r||-1!=o&&-1!=h||-1!=r&&-1!=h)&&((t=o!=r&&o!=h&&r!=h)||(null===y&&(t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent),y=!!t&&(parseInt(t[1],10)<536||536===parseInt(t[1],10)&&parseInt(t[2],10)<=11)),t=y&&(o==e&&r==e&&h==e||o==l&&r==l&&h==l||o==d&&r==d&&h==d)),t=!t),t&&(u.parentNode&&u.parentNode.removeChild(u),clearTimeout(_),m(g))}var s=new E(f),n=new E(f),a=new E(f),o=-1,r=-1,h=-1,e=-1,l=-1,d=-1,u=document.createElement("div");u.dir="ltr",v(s,b(g,"sans-serif")),v(n,b(g,"serif")),v(a,b(g,"monospace")),u.appendChild(s.a),u.appendChild(n.a),u.appendChild(a.a),document.body.appendChild(u),e=s.a.offsetWidth,l=n.a.offsetWidth,d=a.a.offsetWidth,function t(){if((new Date).getTime()-T>=p)u.parentNode&&u.parentNode.removeChild(u),c(Error(p+"ms timeout exceeded"));else{var e=document.hidden;!0!==e&&void 0!==e||(o=s.a.offsetWidth,r=n.a.offsetWidth,h=a.a.offsetWidth,i()),_=setTimeout(t,50)}}(),G(s,function(t){o=t,i()}),v(s,b(g,'"'+g.family+'",sans-serif')),G(n,function(t){r=t,i()}),v(n,b(g,'"'+g.family+'",serif')),G(a,function(t){h=t,i()}),v(a,b(g,'"'+g.family+'",monospace'))},document.body?i():document.addEventListener?document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t),i()}):document.attachEvent("onreadystatechange",function t(){"interactive"!=document.readyState&&"complete"!=document.readyState||(document.detachEvent("onreadystatechange",t),i())});var i})},"object"==typeof module?module.exports=t:(window.FontFaceObserver=t,window.FontFaceObserver.prototype.load=t.prototype.load)}(),TGE.version="1.2.277";;</script>	<script type="text/javascript">	TGE.AssetManager.SpriteSheets.gamescreen0={MC_pointer:[0,0,200,200]},TGE.AssetManager.SpriteSheets.engagement={brush:[0,853,100,100],gameLogo:[0,0,450,300],img_characterIcon:[0,602,250,250],img_particleDefault:[101,853,100,100],img_popupBackground:[0,301,450,300],scratchParticle:[451,0,32,32]},ELXDisplay=function(){ELXDisplay.superclass.constructor.call(this),this._objects={},this._elxsList={},this._pickElxFunction=null,this._consoleMessages=[],this._currentElxId=null,this._currentState=null,this._hiddenObject=this.addChild((new TGE.DisplayObjectContainer).setup({visible:!1})),this.mouseEnabled=!1,this.layout="match",this.registrationX=0,this.registrationY=0},ELXDisplay._mDebugWidget=null,ELXDisplay._mDebugData=null,ELXDisplay.prototype={setup:function(e){return ELXDisplay.superclass.setup.call(this,e),this._parseParameters(e)&&(this._initializeELX(),ELXDisplay._mDebugWidget||ELXDisplay._createDebugWidget(),this.addEventListener("addedToStage",this._reRegister.bind(this)),this.addEventListener("resize",this._onResize.bind(this,e))),this},getObject:function(e){return this.getObjects(e)[0]},getObjects:function(e){var t=this._objects[e];return void 0===t&&(t=[],this._logConsoleMessage("warn","Trying to access the elx object ["+e+"] in code but object does not exist in the elx file you're accessing.")),t},hasObject:function(e){return void 0!==this._objects[e]||this._objects[e]===[]},getObjectName:function(e){for(var t in this._objects)for(var i=this._objects[t],a=0;a<i.length;a++)if(i[a]==e)return t;return null},setState:function(e){this._currentState=e;var t,i,a,n,o=this._getCurrentELX();if(o.states)if(o.states[e]){null!==this._currentState&&this._parentObjectsUsingDataset(o.data);var s,r=o.states[e];for(s in o.data)if(a="TGE.DisplayObjectContainer"===(i=o.data[s]).className&&!i.backgroundColor,n=-1===r.indexOf(i.name),!a&&n)for(var h in t=this.getObjects(i.name))this._hiddenObject.addChild(t[h])}else this._logConsoleMessage("error","ELX state ["+e+"] doesn't exist in the states file passed in")},_initializeELX:function(){this._currentElxId=this._getCurrentELX().id;var e,t=this._elxsList[this._currentElxId].data,i=t;for(e in this._elxsList)e!==this._currentElxId&&(i=this._combineData(i,this._elxsList[e].data));this._createScreenObjects(i),this._parentObjectsUsingDataset(t),this._logConsoleMessages()},_combineData:function(e,t){e=this._jsonClone(e),t=this._jsonClone(t);var i,a=this._jsonClone(e);for(i in e){for(var n in t)if(t[n]&&e[i].name==t[n].name){t[n]=null;break}e[i]=null}for(i in t)t[i]&&a.push(t[i]);return a},_parseParameters:function(e){if(e.pickELX)if(this._pickElxFunction=e.pickELX,e.elx){for(var t in e.elx="string"==typeof e.elx?TGE.getClass(e.elx):e.elx,e.elx)if("object"==typeof e.elx[t]&&!this._parseParameter(t,e.elx[t],e.override,e.states))return!1}else{for(var t in e)if("pickELX"!==t&&"object"==typeof e[t]&&!this._parseParameter(t,e[t].elx,e[t].override||e[t].overrides,e[t].states))return!1;this._checkVersionNumber()}else if(e.landscape&&e.portrait){if(!this._parseParameter("portrait",e.portrait.elx,e.portrait.override||e.portrait.overrides,e.portrait.states))return!1;if(!this._parseParameter("landscape",e.landscape.elx,e.landscape.override||e.landscape.overrides,e.landscape.states))return!1;this._checkVersionNumber()}else if(e.elx)if(e.elx="string"==typeof e.elx?TGE.getClass(e.elx):e.elx,e.elx&&e.elx.portrait&&e.elx.landscape){if(!this._parseParameter("portrait",e.elx.portrait,e.override||e.overrides,e.states))return!1;if(!this._parseParameter("landscape",e.elx.landscape,e.override||e.overrides,e.states))return!1}else if(!this._parseParameter("default",e.elx,e.override||e.overrides,e.states))return!1;return!0},_parseParameter:function(e,t,i,a){if(!t)return this._logConsoleMessage("error","ELX file must be specified"+("default"!=e?" for the ["+e+"] layout strategy.":".")),!1;if((t="string"==typeof t?TGE.getClass(t):t).childObjects){var n=this._sortElx(t),o=i,s=this._generateFontIdOverrides(n),i=GameConfig.ELX_DEFS;return s&&this._applyOverrides(s,n),o&&this._applyOverrides(o,n),i&&this._applyOverrides(i,n),this._optimizeImages(n),this._elxsList[e]={},this._elxsList[e].data=n,this._elxsList[e].states=a,this._elxsList[e].id=e,this._elxsList[e].version=t.elxVersion,!0}return this._logConsoleMessage("error","ELX file must be in the right format.  Are you using an old version of the ELX Photoshop Script?"),!1},_checkVersionNumber:function(){},_getElxExportScriptVersion:function(){for(var e in this._elxsList)return this._elxsList[e].version},_optimizeImages:function(e){for(var t in e){var i,a=e[t];"TGE.Sprite"===a.className&&a.image?void 0===TGE.Game.GetInstance().getAssetList(a.image)?(this._recordConsoleMessage("Trying to display image ["+a.image+"] but image doesn't exist in any loaded spritesheets or images."),a.image=null):(i=TGE.Game.GetInstance().assetAvailable(a.image,null,!1),t=TGE.Game.GetInstance().getAssetList(a.image+"_2x"),i?t&&(this._recordConsoleMessage("Converting image ["+a.image+"] into a TGE.ProgressiveLoadingSprite since a _2x version exists.",!0),a.className="TGE.ProgressiveLoadingSprite",a.lowResImage=a.image,a.highResImage=a.image+"_2x",delete a.image):(this._recordConsoleMessage("Converting image ["+a.image+"] into a TGE.ProgressiveLoadingSprite since it's not ready yet.",!0),a.className="TGE.ProgressiveLoadingSprite",a.highResImage=a.image,delete a.image)):"TGE.ProgressiveLoadingSprite"===a.className&&a.lowResImage&&void 0===TGE.Game.GetInstance().getAssetList(a.lowResImage)&&(this._recordConsoleMessage("Trying to display image ["+a.lowResImage+"] but image doesn't exist in any loaded spritesheets or images."),a.lowResImage=null)}},_getCurrentELX:function(){return this._elxsList.default||(e=this._pickElxFunction?this._pickElxFunction.call(this,this.stage.height/this.stage.width):this.stage.height>=this.stage.width?"portrait":"landscape",!this._elxsList[e]&&this._pickElxFunction&&this._logConsoleMessage("error","ELX file for the ["+e+"] layout strategy is not defined"),this._elxsList[e]);var e},_applyElxDataToObjects:function(e){var t,i,a;for(a in e)try{t=this._jsonClone(e[a]),i=this.getObjects(t.name)[t.duplicateNumber],this._applyElxDataToObject(i,t)}catch(e){return void this._recordConsoleMessage(100)}},_applyElxDataToObject:function(e,t){this._cleanElxData(e,t);var i,a={universal:["x","y","width","height","backgroundColor","backgroundGradient","scaleX","scaleY","scale","registrationX","registrationY","layout","rotation"],"TGE.Text":["fontFamily","fontSize","fontWeight","fontStyle","hAlign","vAlign","textColor","wrapWidth","lineSpacing","strokeWidth","strokeColor"],"TGE.Sprite":[],"TGE.RectMask":["maskWidth","maskHeight"],"TGE.Button":[],CharDisplay:["textColor","color","tfxName","imageSet","fontSize"],TFX:["fps","loop"],"TGE.ProgressiveLoadingSprite":[]};for(i in t){var n=-1!==a.universal.indexOf(i),o=-1!==a.TFX.indexOf(i),s=a[t.className]&&-1!==a[t.className].indexOf(i);(n||s||o)&&(e[i]=t[i])}},_cleanElxData:function(e,t){var i={universal:{rotation:0,backgroundColor:null,alpha:1,registrationX:.5,registrationY:.5,layout:null,x:0,y:0},"TGE.Sprite":{image:null},"TGE.RectMask":{image:null},"TGE.ProgressiveLoadingSprite":{image:null,lowResSprite:null,highResSprite:null}};t=this._addDefaultValuesToObjectData(i.universal,t);var a=!(t=i.hasOwnProperty(t.className)?this._addDefaultValuesToObjectData(i[t.className],t):t).hasOwnProperty("scaleX")&&!t.hasOwnProperty("scaleY")&&!t.hasOwnProperty("scale"),n=!t.hasOwnProperty("width"),o=!t.hasOwnProperty("height"),i="TGE.Sprite"===t.className||"TGE.ProgressiveLoadingSprite"===t.className;a&&(t.scale=1),n&&i&&(t.width=e._mOriginalWidth),o&&i&&(t.height=e._mOriginalHeight)},_addDefaultValuesToObjectData:function(e,t){for(var i in e)t.hasOwnProperty(i)||(t[i]=e[i]);return t},_getDataWithName:function(e,t){var i,a=[];for(i in t)t[i].name===e&&a.push(t[i]);return a},_sortElx:function(e){return this._sortElxRecursive(e.childObjects,null,[])},_sortElxRecursive:function(e,t,i){var a,n,o;for(o in e)n=(a=this._jsonClone(e[o])).childObjects,delete a.childObjects,a.parentObject=t,a.duplicateNumber=this._getDataWithName(a.name,i).length,i.push(a),n&&(i=this._sortElxRecursive(n,a.name,i));return i},_createScreenObjects:function(e){var t,i,a;for(a in e)t=e[a],(i=this._createScreenObject(t))&&(this._objects[t.name]?this._objects[t.name].push(i):this._objects[t.name]=[i])},_parentObjectsUsingDataset:function(e){var t,i,a,n,o;for(s in e)t=e[s],i=this.getObjects(t.name)[t.duplicateNumber],(t.parentObject?this.getObject(t.parentObject):this).addChild(i);for(o in this._objects)if(a=this.getObjects(o),(n=this._getDataWithName(o,e)).length<a.length)for(var s=n.length;s<a.length;s++)this._hiddenObject.addChild(a[s])},_jsonClone:function(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e)){for(var t=[],i=0;i<e.length;++i)t.push(this._jsonClone(e[i]));return t}var a,n=["textDef"],o={};for(a in e)e.hasOwnProperty(a)&&(-1===n.indexOf(a)?o[a]=this._jsonClone(e[a]):o[a]=e[a]);return o},_createScreenObject:function(e){var t=this._jsonClone(e),i=TGE.getClass(t.className);delete t.className,delete t.duplicateNumber,delete t.name,delete t.parentObject;t=(new i).setup(t),e=this._jsonClone(e);return delete e.duplicateNumber,delete e.parentObject,this._createDebugFeatures(t,e),t},_applyOverrides:function(e,t){var i,a,n,o;for(o in e){for(var s in n=!1,t)if(a=e[o],(i=t[s]).name===o)for(var r in n=!0,"TGE.DisplayObjectContainer"===i.className&&a.className&&"TGE.DisplayObjectContainer"!==a.className&&"string"!=typeof a.backgroundColor&&(a.backgroundColor=null),a.className&&!TGE.getClass(a.className)&&(this._recordConsoleMessage("Class name ["+a.className+"] doesn't exist."),delete a.className),a)i[r]=a[r];n||this._recordConsoleMessage("Trying to override an object with the name ["+o+"] but that object doesn't exist in the elx file you're trying to override.",!0)}return t},_generateFontIdOverrides:function(e){var t=TGE.Game.GetInstance().fontIDs;if(!t)return null;var i,a,n,o={};for(i in e)(n=e[i]).fontFamily&&t[n.fontFamily]&&(a=t[n.fontFamily],a=this._jsonClone(a),a=this._cleanFontId(a),o[n.name]=a);return o},_cleanFontId:function(e){return e.tfxName&&(TGE.getClass(e.tfxName)?e.className||(e.className="CharDisplay"):(this._recordConsoleMessage("In ELXFontIds, TFX font name ["+e.tfxName+"] doesn't exist."),delete e.tfxName)),e.fontColor&&(e.textColor=e.fontColor,delete e.fontColor),e.color&&(e.textColor=e.color,delete e.color),e},_onResize:function(){var e=this._getCurrentELX();e&&e.id!=this._currentElxId&&(this._applyElxDataToObjects(e.data),this._parentObjectsUsingDataset(e.data),this.setState(this._currentState),this._currentElxId=e.id,this.dispatchEvent({type:"elxchanged"}))},_reRegister:function(){this.layout={xPercentage:-this.parent.registrationX,yPercentage:-this.parent.registrationY,matchWidth:1,matchHeight:1}},_logConsoleMessage:function(e,t){var i;switch(e){case"warn":i="**ELX WARNING** ";break;case"error":i="**ELX ERROR* ";break;default:return}t="number"==typeof t?"Something went wrong with ELXDisplay.  Please contact Kirsten.  Error code "+t:t,window.console[e](i+"\n\n-"+t)},_recordConsoleMessage:function(e,t){t&&"true"!==getQueryString().elxverbose&&"true"!==getQueryString().elxdebug||-1!==this._consoleMessages.indexOf(e="number"==typeof e?"Something went wrong with ELXDisplay.  Please contact Kirsten.  Error code "+e:e)||this._consoleMessages.push(e)},_logConsoleMessages:function(){if(0!==this._consoleMessages.length){var e,t="**ELX WARNINGS**\n\n";for(e in this._consoleMessages)t+="-",t+=this._consoleMessages[e],t+="\n\n";window.console.warn(t)}},_createDebugFeatures:function(t,i){"true"===getQueryString().elxdebug&&(t.elxDebugHighlight=t.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:"white",alpha:.4,visible:!1})),t.addEventListener("mousemove",function(e){t.elxDebugHighlight.visible=!0,t.elxDebugHighlight.width=t.width,t.elxDebugHighlight.height=t.height,t.elxDebugHighlight.registrationX=t.registrationX,t.elxDebugHighlight.registrationY=t.registrationY,ELXDisplay._mDebugData=i,e.stageY>TGE.Game.GetInstance().stage.height/2?(ELXDisplay._mDebugWidget.style.top=0,ELXDisplay._mDebugWidget.style.bottom=null):(ELXDisplay._mDebugWidget.style.top=null,ELXDisplay._mDebugWidget.style.bottom=0)}.bind(this)),t.addEventListener("mouseout",function(){t.elxDebugHighlight.visible=!1}.bind(this)))}},extend(ELXDisplay,TGE.DisplayObjectContainer),ELXDisplay._createDebugWidget=function(){var e;"true"===getQueryString().elxdebug&&((e=document.createElement("div")).id="debug_widget",e.style.backgroundColor="#6bb6f2",e.style.position="absolute",e.style.display="block",e.style.top=0,e.style.padding="6px",e.style.zIndex=200,document.body.insertBefore(e,document.body.firstChild),ELXDisplay._mDebugWidget=e,ELXDisplay._updateDebugWidget(),setInterval(ELXDisplay._updateDebugWidget,100))},ELXDisplay._updateDebugWidget=function(){var e,t="",i=ELXDisplay._mDebugData;for(e in i)"childObjects"!==e&&"elx"!==e&&(t+=e+": "+JSON.stringify(i[e])+"<br>");""===t&&(t+="hover mouse over elx objects!"),t="<div style='font-weight: bold; font-size: 14px; padding-bottom: 3px;'>ELX Debugger</div>"+t,ELXDisplay._mDebugWidget.innerHTML=t},ELXDisplay.setupELXPreview=function(e){var t,i,a,n,o,s,r,h;getQueryString().elxfile&&(e.addChild?(TGE.Game.GetInstance().desktopMaxCanvasWidth=Number.MAX_VALUE,TGE.Game.GetInstance().desktopMaxCanvasHeight=Number.MAX_VALUE,TGE.Game.GetInstance()._resizeViewport(),t=getQueryString(),h=window[t.elxfile],i="boolean"==typeof t.elxoverrides?window[t.elxoverrides]:window[t.overridefile],a=window[t.elxstates],n=t.elxstate,o=t.backdrop,s="#"+Math.floor(16777216*Math.random()).toString(16),(r=e.addChild((new TGE.DisplayObjectContainer).setup({backgroundColor:o||s,layout:"match"}))).addEventListener("update",function(){r.bringToFront()}.bind(r)),h?(h=r.addChild((new ELXDisplay).setup({elx:h,override:i,states:a})),n&&h.setState(n)):r.addChild((new TGE.Text).setup({text:"ELX FILE SPECIFIED DOES NOT EXIST OR IS NOT LOADED",color:"white"===r.backgroundColor?"black":"white",fontStyle:"bold",layout:{xPercentage:0,yPercentage:.1,scaleToWidth:.9}})),i||"string"!=typeof t.overridefile&&"string"!=typeof t.elxoverrides||r.addChild((new TGE.Text).setup({text:"OVERRIDE FILE SPECIFIED DOES NOT EXIST OR IS NOT LOADED",color:"white"===r.backgroundColor?"black":"white",fontStyle:"bold",layout:{xPercentage:0,yPercentage:.15,scaleToWidth:.9}})),a||"string"!=typeof t.elxstates||r.addChild((new TGE.Text).setup({text:"STATES FILE SPECIFIED DOES NOT EXIST OR IS NOT LOADED",color:"white"===r.backgroundColor?"black":"white",fontStyle:"bold",layout:{xPercentage:0,yPercentage:.2,scaleToWidth:.9}}))):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"ELX Preview is not set up correctly. ELXDisplay.setupELXPreview(this) should be called from GameScreen."))},PropertyCombine={Strategy:{ADD:"add",SUBTRACT:"subtract",MULTIPLY:"multiply",DIVIDE:"divide",REPLACE:"replace",REPLACE_IF_NULL:"replaceIfNull",REPLACE_IF_EXISTS:"replaceIfExists",IGNORE:"ignore",DEEP_COMBINE:"deepCombine"},combineProperties:function(e,t,i,a){for(var n in e)if(e.hasOwnProperty(n)){var o=e[n];if(a&&a.length)for(var s,r=0;s=a[r];r++)o=s(o);var h=Number(o),l=null,c=null;t.hasOwnProperty(n)&&(l=t[n],c=Number(l));var p=PropertyCombine.Strategy.REPLACE;if(i&&("object"==typeof i?i[n]?p=i[n]:i.defaultStrategy&&(p=i.defaultStrategy):"string"!=typeof i&&"function"!=typeof i||(p=i)),"function"==typeof p)p(n,o,e,t);else switch(p){case PropertyCombine.Strategy.ADD:isNaN(c)||isNaN(h)?t[n]=o:t[n]=c+h;break;case PropertyCombine.Strategy.SUBTRACT:isNaN(c)||isNaN(h)?t[n]=o:t[n]=c-h;break;case PropertyCombine.Strategy.MULTIPLY:isNaN(c)||isNaN(h)?t[n]=o:t[n]=c*h;break;case PropertyCombine.Strategy.DIVIDE:isNaN(c)||isNaN(h)?t[n]=o:h?t[n]=c/h:TGE.Debug.Log(TGE.Debug.LOG_WARNING,"[property-combine] attempted division by zero for property "+n);break;case PropertyCombine.Strategy.IGNORE:break;case PropertyCombine.Strategy.REPLACE_IF_NULL:null===l&&(t[n]=o);break;case PropertyCombine.Strategy.REPLACE_IF_EXISTS:t.hasOwnProperty(n)&&(t[n]=o);break;case PropertyCombine.Strategy.REPLACE:t[n]=o;break;case PropertyCombine.Strategy.DEEP_COMBINE:"object"!=typeof o||Array.isArray(o)||!l||"object"!=typeof l||Array.isArray(l)?t[n]=o:this.combineProperties(o,l,"deepCombine")}}},clone:function(e,t){var i,a={};for(i in e)if(e.hasOwnProperty(i)){var n=e[i];if(t&&t.length)for(var o,s=0;o=t[s];s++)n=o(n);a[i]=n}return a},deepClone:function(e){if("object"!=typeof e||null===e)return e;if(Array.isArray(e)){for(var t=[],i=0;i<e.length;++i)t.push(this.deepClone(e[i]));return t}var a,n={};for(a in e)e.hasOwnProperty(a)&&(n[a]=this.deepClone(e[a]));return n},setupInstance:function(e,t,i,a,n){var o={};e.defaultParams&&(o=PropertyCombine.clone(e.defaultParams,n)),PropertyCombine.combineProperties(t,o,a,n),i&&i.call(e,o),PropertyCombine.combineProperties(o,e)},setDefaultParams:function(e,t,i,a){e.defaultParams?PropertyCombine.combineProperties(t,e.defaultParams,i,a):e.defaultParams=PropertyCombine.clone(t,a)},convertRandomValues:function(e){var t;return e&&"object"==typeof e&&(null===e.min||null===e.max||isNaN(e.min)||isNaN(e.max)||(t=TGE.Random.Range(e.min,e.max),e.step&&!isNaN(e.step)&&(t-=t%e.step),e=t)),e}};var BuilderGame=function(){if(window.__isLocal&&window._selfServe&&(!getQueryString().reset||"false"===getQueryString().reset)){var e=_selfServe.loadData("_settings");if(e)for(var t in e){var i,a="object"==typeof e[t]?e[t].default:e[t],n=GameConfig.REMOTE_SETTINGS[t];n?(i=getQueryString()[t],n.default=void 0===i?a:i):"object"==typeof e[t]&&(GameConfig.REMOTE_SETTINGS[t]=e[t])}}if(TGE.InCreativeBuilder()&&GameConfig.ASSETS&&!1!==GameConfig.CB_EXPAND_ASSETS&&this._expandAssets(),BuilderGame.superclass.constructor.call(this),window.__isLocal&&window._accumulatorIncrement&&(TGE.Game.prototype.accumulatorIncrement=_accumulatorIncrement,TGE.Game.prototype.accumulatorGetTotals=_accumulatorGetTotals),this._fontsLoaded={},GameConfig.PROMO_ASSET_PATH=window.__isLocal?"../PromoBuilder/assets/":"",window.__isLocal&&window._mergeBuilderSkin&&_mergeBuilderSkin(),"object"==typeof BuilderConfig&&this.mergeConfig(BuilderConfig),this._mergeModules(),"object"==typeof PromoConfig&&!1!==GameConfig.PROMO_BUILDER){if(window.__isLocal){for(var o in PromoConfig.PAGE_DEFS)r(PromoConfig.PAGE_DEFS[o].steps);for(o in PromoConfig.MACRO_DEFS)r(PromoConfig.MACRO_DEFS[o].steps);for(o in PromoConfig.THEME_DEFS)h(PromoConfig.THEME_DEFS[o])}if(window.PromoBuilder)for(var t in PromoBuilder.REMOTE_SETTINGS)TGE.RemoteSettings.HasSetting(t)||TGE.RemoteSettings.AddSetting(t,PromoBuilder.REMOTE_SETTINGS[t]);GameConfig.PAGE_ORDER=GameConfig.PAGE_ORDER||[];for(var s=GameConfig.PAGE_ORDER.length;0<=--s;)if(0<=GameConfig.PAGE_ORDER[s].indexOf("promo")){delete PromoConfig.PAGE_ORDER;break}this.mergeConfig(PromoConfig)}function r(e){for(var t=e.length;0<=--t;)e[t].steps?r(e[t].steps):h(e[t])}function h(e){e.path&&(e.path="PromoBuilder/"+e.path)}!window.__isLocal||!window._selfServe||getQueryString().reset&&"false"!==getQueryString().reset||_selfServe.loadLocalGameConfig(),GameConfig.ELX_DEFS=GameConfig.ELX_DEFS||{},GameConfig.TEXT_DEFS=GameConfig.TEXT_DEFS||{},GameConfig.EXCLUDE_FROM_COMPRESSION=GameConfig.EXCLUDE_FROM_COMPRESSION||[]};BuilderGame.LayoutHandler=function(e,t){e.layout||(e.layout={portrait:s(this,"portrait"),landscape:s(this,"landscape")});var u=e.remoteSettingPrefix||this.image,a=this.stage.isLandscape()?"landscape":"portrait",n=TGE.DeepClone(e.layout[a]||e.layout);function d(e,t,i){i=t+"_"+i+"_"+e;return TGE.RemoteSettings.HasSetting(i)?i:(i=t+"_"+e,TGE.RemoteSettings.HasSetting(i)?i:null)}function o(e,t,i,a,n){var n=n.ranges&&n.ranges[t],o=n?n[a]||n:"size"===t?{min:.5,max:2}:{min:0,max:1},s=(n=d(t,u,n=a))?TGE.RemoteSettings(n):.5,r=null;null!=(s=null==s&&"size"===t?.5:s)&&(r=TGE.Math.Lerp(o.min,o.max,s));for(var h,l,c,p=i.length;0<=--p;)e.hasOwnProperty(i[p])&&("size"===t?e[i[p]]*=r:null!=r?e[i[p]]=r:(s=TGE.Math.InverseLerp(o.min,o.max,e[i[p]]),s=Math.round(100*s)/100,c=s,(h=d(t,h=u,l=a))&&(l=TGE.RemoteSettings.GetSettings()[h],TGE.Game.GetInstance().validateSettingValue(c,l)===c&&(TGE.InCreativeBuilder()?CB.changeSetting(h,c):l.default=l.value=c))))}function s(e,t){var a=function e(t){if(!t||t instanceof ELXDisplay)return t;return e(t.parent)}(e);if(a){var n=a.getObjectName(e),o=a._elxsList[t].data;for(i=o.length;0<=--i;)if(o[i].name===n)return o[i].layout}return null}o(n,"size",["scaleToWidth","matchWidth","scaleToHeight","matchHeight"],a,e),o(n,"xPosition",["xPosition","xPercentage","leftAnchor","rightAnchor"],a,e),o(n,"yPosition",["yPosition","yPercentage","topAnchor","bottomAnchor"],a,e),void 0!==n.xPosition||void 0!==n.yPosition?(this._resize(n,t),a=n.xOffset||0,e=n.yOffset||0,"number"==typeof n.xPosition&&(this.x=this.parent.width*n.xPosition-(n.xPosition-.5)*this.width*this.scaleX+(this.registrationX-.5)*this.width*this.scaleX-this.parent.width*this.parent.registrationX+a*this.parent.width),"number"==typeof n.yPosition&&(this.y=this.parent.height*n.yPosition-(n.yPosition-.5)*this.height*this.scaleY+(this.registrationY-.5)*this.height*this.scaleY-this.parent.height*this.parent.registrationY+e*this.parent.height)):this._resize(n,t)},BuilderGame.prototype={_getAssetListName:function(e){var t=e;return t=this.assetManager._mGroupToListKey&&this.assetManager._mGroupToListKey[e]?this.assetManager.getAssetListFromGroup(e):t},addAudio:function(e,t){if(Array.isArray(t))for(var i=0;i<t.length;++i)this.addAudio(e,t[i]);else{var a=[];if(window.AudioList){if(TGE.RemoteSettings.HasSetting("audioEnabled")&&TGE.RemoteSettings("audioEnabled")||TGE.InCreativeBuilder()){for(var n=0;n<AudioList.length;++n){var o=AudioList[n];o.audioGroup===t&&a.push(o)}a.length||TGE.Debug.Log(TGE.Debug.LOG_WARNING,"no assets found matching audioGroup: "+t)}}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"addAudio requires an AudioList.js file, produced by `grunt convertaudio`");this.assetManager.addAssets(e,a)}},addFonts:function(e,t){var i,a,n=window._TREFONTS||{};if(e=this._getAssetListName(e),!t)for(var o in t=[],GameConfig.TEXT_DEFS)window.PromoConfig&&!1!==GameConfig.PROMO_BUILDER&&PromoConfig.TEXT_DEFS[o]||(a=GameConfig.TEXT_DEFS[o]).hasOwnProperty("fontFamily")&&!this._fontsLoaded[a.fontFamily]&&t.push(o);if(Array.isArray(t))for(i=0;i<t.length;++i)this.addFonts(e,t[i]);else{var s=this.findFontFamily(GameConfig.TEXT_DEFS[t]);!s||this._fontsLoaded[s]||n[s]||(this._fontsLoaded[s]=!0,n=window.__isLocal&&0<=getSupportedFonts().indexOf(s)?"../creativebuilder/local/fonts/":"fonts/",this.assetManager.addAsset(e,{url:n+s.replace(/ /g,"_")+".js"}))}},findFontFamily:function(e){if(e){if(e.fontFamily)return e.fontFamily;if(e.textDef)return this.findFontFamily(GameConfig.TEXT_DEFS[e.textDef])}return null},addPromoAssets:function(e){window.PromoBuilder&&(e=this._getAssetListName(e),PromoBuilder.AddPromoAssets(e))},addPromoScreen:function(e,t){return window.PromoBuilder?PromoBuilder.AddPromoScreen(e,t):(new TGE.DisplayObjectContainer).setup({width:700,height:862,backgroundColor:"black",alpha:.5,layout:"fill"})},getAssetSize:function(e){var t=GameConfig.ELX_DEFS[e];if(t&&t.cropWidth)return{width:t.cropWidth,height:t.cropHeight};e=this.assetManager.getAsset(e);return e?{width:e.width,height:e.height}:{width:0,height:0}},_expandAssets:function(){for(var e=GameConfig.ASSETS.length;0<=--e;){var t=GameConfig.ASSETS[e],i=this._expandEntry(t);GameConfig.ASSETS.splice(e,1);for(var a=i.length;0<=--a;){var n=PropertyCombine.clone(t);n.url=i[a].url,n.subsheetURL&&(n.subsheetURL=i[a].subsheetURL),GameConfig.ASSETS.splice(e,0,n)}}},_expandEntry:function(e){var n=/\[[^\[]*\]/g,o=e.url.match(n)||[];if(e.subsheetURL)if(Array.isArray(e.subsheetURL))for(i=e.subsheetURL.length;0<=--i;)u(e.subsheetURL[i]);else u(e.subsheetURL);for(var t=[e],i=o.length;0<=--i;){var a=o[i].substr(1,o[i].length-2),s=GameConfig.REMOTE_SETTINGS&&GameConfig.REMOTE_SETTINGS[a];if(s){var r=(e.remoteSetting||s).options;if(r)for(var h=t.length;0<=--h;)for(var l=t.splice(h,1)[0],c=r.length;0<=--c;){var p=PropertyCombine.clone(l);p.url=l.url.replace(o[i],r[c]),p.subsheetURL&&(p.subsheetURL=l.subsheetURL.replace(o[i],r[c])),t.push(p)}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"remote setting' "+a+"' doesn't have an 'options' array (needed for ASSETS processing).")}else TGE.Debug.Log(TGE.Debug.LOG_ERROR,"remote setting'"+a+"' mentioned in asset url '"+e.url+"' doesn't exist")}return t;function u(e){var t=e.match(n);if(t)for(var i=t.length;0<=--i;){var a=t[i];o.indexOf(a)<0&&o.push(a)}}},mergeConfig:function(e){for(key in e){var t;Array.isArray(e[key])?(t=e[key],void 0===GameConfig[key]&&(GameConfig[key]=[]),t.push.apply(GameConfig[key],t)):(t=e[key],void 0===GameConfig[key]&&(GameConfig[key]={}),PropertyCombine.combineProperties(t,GameConfig[key],PropertyCombine.Strategy.REPLACE_IF_NULL))}},_mergeModules:function(){if(window._TREMERGES)for(var e in _TREMERGES)this.mergeData(_TREMERGES[e]);if(GameConfig.SOURCE)for(var t=GameConfig.SOURCE.length;0<=--t;){var i=GameConfig.SOURCE[t];0===i.indexOf("js/module")&&(i=trimmedFilename(i),this.mergeData(window[i]&&window[i].MERGE_DATA))}},mergeData:function(e){e&&(this.deepMerge(e.GameConfig,GameConfig),this.deepMerge(e.BuilderConfig,GameConfig))},deepMerge:function(e,t,i){if(e&&t&&"object"==typeof e&&"object"==typeof t)for(var a in i=i||"_MODULE_",e){var n=e[a];switch(a){case"_MODULE_":case"_MERGE_":case"_REPLACE_":case"_CONCAT_":case"_ADD_":case"_DELETE_":this.deepMerge(n,t,a);break;default:if("REMOTE_SETTINGS"===a&&!t[a]){this._mergeRemoteSettings(n,i);break}var o,s=t[a];if(t.hasOwnProperty(a))switch(i){case"_ADD_":if(Array.isArray(s))if(Array.isArray(n))for(var r=0;r<n.length;++r)s.indexOf(n[r])<0&&s.push(n[r]);else s.indexOf(n)<0&&s.push(n);break;case"_DELETE_":delete t[a];break;case"_REPLACE_":t[a]=PropertyCombine.deepClone(n);break;default:s&&"object"==typeof s?Array.isArray(s)?Array.isArray(n)?"_CONCAT_"===i?s.push.apply(s,n):t[a]=PropertyCombine.deepClone(n):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"MERGE_DATA attempting to merge non-Array source key '"+a+"' into destination Array"):this.deepMerge(n,s,i):n&&"object"==typeof n?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"MERGE_DATA attempting to merge source object key '"+a+"' into non-object destination: "+s):t[a]=e[a]}else"_DELETE_"!==i&&(o=null,Array.isArray(n)?o=[]:n&&"object"==typeof n&&(o={}),o?(this.deepMerge(n,o,i),t[a]=o):t[a]=n)}}},_mergeRemoteSettings:function(e,t){var i,a=TGE.RemoteSettings.GetSettings();for(i in e)switch(i){case"_MODULE_":case"_MERGE_":case"_REPLACE_":case"_ADD_":case"_DELETE_":this._mergeRemoteSettings(e[i],i);break;default:switch(t){case"_DELETE_":TGE.Debug.Log(TGE.Debug.LOG_ERROR,"_DELETE_ operation not currently supported for REMOTE_SETTINGS");break;case"_ADD_":if(TGE.RemoteSettings.HasSetting(i))break;default:var n=e[i];a[i]&&("_MODULE_"===t?(n=TGE.DeepClone(n)).default=TGE.RemoteSettings(i):(n=TGE.DeepClone(a[i]),CB.deepMerge(e[i],n))),TGE.RemoteSettings.AddSetting(i,n)}}}},extend(BuilderGame,TGE.Game);var CroppedSprite=function(){CroppedSprite.superclass.constructor.apply(this,arguments)};CroppedSprite.prototype={setup:function(e){var t,i=e.image;return i&&!TGE.Game.GetInstance().isAssetLoaded(i)&&(delete e.image,e.cropWidth||(t=GameConfig.ELX_DEFS[i]||{},e.cropWidth=t.cropWidth,e.cropHeight=t.cropHeight),TGE.Game.GetInstance().waitForAsset(i,this._setImage_.bind(this,i,e.cropWidth,e.cropHeight),!1)),CroppedSprite.superclass.setup.call(this,e),this._elxListener=null,this},_setImage_:function(e,t,i){this.image=e,t&&this.setSize(t,i),this.tweenFrom({duration:.25,alpha:0})},setSize:function(e,t){CroppedSprite.superclass.setSize.call(this,e,t),this._elxListener||(this._elxListener=this.addEventListener("elxchanged",this.setSize.bind(this,e,t)))}},extend(CroppedSprite,TGE.Sprite),Analytics={countedEvents:{},logEngagement:function(){TGE.Events.logEngagement()},logEvent:function(e,t){if(this.countedEvents.hasOwnProperty(e)){var i=t||1,a=this.countedEvents[e],n=Math.floor(a.counted/a.threshold);if(a.counted+=i,!(n<Math.floor(a.counted/a.threshold)))return;t=a.counted}TGE.Events.logCustomEvent(e)},setLevel:function(e){window.mixpanel?mixpanel.register({level:e}):this.logEvent("level",e)},resetCount:function(e,t){var i=this.countedEvents[e];t=t||i&&i.threshold||1,this.countedEvents[e]={threshold:t,counted:0}}},ParticleManager=function(){ParticleManager.superclass.constructor.call(this),this.game=TGE.Game.GetInstance()},ParticleManager.prototype={setup:function(){return this._particles=[],this._physicsParticles=[],this.stage.addEventListener("resizeEnd",this._resizeAllParticles.bind(this)),this},createParticle:function(e){var t={widthMultiplier:1,heightMultiplier:1,startingScale:1,startingRotation:0,rotationSpeed:0,startingAlpha:1};PropertyCombine.combineProperties(e,t),this._currentParticleIndex=t.particleIndex,this._particlesInEffect=t.particlesInEffect,t.particleImage||TGE.Debug.Log(TGE.Debug.LOG_ERROR,"createParticle requires a 'particleImage' parameter"),null===t.startingX&&null===t.startingXPercentage&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"createParticle requires a 'startingX' or 'startingXPercentage' parameter"),null===t.startingY&&null===t.startingYPercentage&&TGE.Debug.Log(TGE.Debug.LOG_ERROR,"createParticle requires a 'startingY' or 'startingYPercentage' parameter");var i={};t.startingX?i.x=this._randomizeProperty(t.startingX):t.startingXPercentage&&(i.x=this._randomizeProperty(t.startingXPercentage),i.x=TGE.MapValue(i.x,0,1,.5*-t.creator.width,.5*t.creator.width)),t.startingY?i.y=this._randomizeProperty(t.startingY):t.startingYPercentage&&(i.y=this._randomizeProperty(t.startingYPercentage),i.y=TGE.MapValue(i.y,0,1,.5*-t.creator.height,.5*t.creator.height));var a,n=this._randomizeProperty(t.particleImage);this.game.isAssetLoaded(n)?a=this.game.assetManager.getAsset(n):(n=void 0,a={width:0,height:0},"3"===getQueryString().tgedebug&&TGE.Debug.Log(TGE.Debug.LOG_WARNING,"Particle image was not loaded: "+n));var o="local"===this._randomizeProperty(t.sizingSpace)?t.creator:this.stage,s=this._getSizedParticleDimensions(a,o),r=this._randomizeProperty(t.widthMultiplier),e=this._randomizeProperty(t.heightMultiplier);if(t.tweens&&0<t.tweens.length)for(var h=u=(new TGE.DisplayObjectContainer).setup({x:i.x,y:i.y,scaleX:this._randomizeProperty(t.startingScale),scaleY:this._randomizeProperty(t.startingScale),rotation:this._randomizeProperty(t.startingRotation),alpha:this._randomizeProperty(t.startingAlpha)}),l=0;l<t.tweens.length;l++){var c=h.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),p=TGE.DeepClone(t.tweens[l]);this._randomizeAllProperties(p),!0===t.tweenFrom?c.tweenFrom(p):c.tweenTo(p),h=c,l===t.tweens.length-1&&(d=h.addChild((new TGE.Sprite).setup({image:n,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})))}else var u,d=u=(new TGE.Sprite).setup({image:n,x:i.x,y:i.y,scaleX:this._randomizeProperty(t.startingScale),scaleY:this._randomizeProperty(t.startingScale),rotation:this._randomizeProperty(t.startingRotation),alpha:this._randomizeProperty(t.startingAlpha)});u.width=s.width*r,u.height=s.height*e,u.imageData=a,u.widthMultiplier=r,u.heightMultiplier=e,u.sizingReference=o;o=this._randomizeProperty(t.rotationDirection);o/=Math.abs(o);var m=this._randomizeProperty(t.rotationSpeed)*o,o=(t.physicsParams||t).alignRotationToDirection;0==m&&!o||(o?(d.rotationOffset=0,d.addEventListener("update",function(e){this.rotationOffset+=m*e.elapsedTime}.bind(d))):d.addEventListener("update",function(e){this.rotation+=m*e.elapsedTime}.bind(d)));o=this._randomizeProperty(t.color);return o&&d.colorize(o),u.creator=t.creator,this._particles.push(u),this._addPhysicsParticle(u,t.physicsParams||t),t.beginFadeTweens(u),u},_addPhysicsParticle:function(e,t){var i={initialDirection:{minX:-1,maxX:1,minY:-1,maxY:1},initialSpeed:75,acceleration:1,scaleSpeedToScreenSize:!1,gravity:0,bounciness:.75};PropertyCombine.combineProperties(t,i);t=this._randomizeProperty(i.initialVelocity);if(!t){var a=this._randomizeProperty(i.initialDirection);if("string"==typeof a)switch(a){case"awayFromCenter":a=0===e.x&&0===e.y?new TGE.Vector2(ModuleMath.Random.range(-1,1),ModuleMath.Random.range(-1,1)):e.creator instanceof FullScreenParticles?new TGE.Vector2(e.x,e.y).subtract(new TGE.Vector2(.5*e.creator.width,.5*e.creator.height)):new TGE.Vector2(e.x,e.y).subtract(new TGE.Vector2(0,0));break;case"towardCenter":a=(e.creator instanceof FullScreenParticles?new TGE.Vector2(.5*e.creator.width,.5*e.creator.height):new TGE.Vector2(0,0)).subtract(new TGE.Vector2(e.x,e.y))}else"number"==typeof a&&(a-=90,a%=360,o=(a+=a<0?360:0)*TGE.DEG2RAD,a=new TGE.Vector2(Math.cos(o),Math.sin(o)));t=a.normalized().multiplyNumber(this._randomizeProperty(i.initialSpeed))}function n(e,t,i){return(i?e.localToStage(new TGE.Vector2(e.x,e.y)):{x:e.x,y:e.y}).y>t-e.width*e.scaleY*.5}var o;i.collisionPlane&&("string"==typeof i.collisionPlane&&"screenBottom"===i.collisionPlane?(o=(e.parent?e.parent.stageToLocal({x:0,y:this.stage.height},!0):e.creator.stageToLocal({x:0,y:e.creator.y+.5*e.creator.height},!0)).y,e.waitingToRiseAboveCollisionPlane=n(e,o,!0)):(i.collisionPlane=this._randomizeProperty(i.collisionPlane),e.waitingToRiseAboveCollisionPlane=n(e,i.collisionPlane,!1))),e.gravity=this._randomizeProperty(i.gravity),(t=i.scaleSpeedToScreenSize?new TGE.Vector2(t.x*Math.sqrt(.0015*this.stage.width*2),t.y*Math.sqrt(.0015*this.stage.height*2)):t).constructor!==TGE.Vector2&&(t=new TGE.Vector2(t.x,t.y)),e.velocity=t,e.acceleration=this._randomizeProperty(i.acceleration),e.alignRotationToDirection=i.alignRotationToDirection,e.collisionPlane=i.collisionPlane,e.bounciness=this._randomizeProperty(i.bounciness),e.simulationSpace=i.simulationSpace,this._physicsParticles.push(e),this.updateListener||(this.updateListener=this.addEventListener("update",this._runPhysicsSimulation.bind(this)))},_runPhysicsSimulation:function(e){for(var t=0;t<this._physicsParticles.length;t++){var i=this._physicsParticles[t];i.parent&&"screen"===i.simulationSpace&&!i.movedToScreenSpace&&(a=i.parent.localToStage(new TGE.Vector2(i.x,i.y),!0),this.stage.addChild(i),i.x=a.x,i.y=a.y,i.movedToScreenSpace=!0);var a=Math.pow(i.acceleration,60*e.elapsedTime);i.velocity=i.velocity.multiplyNumber(a),i.velocity=i.velocity.add(new TGE.Vector2(0,i.gravity).multiplyNumber(e.elapsedTime));a=new TGE.Vector2(i.x,i.y).add(i.velocity.multiplyNumber(e.elapsedTime));if(i.alignRotationToDirection){for(var n=i;0<n.numChildren();)n=n.getChildAt(0);var o=i.velocity.normalized(),s=180*Math.atan2(o.y,o.x)/Math.PI+90;n.rotation=s+n.rotationOffset}void 0!==i.collisionPlane&&(o=0,o="screenBottom"===i.collisionPlane?(i.parent?i.parent.stageToLocal({x:0,y:this.stage.height},!0):i.creator.stageToLocal({x:0,y:i.creator.y+.5*i.creator.height},!0)).y:i.collisionPlane,s=a.y+i.width*i.scaleY*.5,i.waitingToRiseAboveCollisionPlane&&(i.waitingToRiseAboveCollisionPlane=o<s),!i.waitingToRiseAboveCollisionPlane&&o<s&&(a.y=o-i.height*i.scaleY*.55,i.velocity.y*=-i.bounciness)),i.x=a.x,i.y=a.y}},_randomizeAllProperties:function(e){for(var t in e)e.hasOwnProperty(t)&&(e[t]=this._randomizeProperty(e[t]))},_randomizeProperty:function(e){var t=null;return"object"==typeof e&&(e.constructor===Array?t=e[ModuleMath.Random.int(e.length)]:e.mapToParticleNumber&&void 0!==e.min&&void 0!==e.max?t=TGE.MapValue(this._currentParticleIndex,0,this._particlesInEffect-1,e.min,e.max):void 0!==e.min&&void 0!==e.max?t=ModuleMath.Random.range(e.min,e.max):e.mapToParticleNumber&&void 0!==e.minX&&void 0!==e.maxX&&void 0!==e.minY&&void 0!==e.maxY?t=new TGE.Vector2(TGE.MapValue(this._currentParticleIndex,0,this._particlesInEffect-1,e.minX,e.maxX),TGE.MapValue(this._currentParticleIndex,0,this._particlesInEffect-1,e.minY,e.maxY)):void 0!==e.minX&&void 0!==e.maxX&&void 0!==e.minY&&void 0!==e.maxY&&(t=new TGE.Vector2(ModuleMath.Random.range(e.minX,e.maxX),ModuleMath.Random.range(e.minY,e.maxY)))),null!==t?t:e},_getSizedParticleDimensions:function(e,t){var i,a,t=t.width<=t.height?.1*t.width:.1*t.height;return e.width>=e.height?i=(a=t)*(e.height/e.width):a=(i=t)*(e.width/e.height),{width:a,height:i}},_resizeAllParticles:function(){for(var e in this._particles){var t=this._particles[e],e=this._getSizedParticleDimensions(t.imageData,t.sizingReference);t.width=e.width*t.widthMultiplier,t.height=e.height*t.heightMultiplier}}},extend(ParticleManager,TGE.DisplayObjectContainer),ParticleEffect=function(){ParticleEffect.superclass.constructor.call(this),this.game=TGE.Game.GetInstance()},ParticleEffect.prototype={setup:function(e){var t;ParticleEffect.superclass.setup.call(this,e),this.game.particleManager?this.particleManager=this.game.particleManager:this.particleManager=this.game.particleManager=(new ParticleManager).setup({}),t=e.effectParams?TGE.DeepClone(e.effectParams):TGE.DeepClone(e);var i=TGE.DeepClone(ParticleEffect.DefaultEffect);if(e.baseEffect&&this._combineEffectParams(e.baseEffect,i),this._combineEffectParams(t,i),i.effectLayers)for(var a in this.completedEffectLayers=0,this.createdEffectLayers=[],i.effectLayers){var n=TGE.DeepClone(i.effectLayers[a]);n.x=0,n.y=0;a=TGE.DeepClone(t);a.effectLayers=void 0,this._combineEffectParams(n,a),this._createEffectLayer(a)}else e.skipBaseClassEffectCreation||this._createEffect(i),this.completedParticles=0,this.addEventListener("allParticlesCompleted",this._onFinish.bind(this));return i.onComplete&&(this.onComplete=i.onComplete),this},completeAndDestroy:function(){this.destroyAfterNextLoop=!0},_createEffectLayer:function(e){e.onComplete=function(){this.completedEffectLayers++,this.completedEffectLayers>=this.createdEffectLayers.length&&(this.onComplete&&this.onComplete(),this.markForRemoval())}.bind(this);e=this.addChild((new ParticleEffect).setup(e));this.createdEffectLayers.push(e)},_combineEffectParams:function(e,t){var i,a;if(e.subEffect&&(t.subEffect?(i=TGE.DeepClone(t.subEffect),this._combineEffectParams(e.subEffect,i)):i=e.subEffect),e.physicsParams&&(t.physicsParams?(a=TGE.DeepClone(t.physicsParams),PropertyCombine.combineProperties(e.physicsParams,a)):a=e.physicsParams),e.effectLayers&&t.effectLayers)for(var n=TGE.DeepClone(t.effectLayers),o=0;o<e.effectLayers.length;o++)o<n.length?PropertyCombine.combineProperties(e.effectLayers[o],n[o]):n.push(e.effectLayers[o]);e.startingX&&t.startingXPercentage?t.startingXPercentage=null:e.startingXPercentage&&t.startingX&&(t.startingX=null),e.startingY&&t.startingYPercentage?t.startingYPercentage=null:e.startingYPercentage&&t.startingY&&(t.startingY=null),PropertyCombine.combineProperties(e,t),n&&(t.effectLayers=n),i&&(t.subEffect=i),a&&(t.physicsParams=a)},_createCustomEffect:function(e){this._createEffect(e)},_createEffect:function(o,e){e&&this._combineEffectParams(e,o),this.effectParams&&this._combineEffectParams(this.effectParams,o),this.particleImage&&(o.particleImage=this.particleImage),this.particleScale&&(o.particleScale=this.particleScale),this.color&&(o.color=this.color);var i=this.particleManager._randomizeProperty(o.particleAmount);this.totalParticles?this.totalParticles+=i:this.totalParticles=i,o.beginFadeTweens=function(e){var t=this.particleManager._randomizeProperty(o.totalLifetime),i=this.particleManager._randomizeProperty(o.fadeInTime),a=this.particleManager._randomizeProperty(o.fadeOutTime);o.fadeTimesArePercent&&(i*=t,a*=t);var i=TGE.Math.Clamp(i,0,t),a=TGE.Math.Clamp(a,0,t-i),n=TGE.Math.Clamp(t-i-a,0,t),t=this.particleManager._randomizeProperty(o.maxScale);e.tweenTo({scaleX:t,scaleY:t,alpha:this.particleManager._randomizeProperty(o.maxAlpha),duration:i}),e.tweenTo({alpha:void 0!==o.endingAlpha?this.particleManager._randomizeProperty(o.endingAlpha):0,scale:void 0!==o.endingScale?this.particleManager._randomizeProperty(o.endingScale):this.particleManager._randomizeProperty(o.maxScale),delay:i+n,duration:a,onComplete:function(){e.dispatchEvent({type:"particleComplete"}),e.markForRemoval()}})}.bind(this);for(var t=0,a=0;a<i;a++)0<a&&(t+=this.particleManager._randomizeProperty(o.timeBetweenParticles)),this.performAction({delay:t,action:function(e){var t=this.particleManager._randomizeProperty(o.particleScale);o.widthMultiplier=t,o.heightMultiplier=t,o.creator=this,o.particleIndex=e,o.particlesInEffect=i,this.addChild(this.particleManager.createParticle(o)).addEventListener("particleComplete",this._checkForAllParticlesComplete.bind(this))}.bind(this,a)});var n=0;if(o.subEffect){var s=this.particleManager._randomizeProperty(o.subEffect.occurrences);this.totalParticles+=s;for(n=0,a=0;a<s;a++)0<a&&(n+=this.particleManager._randomizeProperty(o.subEffect.timeBetweenOccurrences)),this.performAction({delay:n,action:function(){var e,t=TGE.DeepClone(o.subEffect),i=t.particleImage||o.particleImage;t.particleImage=this.particleManager._randomizeProperty(i),t.color=this.particleManager._randomizeProperty(t.color||o.color),t.particleScale=this.particleManager._randomizeProperty(t.particleScale||o.particleScale),t.scale=this.particleManager._randomizeProperty(t.scale||1),t.xPercentage?(e=this.particleManager._randomizeProperty(t.xPercentage),t.x=TGE.MapValue(e,0,1,.5*-this.width,.5*this.width)):t.x=this.particleManager._randomizeProperty(t.x||0),t.yPercentage?(e=this.particleManager._randomizeProperty(t.yPercentage),t.y=TGE.MapValue(e,0,1,.5*-this.height,.5*this.height)):t.y=this.particleManager._randomizeProperty(t.y||0),t.effectType="custom",this.addChild((new ParticleEffect).setup(t)).addEventListener("allParticlesCompleted",this._checkForAllParticlesComplete.bind(this))}.bind(this)})}this.looping=this.looping||o.looping,this.looping&&this.performAction({delay:(n<=t?t:n)+this.particleManager._randomizeProperty(o.timeBetweenParticles)+.01,action:this._createLoopedEffect.bind(this,o)}),this.allParticlesCreated=!0},_createLoopedEffect:function(e){this.destroyAfterNextLoop&&(this.looping=!1,e.looping=this.looping),this._createEffect(e)},_checkForAllParticlesComplete:function(){this.completedParticles++,this.allParticlesCreated&&this.completedParticles>=this.totalParticles&&this.dispatchEvent({type:"allParticlesCompleted"})},_onFinish:function(){this.onComplete&&!this.callbackRun&&(this.callbackRun=!0,this.onComplete()),this.markForRemoval()}},extend(ParticleEffect,TGE.DisplayObjectContainer),ParticleEffect.DefaultEffect={particleScale:1,particleAmount:5,timeBetweenParticles:0,looping:!1,totalLifetime:1,fadeInTime:.25,fadeOutTime:.25,fadeTimesArePercent:!0,startingScale:.5,maxScale:1,startingAlpha:0,maxAlpha:1,endingAlpha:0,startingX:0,startingY:0,startingRotation:0,rotationDirection:1,rotationSpeed:0,alignRotationToDirection:!1,initialDirection:{min:-180,max:180},initialSpeed:100,acceleration:1,gravity:0,bounciness:.75,simulationSpace:"local",sizingSpace:"screen"},ParticleEffect.Burst={},ParticleEffect.Burst.Puff={particleAmount:3,startingX:{min:-10,max:10},startingY:{min:-10,max:10},totalLifetime:.75,fadeInTime:.075,fadeOutTime:.6,startingScale:0,maxScale:{min:.8,max:1.2},startingRotation:{min:0,max:360},rotationSpeed:{min:-50,max:50},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{min:50,max:125},gravity:0},ParticleEffect.Burst.Sprinkle={particleAmount:5,totalLifetime:1.5,startingX:{min:-10,max:10},startingY:{min:-10,max:10},fadeInTime:.1,fadeOutTime:.3,startingScale:0,maxScale:{min:.9,max:1.1},startingRotation:{min:0,max:360},rotationSpeed:{min:-100,max:100},startingAlpha:0,maxAlpha:.7,initialDirection:{minX:-1,maxX:1,minY:-4.5,maxY:-1.5},initialSpeed:{min:100,max:400},gravity:1e3,collisionPlane:"screenBottom"},ParticleEffect.Burst.Pop={particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:500,max:0},gravity:100},ParticleEffect.FullScreen={},ParticleEffect.FullScreen.Spill={particleAmount:30,timeBetweenParticles:.05,startingXPercentage:{min:0,max:1},startingYPercentage:{min:-.1,max:-.05},totalLifetime:2.5,fadeInTime:.1,fadeOutTime:.69,startingScale:0,maxScale:1,endingScale:.1,startingRotation:0,rotationSpeed:0,startingAlpha:0,maxAlpha:1,initialSpeed:0,gravity:{min:1e3,max:2e3},collisionPlane:"screenBottom",bounciness:{min:.4,max:.6}},ParticleEffect.FullScreen.Confetti={particleAmount:30,timeBetweenParticles:.075,startingXPercentage:{min:0,max:1},startingYPercentage:{min:-.1,max:-.05},totalLifetime:5,fadeInTime:.1,fadeOutTime:.69,startingScale:1,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-1,maxX:1,minY:0,maxY:0},initialSpeed:{min:40,max:100},gravity:{min:200,max:300},tweens:[{scaleX:.1,duration:{min:.2,max:.3},rewind:!0,loop:!0}]},ParticleEffect.FullScreen.Fireworks={particleAmount:0,subEffect:{occurrences:10,timeBetweenOccurrences:{min:.1,max:.3},xPercentage:{min:.1,max:1},yPercentage:{min:.1,max:1},scale:{min:1,max:2},particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:150,max:0},gravity:100}},ParticleEffect.FullScreen.Fountain={particleAmount:40,timeBetweenParticles:.03,startingXPercentage:.5,startingYPercentage:1.05,totalLifetime:3,fadeInTime:.2,fadeOutTime:.33,startingScale:.5,maxScale:1,endingScale:.01,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-.3,maxX:.3,minY:-1,maxY:-1},initialSpeed:{min:900,max:1150},scaleSpeedToScreenSize:!0,gravity:2e3,collisionPlane:"screenBottom",bounciness:.6},ParticleBurst=function(){ParticleBurst.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{particleScale:1,effectType:"puff"})},ParticleBurst.prototype={setup:function(e){switch(e.skipBaseClassEffectCreation=!0,PropertyCombine.setupInstance(this,e,ParticleBurst.superclass.setup),this.customBurstParams&&(this.customEffectParams=this.customBurstParams),this.customEffectParams&&(this.effectParams=this.customEffectParams),this.effectType){case"puff":this._createPuffEffect();break;case"sprinkle":this._createSprinkleEffect();break;case"pop":this._createPopEffect();break;case"custom":this._createEffect();break;default:TGE.Debug.Log(TGE.Debug.LOG_ERROR,"ParticleBurst was given an unrecognized effect type")}return this},_createPuffEffect:function(){this._createEffect({particleAmount:3,startingX:{min:-10,max:10},startingY:{min:-10,max:10},totalLifetime:.75,fadeInTime:.075,fadeOutTime:.6,startingScale:0,maxScale:{min:.8,max:1.2},startingRotation:{min:0,max:360},rotationSpeed:{min:-50,max:50},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{min:5,max:12.5},gravity:0})},_createSprinkleEffect:function(){this._createEffect({particleAmount:5,totalLifetime:1.5,startingX:{min:-10,max:10},startingY:{min:-10,max:10},fadeInTime:.07,fadeOutTime:2,startingScale:0,maxScale:{min:.9,max:1.1},startingRotation:{min:0,max:360},rotationSpeed:{min:-100,max:100},startingAlpha:0,maxAlpha:.7,initialDirection:{minX:-1,maxX:1,minY:-4.5,maxY:-1.5},initialSpeed:{min:100,max:400},gravity:1e3,collisionPlane:"screenBottom"})},_createPopEffect:function(){this._createEffect({particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:150,max:0},gravity:100})},_createEffect:function(e){ParticleBurst.superclass._createEffect.call(this,{particleAmount:5,timeBetweenParticles:0,startingX:0,startingY:0,startingScale:.5,maxScale:1,startingAlpha:0,maxAlpha:1,startingRotation:0,rotationDirection:1,rotationSpeed:0,totalLifetime:2,fadeTimesArePercent:!1,fadeInTime:.25,fadeOutTime:.5,simulationSpace:"local",gravity:1e3,bounciness:.75},e)}},extend(ParticleBurst,ParticleEffect),FullScreenParticles=function(){FullScreenParticles.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{effectType:"spill"})},FullScreenParticles.prototype={setup:function(e){switch(e.width=this.stage.width,e.height=this.stage.height,e.skipBaseClassEffectCreation=!0,PropertyCombine.setupInstance(this,e,FullScreenParticles.superclass.setup),this.effectType){case"spill":this._createSpillEffect();break;case"confetti":this._createConfettiEffect();break;case"fireworks":this._createFireworksEffect();break;case"fountain":this._createFountainEffect();break;case"custom":this._createCustomEffect();break;default:TGE.Debug.Log(TGE.Debug.LOG_ERROR,"FullScreenParticles was given an unrecognized effect type")}return this},_createSpillEffect:function(){this._createEffect({particleAmount:30,timeBetweenParticles:.05,startingXPercentage:{min:0,max:1},startingY:{min:-100,max:-50},totalLifetime:2.5,fadeInTime:.1,fadeOutTime:.69,startingScale:0,maxScale:1,endingScale:.1,startingRotation:0,rotationSpeed:0,startingAlpha:0,maxAlpha:1,initialSpeed:0,gravity:{min:1e3,max:2e3},collisionPlane:"screenBottom",bounciness:{min:.4,max:.6}})},_createConfettiEffect:function(){this._createEffect({particleAmount:30,timeBetweenParticles:.075,startingXPercentage:{min:0,max:1},startingY:{min:-100,max:-50},totalLifetime:5,fadeInTime:.1,fadeOutTime:.69,startingScale:1,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-1,maxX:1,minY:0,maxY:0},initialSpeed:{min:40,max:100},gravity:{min:200,max:300},tweens:[{scaleX:.1,duration:{min:.2,max:.3},rewind:!0,loop:!0}]})},_createFireworksEffect:function(){this._createEffect({particleAmount:0,subEffect:{occurrences:10,timeBetweenOccurrences:{min:.1,max:.3},xPercentage:{min:.1,max:1},yPercentage:{min:.1,max:1},scale:{min:1,max:2},particleAmount:13,timeBetweenParticles:.01,startingX:{min:-5,max:5},startingY:{min:-5,max:5},totalLifetime:1,fadeInTime:.1,fadeOutTime:.69,startingScale:{mapToParticleNumber:!0,min:.05,max:.45},maxScale:{mapToParticleNumber:!0,min:.25,max:.7},startingRotation:{min:-180,max:180},rotationSpeed:{min:-360,max:360},startingAlpha:0,maxAlpha:.7,initialDirection:"awayFromCenter",initialSpeed:{mapToParticleNumber:!0,min:150,max:0},gravity:100}})},_createFountainEffect:function(){this._createEffect({particleAmount:40,timeBetweenParticles:.03,startingXPercentage:.5,startingYPercentage:1.05,totalLifetime:3,fadeInTime:.2,fadeOutTime:1,startingScale:.5,maxScale:1,endingScale:.01,startingRotation:{min:0,max:360},rotationSpeed:{min:-250,max:250},startingAlpha:1,maxAlpha:1,initialDirection:{minX:-.3,maxX:.3,minY:-1,maxY:-1},initialSpeed:{min:900,max:1150},gravity:2e3,collisionPlane:"screenBottom",bounciness:.6})},_createEffect:function(e){FullScreenParticles.superclass._createEffect.call(this,{particleAmount:20,timeBetweenParticles:.1,startingXPercentage:{min:0,max:1},startingYPercentage:{min:0,max:1},startingScale:.5,maxScale:1,startingAlpha:0,maxAlpha:1,startingRotation:0,rotationDirection:1,rotationSpeed:{min:-360,max:360},totalLifetime:2,fadeTimesArePercent:!1,fadeInTime:.25,fadeOutTime:.5,initialDirection:{minX:-.5,maxX:.5,minY:-1,maxY:-1},initialSpeed:200,scaleSpeedToScreenSize:!0,gravity:1e3,bounciness:.75,simulationSpace:"local"},e)}},extend(FullScreenParticles,ParticleEffect),BuilderExportedParticles=function(){BuilderExportedParticles.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{effectData:void 0,particleImage1:void 0,particleImage2:void 0,particleImage3:void 0,createdEffects:[]})},BuilderExportedParticles.prototype={setup:function(e){var t=!1;e.effectData||(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires an 'effectData' parameter"),t=!0);var i=0;if(e.effectData.effect3?i=3:e.effectData.effect2?i=2:e.effectData.effect1&&(i=1),0!==i||e.particleImage?(1<=i&&!e.particleImage1&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage1' parameter"),t=!0),2<=i&&!e.particleImage2&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage2' parameter"),t=!0),3<=i&&!e.particleImage3&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage3' parameter"),t=!0)):(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"BuilderExportedParticles requires 'particleImage' parameter"),t=!0),t)return null;PropertyCombine.setupInstance(this,e,BuilderExportedParticles.superclass.setup),this.effectData=TGE.DeepClone(e.effectData),(this.completedEffects=0)===i&&this._createEffect(this.effectData,this.particleImage,this.override||void 0);for(var a,n=1;n<=3;n++)this.effectData["effect"+n]&&(a=void 0,this.override&&(a=1===i?this.override.effect1||this.override:this.override["effect"+n]),this._createEffect(this.effectData["effect"+n],this["particleImage"+n],a));return this},_createEffect:function(e,t,i){e.particleImage=t,e.onComplete=this._onEffectCompleted.bind(this),i&&this._applyOverride(i,e);e=this.addChild((new ParticleBurst).setup(e));this.createdEffects.push(e)},_onEffectCompleted:function(){this.completedEffects++,this.completedEffects>=this.createdEffects.length&&(this.onComplete&&this.onComplete(),this.markForRemoval())},_applyOverride:function(e,t){var i;e.effectParams&&e.effectParams.physicsParams&&(i=TGE.DeepClone(t.effectParams.physicsParams),t.effectParams.physicsParams?PropertyCombine.combineProperties(e.effectParams.physicsParams,i):i=e.effectParams.physicsParams);var a=TGE.DeepClone(t.effectParams);PropertyCombine.combineProperties(e.effectParams,a),PropertyCombine.combineProperties(e,t),t.effectParams=a,i&&(t.effectParams.physicsParams=i)},completeAndDestroy:function(){for(var e=0;e<this.createdEffects.length;e++)this.createdEffects[e].completeAndDestroy()}},extend(BuilderExportedParticles,TGE.DisplayObjectContainer);var Pointer=function(){Pointer.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.width=this.height=250,this.actionsRequiringRingImage=["tap","tapMany","rapidTap","tapMoveTap","bounce"],this.actionsWithNoRotation=["bounce"],this.actions=["tap","rapidTap","tapMany","tapMoveTap","tapHold","drag","move","bounce","dragMany"],this.defaultPointerImage="img_pointer",this.defaultRingImage="img_pointerRing"};Pointer.prototype={setup:function(e){return this.pointerRotation="number"==typeof e.rotation?e.rotation:null,e.rotation=0,Pointer.superclass.setup.call(this,e),this.target="object"==typeof e.target&&"number"==typeof e.target.x&&"number"==typeof e.target.rotation?e.target:null,this.target2="object"==typeof e.target2&&"number"==typeof e.target2.x&&"number"==typeof e.target2.rotation?e.target2:this.target,this.targets="object"==typeof e.targets?e.targets:[],this.pointerImage="string"==typeof e.pointerImage?e.pointerImage:this.defaultPointerImage,this.ringImage="string"==typeof e.ringImage?e.ringImage:this.defaultRingImage,this.action="string"==typeof e.action?e.action:null,this.duration="number"==typeof e.duration?e.duration:1,this.mirror="boolean"==typeof e.mirror?e.mirror:null,this.offsetX="number"==typeof e.offsetX?e.offsetX:0,this.offsetY="number"==typeof e.offsetY?e.offsetY:0,this.offsetX2="number"==typeof e.offsetX2?e.offsetX2:this.offsetX,this.offsetY2="number"==typeof e.offsetY2?e.offsetY2:this.offsetY,this.offsets=e.offsets||null,this.dragReset=!!e.dragReset,this.dragDelay=e.dragDelay||0,this.fps="number"==typeof e.fps?e.fps:24,this.speed="number"==typeof e.speed?e.speed:1,this.debug="true"===getQueryString().pointerdebug||!0===e.debug,this.pointerSize="string"==typeof e.pointerSize?e.pointerSize:"medium",this.showPointer=!1!==e.showPointer,this.snap=!!e.snap,TGE.RemoteSettings.HasSetting("pointerSize")||TGE.RemoteSettings.AddSetting("pointerSize",{type:"string",default:this.pointerSize,options:["small","medium","large"]}),TGE.RemoteSettings.HasSetting("showPointer")||TGE.RemoteSettings.AddSetting("showPointer",{type:"boolean",default:this.showPointer}),TGE.RemoteSettings.HasSetting("pointerAction")||TGE.RemoteSettings.AddSetting("pointerAction",{type:"string",default:this.action,options:this.actions}),this.target||-1!==this.action.indexOf("Many")?0===this.targets.length&&-1!==this.action.indexOf("Many")?TGE.Debug.Log(TGE.Debug.LOG_ERROR,"no targets parameter passed into Pointer module"):this.game.getAssetList(this.pointerImage)?TGE.RemoteSettings("showPointer")&&(this._createPointer(),this.addEventListener("addedToStage",this._checkParent.bind(this))):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"pointerImage for Pointer module isn't set or the image doesn't exist in any asset list. Pass in a pointerImage that exists.  You can grab a placeholder image from the Pointer module."):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"no target parameter passed into Pointer module"),this},_createPointer:function(){this.game.waitForAsset(this.pointerImage,this.__createPointer.bind(this),!1)},__createPointer:function(){this.ringImage&&(this.ringLayer=this.addChild((new TGE.DisplayObjectContainer).setup({}))),this.pointer=this.addChild((new TGE.Sprite).setup({image:this.pointerImage,alpha:0})),"bounce"!==this.action?(this.pointer.x+=this.pointer.width/2,this.pointer.y+=this.pointer.height/5):this.pointer.y-=this.pointer.height/1.3,this._adjustPointer(),this._createDebugFeatures(),this._executeAction(),this.addResizeEvent()},clearListeners:function(){this.obj.removeEventListener("resize",this.resizeListener)},addResizeEvent:function(){this.target||this.targets?(this.obj=0<this.targets.length?this.targets[0]:this.target,this.resizeListener=this.obj.addEventListener("resize",this._onResize.bind(this)),this.addEventListener("remove",this.clearListeners.bind(this))):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"specified target(s) is not valid")},_executeAction:function(){if(this.debug)this._showStillPointer();else switch(this.action){case"tap":this._executeTap();break;case"rapidTap":this._executeRapidTap();break;case"tapMany":this._executeTapMany();break;case"tapMoveTap":this._executeTapMoveTap();break;case"tapHold":this._executeTapHold();break;case"drag":this._executeDragStart();break;case"move":this._executeMove();break;case"bounce":this._executeBounce();break;case"dragMany":this._executeDragMany();break;case null:this._showStillPointer();break;default:TGE.Debug.Log(TGE.Debug.LOG_ERROR,"specified Pointer action "+this.action+" doesn't exist.  Try tap, rapidTap, tapMany, tapMoveTap, tapHold, drag, move, or bounce."),this._showStillPointer()}},_onResize:function(){this.pointer.removeEventListenersFor("finished"),this.clearTweens(),this.clearActions(),this.pointer.clearActions(),this.pointer.clearTweens(),this._adjustPointer(),this._executeAction()},_showStillPointer:function(){this.pointer.tweenTo({alpha:1,duration:.3}),this.pointer.rotation=-20},_executeTap:function(){this.pointer.tweenTo({alpha:1,duration:.3/this.speed}),this.performAction({delay:.7/this.speed,action:this._executeTap.bind(this)}),this.pointer.tweenTo({rotation:-25,duration:.3/this.speed,easing:TGE.Tween.Cubic.In,onComplete:function(){this.dispatchEvent({type:"tap",target:this.target}),this._executeRingTween()}.bind(this)}).thenTweenTo({rotation:0,duration:.3/this.speed,easing:TGE.Tween.Cubic.Out})},_executeRapidTap:function(){this.pointer.tweenTo({alpha:1,duration:.3/this.speed}),this.pointer.tweenTo({rotation:-25,duration:.3/this.speed,easing:TGE.Tween.Cubic.In,onComplete:function(){this.dispatchEvent({type:"tap",target:this.target}),this._executeRingTween()}.bind(this)}).thenTweenTo({rotation:-15,duration:.15/this.speed,easing:TGE.Tween.Cubic.Out}).thenTweenTo({rotation:-25,duration:.15/this.speed,easing:TGE.Tween.Cubic.In,onComplete:function(){this.dispatchEvent({type:"tap",target:this.target}),this._executeRingTween()}.bind(this)}).thenTweenTo({rotation:-15,duration:.15/this.speed,easing:TGE.Tween.Cubic.Out}).thenTweenTo({rotation:-25,duration:.15/this.speed,easing:TGE.Tween.Cubic.In,onComplete:function(){this.dispatchEvent({type:"tap",target:this.target}),this._executeRingTween()}.bind(this)}).thenTweenTo({rotation:0,duration:.3/this.speed,easing:TGE.Tween.Cubic.Out,onComplete:function(){this.performAction({delay:.5/this.speed,action:this._executeRapidTap.bind(this)})}.bind(this)})},_executeDragStart:function(){this.pointer.tweenTo({alpha:1,duration:.2/this.speed}),this.pointer.tweenTo({rotation:-20,duration:.3/this.speed,onComplete:function(){this.dispatchEvent({type:"down",target:this.target}),this._moveToNext(this._executeDragEnd.bind(this))}.bind(this)})},_executeDragEnd:function(){this.pointer.tweenTo({rotation:0,duration:.3/this.speed,onComplete:this.dispatchEvent.bind(this,{type:"up",target:this.target2})}),this.pointer.tweenTo({alpha:0,duration:.3/this.speed}),this.performAction({delay:.6/this.speed,action:function(){this._moveToNext(this._executeDragStart.bind(this),!0)}.bind(this)})},_executeDragMany:function(){this.pointer.tweenTo({alpha:1,duration:.5/this.speed}),this.pointer.tweenTo({delay:.3/this.speed,rotation:-20,duration:.3/this.speed,onComplete:function(){this.dispatchEvent({type:"down",target:this.targets[0]}),this._continueDragMany()}.bind(this)}),this._reorient()},_continueDragMany:function(e){0===(e=((e||0)+1)%this.targets.length)?(this.pointer.tweenTo({rotation:0,duration:.3/this.speed,onComplete:function(){this.dispatchEvent({type:"up",target:this.targets[this.targets.length-1]}),this._moveToNext(this._executeDragMany.bind(this),!0,0)}.bind(this)}),this.pointer.tweenTo({alpha:0,duration:.2/this.speed})):this.dragReset&&1<e?(this.pointer.tweenTo({rotation:0,duration:.3/this.speed,onComplete:function(){this.dispatchEvent({type:"up",target:this.targets[e-1]}),this._dragReset(e)}.bind(this)}),this.pointer.tweenTo({alpha:0,duration:.2/this.speed})):this.dragDelay&&1<e?this.performAction({action:this._moveToNext.bind(this,this._continueDragMany.bind(this,e),!1,e),delay:this.dragDelay/this.speed}):this._moveToNext(this._continueDragMany.bind(this,e),!1,e),this._reorient()},_dragReset:function(e){this._moveToNext(function(){},!0,0),this.pointer.tweenTo({delay:this.dragDelay/this.speed,alpha:1,duration:.5/this.speed}),this.pointer.tweenTo({delay:this.dragDelay/this.speed,rotation:-20,duration:.3/this.speed,onComplete:this._moveToNext.bind(this,this._continueDragMany.bind(this,e),!1,e)}),this._reorient()},_executeMove:function(){this.pointer.tweenTo({alpha:1,duration:.3/this.speed}),this.pointer.rotation=-20,this._moveToNext(this._executeMove.bind(this))},_executeBounce:function(){this.pointer.tweenTo({alpha:1,duration:.3/this.speed}),this.pointer.tweenTo({y:this.pointer.y+.5*this.pointer.height,duration:.3/this.speed,easing:TGE.Tween.Quintic.In,onComplete:this._executeRingTween.bind(this)}).thenTweenTo({y:this.pointer.y,duration:.7/this.speed,easing:TGE.Tween.Quintic.Out,onComplete:this._executeBounce.bind(this)})},_executeTapHold:function(){this.pointer.tweenTo({alpha:1,duration:.3/this.speed}).thenTweenTo({delay:this.duration,alpha:0,duration:.2/this.speed}),this.pointer.tweenTo({rotation:-25,duration:.3/this.speed,easing:TGE.Tween.Cubic.In,onComplete:function(){this.dispatchEvent.bind(this,{type:"down",target:this.target})}.bind(this)}).thenTweenTo({delay:this.duration/this.speed,rotation:0,duration:.3/this.speed,easing:TGE.Tween.Cubic.Out,onComplete:function(){this.dispatchEvent({type:"up",target:this.target}),this._executeTapHold()}.bind(this)})},_executeTapMany:function(e){var t=e;e=((e||0)+1)%this.targets.length,this.pointer.tweenTo({alpha:1,duration:.3/this.speed}),this.pointer.tweenTo({rotation:-25,duration:.3/this.speed,easing:TGE.Tween.Cubic.In,onComplete:function(){this._executeRingTween()}.bind(this)}).thenTweenTo({rotation:0,duration:.3/this.speed,easing:TGE.Tween.Cubic.Out,onComplete:function(){this.dispatchEvent({type:"tap",target:this.targets[t||0]}),this._moveToNext(this._executeTapMany.bind(this),this.snap,e)}.bind(this)})},_executeTapMoveTap:function(e){e=((e||0)+1)%2,this.pointer.tweenTo({alpha:1,duration:.3/this.speed}),this.pointer.tweenTo({rotation:-25,duration:.3/this.speed,easing:TGE.Tween.Cubic.In,onComplete:function(){this._executeRingTween()}.bind(this)}).thenTweenTo({rotation:0,duration:.3/this.speed,easing:TGE.Tween.Cubic.Out,onComplete:function(){this.dispatchEvent({type:"tap",target:1===e?this.target:this.target2}),this._moveToNext(this._executeTapMoveTap.bind(this),!1,e)}.bind(this)})},_executeRingTween:function(){var e=this.ringLayer.addChild((new TGE.Sprite).setup({alpha:0,scale:0,image:this.ringImage}));e.tweenTo({alpha:1,duration:.1/this.speed}).thenTweenTo({delay:.1/this.speed,duration:.5/this.speed,alpha:0,onComplete:function(){e.markForRemoval()}.bind(this)}),e.tweenTo({scale:1.5,duration:1/this.speed,easing:TGE.Tween.Cubic.Out})},_moveToNext:function(e,t,i){var a,n,o;o=0<this.targets.length?(n=this.offsets?(a=this.offsets[i].x,this.offsets[i].y):(a=this.offsetX,this.offsetY),this._getGlobalPosition(this.targets[i],a,n)):(o=this._getGlobalPosition(this.target,this.offsetX,this.offsetY),n=this._getGlobalPosition(this.target2,this.offsetX2,this.offsetY2),ModuleMath.Geometry.distance(this,o)<ModuleMath.Geometry.distance(this,n)?n:o),t?(this.x=o.x,this.y=o.y,e(i)):this.tweenTo({x:o.x,y:o.y,easing:TGE.Tween.Quadratic.InOut,duration:this.duration,onComplete:e.bind(this,i)})},_adjustPointer:function(){this._reposition(),this._rescale(),this._reorient()},_reposition:function(){var e;e=0<this.targets.length?this._getGlobalPosition(this.targets[0],this.offsetX,this.offsetY):this._getGlobalPosition(this.target,this.offsetX,this.offsetY),this.x=e.x,this.y=e.y},_getGlobalPosition:function(e,t,i){return ModuleMath.Geometry.localToGlobal(e,{x:t,y:i},!0)},_getScaleTo:function(){switch(TGE.RemoteSettings("pointerSize")){case"small":return.2;case"medium":return.3;case"large":return.4}},_rescale:function(){var e=this._getScaleTo(),t=this.stage.width/this.width*e,e=this.stage.height/this.height*e,e=Math.min(Math.abs(t),Math.abs(e));this.scale=e},_reorient:function(){var e=this.x>this.stage.width-this.width,t=this.x<-this.width,i=this.y>this.stage.height-this.stage.height/5,a=-1===this.actionsWithNoRotation.indexOf(this.action);null!==this.mirror?this.mirror&&(this.scaleX=-1*Math.abs(this.scaleX)):e&&i||e&&!i?this.scaleX=-1*Math.abs(this.scaleX):t&&this.scaleX<0&&(this.scaleX=Math.abs(this.scaleX)),null!==this.pointerRotation?this.pointer.rotation=this.pointerRotation:a&&(e&&i||!e&&i)&&(this.pointer.rotation=-20)},_checkParent:function(){this.parent instanceof TGE.Window||(this.visible=!1,TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Pointer must be parented to a TGE.Window"))},_createDebugFeatures:function(){var e;this.debug&&(this.pointer.rotation=50,this.addChild((new TGE.DisplayObjectContainer).setup({layout:{xPercentage:0,yPercentage:.5,matchWidth:1,matchHeight:1},backgroundColor:"limeGreen"})).sendToBack(),this.addChild((new TGE.DisplayObjectContainer).setup({width:20,height:20,backgroundColor:"red"})),e="change width/height until the green box \nis about the same dimensions as the pointer\n\n",e+="target: "+this.target+"\ntarget2: "+this.target2+"\naction: "+this.action,(new DebugWidget).setup({title:"Pointer Debugger",text:e}))}},extend(Pointer,TGE.DisplayObjectContainer),Pointer.MERGE_DATA={BuilderConfig:{SELECTOR_DEFS:{_ADD_:{pointer_alternateImages:{names:["Default","Photo","Shaded","Outlined","Drawn","Drawn 2","Cartoon","Bony","Pink","Glove"],values:["default.png","pointer_2.png","pointer_9.png","pointer_1.png","pointer_4.png","pointer_6.png","pointer_3.png","pointer_5.png","pointer_7.png","pointer_8.png"]}}}}},Popup=function(){Popup.superclass.constructor.call(this),this.game=TGE.Game.GetInstance(),PropertyCombine.setDefaultParams(this,{width:480,height:320,margins:.025,characterIconScale:.9,characterIconPosition:"left",enterAnimation:"fade",exitAnimation:"fade",updateRemoteSettingsInRealTime:!1,showPopupRemoteSetting:"popup_showPopup",useBackgroundImageRemoteSetting:"popup_useBackgroundImage",useCharacterIconRemoteSetting:"popup_useCharacterIcon",characterIconScaleRemoteSetting:"popup_characterIconScale",characterIconPositionRemoteSetting:"popup_characterIconPosition",enterAnimationRemoteSetting:"popup_enterAnimation",exitAnimationRemoteSetting:"popup_exitAnimation",previewExitAnimationRemoteSetting:"popup_previewExitAnimation",freezeAnimationsRemoteSetting:"popup_freezeAnimations"})},Popup.prototype={setup:function(e){return e.usePortraitImage&&(e.useCharacterIcon=e.usePortraitImage),e.portraitImage&&(e.characterIconImage=e.portraitImage),e.portraitPosition&&(e.characterIconPosition=e.portraitPosition),!e.useBackgroundImageRemoteSetting&&TGE.RemoteSettings.HasSetting("usePopupBackgroundImage")&&(e.useBackgroundImageRemoteSetting="usePopupBackgroundImage"),!e.useCharacterIconRemoteSetting&&TGE.RemoteSettings.HasSetting("useCharacterIcon")&&(e.useCharacterIconRemoteSetting="useCharacterIcon"),!e.characterIconPosition&&TGE.RemoteSettings.HasSetting("characterIconPosition")&&(e.characterIconPosition=TGE.RemoteSettings("characterIconPosition")),!e.characterIconScaleRemoteSetting&&TGE.RemoteSettings.HasSetting("popup_characterIconScale")?e.characterIconScaleRemoteSetting="popup_characterIconScale":!e.characterIconPosition&&TGE.RemoteSettings.HasSetting("popupPortraitPosition")&&(e.characterIconPosition=TGE.RemoteSettings("popupPortraitPosition")),!e.enterAnimation&&TGE.RemoteSettings.HasSetting("tutorialPopupEnter")&&(e.enterAnimation=TGE.RemoteSettings("tutorialPopupEnter")),!e.exitAnimation&&TGE.RemoteSettings.HasSetting("tutorialPopupExit")&&(e.exitAnimation=TGE.RemoteSettings("tutorialPopupExit")),PropertyCombine.setupInstance(this,e,Popup.superclass.setup),this.useBackgroundImage=void 0!==this.backgroundImage,this.useCharacterIcon=void 0!==this.characterIconImage,this.updateRemoteSettingsInRealTime&&(this.useCharacterIcon=TGE.RemoteSettings(this.useCharacterIconRemoteSetting)),TGE.InCreativeBuilder()&&this.updateRemoteSettingsInRealTime?(this.watchedRemoteSettings=[],this.watchedRemoteSettings.push(this.showPopupRemoteSetting),this.useBackgroundImage&&this.watchedRemoteSettings.push(this.useBackgroundImageRemoteSetting),this.characterIconImage&&this.watchedRemoteSettings.push(this.useCharacterIconRemoteSetting),void 0===e.characterIconScale&&this.watchedRemoteSettings.push(this.characterIconScaleRemoteSetting),void 0===e.characterIconPosition&&this.watchedRemoteSettings.push(this.characterIconPositionRemoteSetting),void 0===e.enterAnimation&&this.watchedRemoteSettings.push(this.enterAnimationRemoteSetting),void 0===e.exitAnimation&&this.watchedRemoteSettings.push(this.exitAnimationRemoteSetting),this._refreshRemoteSettings(),0<this.watchedRemoteSettings.length&&(this._checkForRemoteSettingChanges(),this.addEventListener("update",this._checkForRemoteSettingChanges.bind(this)))):this._refreshRemoteSettings(),void 0!==this.backgroundImage&&this.useBackgroundImage?this.game.waitForAsset(this.backgroundImage,this._initPopup.bind(this),!1):this._initPopup(),this},_initPopup:function(){this._buildLayout(),TGE.InCreativeBuilder()&&TGE.RemoteSettings.HasSetting(this.previewExitAnimationRemoteSetting)&&TGE.RemoteSettings(this.previewExitAnimationRemoteSetting)?(this._enter(),this.performAction({action:this.exit.bind(this),delay:1})):(this.enterAnimation&&this._enter(),TGE.InCreativeBuilder()&&TGE.RemoteSettings.HasSetting(this.freezeAnimationsRemoteSetting)&&TGE.RemoteSettings(this.freezeAnimationsRemoteSetting)||this.exitAfter&&this.performAction({action:this.exit.bind(this),delay:this.exitAfter}))},exit:function(e){switch(this.exiting=!0,this.clearTweens(),e=e||this.exitAnimation,e=!this.popupHolder?"none":e){case"fade":this.popupHolder.tweenTo({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut,onComplete:this.markForRemoval.bind(this)});break;case"rise":this.popupHolder.tweenTo({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenTo({layout:{yPercentage:-2},duration:.5,easing:TGE.Tween.Back.In,onComplete:this.markForRemoval.bind(this)});break;case"slide":this.popupHolder.tweenTo({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut,onComplete:this.markForRemoval.bind(this)}),this.popupHolder.tweenTo({layout:{xPercentage:1},duration:.4,easing:TGE.Tween.Back.In});break;default:this.markForRemoval()}},_enter:function(e){if(!this.exiting)switch(e=e||this.enterAnimation){case"fade":this.popupHolder.tweenFrom({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut});break;case"bounce":this.popupHolder.tweenFrom({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenFrom({layout:{yPercentage:-1.5},duration:.75,easing:TGE.Tween.Bounce.Out});break;case"drop":this.popupHolder.tweenFrom({alpha:0,duration:.6,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenFrom({layout:{yPercentage:-1.5},duration:.6,easing:TGE.Tween.Back.Out});break;case"slide":this.popupHolder.tweenFrom({alpha:0,duration:.5,easing:TGE.Tween.Quadratic.InOut}),this.popupHolder.tweenFrom({layout:{xPercentage:-1},duration:.4,easing:TGE.Tween.Back.Out})}},_refreshRemoteSettings:function(){this.showPopup=this.showPopupRemoteSetting?TGE.RemoteSettings(this.showPopupRemoteSetting):this.showPopup,this.useBackgroundImage=this.useBackgroundImageRemoteSetting?TGE.RemoteSettings(this.useBackgroundImageRemoteSetting):this.useBackgroundImage,this.useCharacterIcon=this.useCharacterIconRemoteSetting?TGE.RemoteSettings(this.useCharacterIconRemoteSetting):this.useCharacterIcon,this.characterIconScale=this.characterIconScaleRemoteSetting?TGE.RemoteSettings(this.characterIconScaleRemoteSetting):this.characterIconScale,this.characterIconPosition=this.characterIconPositionRemoteSetting?TGE.RemoteSettings(this.characterIconPositionRemoteSetting):this.characterIconPosition,this.enterAnimation=this.enterAnimationRemoteSetting?TGE.RemoteSettings(this.enterAnimationRemoteSetting):this.enterAnimation,this.exitAnimation=this.exitAnimationRemoteSetting?TGE.RemoteSettings(this.exitAnimationRemoteSetting):this.exitAnimation},_buildLayout:function(){if(GameConfig.ELX_DEFS||(GameConfig.ELX_DEFS={}),this.popupHolder)for(var e=0;e<this.popupHolder.numChildren();e++)this.popupHolder.getChildAt(e).markForRemoval();var t=this.width<=this.height;if(!0!==this.useBackgroundImage&&void 0!==this.useBackgroundImage||!this.backgroundImage||(o=GameConfig.ELX_DEFS[this.backgroundImage]||{},this.backgroundImageSprite=this.addChild((new CroppedSprite).setup({width:o?o.cropWidth:void 0,height:o?o.cropHeight:void 0,image:this.backgroundImage,layout:{xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:1}})),this.backgroundImageSprite.sendToBack(),this.width=this.backgroundImageSprite.width,this.height=this.backgroundImageSprite.height),this.popupHolder=this.addChild((new TGE.DisplayObjectContainer).setup({width:this.width,height:this.height,layout:{xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:1}})),this.backgroundImageSprite&&this.popupHolder.addChild(this.backgroundImageSprite),(!0===this.useCharacterIcon||void 0===this.useCharacterIcon)&&this.characterIconImage){if("positionOne"===this.characterIconPosition)var i=t?"top":"left";else if("positionTwo"===this.characterIconPosition)i=t?"bottom":"right";else{i=this.characterIconPosition;switch(this.characterIconPosition){case"left":t&&(i="top");break;case"right":t&&(i="bottom");break;case"top":t||(i="left");break;case"bottom":t||(i="right")}}switch(i){case"left":var a={leftAnchor:-.475+this.margins,yPercentage:0,matchWidth:.4-this.margins,matchHeight:1-2*this.margins};break;case"right":a={rightAnchor:.475+this.margins,yPercentage:0,matchWidth:.4-this.margins,matchHeight:1-2*this.margins};break;case"top":a={xPercentage:0,topAnchor:-.5+this.margins,matchWidth:1-2*this.margins,matchHeight:.4-this.margins};break;case"bottom":a={xPercentage:0,bottomAnchor:.5-this.margins,matchWidth:1-2*this.margins,matchHeight:.4+this.margins}}this.characterIconHolder=this.popupHolder.addChild((new TGE.DisplayObjectContainer).setup({layout:a})),this.game.waitForAsset(this.characterIconImage,function(){var e=GameConfig.ELX_DEFS[this.characterIconImage]||{};this.characterIconSprite=this.characterIconHolder.addChild((new CroppedSprite).setup({image:this.characterIconImage,cropWidth:e?e.cropWidth:void 0,cropHeight:e?e.cropHeight:void 0,layout:{xPercentage:0,yPercentage:0,scaleToWidth:this.characterIconScale,scaleToHeight:this.characterIconScale}}))}.bind(this),!1)}if(this.textDef){var n={xPercentage:0,yPercentage:0,matchWidth:1-2*this.margins,matchHeight:1-2*this.margins};if(this.characterIconImage)switch(i){case"left":n={rightAnchor:.5+this.margins,yPercentage:0,matchWidth:.6-this.margins,matchHeight:1-2*this.margins};break;case"right":n={leftAnchor:-.5+this.margins,yPercentage:0,matchWidth:.6-this.margins,matchHeight:1-2*this.margins};break;case"top":n={xPercentage:0,bottomAnchor:.5+this.margins,matchWidth:1-2*this.margins,matchHeight:.6+this.margins};break;case"bottom":n={xPercentage:0,topAnchor:-.5+this.margins,matchWidth:1-2*this.margins,matchHeight:.6-this.margins}}this.textHolder=this.popupHolder.addChild((new TGE.DisplayObjectContainer).setup({layout:n}));var o={textDef:this.textDef,wrapWidth:this.textHolder.width-30};this.textParams&&PropertyCombine.combineProperties(this.textParams,o),this.text=this.textHolder.addChild((new TGE.Text).setup(o))}void 0!==this.showPopup&&!1===this.showPopup?this.popupHolder.visible=!1:this.popupHolder.visible=!0},_checkForRemoteSettingChanges:function(){if(this.remoteSettingsLastFrame)for(var e in this.watchedRemoteSettings)if(this.remoteSettingsLastFrame[e]!==TGE.RemoteSettings(this.watchedRemoteSettings[e])){this._refreshRemoteSettings(),this._buildLayout();break}for(var e in this.remoteSettingsLastFrame=[],this.watchedRemoteSettings)this.remoteSettingsLastFrame.push(TGE.RemoteSettings(this.watchedRemoteSettings[e]))}},extend(Popup,TGE.DisplayObjectContainer),TutorialPopup=function(){TutorialPopup.superclass.constructor.call(this)},TutorialPopup.prototype={setup:function(e){return this.addRemoteSetting("showTutorialPopup",{type:"boolean",default:!0}),this.addRemoteSetting("tutorialPopupEnter",{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]}),this.addRemoteSetting("tutorialPopupExit",{type:"string",default:"fade",options:["fade","rise","slide","none"]}),this.addRemoteSetting("popup_previewExitAnimation",{type:"boolean",default:!1}),this.addRemoteSetting("usePopupBackgroundImage",{type:"boolean",default:!0}),this.addRemoteSetting("usePopupPortraitImage",{type:"boolean",default:!0}),this.addRemoteSetting("useCharacterIcon",{type:"boolean",default:!1}),this.addRemoteSetting("characterIconPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("characterIconMargin",{type:"number",default:.01,options:[{min:.01,max:.05,interval:.001}]}),this.addRemoteSetting("popupPortraitPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("popup_characterIconScale",{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]}),this.enterAnimation=e.enterAnimation||TGE.RemoteSettings("tutorialPopupEnter"),this.exitAnimation=e.exitAnimation||TGE.RemoteSettings("tutorialPopupExit"),TutorialPopup.superclass.setup.call(this,e),this.backgroundImage&&(TutorialPopup.defs.backgroundImageGroup.steps[1].image=this.backgroundImage),this.characterIconImage&&(TutorialPopup.defs.characterIconGroup.steps[1].steps[0].image=this.characterIconImage),this.visible=TGE.RemoteSettings("showTutorialPopup"),this},enter:function(){if(TGE.RemoteSettings("previewTutorialExit"))return this.alpha=1,void this.performAction({delay:.1,action:this.exit.bind(this)});TutorialPopup.superclass.enter.call(this,this.enterAnimation)},exit:function(){TutorialPopup.superclass.exit.call(this,this.exitAnimation)},addRemoteSetting:function(e,t){TGE.RemoteSettings.HasSetting(e)||TGE.RemoteSettings.AddSetting(e,t)}},extend(TutorialPopup,Popup),Popup.MERGE_DATA={GameConfig:{REMOTE_SETTINGS:{_ADD_:{popup_showPopup:{type:"boolean",default:!0},popup_useBackgroundImage:{type:"boolean",default:!0},popup_useCharacterIcon:{type:"boolean",default:!1},popup_characterIconScale:{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]},popup_characterIconPosition:{type:"string",default:"positionOne",options:["positionOne","positionTwo"]},popup_enterAnimation:{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]},popup_freezeAnimations:{type:"boolean",default:!1},popup_exitAnimation:{type:"string",default:"fade",options:["fade","rise","slide","none"]},popup_previewExitAnimation:{type:"boolean",default:!1}}},TEXT_DEFS:{_ADD_:{popup_txt:{fontFamily:"Roboto",fontWeight:"bold",fontSize:52,textColor:"#494B54",strokeColor:"#ffffff",strokeWidth:0}}}},BuilderConfig:{MACRO_DEFS:{_ADD_:{popup_macro:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_characterPortraitTab",macroParams:["%%1"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_macro_noCharIcon:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_backgroundImageTab:{name:"Background Image",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a background image for the popup",type:"remoteSetting",settingName:"popup_useBackgroundImage"},{prompt:"Upload a new background image for the popup",type:"imageGroup",selectorDef:"popup_backgroundImage",path:"assets/alternate-images/popupBackgrounds",image:"%%0",colorize:!0,visibilityRemoteSetting:"popup_useBackgroundImage"}]},popup_characterPortraitTab:{name:"Character Icon",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a character icon for the popup",type:"remoteSetting",settingName:"popup_useCharacterIcon",restart:!0},{type:"group",groupType:"open",visibilityRemoteSetting:"popup_useCharacterIcon",steps:[{prompt:"Upload a new character icon",type:"imageGroup",selectorDef:"popup_characterIconImage",path:"assets/alternate-images/popupCharacterIcons",image:"%%0",autoCrop:!0,colorize:!0},{prompt:"Select the position of the character icon",type:"remoteSetting",settingName:"popup_characterIconPosition",selectorDef:"popup_characterIconPosition",dispatchResize:!0},{prompt:"Adjust the size of the character icon",type:"remoteSetting",settingName:"popup_characterIconScale",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}}]}]},popup_fontTab:{name:"Font",type:"group",groupType:"open",steps:[{prompt:"Change the font of the popups",type:"text",textDef:"popup_txt"}]},popup_animationsTab:{name:"Animations",type:"group",groupType:"tabs",stepId:"tween_group",steps:[{name:"Appearing Animation",prompt:"Choose the popup entrance style",type:"remoteSetting",settingName:"popup_enterAnimation",restart:!0},{name:"Disappearing Animation",prompt:"Choose a disappearing animation",type:"remoteSetting",settingName:"popup_exitAnimation",restart:!0,state:"popup_previewExitAnimation"}]}}},SELECTOR_DEFS:{_ADD_:{popup_backgroundImage:{names:["Default","Bubble","Cork","Gradient","Striped","Wood","Plastic"],values:["default.png","bubble.png","cork.png","gradient.png","greenBubble.png","wood.png","yellow.png"]},popup_characterIconImage:{names:["Default","Silhouette With Bow","Female","Male","Pirate"],values:["default.png","default_Bow.png","opponent_female.png","opponent_male.png","portrait_demo.png"]},popup_characterIconPosition:{names:["Left","Right"],values:["positionOne","positionTwo"]}}},STATE_DEFS:{_ADD_:{tutorialPopupExit:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]},popup_freezeAnimations:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_freezeAnimations",value:!0}]},popup_previewExitAnimation:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]}}}}},TutorialPopup=function(){TutorialPopup.superclass.constructor.call(this)},TutorialPopup.prototype={setup:function(e){return this.addRemoteSetting("showTutorialPopup",{type:"boolean",default:!0}),this.addRemoteSetting("tutorialPopupEnter",{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]}),this.addRemoteSetting("tutorialPopupExit",{type:"string",default:"fade",options:["fade","rise","slide","none"]}),this.addRemoteSetting("popup_previewExitAnimation",{type:"boolean",default:!1}),this.addRemoteSetting("usePopupBackgroundImage",{type:"boolean",default:!0}),this.addRemoteSetting("usePopupPortraitImage",{type:"boolean",default:!0}),this.addRemoteSetting("useCharacterIcon",{type:"boolean",default:!1}),this.addRemoteSetting("characterIconPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("characterIconMargin",{type:"number",default:.01,options:[{min:.01,max:.05,interval:.001}]}),this.addRemoteSetting("popupPortraitPosition",{type:"string",default:"left",options:["left","right","top","bottom"]}),this.addRemoteSetting("popup_characterIconScale",{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]}),this.enterAnimation=e.enterAnimation||TGE.RemoteSettings("tutorialPopupEnter"),this.exitAnimation=e.exitAnimation||TGE.RemoteSettings("tutorialPopupExit"),TutorialPopup.superclass.setup.call(this,e),this.backgroundImage&&(TutorialPopup.defs.backgroundImageGroup.steps[1].image=this.backgroundImage),this.characterIconImage&&(TutorialPopup.defs.characterIconGroup.steps[1].steps[0].image=this.characterIconImage),this.visible=TGE.RemoteSettings("showTutorialPopup"),this},enter:function(){if(TGE.RemoteSettings("previewTutorialExit"))return this.alpha=1,void this.performAction({delay:.1,action:this.exit.bind(this)});TutorialPopup.superclass.enter.call(this,this.enterAnimation)},exit:function(){TutorialPopup.superclass.exit.call(this,this.exitAnimation)},addRemoteSetting:function(e,t){TGE.RemoteSettings.HasSetting(e)||TGE.RemoteSettings.AddSetting(e,t)}},extend(TutorialPopup,Popup),Popup.MERGE_DATA={GameConfig:{REMOTE_SETTINGS:{_ADD_:{popup_showPopup:{type:"boolean",default:!0},popup_useBackgroundImage:{type:"boolean",default:!0},popup_useCharacterIcon:{type:"boolean",default:!1},popup_characterIconScale:{type:"number",default:.9,options:[{min:.5,max:1,interval:.001}]},popup_characterIconPosition:{type:"string",default:"positionOne",options:["positionOne","positionTwo"]},popup_enterAnimation:{type:"string",default:"fade",options:["fade","bounce","drop","slide","none"]},popup_freezeAnimations:{type:"boolean",default:!1},popup_exitAnimation:{type:"string",default:"fade",options:["fade","rise","slide","none"]},popup_previewExitAnimation:{type:"boolean",default:!1}}},TEXT_DEFS:{_ADD_:{popup_txt:{fontFamily:"Roboto",fontWeight:"bold",fontSize:52,textColor:"#494B54",strokeColor:"#ffffff",strokeWidth:0}}}},BuilderConfig:{MACRO_DEFS:{_ADD_:{popup_macro:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_characterPortraitTab",macroParams:["%%1"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_macro_noCharIcon:{type:"group",groupType:"open",steps:[{label:"Enable popups",type:"remoteSetting",settingName:"popup_showPopup"},{type:"group",groupType:"buttons",visibilityRemoteSetting:"popup_showPopup",steps:[{type:"macro",macroDef:"popup_backgroundImageTab",macroParams:["%%0"]},{type:"macro",macroDef:"popup_fontTab"},{type:"macro",macroDef:"popup_animationsTab"}]}]},popup_backgroundImageTab:{name:"Background Image",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a background image for the popup",type:"remoteSetting",settingName:"popup_useBackgroundImage"},{prompt:"Upload a new background image for the popup",type:"imageGroup",selectorDef:"popup_backgroundImage",path:"assets/alternate-images/popupBackgrounds",image:"%%0",colorize:!0,visibilityRemoteSetting:"popup_useBackgroundImage"}]},popup_characterPortraitTab:{name:"Character Icon",type:"group",groupType:"open",state:"popup_freezeAnimations",steps:[{label:"Use a character icon for the popup",type:"remoteSetting",settingName:"popup_useCharacterIcon",restart:!0},{type:"group",groupType:"open",visibilityRemoteSetting:"popup_useCharacterIcon",steps:[{prompt:"Upload a new character icon",type:"imageGroup",selectorDef:"popup_characterIconImage",path:"assets/alternate-images/popupCharacterIcons",image:"%%0",autoCrop:!0,colorize:!0},{prompt:"Select the position of the character icon",type:"remoteSetting",settingName:"popup_characterIconPosition",selectorDef:"popup_characterIconPosition"},{prompt:"Adjust the size of the character icon",type:"remoteSetting",settingName:"popup_characterIconScale",sliderOptions:{formatter:function(){return""},reversed:!1}}]}]},popup_fontTab:{name:"Font",type:"group",groupType:"open",steps:[{prompt:"Change the font of the popups",type:"text",textDef:"popup_txt"}]},popup_animationsTab:{name:"Animations",type:"group",groupType:"tabs",stepId:"tween_group",steps:[{name:"Appearing Animation",prompt:"Choose the popup entrance style",type:"remoteSetting",settingName:"popup_enterAnimation",restart:!0},{name:"Disappearing Animation",prompt:"Choose a disappearing animation",type:"remoteSetting",settingName:"popup_exitAnimation",restart:!0,state:"popup_previewExitAnimation"}]}}},SELECTOR_DEFS:{_ADD_:{popup_backgroundImage:{names:["Default","Bubble","Cork","Gradient","Striped","Wood","Plastic"],values:["default.png","bubble.png","cork.png","gradient.png","greenBubble.png","wood.png","yellow.png"]},popup_characterIconImage:{names:["Default","Silhouette With Bow","Female","Male","Pirate"],values:["default.png","default_Bow.png","opponent_female.png","opponent_male.png","portrait_demo.png"]},popup_characterIconPosition:{names:["Left","Right"],values:["positionOne","positionTwo"]}}},STATE_DEFS:{_ADD_:{tutorialPopupExit:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]},popup_freezeAnimations:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_freezeAnimations",value:!0}]},popup_previewExitAnimation:{remoteSetting:[{settingName:"state",value:"tutorial"},{settingName:"popup_previewExitAnimation",value:!0}]}}}}},DebugWidget=function(){},DebugWidget.prototype={setup:function(e){return this.backgroundColor="string"==typeof e.backgroundColor?e.backgroundColor:"limeGreen",this.title="string"==typeof e.title?e.title:"Debug Widget",this.text="string"==typeof e.text?e.text:"",this._create(),this},_create:function(){this.widget=document.createElement("div"),this.widget.id="debug_widget",this.widget.style.position="absolute",this.widget.style.display="block",this.widget.style.top=0,this.widget.style.padding="6px",this.widget.style.zIndex=200,document.body.insertBefore(this.widget,document.body.firstChild),this._update(),this._updateInterval=setInterval(this._update.bind(this),100)},_update:function(){var e=this.text.replace(/\n/g,"<br>"),t="<div style='font-weight: bold; font-size: 14px; padding-bottom: 3px;'>"+this.title+"</div><br>";this.widget.innerHTML=t+e,this.widget.style.backgroundColor=this.backgroundColor},markForRemoval:function(){clearInterval(this._updateInterval),this.widget.innerHTML="",this.widget.style.backgroundColor=null}};var ModuleMath={Geometry:{RADIANS:Math.PI/180,DEGREES:180/Math.PI,TAU:2*Math.PI,localToGlobal:function(e,t,i){var a=new TGE.Point;t&&a.setTo(t.x,t.y),i||(a.x-=e.registrationX*e.width,a.y-=e.registrationY*e.height);for(var n,o,s=e;s;)s.rotation&&(o=s.rotation*TGE.DEG2RAD,n=Math.cos(o),o=Math.sin(o),a={x:a.x*n-a.y*o,y:a.x*o+a.y*n}),a.x*=s.scaleX,a.y*=s.scaleY,a.x+=s.x,a.y+=s.y,s=s.parent;return a},globalToLocal:function(e,t,i){var a=new TGE.Point;t&&a.setTo(t.x,t.y);for(var n=e,o=[];n;)o.unshift(n),n=n.parent;for(var s,r,h=0;n=o[h];h++)a.x-=n.x,a.y-=n.y,n.scaleX&&(a.x/=n.scaleX),n.scaleY&&(a.y/=n.scaleY),n.rotation&&(r=n.rotation*TGE.DEG2RAD,s=Math.cos(r),r=Math.sin(r),a={x:a.x*s+a.y*r,y:-a.x*r+a.y*s});return i||(a.x+=e.registrationX*e.width,a.y+=e.registrationY*e.height),a},localToLocal:function(e,t,i,a){i=ModuleMath.Geometry.localToGlobal(t,i,a);return ModuleMath.Geometry.globalToLocal(e,i,a)},getClosestDisplayObject:function(e,t,i){var a=Number.MAX_VALUE,n=Number.MAX_VALUE,o=null;null!=i&&(n=i*i);for(var s,r=0;s=t[r];r++){var h=ModuleMath.Geometry.distanceSquared(s,e);h<a&&h<=n&&(a=h,o=s)}return o},distance:function(e,t){return Math.sqrt(ModuleMath.Geometry.distanceSquared(e,t))},distanceSquared:function(e,t){var i=t.x-e.x,e=t.y-e.y;return i*i+e*e},getAngle:function(e,t){return Math.atan2(t.y-e.y,t.x-e.x)},getAngleDiff:function(e,t){return Math.atan2(Math.sin(t-e),Math.cos(t-e))},rotateAroundOrigin:function(e,t,i){var a=new TGE.Point;return a.x=e.x*t-e.y*i,a.y=e.x*i+e.y*t,a},getIntersection:function(e,t,i,a){var n=e.x,o=e.y,s=t.x,r=t.y,h=i.x,l=i.y,c=a.x,p=a.y,u=r-o,e=n-s,t=s*o-n*r,i=u*h+e*l+t,a=u*c+e*p+t;return(0==i||0==a||!ModuleMath.Geometry.sameSign(i,a))&&(p=(a=p-l)*s+(s=h-c)*r+(h=c*l-h*p),(0==(o=a*n+s*o+h)||0==p||!ModuleMath.Geometry.sameSign(o,p))&&(0!=(o=u*s-a*e)&&(p=o<0?-o/2:o/2,s=(e=e*h-s*t)<0?(e-p)/o:(e+p)/o,o=(e=a*t-u*h)<0?(e-p)/o:(e+p)/o,new TGE.Point(s,o))))},sameSign:function(e,t){return 0<=e*t},smoothDamp:function(e,t,i,a,n,o){var s=2/(n=Math.max(1e-4,n)),r=s*o,h=1/(1+r+.48*r*r+.235*r*r*r),l=e-t,r=t,n=a*n,n=(i+s*(l=TGE.Math.Clamp(l,-n,n)))*o;i=(i-s*n)*h;let c=(t=e-l)+(l+n)*h;return 0<r-e==c>r&&(c=r,i=(c-r)/o),c},smoothVectorDamp:function(e,t,i,a,n,o){t={x:t.x,y:t.y};var s=2/(n=Math.max(.01,n)),r=s*o,h=1/(1+r+.48*r*r+.235*r*r*r);let l=e.x-t.x,c=e.y-t.y;r=new TGE.Vector2(t.x,t.y),a*=n,n=l*l+c*c;a*a<n&&(p=Math.sqrt(n),l=l/p*a,c=c/p*a),t.x=e.x-l,t.y=e.y-c;var p=(i.x+s*l)*o,a=(i.y+s*c)*o;i.x=(i.x-s*p)*h,i.y=(i.y-s*a)*h;let u=t.x+(l+p)*h,d=t.y+(c+a)*h;h=r.x-e.x,e=r.y-e.y;return 0<h*(u-r.x)+e*(d-r.y)&&(u=r.x,d=r.y,i.x=(u-r.x)/o,i.y=(d-r.y)/o),new TGE.Vector2(u,d)}},Color:{componentToHex:function(e){e=e.toString(16);return 1==e.length?"0"+e:e},rgbToHex:function(e,t,i){return"#"+ModuleMath.Color.componentToHex(e)+ModuleMath.Color.componentToHex(t)+ModuleMath.Color.componentToHex(i)},hexToRgb:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,i,a){return t+t+i+i+a+a});e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},Random:{range:function(e,t){var i;return t<e&&(i=e,e=t,t=i),e+(t-e)*Math.random()},int:function(e){return Math.floor(e*Math.random())},rangeInt:function(e,t){return Math.round(ModuleMath.Random.range(e,t))},chance:function(e){return Math.random()<e}}},VideoPlayer=function(){VideoPlayer.superclass.constructor.apply(this,arguments),Object.defineProperty(this,"volume",{get:function(){return this._mVolume},set:function(e){this._mVolume=e,this.video&&(this.video.volume=e)}})};VideoPlayer.IOS15_BLUR_FIXED=!0,VideoPlayer.Get=function(e){return TGE.VideoPlayer.Get(e)},VideoPlayer.Preload=function(t){window.VideoPlayerGlobals=window.VideoPlayerGlobals||{};var i,e,a=TGE.Game.GetInstance();a.isAssetLoaded(t)?(TGE.VideoPlayer.Log("video: ["+t+"] preloading"),(i=a.assetManager.getAsset(t))&&(i.muted=!0,(e=i.play())?e.then(function(){var e=TGE.VideoPlayer.Wrappers[t];e&&e._videoPlayer&&!e._videoPlayer.paused||i.pause()}).catch(function(e){TGE.VideoPlayer.Log("video: ["+t+"] Preload interrupted: "+e)}):i.pause())):(TGE.VideoPlayer.Log("video: ["+t+"] Preload, waiting for asset load"),a.waitForAsset(t,VideoPlayer.Preload.bind(VideoPlayer)))},VideoPlayer.Suspend=function(e){return TGE.VideoPlayer.Suspend(e)},VideoPlayer.RectLayoutFunction=function(e,t){t=e.getScreenRect(t,!0);this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height},VideoPlayer.LayoutFunction=function(e,t,i){i=i||{min:.25,max:1};var a,n=e.getScreenRect(t,!0),o=e.video;o&&o.videoWidth&&(a=o.videoWidth*e.videoScale,e=o.videoHeight*e.videoScale,t=TGE.Math.Lerp(i.min,i.max,TGE.RemoteSettings(t+"Size")),a=a/this.width*t,t=e/this.height*t,this.scale=Math.min(a,t)),this.x=n.x,this.y=n.y},VideoPlayer.prototype={setup:function(e){return this.settingsPrefix="VideoPlayer",VideoPlayer.superclass.setup.call(this,e),"none"!==this.muteStyle&&"muted"!==this.muteStyle&&(this.muteButton=this.addChild((new VideoPlayer.MuteButton).setup({style:this.muteStyle,color:this.muteColor,thickness:this.muteThickness,settingsPrefix:TGE.RemoteSettings.HasSetting(this.assetId+"_muteStyle")&&TGE.RemoteSettings.HasSetting(this.assetId+"_muteColor")&&TGE.RemoteSettings.HasSetting(this.assetId+"_muteThickness")?this.assetId:this.settingsPrefix})),this.muteButton.addEventListener("mouseup",this._onMuteButton.bind(this))),this.video&&this.getRemoteSetting("previewVideoCropping")&&!this.getRemoteSetting("noCropping")&&(this.overlay=this.videoContainer.addChild((new CB.Overlay).setup({layout:function(e){var t=this.parent.parent,i=t.getScreenRect();this.x=i.x,this.y=i.y,this.width=i.width,this.height=i.height,this.textHolder.rotation=-t.videoContainer.rotation},mouseEnabled:!1,backdropFillStyle:"noFill",textPosition:"middle",textParams:{text:"SAFE ZONE",fontSize:19}}))),this},_drawVideo:function(e){VideoPlayer.superclass._drawVideo.call(this,e),this.muteButton&&(e=!this.muteButton.x&&!this.muteButton.y,this.muteButton.muted=this.video.muted,this.muteButton.x=-this.width*this.registrationX+this.muteButton.width*this.getRemoteSetting("muteX"),this.muteButton.y=-this.height*this.registrationY+this.muteButton.height*this.getRemoteSetting("muteY"),e&&this.muteButton.cache())},addSkipButton:function(e){return e&&(this.skipButton=e,this.addChild(e),this.skipButton.addEventListener("mouseup",this._onSkip.bind(this))),e},_onSkip:function(e){this._skipable&&(this.stop(),this._skipable=!1,this._onComplete(!0))},_onMuteButton:function(e){this.mute(!this.video.muted)},cacheFrame:function(){this._createFrameCache(!0),this._updateFrameCache()},destroyFrameCache:function(){this._destroyFrameCache(),this._persistentFrameCache=!1}},extend(VideoPlayer,TGE.VideoPlayer),VideoPlayer.MuteButton=function(){VideoPlayer.MuteButton.superclass.constructor.apply(this,arguments)},VideoPlayer.MuteButton.prototype={setup:function(e){return VideoPlayer.MuteButton.superclass.setup.call(this,e),this.style=e.style||"#circle",this.color=e.color||"#000000",this.thickness=e.thickness||.5,this._muted=e.muted||!1,this.settingsPrefix=e.settingsPrefix||"VideoPlayer",this.instanceName=this.settingsPrefix+"_muteButton",this.addEventListener("resize",this._onResize.bind(this)),this},_onResize:function(e){var t=Math.min(.12*this.parent.width,.12*this.parent.height);t&&(this.width=this.height=t,VideoPlayer.MuteButton.superclass.cache.call(this),this.cache())},cache:function(){var e=this.offscreenRenderer&&this.offscreenRenderer.getCanvasContext();e&&this.draw(e)},draw:function(e){var t,i,a;e.clearRect(0,0,this.width,this.height),(this.x||this.y)&&(t=TGE.RemoteSettings.HasSetting(this.settingsPrefix+"_muteStyle")?TGE.RemoteSettings(this.settingsPrefix+"_muteStyle"):this.style,i=TGE.RemoteSettings.HasSetting(this.settingsPrefix+"_muteColor")?TGE.RemoteSettings(this.settingsPrefix+"_muteColor"):this.color,a=TGE.RemoteSettings.HasSetting(this.settingsPrefix+"_muteThickness")?TGE.RemoteSettings(this.settingsPrefix+"_muteThickness"):this.thickness,function(e,t,i,a,n,o,s){e.save(),e.fillStyle=o,e.strokeStyle=o,e.lineCap="round",e.lineJoin="round";o=.1*t*n;e.lineWidth=o;n*=-.05*t;"circle"!==s&&"circleFilled"!==s||(e.beginPath(),e.arc(t/2,i/2,t/2,0,2*Math.PI),e.fill(),e.globalCompositeOperation="destination-out");(function(e,t,i,a,n,o){var s=.6*a,a=-.275*a;e.beginPath(),e.moveTo(t+a-.4*s+n/2,i-.5*s+n/2),e.lineTo(t+a+.5*s-n/2,i-.5*s+n/2),e.lineTo(t+a+1.25*s-n/2,i-1.2*s+n/2),e.lineTo(t+a+1.25*s-n/2,i+1.2*s-n/2),e.lineTo(t+a+.5*s-n/2,i+.5*s-n/2),e.lineTo(t+a-.4*s+n/2,i+.5*s-n/2),e.closePath(),"filled"!==o&&"circleFilled"!==o||e.fill();e.stroke()})(e,.375*t+n,i/2,.4*t,o,s),a?function(e,t,i,a){e.beginPath(),e.moveTo(t-.5*a,i-.5*a),e.lineTo(t+.5*a,i+.5*a),e.moveTo(t-.5*a,i+.5*a),e.lineTo(t+.5*a,i-.5*a),e.stroke()}(e,.76*t+n,i/2,.225*t):function(e,t,i,a,n){e.beginPath(),e.moveTo(t-.35*a-.25*n,i-.5*a+n/2),e.bezierCurveTo(t-.15*a-.5*n,i-.25*a+n/3,t-.15*a-.5*n,i+.25*a-n/3,t-.35*a-.25*n,i+.5*a-n/2),e.moveTo(t-.2*a+.25*n,i-.75*a+n/2),e.bezierCurveTo(t+.15*a,i-.4*a+n/3,t+.15*a,i+.4*a-n/3,t-.2*a+.25*n,i+.75*a-n/2),e.moveTo(t-.05*a+.75*n,i-+a+n/2),e.bezierCurveTo(t+.45*a+.5*n,i-.5*a+n/3,t+.45*a+.5*n,i+.5*a-n/3,t-.05*a+.75*n,i+ +a-n/2),e.stroke()}(e,.75*t+n,i/2,.25*t,o);e.restore()}(e,this.width,this.height,this._muted,a,i,t))}},extend(VideoPlayer.MuteButton,TGE.DisplayObjectContainer),Object.defineProperty(VideoPlayer.MuteButton.prototype,"muted",{get:function(){return this._muted},set:function(e){e!==this._muted&&(this._muted=e,this.cache())}}),window._TREMERGES=window._TREMERGES||{},window._TREMERGES.VideoPlayer={GameConfig:{REMOTE_SETTINGS:{VideoPlayer_debug:{type:"boolean",default:!1},VideoPlayer_watchdogTimer:{type:"number",default:500},VideoPlayer_videoUpload:{type:"boolean",default:!1},VideoPlayer_previewVideoCropping:{type:"boolean",default:!1},VideoPlayer_noCropping:{type:"boolean",default:!0},VideoPlayer_useSafeZone:{type:"boolean",default:!0},VideoPlayer_zoomedPreview:{type:"boolean",default:!1},VideoPlayer_location:{type:"number",default:.5,options:[{min:0,max:1,interval:.001}]},VideoPlayer_safeZoneX:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},VideoPlayer_safeZoneY:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},VideoPlayer_safeZoneWidth:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},VideoPlayer_safeZoneHeight:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},VideoPlayer_orientationLock:{type:"boolean",default:!1},VideoPlayer_blurAmount:{type:"number",default:100,options:[{min:60,max:140,interval:1}]},VideoPlayer_letterboxStyle:{type:"string",default:"blurred",options:["solid","blurred"]},VideoPlayer_audioDuringLoop:{type:"boolean",default:!0},VideoPlayer_volume:{type:"number",default:1,options:[{min:0,max:1,interval:.01}]},VideoPlayer_muteStyle:{type:"string",default:"none",options:["none","filled","circle","circleFilled"]},VideoPlayer_muteColor:{type:"string",default:"#ffffff"},VideoPlayer_muteThickness:{type:"number",default:.5,options:[{min:.1,max:1,interval:.1}]},VideoPlayer_mutePositioning:{type:"boolean",default:!1},VideoPlayer_muteX:{type:"number",default:.75,options:[{min:.5,max:2.25,interval:.01}]},VideoPlayer_muteY:{type:"number",default:.75,options:[{min:.5,max:2.25,interval:.01}]},VideoPlayer_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},_ADD_:{state:{options:["video"]}}},COLOR_DEFS:{_ADD_:{VideoPlayer_background:"#000000"}}},BuilderConfig:{SETTING_CACHE_DEFS:{VideoPlayer_muteStyle:["VideoPlayer_muteButton"],VideoPlayer_muteColor:["VideoPlayer_muteButton"],VideoPlayer_muteThickness:["VideoPlayer_muteButton"]},STATE_DEFS:{VideoPlayer_previewVideoCropping:{remoteSetting:[{settingName:"state",value:"video"},{settingName:"VideoPlayer_previewVideoCropping",value:!0}]},VideoPlayer_videoUpload:{remoteSetting:[{settingName:"state",value:"video"},{settingName:"VideoPlayer_videoUpload",value:!0}]}},SELECTOR_DEFS:{VideoPlayer_letterboxStyle:{names:["Solid Color","Blurred"],values:["solid","blurred"]}},MACRO_DEFS:{VideoPlayer_page:{name:"Video",state:"VideoPlayer_videoUpload",type:"group",groupType:"tabs",steps:[{type:"macro",macroDef:"VideoPlayer_upload",macroParams:["%%0"]},{type:"macro",macroDef:"VideoPlayer_cropping"},{type:"macro",macroDef:"VideoPlayer_mute"}]},VideoPlayer_pageNL:{name:"Video",state:"VideoPlayer_videoUpload",type:"group",groupType:"tabs",steps:[{type:"macro",macroDef:"VideoPlayer_upload",macroParams:["%%0"]},{type:"macro",macroDef:"VideoPlayer_croppingId",macroParams:["VideoPlayer"]},{type:"macro",macroDef:"VideoPlayer_mute"}]},VideoPlayer_upload:{name:"Upload",state:"VideoPlayer_videoUpload",type:"group",groupType:"open",steps:[{type:"videoUpload",prompt:"Upload a video",video:"%%0"}]},VideoPlayer_cropping:{name:"Cropping",state:"VideoPlayer_previewVideoCropping",type:"group",groupType:"open",steps:[{type:"remoteSetting",info:"With this setting, a landscape video will display rotated on a portrait screen, and vice-versa.<br>The expectation, is that the user will rotate their device to a matching orientation.",label:"Lock to original video orientation",settingName:"VideoPlayer_orientationLock",restart:!0,visibilityFunction:function(){return!TGE.RemoteSettings.HasSetting("orientationLock")||"responsive"===TGE.RemoteSettings("orientationLock")}},{type:"macro",macroDef:"VideoPlayer_croppingId",macroParams:["VideoPlayer"]}]},VideoPlayer_croppingId:{name:"Cropping",prompt:"Fitting video into different screen sizes",state:"%%0_previewVideoCropping",type:"group",groupType:"open",steps:[{type:"remoteSetting",label:"Do not crop video (use letterbox only)",settingName:"%%0_noCropping",restart:!0},{info:"On some screen sizes, letterboxing may still occur to keep video content in view",type:"noop",visibilityFunction:function(e){return!TGE.RemoteSettings(e+"_noCropping")}},{type:"group",groupType:"open",visibilityFunction:function(e){return!TGE.RemoteSettings(e+"_noCropping")},steps:[{prompt:"Adjust the area of the video that should always remain in view",type:"group",groupType:"open",steps:[{info:"Width",type:"remoteSetting",settingName:"%%0_safeZoneWidth",dispatchResize:!0,sliderOptions:{formatter:function(e){return""}}},{info:"Height",type:"remoteSetting",settingName:"%%0_safeZoneHeight",dispatchResize:!0,sliderOptions:{formatter:function(e){return""}}},{info:"Horizontal Position",type:"remoteSetting",settingName:"%%0_safeZoneX",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}},{info:"Vertical Position",type:"remoteSetting",settingName:"%%0_safeZoneY",dispatchResize:!0,sliderOptions:{reversed:!0,formatter:function(){return""}}}]},{type:"remoteSetting",label:"Preview final cropped appearance",settingName:"%%0_zoomedPreview",dispatchResize:!0},{prompt:"Preview video location",type:"remoteSetting",settingName:"%%0_location",dispatchResize:!0,sliderOptions:{formatter:function(e){return""}}}]},{prompt:"Choose how the letterbox area looks",type:"remoteSetting",settingName:"%%0_letterboxStyle",selectorDef:"VideoPlayer_letterboxStyle",restart:!0},{prompt:"Choose a letterbox color",type:"color",colorDef:"%%0_background",visibilityFunction:function(e){return"solid"===TGE.RemoteSettings(e+"_letterboxStyle")}},{prompt:"Set amount of letterbox blurring",type:"remoteSetting",settingName:"%%0_blurAmount",dispatchResize:!0,visibilityFunction:function(e){return"blurred"===TGE.RemoteSettings(e+"_letterboxStyle")},sliderOptions:{formatter:function(e){return""}}}]},VideoPlayer_mute:{name:"Mute button",state:"video",type:"group",groupType:"open",steps:[{type:"macro",macroDef:"VideoPlayer_muteId",macroParams:["VideoPlayer"]}]},VideoPlayer_muteId:{name:"Mute Button",type:"group",groupType:"open",steps:[{type:"noop",info:"Regulations on some platforms require videos to begin muted. Users will need to tap to unmute, if they wish to hear sound. (If the mute button style is 'None', then any tap will unmute)."},{type:"remoteSetting",prompt:"Mute button style",settingName:"%%0_muteStyle",restart:!0},{type:"group",groupType:"open",visibilityFunction:function(e){return"none"!==TGE.RemoteSettings(e+"_muteStyle")},steps:[{type:"remoteSetting",prompt:"Mute button color",settingName:"%%0_muteColor"},{type:"remoteSetting",prompt:"Mute button line thickness",settingName:"%%0_muteThickness"},{prompt:"Adjust the position",type:"group",groupType:"open",visibilityRemoteSetting:"%%0_mutePositioning",steps:[{info:"Horizontal",type:"remoteSetting",settingName:"%%0_muteX",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}},{info:"Vertical",type:"remoteSetting",settingName:"%%0_muteY",dispatchResize:!0,sliderOptions:{formatter:function(){return""}}}]}]}]}}}};var LayoutHelpers={setLayout:function(e){LayoutHelpers.scaling.setScaleTo.call(this,e),LayoutHelpers.scaling.setMatch.call(this,e),LayoutHelpers.scaling.setBaseScale.call(this),LayoutHelpers.positioning.setPercentage.call(this,e),LayoutHelpers.positioning.setAnchor.call(this,e),LayoutHelpers.positioning.setPosition.call(this,e),LayoutHelpers.positioning.setFocus.call(this,e),LayoutHelpers.positioning.applyOffset.call(this,e),e.ignoreRegistrations&&(LayoutHelpers.positioning.ignoreParentRegistration.call(this),LayoutHelpers.positioning.ignoreSelfRegistration.call(this))},scaling:{setScaleTo:function(e){var t,i=t=!1===e.useMinScale?0:Number.MAX_VALUE;"number"==typeof e.scaleToWidth&&(i=this.parent.width/this.width*e.scaleToWidth),"number"==typeof e.scaleToHeight&&(t=this.parent.height/this.height*e.scaleToHeight),this.scale=!1===e.useMinScale?Math.max(Math.abs(i),Math.abs(t)):Math.min(Math.abs(i),Math.abs(t)),this.scaleX*=i<0?-1:1,this.scaleY*=t<0?-1:1},setSubsection:function(e){var t=this.parent.width/this.width,i="number"==typeof e.subsectionWidth?t/e.subsectionWidth:t,a=this.parent.height/this.height,e="number"==typeof e.subsectionHeight?a/e.subsectionHeight:a;this.scale=Math.max(Math.min(i,a),Math.min(e,t))},setMatch:function(e){var t="number"==typeof e.matchWidth,i="number"==typeof e.matchHeight;t&&i&&(this.scale=1),t&&(this.width=this.parent.width*e.matchWidth/this.scaleX),i&&(this.height=this.parent.height*e.matchHeight/this.scaleY)},setPercentMargin:function(e){e="number"==typeof e.percentMargin?e.percentMargin:.2,e=(this.parent.width+this.parent.height)*e/2;this.scale=1,this.width=this.parent.width-e,this.height=this.parent.height-e},setFixedAreaScaleTo:function(e){var t="number"==typeof e.totalArea?e.totalArea:25e4,i=e.scaleToWidth*this.parent.width/(e.scaleToHeight*this.parent.height);this.width=Math.sqrt(t*i),this.height=this.width/i;t=this.parent.width/this.width*e.scaleToWidth,i=this.parent.height/this.height*e.scaleToHeight;this.scale=!1===e.useMinScale?Math.max(Math.abs(t),Math.abs(i)):Math.min(Math.abs(t),Math.abs(i)),this.scaleX*=t<0?-1:1,this.scaleY*=i<0?-1:1},setFixedPerimeterScaleTo:function(e){var t="number"==typeof e.semiPerimeter?e.semiPerimeter:2e3,i=e.scaleToWidth*this.parent.width/(e.scaleToHeight*this.parent.height+e.scaleToWidth*this.parent.width);this.width=t*i,this.height=t-this.width;i=this.parent.width/this.width*e.scaleToWidth,t=this.parent.height/this.height*e.scaleToHeight;this.scale=!1===e.useMinScale?Math.max(Math.abs(i),Math.abs(t)):Math.min(Math.abs(i),Math.abs(t)),this.scaleX*=i<0?-1:1,this.scaleY*=t<0?-1:1},ignoreParentScaleTo:function(e){var t="number"==typeof e.totalArea?e.totalArea:25e4,i=e.scaleToWidth*this.parent.width/(e.scaleToHeight*this.parent.height);this.width=Math.sqrt(t*i),this.height=this.width/i;t=this.parent.width/this.width*e.scaleToWidth,i=this.parent.height/this.height*e.scaleToHeight;this.scale=!1===e.useMinScale?Math.max(Math.abs(t),Math.abs(i)):Math.min(Math.abs(t),Math.abs(i)),this.scaleX*=t<0?-1:1,this.scaleY*=i<0?-1:1},setBaseScale:function(){this._mBaseScaleX=this.scaleX,this._mBaseScaleY=this.scaleY}},positioning:{setPercentage:function(e){"number"==typeof e.xPercentage&&(this.x=e.xPercentage*this.parent.width),"number"==typeof e.yPercentage&&(this.y=e.yPercentage*this.parent.height)},setAnchor:function(e){var t={};"number"==typeof e.topAnchor&&(t.yPercentage=e.yPosition,t.yOffset=.5),"number"==typeof e.bottomAnchor&&(t.yPercentage=e.yPosition,t.yOffset=-.5),"number"==typeof e.leftAnchor&&(t.xPercentage=e.xPosition,t.xOffset=.5),"number"==typeof e.rightAnchor&&(t.xPercentage=e.xPosition,t.xOffset=-.5),LayoutHelpers.positioning.setPercentage.call(this,t),LayoutHelpers.positioning.applyOffset.call(this,t)},setPosition:function(e){var t={};"number"==typeof e.xPosition&&(t.xPercentage=e.xPosition,t.xOffset=-1*(e.xPosition-.5)),"number"==typeof e.yPosition&&(t.yPercentage=e.yPosition,t.yOffset=-1*(e.yPosition-.5)),LayoutHelpers.positioning.setPercentage.call(this,t),LayoutHelpers.positioning.applyOffset.call(this,t)},setFocus:function(e){var t,i={};"number"==typeof e.xFocus&&(t=(t=(1-this.parent.width/(this.width*this.scaleX))/2)<0?0:t,i.xPercentage=.5,i.xOffset=TGE.Math.Clamp(-1*(e.xFocus-.5),-t,t)),"number"==typeof e.yFocus&&(t=(t=(1-this.parent.height/(this.height*this.scaleY))/2)<0?0:t,i.yPercentage=.5,i.yOffset=TGE.Math.Clamp(-1*(e.yFocus-.5),-t,t)),LayoutHelpers.positioning.setPercentage.call(this,i),LayoutHelpers.positioning.applyOffset.call(this,i)},setClampedPercentage:function(e){var t;"number"==typeof e.xPercentage&&(t=(t=this.width*this.scaleX/this.parent.width/2)<0?0:t,this.x=TGE.Math.Clamp(e.xPercentage,t,1-t)*this.parent.width),"number"==typeof e.xPercentage&&(t=(t=this.height*this.scaleY/this.parent.height/2)<0?0:t,this.y=TGE.Math.Clamp(e.yPercentage,t,1-t)*this.parent.height)},setToDisplayObjectPosition:function(e,t){t=ModuleMath.Geometry.localToLocal(this.parent,e,t);this.x=t.x,this.y=t.y},applyOffset:function(e){"number"==typeof e.xOffset&&(this.x+=e.xOffset*this.width*this.scaleX),"number"==typeof e.yOffset&&(this.y+=e.yOffset*this.height*this.scaleY)},ignoreSelfRegistration:function(){this.x+=(this.registrationX-.5)*this.width*this.scaleX,this.y+=(this.registrationY-.5)*this.height*this.scaleY},ignoreParentRegistration:function(){this.x-=this.parent.width*this.parent.registrationX,this.y-=this.parent.height*this.parent.registrationY}}},Crosshair=function(){Crosshair.superclass.constructor.apply(this,arguments),PropertyCombine.setDefaultParams(this,{width:64,height:64,emptyCenterSize:28,lineWidth:4,outsideStroke:2,strokeColorInside:"#ffffff",strokeColorOutside:"#000000",registrationX:.5,registrationY:.5,capStyle:"square"})};Crosshair.prototype={setup:function(e){return PropertyCombine.setupInstance(this,e,Crosshair.superclass.setup),this.addEventListener("drawbegin",this.onDrawBegin.bind(this)),this},onDrawBegin:function(e){var t=this.width/2,i=this.height/2,a=(this.width-this.emptyCenterSize)/2,n=(this.height-this.emptyCenterSize)/2,e=e.canvasContext;e.save(),e.lineCap=this.capStyle,e.beginPath(),e.moveTo(0,i),e.lineTo(a,i),e.moveTo(this.width,i),e.lineTo(this.width-a,i),e.moveTo(t,0),e.lineTo(t,n),e.moveTo(t,this.height),e.lineTo(t,this.height-n),e.lineWidth=this.lineWidth+2*this.outsideStroke,e.strokeStyle=this.strokeColorOutside,e.stroke(),e.lineWidth=this.lineWidth,e.strokeStyle=this.strokeColorInside,e.stroke(),e.closePath(),e.restore()}},extend(Crosshair,TGE.DisplayObjectContainer),Timer=function(){Timer.superclass.constructor.call(this)},Timer.prototype={UNITS_ORDER:["minutes","seconds","centiseconds","milliseconds"],UNITS_MAP:{milliseconds:1,centiseconds:10,seconds:1e3,minutes:6e4},TAGS_MAP:{milliseconds:"<ms>",centiseconds:"<cs>",seconds:"<sec>",minutes:"<min>"},setup:function(e){return this.timerLength="number"==typeof e.timerLength?e.timerLength:0,this.timerUnit="string"==typeof e.timerUnit?e.timerUnit:"seconds",this._timerFormat="string"==typeof e.timerFormat?e.timerFormat:"<sec>",this._isPaused="boolean"==typeof e.start&&!e.start,this.padNumbers="boolean"!=typeof e.padNumbers||e.padNumbers,this.padAmount="number"==typeof e.padAmount?e.padAmount:2,Timer.superclass.setup.call(this,e),this.noLimit=0===this.timerLength,this._timerLength=this.timerLength*this.UNITS_MAP[this.timerUnit],this._elapsedTime=0,this._uniqueID=0,this._timerCallbacks=[],this._tickCallbacks={},this._parseFormat(),"function"==typeof e.onComplete&&this.addTimerCallback(this.timerLength,e.onComplete,"Complete"),this.addEventListener("update",this._updateClock.bind(this)),this},start:function(){this._isPaused=!1},pause:function(){this._isPaused=!0},reset:function(){this._elapsedTime=0},getTimerString:function(e,t){t="number"==typeof t?t*this.UNITS_MAP[this.timerUnit]:this._elapsedTime;for(var i,a,n=this._timerFormat,o=(e="boolean"!=typeof e||e)&&!this.noLimit?this._timerLength-t:t,s=0;s<this._includedUnits.length;s++)i=this._includedUnits[s],o=(a=this._parseUnitValue(i,o,s)).remainder,n=n.replace(this.TAGS_MAP[i],a.string);return n},getCurrentTime:function(e){return e="string"==typeof e?e:this.timerUnit,this._elapsedTime/this.UNITS_MAP[e]},getTimeRemaining:function(e){return e="string"==typeof e?e:this.timerUnit,(this.noLimit?this._elapsedTime:this._timerLength-this._elapsedTime)/this.UNITS_MAP[e]},addTimerCallback:function(e,t,i){i="string"==typeof i?i:"";var a=++this._uniqueID;return this._timerCallbacks.push({id:a,eventTime:e*this.UNITS_MAP[this.timerUnit],eventName:i,callback:t}),a},addTickCallback:function(e,t,i,a,n){t="number"==typeof t?t:0,i="number"==typeof i?i:this._timerLength/this.UNITS_MAP[this.timerUnit],a="number"==typeof a?a:1;var o=++this._uniqueID;this._tickCallbacks[o]=[];for(var s=t;s<=i;s+=a)this._tickCallbacks[o].push(this.addTimerCallback(s,e,n));return o},removeCallback:function(e){for(var t=!1,i=0;i<this._timerCallbacks.length;i++)this._timerCallbacks[i].id===e&&(this._timerCallbacks.splice(i,1),t=!0);if(!t)for(var a in this._tickCallbacks)if(a===e.toString()){for(var n=this._tickCallbacks[a],i=0;i<n.length;i++)this.removeCallback(n[i]);delete this._tickCallbacks[a],t=!0}return t},_parseFormat:function(){this._includedUnits=[];for(var e,t=0;t<this.UNITS_ORDER.length;t++)e=this.UNITS_ORDER[t],this._timerFormat.includes(this.TAGS_MAP[e])&&this._includedUnits.push(e)},_updateClock:function(e){if(!this._isPaused&&0<e.elapsedTime){var t=this._elapsedTime;this._elapsedTime+=1e3*e.elapsedTime,this._elapsedTime>this._timerLength&&(this._elapsedTime=this._timerLength,this._isPaused=!0);for(var i=0;i<this._timerCallbacks.length;i++){var a=this._timerCallbacks[i].eventTime;t<a&&a<=this._elapsedTime&&this._timerCallbacks[i].callback({eventName:this._timerCallbacks[i].eventName,eventTime:this._timerCallbacks[i].eventTime/this.UNITS_MAP[this.timerUnit],id:this._timerCallbacks[i].id})}}},_parseUnitValue:function(e,t,i){var a=this.UNITS_MAP[e],e=Math.floor(t/a).toString();return{string:e=this.padNumbers?0===i?this._leftPadString(e,this.padAmount):(i=(this.UNITS_MAP[this._includedUnits[i-1]]/a-1).toString().length,this._leftPadString(e,i)):e,remainder:t%a}},_leftPadString:function(e,t,i){for(i="string"==typeof i?i:"0";e.length<t;)e=i+e;return e}},extend(Timer,TGE.DisplayObjectContainer),IdleTimer=function(){IdleTimer.superclass.constructor.call(this),this.game=TGE.Game.GetInstance()},IdleTimer.prototype={setup:function(e){return IdleTimer.superclass.setup.call(this,e),this.textDef=e.textDef||"IdleTimer_font",this.duration=e.durationOverride||TGE.RemoteSettings("IdleTimer_duration"),this.warningPercent=.6,this.timerHidden=!1,this.setOwnLayout="boolean"!=typeof e.setOwnLayout||e.setOwnLayout,this.adjustableLayout="boolean"!=typeof e.adjustableLayout||e.adjustableLayout,this.lineWidth="number"==typeof e.lineWidth?e.lineWidth:3,this.setOwnLayout&&this._setupOwnLayout(),this.timer=this.addChild((new Timer).setup({timerLength:this.duration,timerFormat:"<sec>",padNumbers:!1,start:!1,onComplete:this._onComplete.bind(this)})),TGE.RemoteSettings("IdleTimer_isVisible")?(this.timerCircle=this.addChild((new TGE.DisplayObjectContainer).setup({layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0},alpha:TGE.RemoteSettings("IdleTimer_doNotRunTimer")?1:0})),this.timerCircle.addEventListener("drawbegin",this._drawTimerCircle.bind(this)),this.secondsTextHolder=this.addChild((new TGE.DisplayObjectContainer).setup({width:50,height:50,visible:TGE.RemoteSettings("IdleTimer_doNotRunTimer")})),this.secondsText=this.secondsTextHolder.addChild((new TGE.Text).setup({textDef:this.textDef,text:this.duration})),TGE.RemoteSettings("IdleTimer_doNotRunTimer")||this.timerCircle.tweenTo({alpha:1,duration:.7,easing:TGE.Tween.Sine.In,onComplete:this._startTimer.bind(this)})):(this.timerHidden=!0,this._startTimer()),this},fadeOut:function(){this.numberBounceTween&&!this.numberBounceTween.finished()&&this.numberBounceTween.endTween(),this.timer.pause(),this.timerCircle&&this.timerCircle.tweenTo({alpha:0,duration:.4,easing:TGE.Tween.Sine.In,onComplete:function(){this.timerHidden=!0,this.secondsTextHolder.visible=!1,this.dispatchEvent({type:"fadeOutComplete"})}.bind(this)})},removeTimer:function(){this.markForRemoval()},_startTimer:function(){TGE.RemoteSettings("IdleTimer_doNotRunTimer")||TGE.Game.AddEventListener("tgeGameViewable",this.__startTimer.bind(this))},__startTimer:function(){this.timer.start(),TGE.RemoteSettings("IdleTimer_isVisible")&&(this.secondsTextHolder.visible=!0,this._playNumberBounce(),this.previousSeconds=this.duration,this.addEventListener("update",function(){var e=Math.ceil(this.timer.getTimeRemaining("milliseconds")/1e3);e!==this.previousSeconds&&(e<=this.duration*this.warningPercent?this.warningModeActive||(this.warningModeActive=!0,this._playNumberBounce(!0)):this._playNumberBounce()),this.secondsText.text=e,this.previousSeconds=e}.bind(this)))},_playNumberBounce:function(e){this.numberBounceTween&&!this.numberBounceTween.finished()&&this.numberBounceTween.endTween(),this.numberBounceTween=this.secondsTextHolder.tweenTo({scale:.85,duration:.1,rewind:!0,loop:!0===e||1})},_onComplete:function(){this.dispatchEvent({type:"timerComplete"}),TGE.RemoteSettings("IdleTimer_isVisible")&&this.fadeOut()},_drawTimerCircle:function(e){var t={x:this.timerCircle.x+.5*this.timerCircle.width,y:this.timerCircle.y+.5*this.timerCircle.height,radiusX:.5*this.timerCircle.width,radiusY:.5*this.timerCircle.height,rotation:0,startAngle:0,endAngle:2*TGE.PI};e.canvasContext.save(),e.canvasContext.beginPath(),e.canvasContext.ellipse(t.x,t.y,t.radiusX,t.radiusY,t.rotation,t.startAngle,t.endAngle),e.canvasContext.fillStyle=GameConfig.COLOR_DEFS.IdleTimer_backgroundColor,e.canvasContext.globalAlpha=TGE.RemoteSettings("IdleTimer_backgroundOpacity")*this.timerCircle.alpha,e.canvasContext.fill(),e.canvasContext.restore(),e.canvasContext.beginPath(),e.canvasContext.lineCap="round",e.canvasContext.ellipse(t.x,t.y,t.radiusX-.4*this.lineWidth,t.radiusY-.4*this.lineWidth,t.rotation,t.startAngle,t.endAngle),e.canvasContext.lineWidth=this.lineWidth,e.canvasContext.strokeStyle=GameConfig.COLOR_DEFS.IdleTimer_emptyColor,e.canvasContext.stroke();var i=TGE.MapValue(this.timer.getCurrentTime("milliseconds"),0,1e3*this.duration,2*TGE.PI,0);e.canvasContext.beginPath(),e.canvasContext.ellipse(t.x,t.y,t.radiusX-.4*this.lineWidth,t.radiusY-.4*this.lineWidth,t.rotation,t.startAngle-.5*TGE.PI,i-.5*TGE.PI),e.canvasContext.lineWidth=this.lineWidth;i=this.lerpColor(GameConfig.COLOR_DEFS.IdleTimer_fillColor,GameConfig.COLOR_DEFS.IdleTimer_warningColor,TGE.MapValue(this.timer.getCurrentTime("milliseconds"),this.duration*this.warningPercent*1e3,this.duration*(this.warningPercent+.1)*1e3,0,1,!0));e.canvasContext.strokeStyle=i,e.canvasContext.stroke()},_setupOwnLayout:function(){this.width=this.height=50,this.adjustableLayout&&BuilderGame?this.layout=BuilderGame.LayoutHandler.bind(this,{remoteSettingPrefix:"IdleTimer",layout:{portrait:{scaleToWidth:.3,scaleToHeight:.15,xPosition:.5,yPosition:.5},landscape:{scaleToWidth:.15,scaleToHeight:.3,xPosition:.5,yPosition:.5}},ranges:{size:{portrait:{min:.4,max:1},landscape:{min:.4,max:1}}}}):this.layout={portrait:{scaleToWidth:.3,scaleToHeight:.15,xPosition:.06,yPosition:.03},landscape:{scaleToWidth:.15,scaleToHeight:.3,xPosition:.03,yPosition:.06}}},lerpColor:function(e,t,i){var a=parseInt(e.replace(/#/g,""),16),n=a>>16,e=a>>8&255,a=255&a,t=parseInt(t.replace(/#/g,""),16);return"#"+((1<<24)+(n+i*((t>>16)-n)<<16)+(e+i*((t>>8&255)-e)<<8)+(a+i*((255&t)-a))|0).toString(16).slice(1)}},extend(IdleTimer,TGE.DisplayObjectContainer),window._TREMERGES=window._TREMERGES||{},window._TREMERGES.IdleTimer={GameConfig:{REMOTE_SETTINGS:{_ADD_:{IdleTimer_duration:{type:"number",default:8,options:[{min:5,max:15,interval:1}]},IdleTimer_doNotRunTimer:{type:"boolean",default:!1},IdleTimer_backgroundOpacity:{type:"number",default:1,options:[{min:0,max:1,interval:.05}]},IdleTimer_isVisible:{type:"boolean",default:!0},IdleTimer_portrait_size:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},IdleTimer_portrait_xPosition:{type:"number",default:.06,options:[{min:0,max:1,interval:.01}]},IdleTimer_portrait_yPosition:{type:"number",default:.03,options:[{min:0,max:1,interval:.01}]},IdleTimer_landscape_size:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},IdleTimer_landscape_xPosition:{type:"number",default:.03,options:[{min:0,max:1,interval:.01}]},IdleTimer_landscape_yPosition:{type:"number",default:.06,options:[{min:0,max:1,interval:.01}]}}},COLOR_DEFS:{_ADD_:{IdleTimer_backgroundColor:"#ffffff",IdleTimer_emptyColor:"#7d7f7f",IdleTimer_fillColor:"#eaa733",IdleTimer_warningColor:"#ff0000"}},TEXT_DEFS:{_ADD_:{IdleTimer_font:{fontFamily:"Spartan",textColor:"#000000",fontSize:24,fontWeight:"bold",strokeColor:"#737373",strokeWidth:0}}}},BuilderConfig:{MACRO_DEFS:{_ADD_:{IdleTimer_settings:{type:"group",groupType:"open",steps:[{name:"Duration",prompt:"Adjust the duration of the timer",type:"remoteSetting",settingName:"IdleTimer_duration",restart:!0,sliderOptions:{formatter:function(e){return e+" seconds"}}},{label:"The idle timer is visible onscreen",type:"remoteSetting",settingName:"IdleTimer_isVisible",restart:!0},{name:"Idle Timer Visuals",type:"macro",macroDef:"IdleTimer_visuals"}]},IdleTimer_visuals:{type:"group",groupType:"tabs",visibilityRemoteSetting:"IdleTimer_isVisible",steps:[{name:"Colors",type:"group",groupType:"open",steps:[{prompt:"Adjust the background color",type:"color",colorDef:"IdleTimer_backgroundColor"},{prompt:"Adjust the background opacity",type:"remoteSetting",settingName:"IdleTimer_backgroundOpacity",sliderOptions:{formatter:function(e){return Math.round(100*e)+"%"}}},{prompt:"Adjust the Timer ring color",type:"color",colorDef:"IdleTimer_fillColor"}]},{name:"Size and Position",type:"group",groupType:"open",steps:[{prompt:"Adjust the size and position",type:"group",groupType:"buttons",steps:[{name:"Portrait",type:"macro",macroDef:"adjustAspectLayout",macroParams:["IdleTimer","portrait"]},{name:"Landscape",type:"macro",macroDef:"adjustAspectLayout",macroParams:["IdleTimer","landscape"]}]}]},{name:"Number",prompt:"Change the text style",type:"text",textDef:"IdleTimer_font",minFontSize:12,maxFontSize:48}]}}},STATE_DEFS:{_ADD_:{IdleTimer_frozen:{remoteSetting:[{settingName:"IdleTimer_doNotRunTimer",value:!0}]}}}}};var ELX_gameScreen={landscape:{childObjects:[{name:"background",className:"TGE.Sprite",image:"background",layout:"aspect-fill"},{name:"puzzleHolderFull",className:"TGE.DisplayObjectContainer",width:1095,height:1095,layout:"aspect-fill"},{name:"puzzleHolder",className:"TGE.DisplayObjectContainer",width:690,height:690,layout:{scaleToWidth:.6301,scaleToHeight:.92,rightAnchor:.3425,yPercentage:.5}},{name:"logoHolder",className:"TGE.DisplayObjectContainer",width:375,height:749,layout:{matchWidth:.3425,matchHeight:.9987,xPercentage:.8288,yPercentage:.5007}}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"background",className:"TGE.Sprite",image:"background",layout:"aspect-fill"},{name:"puzzleHolderFull",className:"TGE.DisplayObjectContainer",width:1095,height:1095,layout:"aspect-fill"},{name:"puzzleHolder",className:"TGE.DisplayObjectContainer",width:690,height:690,layout:{scaleToWidth:.92,scaleToHeight:.6301,xPercentage:.5,topAnchor:.3425}},{name:"logoHolder",className:"TGE.DisplayObjectContainer",width:750,height:373,layout:{matchWidth:1,matchHeight:.3406,xPercentage:.5,yPercentage:.1712}}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_gameScreen_landscape=(ELX_STORAGE.ELX_gameScreen=ELX_gameScreen).landscape,ELX_gameScreen_portrait=ELX_gameScreen.portrait;ScratchOffGame=function(e,t){ScratchOffGame.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.gameScreen=this.game.gameScreen},ScratchOffGame.prototype={setup:function(e){return ScratchOffGame.superclass.setup.call(this,e),this.createObjects(e.holder),this.createTutorial(e.tutorialTarget),this.idleTimer=0,this},createObjects:function(e){var t;this.revealedImage=e.addChild((new RevealedImage).setup({width:e.width,height:e.height,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),"revealed"!==TGE.RemoteSettings("state")&&"video"!==TGE.RemoteSettings("state")&&(t=this.game.assetManager.getAsset(TGE.RemoteSettings("fullScreenScratch")?"coverImageFull":"coverImage"),this.scratchOffSprite=e.addChild((new ScratchOffSprite).setup({width:t.width,height:t.height,scratchOffImage:t,layout:{scaleToHeight:1,scaleToWidth:1,xPercentage:0,yPercentage:0,useMinScale:!1}})),this.scratchOffSprite.addEventListener("revealStarted",this.onRevealStarted.bind(this,e)),this.scratchOffSprite.addEventListener("imageRevealed",this.onImageRevealed.bind(this,e)),"tween"===TGE.RemoteSettings("state")&&this.scratchOffSprite.scratchOffComplete())},createTutorial:function(e){"tutorial"===TGE.RemoteSettings("state")&&(TGE.InCreativeBuilder()||!this.game.initialLaunch&&0===this.game.numberOfReplays)&&this.addChild((new Tutorial).setup({pointerTarget:this.scratchOffSprite,gameplayTarget:this.scratchOffSprite}))},onRevealStarted:function(e,t){"video"===TGE.RemoteSettings("hiddenImageType")&&this.revealedImage.createVideo()},onImageRevealed:function(e,t){if("video"===TGE.RemoteSettings("hiddenImageType")?(this.revealedImage.playVideo(),this.revealedImage.addEventListener("videoFinished",this.completeScratchOff.bind(this,t.reason))):(this.tweenOut(e),this.addEventListener("tweenComplete",this.completeScratchOff.bind(this,t.reason))),TGE.RemoteSettings("useEndingAnimation")){var i;switch(TGE.RemoteSettings("endingAnimationType")){case"spill":i=ParticleEffect.FullScreen.Spill;break;case"fountain":i=ParticleEffect.FullScreen.Fountain;break;case"confetti":i=ParticleEffect.FullScreen.Confetti;break;case"fireworks":i=ParticleEffect.FullScreen.Fireworks}this.gameScreen.addChild((new ParticleEffect).setup({particleImage:"img_particleDefault",baseEffect:i,width:1500,height:1500,layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}}))}},completeScratchOff:function(e){this.dispatchEvent({type:"scratchOffComplete",reason:e})},tweenOut:function(e){var t=e.y,i=e.scaleX;switch(TGE.RemoteSettings("tweenMode")){case"bounce":e.tweenTo({easing:TGE.Tween.Quadratic.InOut,y:t-200,duration:.3,rewind:!0}).thenTweenTo({y:t,easing:TGE.Tween.Bounce.Out,duration:.8,onComplete:this.onTweenComplete.bind(this)});break;case"spin":e.tweenTo({rotation:360,duration:2,easing:TGE.Tween.Circular.Out,onComplete:this.onTweenComplete.bind(this)}),e.tweenTo({scale:1.1*i,duration:1.5,easing:TGE.Tween.Sine.Out}).thenTweenTo({scale:i,duration:.5,easing:TGE.Tween.Sine.In});break;case"grow":e.tweenTo({duration:1,easing:TGE.Tween.Back.InOut,scale:1.4*i}).thenTweenTo({duration:1,easing:TGE.Tween.Back.InOut,scale:i,onComplete:this.onTweenComplete.bind(this)});break;case"wiggle":e.tweenTo({easing:TGE.Tween.Sine.InOut,duration:.1,rotation:10}).thenTweenTo({duration:.25,easing:TGE.Tween.Sine.InOut,rotation:-10,rewind:!0,loop:2}).thenTweenTo({duration:.25,easing:TGE.Tween.Sine.InOut,rotation:0,onComplete:this.onTweenComplete.bind(this)});break;default:e.performAction({delay:.5,action:this.onTweenComplete.bind(this)})}},onTweenComplete:function(){this.performAction({delay:.3,action:this.dispatchEvent.bind(this,{type:"tweenComplete"})})}},extend(ScratchOffGame,TGE.DisplayObjectContainer),ScratchOffSprite=function(e,t){ScratchOffSprite.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.gameScreen=this.game.gameScreen,this.particleThresholdsMap={Sprinkle:10,Puff:6,Pop:12}},Cell=function(e,t){this.filled=!1,this.row=e,this.col=t},ScratchOffSprite.prototype={setup:function(e){return ScratchOffSprite.superclass.setup.call(this,e),this.drawing=!1,this.cacheEraser=!0,this.lines=[],this.lineWidth=TGE.RemoteSettings("scratchLineWidth"),this.scratchOffImage=e.scratchOffImage,this.game.waitForAsset("brush",function(){this.scratchLineImage=this.game.assetManager.getAsset("brush")}.bind(this),!1),this.idleTimer=0,this.revealStarted=!1,this.createRevealArea(),"testLines"===TGE.RemoteSettings("state")&&this.addTestLine(),this.addEventListener("remove",this.cleanupCanvases.bind(this)),this.addEventListener("mousedown",this.onMouseDown.bind(this)),this.addEventListener("mousemove",this.onMouseMove.bind(this)),this.stage.addEventListener("mouseup",this.onMouseUp.bind(this)),TGE.InCreativeBuilder()&&(document.addEventListener("mouseup",this.onMouseUp.bind(this)),this.cacheEraser=!1),"revealAreaPosition"!==TGE.RemoteSettings("state")&&"showHiddenImage"!==TGE.RemoteSettings("state")&&this.addEventListener("drawbegin",this.onDrawBegin.bind(this)),"onStart"===TGE.RemoteSettings("idleTimerMode")&&this.addIdleTimer(),this},updateTimer:function(e){!1!==this.drawing||"testLines"===TGE.RemoteSettings("state")||TGE.RemoteSettings("IdleTimer_doNotRunTimer")?this.idleTimer=0:(this.idleTimer+=e.elapsedTime,this.idleTimer>=TGE.RemoteSettings("idleTimerNum")&&(this.removeEventListenersFor("update"),this.scratchOffComplete(!0)))},createRevealArea:function(){this.revealArea=this.addChild((new RevealArea).setup({alpha:.3,scratchOff:this})),this.revealArea.addEventListener("revealAreaComplete",this.scratchOffComplete.bind(this))},addTestLine:function(){this.lines[this.lines.length]=[],this.addPointToLine(new TGE.Vector2(this.width/4,this.height/4)),this.addPointToLine(new TGE.Vector2(this.width/1.4,this.height/1.4))},onMouseDown:function(e){var t="video"===TGE.RemoteSettings("hiddenImageType")?"hiddenVideo":"hiddenImage";this.game.waitForAsset(t,this._onMouseDown.bind(this,e),!0)},_onMouseDown:function(e){this.revealStarted||("onScratch"===TGE.RemoteSettings("idleTimerMode")&&this.addIdleTimer(),this.revealStarted=!0,this.dispatchEvent({type:"revealStarted"})),this.drawing=!0,this.lines[this.lines.length]=[],this.addMousePointToLine(new TGE.Vector2(e.stageX,e.stageY)),this._particleCounter=0,this.particleEffect(e.stageX,e.stageY)},onMouseMove:function(e){var t,i,a;this.drawing&&(t=(a=this.lines[this.lines.length-1]).length,this.addMousePointToLine(new TGE.Vector2(e.stageX,e.stageY)),i=a.length,a=TGE.RemoteSettings("scratchLineWidth"),a=Math.ceil(a/100),a=this.particleThresholdsMap[TGE.RemoteSettings("scratchParticleEffectType")]/a,this._particleCounter+=i-t,this._particleCounter>a&&(this.particleEffect(e.stageX,e.stageY),this._particleCounter-=a))},particleEffect:function(e,t){"none"!==TGE.RemoteSettings("scratchParticleEffectType")&&this.gameScreen.particleEffect(e,t)},onMouseUp:function(){this.drawing&&(this.drawing=!1,this.revealArea.checkForImageRevealed(),.05<this.revealArea.getPercentComplete()&&TGE.Analytics.Engagement())},onDrawBegin:function(e){e=e.canvasContext;this.drawEraser(),e.drawImage(this.offscreenCanvasImage,0,0)},drawEraser:function(){this.lineWidth=TGE.RemoteSettings("scratchLineWidth"),this.offscreenCanvas||(this.offscreenCanvas=document.createElement("canvas"),this.offscreenCanvas.width=this.width,this.offscreenCanvas.height=this.height,this.offscreenCanvasImage=document.createElement("canvas"),this.offscreenCanvasImage.width=this.width,this.offscreenCanvasImage.height=this.height,this.offscreenCanvasImage.globalCompositeOperation="destination-out");var e=this.offscreenCanvas.getContext("2d");switch(this.cacheEraser||e.clearRect(0,0,this.width,this.height),TGE.RemoteSettings("scratchLineType")){case"image":if(this.scratchLineImage){this.drawImagePath(e);break}case"line":this.drawLinePath(e)}var t=this.scratchOffImage,i=this.offscreenCanvasImage.getContext("2d");i.globalCompositeOperation="source-over",i.drawImage(t,t.x,t.y,t.width,t.height,0,0,this.width,this.height),i.globalCompositeOperation="destination-out",i.drawImage(this.offscreenCanvas,0,0),this.cacheEraser&&Array.isArray(this.lines)&&(this.lines.splice(0,this.lines.length-1),Array.isArray(this.lines[0])&&this.lines[0].splice(0,this.lines[0].length-1))},drawLinePath:function(e){e.beginPath();for(var t=0;t<this.lines.length;t++)for(var i=this.lines[t],a=0;a<i.length;a++){var n=i[a];0===a&&e.moveTo(n.x+.01,n.y+.01),e.lineTo(n.x,n.y)}e.lineWidth=this.lineWidth,e.lineJoin="round",e.lineCap="round",e.stroke(),e.closePath()},drawImagePath:function(e){for(var t=TGE.RemoteSettings("scratchLineImageSpacing"),i=0;i<this.lines.length;i++)for(var a=this.lines[i],n=0;n<a.length;n++){var o=a[n];if(0<n){var s=this.lineWidth*(1/t),r=a[n-1],h=TGE.Vector2.Distance(r,o);if(s<h)for(var l,c=Math.floor(h/s),p=(r.x-o.x)/(c+1),u=(r.y-o.y)/(c+1),d=1;d<=c;++d)l=new TGE.Vector2(r.x-p*d,r.y-u*d),this.drawBrushImage(e,l)}this.drawBrushImage(e,o)}},drawBrushImage:function(e,t){e.drawImage(this.scratchLineImage.spriteSheet,this.scratchLineImage.x,this.scratchLineImage.y,this.scratchLineImage.width,this.scratchLineImage.height,t.x-this.lineWidth/2,t.y-this.lineWidth/2,this.lineWidth,this.lineWidth)},getLocalMousePosition:function(e,t){return ModuleMath.Geometry.globalToLocal(this,new TGE.Vector2(e,t))},addMousePointToLine:function(e){e=this.getLocalMousePosition(e.x,e.y);this.addPointToLine(e)},addPointToLine:function(e){var t=this.lines[this.lines.length-1];if(1<=t.length){var i=this.lineWidth,a=t[t.length-1],n=TGE.Vector2.Distance(a,e);if(i<n)for(var o,s=Math.floor(n/i),r=(a.x-e.x)/(s+1),h=(a.y-e.y)/(s+1),l=1;l<=s;++l)o=new TGE.Vector2(a.x-r*l,a.y-h*l),t.push(o),this.revealArea.fillInCell(o)}t.push(e),this.revealArea.fillInCell(e)},addIdleTimer:function(){this.idleTimerInitialized||(this.timerVisual=this.gameScreen.setupIdleTimer(),this.timerVisual.timerHidden&&TGE.RemoteSettings("idleTimer_resetOnTouch")?TGE.Game.AddEventListener("tgeGameViewable",function(){this.idleTimerInitialized=!0,this.addEventListener("update",this.updateTimer.bind(this))}.bind(this)):(this.idleTimerInitialized=!0,this.timerVisual.addEventListener("timerComplete",function(){this.scratchOffComplete(!0)}.bind(this))))},scratchOffComplete:function(e){this.revealStarted||(this.revealStarted=!0,this.dispatchEvent({type:"revealStarted"})),this.timerVisual&&(this.timerVisual.removeEventListenersFor("timerComplete"),TGE.RemoteSettings("IdleTimer_isVisible")&&this.timerVisual.fadeOut()),this.removeEventListenersFor("mousedown"),this.removeEventListenersFor("mouseup"),this.removeEventListenersFor("mousemove"),this.dispatchEvent({type:"imageRevealed",reason:!0===e?"timeout":"won"}),this.tweenTo({alpha:0,duration:TGE.RemoteSettings("fadeOutTime"),easing:TGE.Tween.Sine.Out,removeOnComplete:!0})},cleanupCanvases:function(){this.offscreenCanvas&&(this.offscreenCanvas.remove(),this.offscreenCanvasImage.remove())}},extend(ScratchOffSprite,TGE.Sprite),RevealedImage=function(e,t){RevealedImage.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.gameScreen=this.game.gameScreen},RevealedImage.prototype={setup:function(e){RevealedImage.superclass.setup.call(this,e);e="video"===TGE.RemoteSettings("hiddenImageType")?"hiddenVideo":"hiddenImage";return this.game.waitForAsset(e,this.addImagery.bind(this),!1),this},addImagery:function(){switch(TGE.RemoteSettings("hiddenImageType")){case"video":"showHiddenImage"!==TGE.RemoteSettings("state")&&"video"!==TGE.RemoteSettings("state")&&TGE.BrowserDetect.oniOS?this.videoPlayer=null:this.createVideo();break;case"image":this.addChild((new TGE.Sprite).setup({image:"hiddenImage",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:0,yPercentage:0,useMinScale:!1}}))}},createVideo:function(){this.videoPlayer||(this.videoPlayer=this.addChild((new VideoPlayer).setup({assetId:"hiddenVideo",autoplay:!1,muted:!1,muteSync:!0,muteStyle:TGE.RemoteSettings("VideoPlayer_muteStyle"),aspectHandling:TGE.RemoteSettings("VideoPlayer_noCropping")?"letterbox":"crop",width:this.width,height:this.height,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}})),"showHiddenImage"===TGE.RemoteSettings("state")||"video"===TGE.RemoteSettings("state")?(this.videoPlayer.setLocation(),this.videoPlayer.muteButton&&(this.videoPlayer.muteButton.visible=!0)):this.videoPlayer.muteButton&&(this.videoPlayer.muteButton.visible=!1),this.videoPlayer.addEventListener("complete",this.dispatchEvent.bind(this,{type:"videoFinished"})))},playVideo:function(){TGE.RemoteSettings("VideoPlayer_debug")&&console.log("RevealedImage: playVideo"),this.videoPlayer.muteButton&&(this.videoPlayer.muteButton.visible=!0,this.videoPlayer.muteButton.tweenFrom({alpha:0,duration:2,easing:TGE.Tween.Sine.Out}));var e="NoAudio"===TGE.AudioManager.GetInstance().pluginType();this.videoPlayer.mute(e),this.videoPlayer.play()}},extend(RevealedImage,TGE.DisplayObjectContainer),RevealArea=function(e,t){RevealArea.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.gameScreen=this.game.gameScreen},RevealArea.prototype={setup:function(e){return RevealArea.superclass.setup.call(this,e),this.scratchOff=e.scratchOff,this.positionReveal(),this.addEventListener("resize",this.positionReveal.bind(this)),"revealAreaPosition"===TGE.RemoteSettings("state")&&(this.addChild((new CB.Overlay).setup({backdropFillStyle:"fillOutside",backdropAlpha:.2,textPosition:"middle",textParams:{text:"REVEAL AREA",fontSize:24,textColor:"white"},layout:{xPercentage:0,yPercentage:0,matchWidth:.98,matchHeight:.98}})),this.addEventListener("update",this.positionReveal.bind(this))),this.createCells(),this},positionReveal:function(){var e=TGE.RemoteSettings("revealX"),t=TGE.RemoteSettings("revealY");this.width=this.scratchOff.width*TGE.RemoteSettings("revealWidth"),this.height=this.scratchOff.height*TGE.RemoteSettings("revealHeight"),this.registrationX=e+.5,this.registrationY=t+.5,this.x=this.scratchOff.width*e,this.y=this.scratchOff.height*t},createCells:function(){this.filledCells=0,this.cellSize=this.scratchOff.lineWidth,this.numCols=Math.round(this.width/this.cellSize),this.numRows=Math.round(this.height/this.cellSize),this.cellsToComplete=this.numCols*this.numRows*(.9*TGE.RemoteSettings("revealPercent")),this.cells=[],this.debugCells=[];for(var e=0;e<this.numRows;e++){this.cells[e]=[],this.debugCells[e]=[];for(var t=0;t<this.numCols;t++)this.cells[e].push(new Cell(e,t)),getQueryString().debug&&this.debugCells[e].push(this.addChild((new TGE.DisplayObjectContainer).setup({width:this.cellSize,height:this.cellSize,x:-this.width*this.registrationX+this.cellSize/2+this.cellSize*t,y:-this.height*this.registrationY+this.cellSize/2+this.cellSize*e,alpha:.5})))}},fillInCell:function(e){var t=ModuleMath.Geometry.localToLocal(this,this.parent,e,!1),i=Math.ceil(t.x/this.cellSize)-1,e=Math.ceil(t.y/this.cellSize)-1;i<0||i>=this.numCols||e<0||e>=this.numRows||((t=this.cells[e][i]).filled||(t.filled=!0,this.filledCells++,getQueryString().debug&&(this.debugCells[e][i].backgroundColor="red")))},checkForImageRevealed:function(){var e=TGE.RemoteSettings("fullScreenScratch")?this.getFullScreenVisiblePercent():1;this.filledCells>=this.cellsToComplete*e&&this.dispatchEvent({type:"revealAreaComplete"})},getPercentComplete:function(){var e=TGE.RemoteSettings("fullScreenScratch")?this.getFullScreenVisiblePercent():1;return this.filledCells/(this.cellsToComplete*e)},getFullScreenVisiblePercent:function(){var e=TGE.RemoteSettings("revealX"),t=TGE.RemoteSettings("revealY"),i=TGE.RemoteSettings("revealHeight"),a=TGE.RemoteSettings("revealWidth"),n=this.stage.isLandscape(),o=(1-a)*(e+.5),s=(1-i)*(t+.5),r=s+i,h=n?1:this.stage.width/this.stage.height,e=(1-h)/2,t=n?this.stage.height/this.stage.width:1,n=(1-t)/2,t=1-(1-t)/2;return(Math.min(o+a,1-(1-h)/2)-Math.max(o,e))/a*((Math.min(r,t)-Math.max(s,n))/i)}},extend(RevealArea,TGE.Sprite),GameConstructor=function(){GameConstructor.superclass.constructor.call(this),this.assetManager.addSheetImages("required","images/gamescreen0.png"),this.assetManager.addAsset("required",{url:"images/background.jpg",id:"background"}),(TGE.RemoteSettings("fullScreenScratch")||TGE.InCreativeBuilder())&&this.assetManager.addAsset("required",{url:"images/coverImageFull.jpg",id:"coverImageFull"}),TGE.RemoteSettings("fullScreenScratch")&&!TGE.InCreativeBuilder()||this.assetManager.addAsset("required",{url:"images/coverImage.png",id:"coverImage"}),"video"!==TGE.RemoteSettings("hiddenImageType")&&!TGE.InCreativeBuilder()||this.assetManager.addAsset("required",{id:"hiddenVideo",url:"video/hiddenVideo.mp4",attributes:{preload:"canplaythrough"}}),"image"!==TGE.RemoteSettings("hiddenImageType")&&!TGE.InCreativeBuilder()||this.assetManager.addAsset("required",{url:"images/hiddenImage.png",id:"hiddenImage"}),this.assetManager.addSheetImages("engagement","images/engagement.png"),this.addFonts("required",["popup_font","IdleTimer_font"]),this.assetManager.addAsset("2x",{url:"images/background_2x.jpg",id:"background_2x"}),this.addPromoAssets("promo"),this.assetManager.registerAssetLists(["required","engagement","2x","promo"]),this.resizeCanvasToFit=!0,this.allowMultitouch=!1,TGE.FirstGameWindow=GameScreen,this.numberOfReplays=0,this.initialLaunch=!0},GameConstructor.prototype={},extend(GameConstructor,BuilderGame),GameScreen=function(e,t){GameScreen.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.game.gameScreen=this,ELXDisplay.setupELXPreview(this),this.backgroundColor="white"},GameScreen.prototype={setup:function(e){return GameScreen.superclass.setup.call(this,e),"video"===TGE.RemoteSettings("hiddenImageType")&&VideoPlayer.Preload("hiddenVideo"),this.makeObjects(),"none"!==TGE.RemoteSettings("idleTimerMode")&&TGE.RemoteSettings("IdleTimer_doNotRunTimer")&&this.setupIdleTimer(),TGE.RemoteSettings("useLegalText")&&TGE.AdFooter.Create(),"promo"===TGE.RemoteSettings("state")&&this.addPromoScreen("win"),this.game.initialLaunch&&!TGE.InCreativeBuilder()&&(this.game.initialLaunch=!1,TGE.Game.AddEventListener("tgeGameViewable",this._restart.bind(this))),this},setupLogo:function(){var e;this.logo=(new CroppedSprite).setup({image:"gameLogo",visible:!1}),TGE.RemoteSettings("fullScreenScratch")?(this.addChild(this.logo),this.logo.layout=BuilderGame.LayoutHandler.bind(this.logo,{remoteSettingPrefix:"logoFullscreen",layout:{portrait:{scaleToWidth:.8,scaleToHeight:.3,xPosition:.5,yPosition:.1},landscape:{scaleToWidth:.3,scaleToHeight:.5,xPosition:.95,yPosition:.5}},ranges:{size:{portrait:{min:.25,max:1},landscape:{min:.25,max:1}}}})):(this.screenElx.getObject("logoHolder").addChild(this.logo),this.logo.layout=BuilderGame.LayoutHandler.bind(this.logo,{remoteSettingPrefix:"logo",layout:{portrait:{scaleToWidth:.8,scaleToHeight:1,xPosition:.5,yPosition:.5},landscape:{scaleToWidth:1,scaleToHeight:.5,xPosition:.5,yPosition:.5}},ranges:{size:{portrait:{min:.25,max:1},landscape:{min:.25,max:1}}}})),this.logo.visible=!0,TGE.RemoteSettings("logoClickable")&&(e=this.stage.addEventListener("click",this.checkLogoClicked.bind(this)),this.addEventListener("remove",function(){this.stage.removeEventListener("click",e)}.bind(this)))},setupIdleTimer:function(){return this.idleTimer||(this.idleTimer=this.addChild((new IdleTimer).setup({durationOverride:TGE.RemoteSettings("idleTimerNum")})),this.idleTimer)},checkLogoClicked:function(e){var e=new TGE.Vector2(e.stageX,e.stageY);(e=ModuleMath.Geometry.globalToLocal(this.logo,e,!0)).x<=this.logo.width/2&&e.x>=-this.logo.width/2&&e.y<=this.logo.height/2&&e.y>=-this.logo.height/2&&TGE.Game.AppstoreClickthrough()},makeObjects:function(){this.makeScreenElx(),this.setupLogo(),this.makeScratchOffGame()},makeScreenElx:function(){var e={popupGroup:{visible:!1},gameLogo:{className:"CroppedSprite",visible:!1},gameLogoFullscreen:{className:"CroppedSprite",image:"gameLogo",visible:!1}};"video"===TGE.RemoteSettings("hiddenImageType")&&(e.puzzleHolderFull={layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}}),this.screenElx=this.addChild((new ELXDisplay).setup({portrait:{elx:ELX_gameScreen_portrait,override:e},landscape:{elx:ELX_gameScreen_landscape,override:e}}))},makeScratchOffGame:function(){var e=TGE.RemoteSettings("fullScreenScratch")?"puzzleHolderFull":"puzzleHolder";this.scratchOffGame=(new ScratchOffGame).setup({holder:this.screenElx.getObject(e),tutorialTarget:this.screenElx.getObject(e)}),this.scratchOffGame.addEventListener("scratchOffComplete",this.gameOver.bind(this))},particleEffect:function(e,t){var i=TGE.RemoteSettings("scratchParticleScale"),a=TGE.RemoteSettings("scratchLineWidth")/i;this.addChild((new ParticleEffect).setup({particleImage:"scratchParticle",scale:i,startingX:{min:-a/2,max:a/2},startingY:{min:-a/2,max:a/2},x:e,y:t,baseEffect:ParticleEffect.Burst[TGE.RemoteSettings("scratchParticleEffectType")]}))},gameOver:function(e){this.performAction({delay:.5,action:this.addPromoScreen.bind(this,e.reason)})},addPromoScreen:function(e){this.game.waitForAssetList("promo",this._addPromoScreen.bind(this,e))},_addPromoScreen:function(e){this.promoElx||(this.promoElx=PromoBuilder.AddPromoScreen(this,{reason:e,winOnly:!0,onReplay:this.playAgain.bind(this)}))},playAgain:function(){this.game.numberOfReplays+=1,this._restart()},_restart:function(){this.transitionToWindow({windowClass:GameScreen})}},extend(GameScreen,TGE.Window),Tutorial=function(e,t){Tutorial.superclass.constructor.apply(this,arguments),this.game=TGE.Game.GetInstance(),this.gameScreen=this.game.gameScreen},Tutorial.prototype={setup:function(e){return Tutorial.superclass.setup.call(this,e),this.pointerTarget=e.pointerTarget,this.gameplayTarget=e.gameplayTarget,this.addPopup(),this.addPointer(),this.gameplayTarget.addEventListener("revealStarted",this.remove.bind(this)),this},addPointer:function(){var e,t,i;TGE.RemoteSettings("fullScreenScratch");switch(TGE.RemoteSettings("pointerSize")){case"small":e=1.1;break;case"large":e=.95;break;default:e=1}TGE.RemoteSettings("pointerCustomPosition")?(t=function(){return this.getPointerPoints(TGE.RemoteSettings("pointerPositionX"),TGE.RemoteSettings("pointerPositionY"),TGE.RemoteSettings("pointerDirection"))}.bind(this),TGE.RemoteSettings("pointerPreviewPosition")&&(this.pointerCrosshair=this.pointerTarget.addChild((new Crosshair).setup()),this.pointerCrosshair.addEventListener("resize",function(){var e=t();this.x=e.startX,this.y=e.startY}.bind(this.pointerCrosshair))),i=t(),this.pointer=this.gameScreen.addChild((new Pointer).setup({target:this.pointerTarget,offsetX:i.startX,offsetX2:i.endX,offsetY:i.startY,offsetY2:i.endY,pointerImage:"MC_pointer",action:"move",width:175,height:175,duration:e/TGE.RemoteSettings("pointerSpeed")}))):this.pointer=this.gameScreen.addChild((new Pointer).setup({target:this.pointerTarget,offsetX:this.pointerTarget.x-200,offsetX2:this.pointerTarget.x+50,offsetY:this.pointerTarget.y-140,offsetY2:this.pointerTarget.y-60,pointerImage:"MC_pointer",action:"move",width:175,height:175,duration:e/TGE.RemoteSettings("pointerSpeed")}))},getPointerPoints:function(e,t,i){var a=TGE.RemoteSettings("fullScreenScratch")?.5:1,n=.2*a*(this.pointerTarget.width+this.pointerTarget.height),e=this.pointerTarget.x+a*this.pointerTarget.width*(e-.5),t=this.pointerTarget.y+a*this.pointerTarget.height*(t-.5),i=(i-90)*TGE.DEG2RAD;return{startX:e,startY:t,endX:e+n*Math.cos(i),endY:t+n*Math.sin(i)}},addPopup:function(){this.markedForRemoval()||(this.popup=this.gameScreen.addChild((new Popup).setup({backgroundImage:"img_popupBackground",characterIconImage:"img_characterIcon",textDef:"tutorialText",layout:{portrait:{xPercentage:.5,bottomAnchor:.05,scaleToWidth:.8,scaleToHeight:.3},landscape:{leftAnchor:.03,bottomAnchor:.04,scaleToWidth:.4,scaleToHeight:.4}},updateRemoteSettingsInRealTime:!0,showPopupRemoteSetting:"popup_showPopup",useBackgroundImageRemoteSetting:"popup_useBackgroundImage",useCharacterIconRemoteSetting:"popup_useCharacterIcon",characterIconScaleRemoteSetting:"popup_characterIconScale",characterIconPositionRemoteSetting:"popup_characterIconPosition",enterAnimationRemoteSetting:"popup_enterAnimation",exitAnimationRemoteSetting:"popup_exitAnimation"})))},remove:function(){this.pointer.markForRemoval(),this.popup&&this.popup.exit(),this.markForRemoval()}},extend(Tutorial,TGE.DisplayObjectContainer);var PromoBuilder={assetList:null,holder:null,score:null,replayCallback:null,clickthroughCallback:null,video:null,scn:null,_removeFunction:function(){PromoBuilder.scn=null},_videoBuffering:{pb_win:"loading",pb_lose:"loading"},_videoPlaying:!1,VIDEO_ENTRANCE_TWEENS:["None","Fade in","Fall in","Elastic pop","Pop in"],REMOTE_SETTINGS:{VideoPlayer_debug:{type:"boolean",default:!1},promo_type:{type:"string",default:"custom",options:["static","preset","custom"]},promo_noVideo:{type:"boolean",default:!1},promo_style:{type:"string",default:"promoPopupIconSingle"},promo_reason:{type:"string",default:""},promo_videoInterstitial:{type:"boolean",default:!1},promo_dualVideo:{type:"boolean",default:!1},promo_winOnly:{type:"boolean",default:!1},promo_supportScore:{type:"boolean",default:!1},promo_previewBgFocus:{type:"boolean",default:!1},promo_previewEntry:{type:"boolean",default:!1},promo_staticBackground:{type:"string",default:"single",options:["single","dual"]},promo_background_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_portrait_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_portrait_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_portrait_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_landscape_aspectHandling:{type:"string",default:"crop",options:["letterbox","crop"]},promo_background_landscape_xPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_background_landscape_yPosition:{type:"number",default:.5,options:[{min:.15,max:.85,interval:.01}]},promo_bg:{type:"string",default:"full",options:["popup","full","twoBox","none"]},promo_text:{type:"string",default:"body",options:["header","body","none","nofont"]},promo_icon:{type:"boolean",default:!0},promo_art:{type:"boolean",default:!1},promo_buttons:{type:"number",default:1,options:[0,1,2]},promo_buttonActionA:{type:"string",default:"action",options:["action","replay"]},promo_buttonActionB:{type:"string",default:"replay",options:["action","replay"]},promo_fullClickAction:{type:"string",default:"none",options:["none","action","replay"]},promo_fullClick:{type:"boolean",default:!1},promo_testVideo:{type:"boolean",default:!1},promo_video:{type:"boolean",default:!1},promo_video_loop:{type:"boolean",default:!1},promo_video_videoUpload:{type:"boolean",default:!1},promo_video_previewVideoCropping:{type:"boolean",default:!1},promo_video_noCropping:{type:"boolean",default:!0},promo_video_useSafeZone:{type:"boolean",default:!0},promo_video_zoomedPreview:{type:"boolean",default:!1},promo_video_location:{type:"number",default:.5,options:[{min:0,max:1,interval:.001}]},promo_video_safeZoneX:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},promo_video_safeZoneY:{type:"number",default:.5,options:[{min:.1,max:.9,interval:.01}]},promo_video_safeZoneWidth:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},promo_video_safeZoneHeight:{type:"number",default:.75,options:[{min:.2,max:1,interval:.01}]},promo_video_blurAmount:{type:"number",default:100,options:[{min:60,max:140,interval:1}]},promo_video_letterboxStyle:{type:"string",default:"blurred",options:["solid","blurred"]},promo_video_audioDuringLoop:{type:"boolean",default:!0},promo_video_volume:{type:"number",default:1,options:[{min:0,max:1,interval:.01}]},promo_video_orientationLock:{type:"boolean",default:!1},promo_video_mutePositioning:{type:"boolean",default:!1},promo_video_muteX:{type:"number",default:.75,options:[{min:.5,max:2.25,interval:.01}]},promo_video_muteY:{type:"number",default:.75,options:[{min:.5,max:2.25,interval:.01}]},promo_muteStyle:{type:"string",default:"none",options:["none","filled","circle","circleFilled"]},promo_muteColor:{type:"string",default:"#ffffff"},promo_muteThickness:{type:"number",default:.5,options:[{min:.1,max:1,interval:.1}]},promo_custom_style:{type:"string",default:"fullscreen",options:["popup","fullscreen","video"]},promo_custom_useDifferentLayouts:{type:"boolean",default:!1},promo_custom_buttonA_portrait_size:{type:"number",default:.08,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_portrait_yPosition:{type:"number",default:.75,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_landscape_size:{type:"number",default:.08,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_landscape_yPosition:{type:"number",default:.75,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonA_buttonType:{type:"number",default:0},promo_custom_buttonA_nativeTheme:{type:"string",default:"light",options:["color","light"]},promo_custom_buttonB_portrait_size:{type:"number",default:.08,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_portrait_yPosition:{type:"number",default:.88,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_landscape_size:{type:"number",default:.08,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_landscape_yPosition:{type:"number",default:.88,options:[{min:0,max:1,interval:.01}]},promo_custom_buttonB_buttonType:{type:"number",default:0},promo_custom_buttonB_nativeTheme:{type:"string",default:"light",options:["color","light"]},promo_custom_titleText_enabled:{type:"boolean",default:!1},promo_custom_titleText_editMode:{type:"boolean",default:!1},promo_custom_titleText_portrait_wrapWidth:{type:"number",default:.6,options:[{min:.25,max:1,interval:.01}]},promo_custom_titleText_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_titleText_portrait_yPosition:{type:"number",default:.05,options:[{min:0,max:1,interval:.01}]},promo_custom_titleText_landscape_wrapWidth:{type:"number",default:.6,options:[{min:.25,max:1,interval:.01}]},promo_custom_titleText_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_titleText_landscape_yPosition:{type:"number",default:.05,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_enabled:{type:"boolean",default:!0},promo_custom_bodyText_editMode:{type:"boolean",default:!1},promo_custom_bodyText_portrait_wrapWidth:{type:"number",default:.8,options:[{min:.25,max:1,interval:.01}]},promo_custom_bodyText_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_portrait_yPosition:{type:"number",default:.57,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_landscape_wrapWidth:{type:"number",default:.8,options:[{min:.25,max:1,interval:.01}]},promo_custom_bodyText_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_bodyText_landscape_yPosition:{type:"number",default:.57,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_enabled:{type:"boolean",default:!0},promo_custom_smallImage_roundness:{type:"number",default:.25,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_borderWidth:{type:"number",default:0,options:[{min:0,max:30,interval:.1}]},promo_custom_smallImage_portrait_size:{type:"number",default:.19,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_portrait_yPosition:{type:"number",default:.31,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_landscape_size:{type:"number",default:0,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_smallImage_landscape_yPosition:{type:"number",default:.31,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_enabled:{type:"boolean",default:!1},promo_custom_largeImage_portrait_size:{type:"number",default:.4,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_portrait_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_portrait_yPosition:{type:"number",default:0,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_landscape_size:{type:"number",default:.4,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_landscape_xPosition:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_largeImage_landscape_yPosition:{type:"number",default:0,options:[{min:0,max:1,interval:.01}]},promo_custom_backgroundStyle:{type:"string",default:"overlay",options:["none","image","overlay","video"]},promo_custom_showPopupImage:{type:"boolean",default:!0},promo_custom_fullscreen_editMode:{type:"boolean",default:!1},promo_custom_fullscreen_portrait_height:{type:"number",default:1.8,options:[{min:1,max:2,interval:.1}]},promo_custom_fullscreen_landscape_width:{type:"number",default:1.8,options:[{min:1,max:2,interval:.1}]},promo_custom_fullscreen_both_ratio:{type:"number",default:.2,options:[{min:-1,max:1,interval:.1}]},promo_custom_popup_portrait_size:{type:"number",default:.8,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_portrait_xPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_portrait_yPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_portrait_orientation:{type:"string",default:"none",options:["none","left","right"]},promo_custom_popup_landscape_size:{type:"number",default:.8,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_landscape_xPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_landscape_yPercentage:{type:"number",default:.5,options:[{min:0,max:1,interval:.01}]},promo_custom_popup_landscape_orientation:{type:"string",default:"none",options:["none","left","right"]},promo_tween_container_entrance:{type:"string",default:"Fade in",options:["None","Fade in","Slide in","Bounce in","Fall in","Elastic pop","Pop in","Spin in"]},promo_tween_container_idle:{type:"string",default:"None",options:["None","Pulse","Wiggle","Bounce","Hover","Periodic Wiggle","Periodic Bounce","Periodic Shake"]}},SOURCE:["js/game/utilities/PBCrosshair.js","js/game/utilities/PBLayoutHandler.js","js/game/utilities/PBLayoutHelpers.js","js/game/utilities/PBText.js","js/game/utilities/PBMuteButton.js","js/game/utilities/PBVideoPlayer.js","js/game/utilities/PBTweens.js","js/game/elx/ELX_promoFullVideoNone.js","js/game/elx/ELX_promoSingleImage.js","js/game/elx/ELX_promoDualImage.js","js/game/ui/PBFullscreenContainer.js","js/game/ui/PBPopupContainer.js","js/game/ui/PBTextContainer.js","js/game/ui/PBCustomPromoScreen.js","js/game/ui/PBElxPromoScreen.js"],REQUIRED_SOURCE:["js/game/utilities/PBCroppedSprite.js","js/BuilderConfig.js"],IMAGE_COMPRESSION:{"assets/images/promoCustom.png":{type:"tinypng"}},ALL_ASSETS:{"assets/images/promoPopupIcon.png":{type:"tinypng"},"assets/images/promoFullImage.png":{type:"tinypng"},"assets/images/promoCustom.png":{type:"tinypng"},"assets/images/promoCustomPopup.png":{type:"tinypng"},"assets/images/img_promoBackground.jpg":{type:"tinypng"},"assets/images/img_promoBg_portrait.jpg":{type:"tinypng"},"assets/images/img_promoBg_landscape.jpg":{type:"tinypng"},"assets/video/portraitCountdown.mp4":{type:"video"},"assets/video/pb_win.mp4":{type:"video"},"assets/video/pb_lose.mp4":{type:"video"}},promoData:{promoFullVideoNone:{elx:"ELX_promoFullVideoNone",orientation:!0},promoStatic_single:{elx:"ELX_promoSingleImage",assets:[{id:"img_promo_background",url:"images/img_promoBackground.jpg"}]},promoStatic_dual:{elx:"ELX_promoDualImage",orientation:!0,assets:[{id:"img_promo_background_portrait",url:"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:"images/img_promoBg_landscape.jpg"}]}},IsVideoStyle:function(){return"custom"===TGE.RemoteSettings("promo_type")&&TGE.RemoteSettings("promo_video")},UseDualVideo:function(){return(this.IsVideoStyle()||TGE.RemoteSettings("promo_videoInterstitial"))&&TGE.RemoteSettings("promo_dualVideo")&&!TGE.RemoteSettings("promo_winOnly")},HasButtonFont:function(){var t=!1;if("custom"===TGE.RemoteSettings("promo_type"))for(var e=TGE.RemoteSettings("promo_buttons");0<=--e;)t=t||TGE.RemoteSettings("promo_custom_button"+String.fromCharCode(65+e)+"_buttonType");return t},OnVideoPlaying:function(t){t.currentTarget.removeEventListener("playing",PromoBuilder.OnVideoPlaying),PromoBuilder._videoPlaying=!0},PlayVideo:function(t,e){t&&(e.visible=!1,t.visible=!1,TGE.Game.AddEventListener("tgeGameViewable",this._playVideo.bind(this,t,e)))},_playVideo:function(t,e){var o=t.video;function i(){o.removeEventListener("playing",i),t.visible=!0,e.visible=!0}o.addEventListener("playing",i),PromoBuilder._videoPlaying&&i(),t.play()},_shouldBeMuted:function(){if(window.VideoPlayerGlobals)return window.VideoPlayerGlobals.muted},AddPromoAssets:function(e){var t,o,i=TGE.Game.GetInstance(),n=i.assetManager;for(o in this.assetList=e,PromoBuilder.promoType=TGE.RemoteSettings("promo_type"),PromoBuilder.promoText=TGE.RemoteSettings("promo_text"),this.REMOTE_SETTINGS)TGE.RemoteSettings.GetSettings[o]||TGE.RemoteSettings.AddSetting(this.REMOTE_SETTINGS[o]);if(!1===GameConfig.PROMO_BUILDER_VIDEO&&(TGE.RemoteSettings.GetSettings().promo_noVideo.value=!0),TGE.InCreativeBuilder())a(e,"promoPopupIcon.png"),a(e,"promoFullImage.png"),a(e,"promoCustom.png"),a(e,"promoCustomPopup.png"),n.addAssets(e,[{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"},{id:"img_promo_background_portrait",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_landscape.jpg"}]),function(){var t=[];"nofont"===TGE.RemoteSettings("promo_text")&&!TGE.InCreativeBuilder()||t.push("txt_font_primary");"body"!==TGE.RemoteSettings("promo_text")&&!TGE.InCreativeBuilder()||t.push("txt_font_secondary");i.addFonts(e,t)}(),TGE.RemoteSettings("promo_noVideo")||n.addAssets(e,[{id:"video_ad",url:GameConfig.PROMO_ASSET_PATH+"video/portraitCountdown.mp4"},{id:"pb_win",url:GameConfig.PROMO_ASSET_PATH+"video/pb_win.mp4"},{id:"pb_lose",url:GameConfig.PROMO_ASSET_PATH+"video/pb_lose.mp4"}]);else switch(TGE.RemoteSettings("promo_type")){case"static":!function(){"dual"===TGE.RemoteSettings("promo_staticBackground")?n.addAssets(e,[{id:"img_promo_background_portrait",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_portrait.jpg"},{id:"img_promo_background_landscape",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBg_landscape.jpg"}]):n.addAsset(e,{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"});TGE.RemoteSettings("promo_videoInterstitial")&&s()}();break;case"custom":!function(){"video"!==TGE.RemoteSettings("promo_custom_style")&&!TGE.RemoteSettings("promo_videoInterstitial")||s();"popup"===TGE.RemoteSettings("promo_custom_style")&&a(e,"promoCustomPopup.png");"fullscreen"===TGE.RemoteSettings("promo_custom_style")&&n.addAsset(e,{id:"img_promo_background",url:GameConfig.PROMO_ASSET_PATH+"images/img_promoBackground.jpg"});(TGE.RemoteSettings("promo_custom_smallImage_enabled")||0<TGE.RemoteSettings("promo_buttons"))&&a(e,"promoCustom.png");TGE.RemoteSettings("promo_custom_largeImage_enabled")&&a(e,"promoFullImage.png");var t=[];(TGE.RemoteSettings("promo_custom_titleText_enabled")||0<TGE.RemoteSettings("promo_buttons"))&&GameConfig.TEXT_DEFS.txt_font_primary.fontFamily!==TGE.NativeSystemFont&&t.push("txt_font_primary");TGE.RemoteSettings("promo_custom_bodyText_enabled")&&GameConfig.TEXT_DEFS.txt_font_secondary.fontFamily!==TGE.NativeSystemFont&&t.push("txt_font_secondary");t.length&&i.addFonts(e,t)}()}if(window.__isLocal){for(t=0;t<this.REQUIRED_SOURCE.length;++t)n.addAsset("required",{type:"script",url:"../PromoBuilder/"+this.REQUIRED_SOURCE[t]});for(t=0;t<this.SOURCE.length;++t)n.addAsset(e,{type:"script",url:"../PromoBuilder/"+this.SOURCE[t]})}function s(){var t={playing:PromoBuilder.OnVideoPlaying};PromoBuilder.UseDualVideo()?(n.addAsset(e,{id:"pb_win",url:GameConfig.PROMO_ASSET_PATH+"video/pb_win.mp4",listeners:t}),n.addAsset(e,{id:"pb_lose",url:GameConfig.PROMO_ASSET_PATH+"video/pb_lose.mp4",listeners:t})):n.addAsset(e,{id:"video_ad",url:GameConfig.PROMO_ASSET_PATH+"video/portraitCountdown.mp4",listeners:t})}function a(t,e){var o=e.slice(0,-4);window.__isLocal?n.addSheetImages(t,GameConfig.PROMO_ASSET_PATH+"images/"+e,"../PromoBuilder/js/game/sheets/"+o+".js"):n.addSheetImages(t,GameConfig.PROMO_ASSET_PATH+"images/"+e)}},AddPromoScreen:function(t,e){return this.holder=t.addChild((new TGE.DisplayObjectContainer).setup({layout:function(t){this.registrationX=0,this.registrationY=0,this.width=this.parent.width,this.height=this.parent.height,this.x=this.parent.width*-this.parent.registrationX,this.y=this.parent.height*-this.parent.registrationY}})),this.createPromoHolder(this.holder),TGE.Game.GetInstance().waitForAssetList(PromoBuilder.assetList,PromoBuilder._addPromoScreen.bind(PromoBuilder,this.promoObjectsHolder,e)),this.holder.addEventListener("resize",this.containerResize.bind(this)),(!TGE.RemoteSettings("promo_videoInterstitial")||this.IsVideoStyle()||TGE.RemoteSettings("promo_testVideo")||TGE.InCreativeBuilder()&&"promo"===TGE.RemoteSettings("state"))&&this.createTweens(),this.holder},containerResize:function(t){void 0!==this.promoObjectsHolder&&(this.promoObjectsHolder.width=this.promoObjectsHolder.parent.width,this.promoObjectsHolder.height=this.promoObjectsHolder.parent.height),void 0!==this.backgroundElementsContainer&&(this.backgroundElementsContainer.width=this.backgroundElementsContainer.parent.width,this.backgroundElementsContainer.height=this.backgroundElementsContainer.parent.height)},createPromoHolder:function(t){switch(this.container=t,this.tx=.5,this.ty=.5,this.scaleToWidth=1,this.scaleToHeight=1,this.startRotation=0,this.startAlpha=1,this.selectedTween=TGE.RemoteSettings("promo_tween_container_entrance"),this.IsVideoStyle()&&PromoBuilder.VIDEO_ENTRANCE_TWEENS.indexOf(this.selectedTween)<0&&(this.selectedTween="Fade in"),"promo"!==TGE.RemoteSettings("state")||TGE.RemoteSettings("promo_previewEntry")||(this.selectedTween="None"),this.selectedTween){case"None":this.scaleToWidth=1,this.scaleToHeight=1,this.startAlpha=1;break;case"Slide in":this.tx=-.5,this.startAlpha=0;break;case"Bounce in":this.scaleToWidth=1,this.scaleToHeight=1,this.startAlpha=0,this.ty=-.5;break;case"Fall in":this.scaleToWidth=1.5,this.scaleToHeight=1.5,this.startAlpha=0;break;case"Fade in":this.tween=TGE.Tween.Sine.Out,this.startAlpha=0;break;case"Pop in":this.tween=TGE.Tween.Exponential.Out,this.scaleToWidth=0,this.scaleToHeight=0,this.startAlpha=0;break;case"Spin in":this.scaleToWidth=0,this.scaleToHeight=0,this.startRotation=-540,this.startAlpha=0;break;case"Elastic pop":this.entranceTween=TGE.Tween.Elastic.Out,this.scaleToWidth=.8,this.scaleToHeight=.8,this.startAlpha=0}this.container.parent,this.backgroundElementsContainer=this.container.addChild((new TGE.DisplayObjectContainer).setup({layout:{xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:1},width:this.container.width,height:this.container.height})),this.staticOverlayBackground()&&this.createBackground(this.backgroundElementsContainer),this.promoObjectsHolder=this.container.addChild((new TGE.DisplayObjectContainer).setup({layout:{xPercentage:this.tx,yPercentage:this.ty,registrationX:.5,registrationY:.5,scaleToWidth:this.scaleToWidth,scaleToHeight:this.scaleToHeight},rotation:this.startRotation,width:this.container.width,height:this.container.height,alpha:this.startAlpha}))},_addPromoScreen:function(t,e){PromoBuilder.scn&&(TGE.Debug.Log(TGE.Debug.LOG_ERROR,"Attempting to add another promo screen "+(e.reason?"for '"+e.reason+"' ":"")+"when one already exists"),PromoBuilder.scn.removeEventListener("remove",PromoBuilder._removeFunction)),this._removeInterstitialVideo(),TGE.InCreativeBuilder()&&CB.freshGameConfig&&!CB.freshGameConfig.EXCLUDE_FROM_COMPRESSION&&(CB.freshGameConfig.EXCLUDE_FROM_COMPRESSION=[],CB.persistGameConfig()),e=TGE.DeepClone(e),this._setupState(e),this._setupVideoAsset(e),TGE.InCreativeBuilder()&&(this.IsVideoStyle()?CB.changeSetting("promo_videoInterstitial",!1,!0):void 0!==(o=CB.stateSettings.promo_videoInterstitial)&&CB.changeSetting("promo_videoInterstitial",o,!0),CB.changeSetting("promo_supportScore",void 0!==e.score,!0),CB.changeSetting("promo_winOnly",e.winOnly||!1,!0));var o="custom"!==TGE.RemoteSettings("promo_type")||TGE.RemoteSettings("promo_testVideo")?PBElxPromoScreen:PBCustomPromoScreen,o=t.addChild((new o).setup(e));return(PromoBuilder.scn=o).addEventListener("remove",PromoBuilder._removeFunction),o.performAction({delay:"number"==typeof e.delayBeforeClickable?e.delayBeforeClickable:1,action:this.addListeners.bind(this)}),!TGE.RemoteSettings("promo_videoInterstitial")||this.IsVideoStyle()||TGE.RemoteSettings("promo_testVideo")||this._addInterstitialVideo(this.backgroundElementsContainer,e,"promo"!==TGE.RemoteSettings("state")||!TGE.InCreativeBuilder()),o},_setupState:function(t){this.score=t.score,this.replayCallback=t.onReplay,this.clickthroughCallback=t.onClickthrough;var e=t.reason||"win";if("promo"===TGE.RemoteSettings("state")&&(e=TGE.RemoteSettings("promo_reason")||e,this.score=TGE.InCreativeBuilder()?12345:0),"none"!==e&&TGE.Analytics.Completion(e),t.lose=!t.winOnly&&"string"==typeof e&&0===e.indexOf("lose"),TGE.InCreativeBuilder()){var o,i,e=TGE.RemoteSettings("promo_type");if((o="custom"===e?TGE.RemoteSettings("promo_custom_titleText_enabled")?TGE.RemoteSettings("promo_custom_bodyText_enabled")?"body":"header":TGE.RemoteSettings("promo_custom_bodyText_enabled")?"body":0<TGE.RemoteSettings("promo_buttons")?"none":"nofont":o)&&o!==TGE.RemoteSettings("promo_text")&&CB.changeSetting("promo_text",o,!0),PromoBuilder.promoType!==e&&"static"!==e){switch(PromoBuilder.promoType=e){case"preset":i=TGE.RemoteSettings("promo_style");break;case"custom":i="promo_custom_style_"+TGE.RemoteSettings("promo_custom_style")}e=GameConfig.THEME_DEFS[i];e&&CB.applyPatches(e)}PromoBuilder.promoText!==TGE.RemoteSettings("promo_text")&&(PromoBuilder.promoText=TGE.RemoteSettings("promo_text"),CB.saveData("_fonts",{}),CB.persistAllChanges())}},_setupVideoAsset:function(t){var e;t.videoAsset="video_ad",PromoBuilder.UseDualVideo()&&(t.videoAsset=t.lose?"pb_lose":"pb_win",this._videoBuffering[t.videoAsset]="played",e=t.lose?"pb_win":"pb_lose","loading"!==this._videoBuffering[e]||(t=TGE.Game.GetInstance().assetManager.getAsset(e))&&(t.setAttribute("preload","none"),t.load(),this._videoBuffering[e]="suspended"))},_addInterstitialVideo:function(t,e,o){var i,n=this.video=t.addChild((new PBVideoPlayer).setup({assetId:e.videoAsset,colorDef:"blurred"===TGE.RemoteSettings("promo_video_letterboxStyle")?void 0:"promo_video_background",backgroundColor:"blurred"===TGE.RemoteSettings("promo_video_letterboxStyle")?"black":void 0,fullscreen:!0,muted:PromoBuilder._shouldBeMuted(),autoplay:"none",layout:{xPercentage:.5,yPercentage:.5,matchWidth:1,matchHeight:1}}));o?((i=this).promoObjectsHolder.visible=!1,n.addEventListener("complete",function(){n.sendToBack(),i.promoObjectsHolder.visible=!0,i.doEntranceTween()}),PromoBuilder.PlayVideo(n,this.scn),n.mouseEnabled=!0):(n.sendToBack(),n.setLocation(1))},_removeInterstitialVideo:function(){this.video&&(this.video.setLocation(0),this.video.removeFromScene(),this.video=null)},addListeners:function(){var t=PromoBuilder.scn;t?(t._addButtonListener("A"),t._addButtonListener("B"),t.addEventListener("click",this.onFullscreenClick.bind(t))):console.error("PB: can't add click listeners")},onFullscreenClick:function(t){if(t.y>.1*this.height){var e=TGE.RemoteSettings("promo_fullClickAction");if("static"!==TGE.RemoteSettings("promo_type"))switch(TGE.RemoteSettings("promo_buttons")){case 1:if(TGE.RemoteSettings("promo_fullClick")){e=TGE.RemoteSettings("promo_buttonActionA");break}case 2:e=null}"replay"===e&&PromoBuilder.onReplay(),"action"===e&&PromoBuilder.onClickthrough()}},onClickthrough:function(){this.clickthroughCallback?this.clickthroughCallback():TGE.Game.AppstoreClickthrough()},onReplay:function(){for(id in this._removeInterstitialVideo(),this._videoBuffering){var t;"suspended"===this._videoBuffering[id]&&((t=TGE.Game.GetInstance().assetManager.getAsset(id)).setAttribute("preload","auto"),t.load(),this._videoBuffering[id]="loading")}TGE.Analytics.Replay(),this.replayCallback&&this.replayCallback()},staticOverlayBackground:function(){return("popup"===TGE.RemoteSettings("promo_bg")||"twoBox"===TGE.RemoteSettings("promo_bg"))&&"static"!=TGE.RemoteSettings("promo_type")||"overlay"===TGE.RemoteSettings("promo_custom_backgroundStyle")&&"full"===TGE.RemoteSettings("promo_bg")&&"custom"===TGE.RemoteSettings("promo_type")}},PromoConfig={COLOR_DEFS:{promo_video_background:"#000",promo_background_letterbox:"#000",promo_background_portrait_letterbox:"#000",promo_background_landscape_letterbox:"#000",promo_custom_smallImage_borderColor:"#fff",promo_custom_popupOverlayColor:"rgba(0,0,0,0.7)"},ELX_DEFS:{},TEXT_DEFS:{txt_font_primary:{fontFamily:"Native System Font"},txt_font_secondary:{fontFamily:"Native System Font"},txt_promo_body:{textDef:"txt_font_secondary",fontSize:40,textColor:"#ffffff",hAlign:"center",lineSpacing:.2,strokeColor:"#000000",strokeWidth:0},txt_promo_bodyA:{textDef:"txt_promo_body",text:"Lorem ipsum dolor sit amet, consectetur."},txt_promo_bodyB:{textDef:"txt_promo_body",text:"Lorem ipsum dolor sit amet, consectetur."},txt_promo_header:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:80,textColor:"#ffffff",hAlign:"center",lineSpacing:.2,strokeColor:"#000000",strokeWidth:0},txt_promo_headerA:{textDef:"txt_promo_header",text:"Nice Job!"},txt_promo_headerB:{textDef:"txt_promo_header",text:"Nice Try!"},txt_promo_buttonA:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:76,textColor:"#ffffff",strokeColor:"#000000",strokeWidth:0,text:"INSTALL"},txt_promo_buttonB:{textDef:"txt_font_primary",fontWeight:"bold",fontSize:76,textColor:"#ffffff",strokeColor:"#000000",strokeWidth:0,text:"REPLAY"}}};TGE.AssetManager.SpriteSheets.promoFullImage={img_promo_artA:[1,1,510,510],img_promo_artB:[1,512,510,510]},TGE.AssetManager.SpriteSheets.promoPopupIcon={img_promo_popupBackground:[1,1,700,700]},TGE.AssetManager.SpriteSheets.promoCustom={promo_custom_buttonA:[1,322,600,150],promo_custom_buttonB:[1,473,600,150],promo_custom_particleA:[642,1,100,100],promo_custom_particleB:[743,1,100,100],promo_custom_smallImage:[1,1,640,320]},TGE.AssetManager.SpriteSheets.promoCustomPopup={promo_custom_popupBackground:[1,1,700,700]};var ELX_promoFullVideoNone={landscape:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.5247,scaleToHeight:.9333,rightAnchor:.476,yPercentage:.5}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:1334,height:750,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}}],elxVersion:"1.4.0"},portrait:{childObjects:[{name:"promo_mainGroup",className:"TGE.DisplayObjectContainer",width:700,height:700,layout:{scaleToWidth:.9333,scaleToHeight:.5247,xPercentage:.5,topAnchor:.4753}},{name:"promo_videoContainerFull",className:"TGE.DisplayObjectContainer",width:750,height:1334,backgroundColor:"#44464F",layout:{matchWidth:1,matchHeight:1,xPercentage:.5,yPercentage:.5}}],elxVersion:"1.4.0"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoFullVideoNone_landscape=(ELX_STORAGE.ELX_promoFullVideoNone=ELX_promoFullVideoNone).landscape,ELX_promoFullVideoNone_portrait=ELX_promoFullVideoNone.portrait,ELX_promoSingleImage={childObjects:[{name:"promo_background_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_letterbox",layout:"match"},{name:"img_promo_background",className:"PBCroppedSprite",image:"img_promo_background",layout:{xPercentage:.5,yPercentage:.5,scaleToHeight:1,scaleToWidth:1,useMinScale:!1}}],elxVersion:"custom"},ELX_promoDualImage={portrait:{childObjects:[{name:"promo_background_portrait_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_portrait_letterbox",layout:"match"},{name:"img_promo_background_portrait",className:"PBCroppedSprite",image:"img_promo_background_portrait",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5,useMinScale:!1}}],elxVersion:"custom"},landscape:{childObjects:[{name:"promo_background_landscape_letterbox",className:"TGE.DisplayObjectContainer",colorDef:"promo_background_landscape_letterbox",layout:"match"},{name:"img_promo_background_landscape",className:"PBCroppedSprite",image:"img_promo_background_landscape",layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5,useMinScale:!1}}],elxVersion:"custom"}};window.ELX_STORAGE=window.ELX_STORAGE||{};var ELX_promoDualImage_portrait=(ELX_STORAGE.ELX_promoDualImage=ELX_promoDualImage).portrait,ELX_promoDualImage_landscape=ELX_promoDualImage.landscape,PBCroppedSprite=function(){PBCroppedSprite.superclass.constructor.apply(this,arguments)};PBCroppedSprite.prototype={setup:function(t){return this._elxListener=null,PBCroppedSprite.superclass.setup.call(this,t),this},setSize:function(t,e){PBCroppedSprite.superclass.setSize.call(this,t,e),this._elxListener||(this._elxListener=this.addEventListener("elxchanged",this.setSize.bind(this,t,e)))}},extend(PBCroppedSprite,TGE.Sprite),PBCrosshair=function(){PBCrosshair.superclass.constructor.apply(this,arguments),PropertyCombine.setDefaultParams(this,{width:64,height:64,emptyCenterSize:28,lineWidth:4,outsideStroke:2,strokeColorInside:"#ffffff",strokeColorOutside:"#000000",registrationX:.5,registrationY:.5,capStyle:"square"})},PBCrosshair.prototype={setup:function(t){return PropertyCombine.setupInstance(this,t,PBCrosshair.superclass.setup),this.addEventListener("drawbegin",this.onDrawBegin.bind(this)),this},onDrawBegin:function(t){var e=this.width/2,o=this.height/2,i=(this.width-this.emptyCenterSize)/2,n=(this.height-this.emptyCenterSize)/2,t=t.canvasContext;t.save(),t.lineCap=this.capStyle,t.beginPath(),t.moveTo(0,o),t.lineTo(i,o),t.moveTo(this.width,o),t.lineTo(this.width-i,o),t.moveTo(e,0),t.lineTo(e,n),t.moveTo(e,this.height),t.lineTo(e,this.height-n),t.lineWidth=this.lineWidth+2*this.outsideStroke,t.strokeStyle=this.strokeColorOutside,t.stroke(),t.lineWidth=this.lineWidth,t.strokeStyle=this.strokeColorInside,t.stroke(),t.closePath(),t.restore()}},extend(PBCrosshair,TGE.DisplayObjectContainer);var PBLayoutHandler=function(t,e){var r=t.remoteSettingPrefix||this.image,o=this.stage.isLandscape()?"landscape":"portrait",i=TGE.DeepClone(t.layout[o]||t.layout);function l(t,e,o){o=e+"_"+o+"_"+t;return TGE.RemoteSettings.HasSetting(o)?o:(o=e+"_"+t,TGE.RemoteSettings.HasSetting(o)?o:null)}function n(t,e,o,i,n){var n=n.ranges&&n.ranges[e],n=n?n[i]||n:"size"===e?{min:.5,max:2}:{min:0,max:1},i=(i=l(e,r,i=i))?TGE.RemoteSettings(i):.5,s=null;null!=(i=null==i&&"size"===e?.5:i)&&(s=TGE.Math.Lerp(n.min,n.max,i));for(var a=o.length;0<=--a;)t.hasOwnProperty(o[a])&&("size"===e?t[o[a]]*=s:t[o[a]]=s)}n(i,"size",["scaleToWidth","matchWidth","scaleToHeight","matchHeight"],o,t),n(i,"xPosition",["xPosition","xPercentage","leftAnchor","rightAnchor"],o,t),n(i,"yPosition",["yPosition","yPercentage","topAnchor","bottomAnchor"],o,t),void 0!==i.xPosition||void 0!==i.yPosition?(this._resize(i,e),o=i.xOffset||0,t=i.yOffset||0,"number"==typeof i.xPosition&&(this.x=this.parent.width*i.xPosition-(i.xPosition-.5)*this.width*this.scaleX+(this.registrationX-.5)*this.width*this.scaleX-this.parent.width*this.parent.registrationX+o*this.parent.width),"number"==typeof i.yPosition&&(this.y=this.parent.height*i.yPosition-(i.yPosition-.5)*this.height*this.scaleY+(this.registrationY-.5)*this.height*this.scaleY-this.parent.height*this.parent.registrationY+t*this.parent.height)):this._resize(i,e)},PBFullscreenControls={GetFocusLayoutFunction:function(e){return function(){var t={scaleToWidth:1,scaleToHeight:1,useMinScale:!1,xFocus:TGE.RemoteSettings(e+"_xPosition"),yFocus:TGE.RemoteSettings(e+"_yPosition")};PBLayoutHelpers.scaling.setScaleTo.call(this,t),PBLayoutHelpers.positioning.setFocus.call(this,t),PBLayoutHelpers.positioning.ignoreParentRegistration.call(this),PBLayoutHelpers.positioning.ignoreSelfRegistration.call(this)}},GetFocusCrosshairLayoutFunction:function(e,o){return function(){var t=new TGE.Point(TGE.RemoteSettings(e+"_xPosition")*o.width,TGE.RemoteSettings(e+"_yPosition")*o.height);PBLayoutHelpers.positioning.setToDisplayObjectPosition.call(this,o,t),PBLayoutHelpers.positioning.ignoreParentRegistration.call(this)}}},PBLayoutHelpers={setLayout:function(t){PBLayoutHelpers.scaling.setScaleTo.call(this,t),PBLayoutHelpers.scaling.setMatch.call(this,t),PBLayoutHelpers.scaling.setBaseScale.call(this),PBLayoutHelpers.positioning.setPercentage.call(this,t),PBLayoutHelpers.positioning.setAnchor.call(this,t),PBLayoutHelpers.positioning.setPosition.call(this,t),PBLayoutHelpers.positioning.setFocus.call(this,t),PBLayoutHelpers.positioning.applyOffset.call(this,t),t.ignoreRegistrations&&(PBLayoutHelpers.positioning.ignoreParentRegistration.call(this),PBLayoutHelpers.positioning.ignoreSelfRegistration.call(this))},scaling:{setScaleTo:function(t){var e,o=e=!1===t.useMinScale?0:Number.MAX_VALUE;"number"==typeof t.scaleToWidth&&(o=this.parent.width/this.width*t.scaleToWidth),"number"==typeof t.scaleToHeight&&(e=this.parent.height/this.height*t.scaleToHeight),this.scale=!1===t.useMinScale?Math.max(Math.abs(o),Math.abs(e)):Math.min(Math.abs(o),Math.abs(e)),this.scaleX*=o<0?-1:1,this.scaleY*=e<0?-1:1},setSubsection:function(t){var e=this.parent.width/this.width,o="number"==typeof t.subsectionWidth?e/t.subsectionWidth:e,i=this.parent.height/this.height,t="number"==typeof t.subsectionHeight?i/t.subsectionHeight:i;this.scale=Math.max(Math.min(o,i),Math.min(t,e))},setMatch:function(t){var e="number"==typeof t.matchWidth,o="number"==typeof t.matchHeight;e&&o&&(this.scale=1),e&&(this.width=this.parent.width*t.matchWidth/this.scaleX),o&&(this.height=this.parent.height*t.matchHeight/this.scaleY)},setFixedAreaScaleTo:function(t){var e="number"==typeof t.totalArea?t.totalArea:25e4,o=t.scaleToWidth*this.parent.width/(t.scaleToHeight*this.parent.height);this.width=Math.sqrt(e*o),this.height=this.width/o;e=this.parent.width/this.width*t.scaleToWidth,o=this.parent.height/this.height*t.scaleToHeight;this.scale=!1===t.useMinScale?Math.max(Math.abs(e),Math.abs(o)):Math.min(Math.abs(e),Math.abs(o)),this.scaleX*=e<0?-1:1,this.scaleY*=o<0?-1:1},ignoreParentScaleTo:function(t){var e="number"==typeof t.totalArea?t.totalArea:25e4,o=t.scaleToWidth*this.parent.width/(t.scaleToHeight*this.parent.height);this.width=Math.sqrt(e*o),this.height=this.width/o;e=this.parent.width/this.width*t.scaleToWidth,o=this.parent.height/this.height*t.scaleToHeight;this.scale=!1===t.useMinScale?Math.max(Math.abs(e),Math.abs(o)):Math.min(Math.abs(e),Math.abs(o)),this.scaleX*=e<0?-1:1,this.scaleY*=o<0?-1:1},setBaseScale:function(){this._mBaseScaleX=this.scaleX,this._mBaseScaleY=this.scaleY}},positioning:{setPercentage:function(t){"number"==typeof t.xPercentage&&(this.x=t.xPercentage*this.parent.width),"number"==typeof t.yPercentage&&(this.y=t.yPercentage*this.parent.height)},setAnchor:function(t){var e={};"number"==typeof t.topAnchor&&(e.yPercentage=t.yPosition,e.yOffset=.5),"number"==typeof t.bottomAnchor&&(e.yPercentage=t.yPosition,e.yOffset=-.5),"number"==typeof t.leftAnchor&&(e.xPercentage=t.xPosition,e.xOffset=.5),"number"==typeof t.rightAnchor&&(e.xPercentage=t.xPosition,e.xOffset=-.5),PBLayoutHelpers.positioning.setPercentage.call(this,e),PBLayoutHelpers.positioning.applyOffset.call(this,e)},setPosition:function(t){var e={};"number"==typeof t.xPosition&&(e.xPercentage=t.xPosition,e.xOffset=-1*(t.xPosition-.5)),"number"==typeof t.yPosition&&(e.yPercentage=t.yPosition,e.yOffset=-1*(t.yPosition-.5)),PBLayoutHelpers.positioning.setPercentage.call(this,e),PBLayoutHelpers.positioning.applyOffset.call(this,e)},setFocus:function(t){var e,o={};"number"==typeof t.xFocus&&(e=(e=(1-this.parent.width/(this.width*this.scaleX))/2)<0?0:e,o.xPercentage=.5,o.xOffset=TGE.Math.Clamp(-1*(t.xFocus-.5),-e,e)),"number"==typeof t.yFocus&&(e=(e=(1-this.parent.height/(this.height*this.scaleY))/2)<0?0:e,o.yPercentage=.5,o.yOffset=TGE.Math.Clamp(-1*(t.yFocus-.5),-e,e)),PBLayoutHelpers.positioning.setPercentage.call(this,o),PBLayoutHelpers.positioning.applyOffset.call(this,o)},setClampedPercentage:function(t){var e;"number"==typeof t.xPercentage&&(e=(e=this.width*this.scaleX/this.parent.width/2)<0?0:e,this.x=TGE.Math.Clamp(t.xPercentage,e,1-e)*this.parent.width),"number"==typeof t.xPercentage&&(e=(e=this.height*this.scaleY/this.parent.height/2)<0?0:e,this.y=TGE.Math.Clamp(t.yPercentage,e,1-e)*this.parent.height)},setToDisplayObjectPosition:function(t,e){e=PBLayoutHelpers.positioning.localToLocal(this.parent,t,e);this.x=e.x,this.y=e.y},localToGlobal:function(t,e,o){var i=new TGE.Point;e&&i.setTo(e.x,e.y),o||(i.x-=t.registrationX*t.width,i.y-=t.registrationY*t.height);for(var n=t;n;)i.x*=n.scaleX,i.y*=n.scaleY,i.x+=n.x,i.y+=n.y,n=n.parent;return i},globalToLocal:function(t,e,o){var i=new TGE.Point;e&&i.setTo(e.x,e.y);for(var n=t,s=[];n;)s.unshift(n),n=n.parent;for(var a=0;n=s[a];a++)i.x-=n.x,i.y-=n.y,n.scaleX&&(i.x/=n.scaleX),n.scaleY&&(i.y/=n.scaleY);return o||(i.x+=t.registrationX*t.width,i.y+=t.registrationY*t.height),i},localToLocal:function(t,e,o,i){o=this.localToGlobal(e,o,i);return this.globalToLocal(t,o,i)},applyOffset:function(t){"number"==typeof t.xOffset&&(this.x+=t.xOffset*this.width*this.scaleX),"number"==typeof t.yOffset&&(this.y+=t.yOffset*this.height*this.scaleY)},ignoreSelfRegistration:function(){this.x+=(this.registrationX-.5)*this.width*this.scaleX,this.y+=(this.registrationY-.5)*this.height*this.scaleY},ignoreParentRegistration:function(){this.x-=this.parent.width*this.parent.registrationX,this.y-=this.parent.height*this.parent.registrationY}}};PBText=function(){PBText.superclass.constructor.apply(this,arguments)},PBText.prototype={_applyTextDef:function(t){var e,o=GameConfig.TEXT_DEFS[t];o&&(e=o.text,void 0!==o.text&&0<=o.text.toUpperCase().indexOf("#SCORE#")&&(null!=PromoBuilder.score?o.text=o.text.replace(/#SCORE#/gi,PromoBuilder.score):TGE.Debug.Log(TGE.Debug.LOG_ERROR,"'score' must be specified in PromoScreen setup")),PBText.superclass._applyTextDef.call(this,t),void 0!==e&&(o.text=e))}},extend(PBText,TGE.Text),PromoBuilder.createBackground=function(t){this.customPromoBackground=t.addChild((new TGE.DisplayObjectContainer).setup({colorDef:"promo_custom_popupOverlayColor",width:this.width,height:this.height,layout:{xPercentage:.5,yPercentage:.5,matchWidth:1,matchHeight:1}})),"promo"!==getQueryString().state&&this.customPromoBackground.tweenFrom({alpha:0,easing:TGE.Tween.Sine.Out,duration:.2,rewind:!1,loop:0})},PromoBuilder.createTweens=function(){"None"!==TGE.RemoteSettings("promo_tween_container_entrance")&&!1!==GameConfig.PROMO_BUILDER_TRANSITIONS?this.doEntranceTween():this.idleLoop()},PromoBuilder.doEntranceTween=function(){switch(this.entranceTween=TGE.Tween.Sine.InOut,this.tweenDuration=.5,this.selectedTween){case"None":break;case"Slide in":this.entranceTween=TGE.Tween.Sine.Out,this.tweenDuration=.4;break;case"Bounce in":this.entranceTween=TGE.Tween.Exponential.Out,this.tweenDuration=.6;break;case"Fall in":this.entranceTween=TGE.Tween.Back.Out,this.tweenDuration=.4;break;case"Fade in":this.entranceTween=TGE.Tween.Sine.Out,this.tweenDuration=.4;break;case"Pop in":this.entranceTween=TGE.Tween.Exponential.Out,this.tweenDuration=.25;break;case"Spin in":this.entranceTween=TGE.Tween.Sine.Out,this.tweenDuration=.3;break;case"Elastic pop":this.entranceTween=TGE.Tween.Elastic.Out,this.tweenDuration=.5}"Bounce in"==this.selectedTween?this.entranceTween=this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:0,easing:TGE.Tween.Sine.In,duration:.4,rewind:!0,loop:!1,alpha:1}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.48},onComplete:this.idleLoop.bind(this),rotation:0,easing:TGE.Tween.Quadratic.InOut,duration:.06,rewind:!0,loop:1,alpha:1}):"Fall in"==this.selectedTween?this.entranceTween=this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:.99,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:0,easing:TGE.Tween.Sine.Out,duration:.3,rewind:!0,loop:!1,alpha:1}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},onComplete:this.idleLoop.bind(this),rotation:0,easing:TGE.Tween.Sine.Out,duration:.04,rewind:!1,loop:0,alpha:1}):this.entranceTween=this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},onComplete:this.idleLoop.bind(this),rotation:0,easing:this.entranceTween,duration:this.tweenDuration,rewind:!0,loop:!1,alpha:1})},PromoBuilder.idleLoop=function(){if(this.staticOverlayBackground()){switch(this.idleTween=TGE.Tween.Sine.InOut,this.idleScaleWidth=1,this.idleScaleHeight=1,this.idleRotation=0,this.idleX=.5,this.idleY=.5,this.idleDelay=0,this.tweenDuration=.4,TGE.RemoteSettings("promo_tween_container_idle")){case"None":this.idleTween=TGE.Tween.Sine.Out,this.tweenDuration=0;break;case"Pulse":this.idleTween=TGE.Tween.Sine.Out,this.tweenDuration=.4,this.idleScaleWidth=1.03,this.idleScaleHeight=1.03;break;case"Bounce":this.idleTween=TGE.Tween.Sine.InOut,this.tweenDuration=.4,this.idleY=.48;break;case"Wiggle":this.idleTween=TGE.Tween.Sine.Out,this.tweenDuration=.5,this.idleRotation=1,this.promoObjectsHolder.rotation=-1;break;case"Hover":this.idleTween=TGE.Tween.Sine.InOut,this.tweenDuration=1,this.idleY=.495;break;case"Periodic Wiggle":this.idleTween=TGE.Tween.Sine.Out,this.tweenDuration=.5,this.idleRotation=2,this.promoObjectsHolder.rotation=0,this.idleDelay=1;break;case"Periodic Bounce":this.idleTween=TGE.Tween.Sine.InOut,this.tweenDuration=.4,this.idleY=.48,this.idleDelay=.6;break;case"Periodic Shake":this.idleTween=TGE.Tween.Sine.Out,this.tweenDuration=.4,this.idleDelay=.6}"Periodic Wiggle"==TGE.RemoteSettings("promo_tween_container_idle")?this.promoObjectsHolder.performAction({repeat:!0,interval:2,action:function(){this.promoObjectsHolder.layout.xPercentage=.5,this.promoObjectsHolder.layout.yPercentage=.5,this.promoObjectsHolder.layout.scaleToWidth=1,this.promoObjectsHolder.layout.scaleToHeight=1,this.promoObjectsHolder.alpha=1,this.promoObjectsHolder.rotation=0,this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:-2,easing:TGE.Tween.Sine.Out,duration:.2,rewind:!1,loop:!1,alpha:1,delay:0}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:2,easing:TGE.Tween.Sine.Out,duration:.2,rewind:!1,loop:0,alpha:1,delay:0}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:0,easing:TGE.Tween.Sine.Out,duration:.4,rewind:!1,loop:0,alpha:1,delay:0})}.bind(this)}):"Periodic Bounce"==TGE.RemoteSettings("promo_tween_container_idle")?this.promoObjectsHolder.performAction({repeat:!0,interval:2,action:function(){this.promoObjectsHolder.layout.xPercentage=.5,this.promoObjectsHolder.layout.yPercentage=.5,this.promoObjectsHolder.layout.scaleToWidth=1,this.promoObjectsHolder.layout.scaleToHeight=1,this.promoObjectsHolder.alpha=1,this.promoObjectsHolder.rotation=0,this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.47},rotation:0,easing:TGE.Tween.Sine.In,duration:.2,rewind:!0,loop:1,alpha:1}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.49},rotation:0,easing:TGE.Tween.Sine.Out,duration:.1,rewind:!0,loop:1,alpha:1,delay:0})}.bind(this)}):"Periodic Shake"==TGE.RemoteSettings("promo_tween_container_idle")?this.promoObjectsHolder.performAction({repeat:!0,interval:2,action:function(){this.promoObjectsHolder.layout.xPercentage=.5,this.promoObjectsHolder.layout.yPercentage=.5,this.promoObjectsHolder.layout.scaleToWidth=1,this.promoObjectsHolder.layout.scaleToHeight=1,this.promoObjectsHolder.alpha=1,this.promoObjectsHolder.rotation=0,this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.48,yPercentage:.5},rotation:0,easing:TGE.Tween.Sine.In,duration:.075,rewind:!0,loop:1,alpha:1}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.52,yPercentage:.5},rotation:0,easing:TGE.Tween.Sine.Out,duration:.075,rewind:!0,loop:1,alpha:1})}.bind(this)}):"Periodic Pulse"==TGE.RemoteSettings("promo_tween_container_idle")?this.promoObjectsHolder.performAction({repeat:!0,interval:2,action:function(){this.promoObjectsHolder.layout.xPercentage=.5,this.promoObjectsHolder.layout.yPercentage=.5,this.promoObjectsHolder.layout.scaleToWidth=1,this.promoObjectsHolder.layout.scaleToHeight=1,this.promoObjectsHolder.alpha=1,this.promoObjectsHolder.rotation=0,this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:1.03,scaleToHeight:1.03,xPercentage:.5,yPercentage:.5},rotation:0,easing:TGE.Tween.Sine.InOut,duration:.2,rewind:!0,loop:1,alpha:1})}.bind(this)}):"Wiggle"==TGE.RemoteSettings("promo_tween_container_idle")?(this.promoObjectsHolder.layout.xPercentage=.5,this.promoObjectsHolder.layout.yPercentage=.5,this.promoObjectsHolder.layout.scaleToWidth=1,this.promoObjectsHolder.layout.scaleToHeight=1,this.promoObjectsHolder.alpha=1,void(this.promoObjectsHolder.rotation=0)!==this.wiggleTween&&1!=this.wiggleTween.finished()&&(this.wiggleTween.endTween(),delete this.wiggleTween),this.wiggleTween=this.promoObjectsHolder.tweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:-2,easing:TGE.Tween.Sine.Out,duration:.2,rewind:!1,loop:!1,alpha:1,delay:0}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:2,easing:TGE.Tween.Sine.Out,duration:.2,rewind:!1,loop:0,alpha:1,delay:0}).thenTweenTo({layout:{scaleToWidth:1,scaleToHeight:1,xPercentage:.5,yPercentage:.5},rotation:0,easing:TGE.Tween.Sine.Out,duration:.4,rewind:!1,loop:0,alpha:1,delay:0,onComplete:this.idleLoop.bind(this)})):(this.promoObjectsHolder.layout.xPercentage=.5,this.promoObjectsHolder.layout.yPercentage=.5,this.promoObjectsHolder.layout.scaleToWidth=1,this.promoObjectsHolder.layout.scaleToHeight=1,this.promoObjectsHolder.alpha=1,this.promoObjectsHolder.rotation=0,this.idleTweenLoop=this.promoObjectsHolder.tweenTo({layout:{xPercentage:this.idleX,yPercentage:this.idleY,scaleToWidth:this.idleScaleWidth,scaleToHeight:this.idleScaleHeight},rotation:this.idleRotation,easing:this.idleTween,duration:this.tweenDuration,rewind:!0,loop:!0,alpha:1,delay:this.idleDelay}))}},PBMuteButton=function(){PBMuteButton.superclass.constructor.apply(this,arguments)},PBMuteButton.prototype={setup:function(t){return PBMuteButton.superclass.setup.call(this,t),this._muted=t.muted||!1,this.instanceName="muteButton",this.addEventListener("resize",this._onResize.bind(this)),this},_onResize:function(t){var e=Math.min(.12*this.parent.width,.12*this.parent.height);e&&(this.width=this.height=e,PBMuteButton.superclass.cache.call(this),this.cache())},cache:function(){var t=this.offscreenRenderer&&this.offscreenRenderer.getCanvasContext();t&&this.draw(t)},draw:function(t){var e,o,i;t.clearRect(0,0,this.width,this.height),(this.x||this.y)&&(e=TGE.RemoteSettings("promo_muteStyle"),o=TGE.RemoteSettings("promo_muteColor"),i=TGE.RemoteSettings("promo_muteThickness"),function(t,e,o,i,n,s,a){t.save(),t.fillStyle=s,t.strokeStyle=s,t.lineCap="round",t.lineJoin="round";s=.1*e*n;t.lineWidth=s;n*=-.05*e;"circle"!==a&&"circleFilled"!==a||(t.beginPath(),t.arc(e/2,o/2,e/2,0,2*Math.PI),t.fill(),t.globalCompositeOperation="destination-out");(function(t,e,o,i,n,s){var a=.6*i,i=-.275*i;t.beginPath(),t.moveTo(e+i-.4*a+n/2,o-.5*a+n/2),t.lineTo(e+i+.5*a-n/2,o-.5*a+n/2),t.lineTo(e+i+1.25*a-n/2,o-1.2*a+n/2),t.lineTo(e+i+1.25*a-n/2,o+1.2*a-n/2),t.lineTo(e+i+.5*a-n/2,o+.5*a-n/2),t.lineTo(e+i-.4*a+n/2,o+.5*a-n/2),t.closePath(),"filled"!==s&&"circleFilled"!==s||t.fill();t.stroke()})(t,.375*e+n,o/2,.4*e,s,a),i?function(t,e,o,i){t.beginPath(),t.moveTo(e-.5*i,o-.5*i),t.lineTo(e+.5*i,o+.5*i),t.moveTo(e-.5*i,o+.5*i),t.lineTo(e+.5*i,o-.5*i),t.stroke()}(t,.76*e+n,o/2,.225*e):function(t,e,o,i,n){t.beginPath(),t.moveTo(e-.35*i-.25*n,o-.5*i+n/2),t.bezierCurveTo(e-.15*i-.5*n,o-.25*i+n/3,e-.15*i-.5*n,o+.25*i-n/3,e-.35*i-.25*n,o+.5*i-n/2),t.moveTo(e-.2*i+.25*n,o-.75*i+n/2),t.bezierCurveTo(e+.15*i,o-.4*i+n/3,e+.15*i,o+.4*i-n/3,e-.2*i+.25*n,o+.75*i-n/2),t.moveTo(e-.05*i+.75*n,o-+i+n/2),t.bezierCurveTo(e+.45*i+.5*n,o-.5*i+n/3,e+.45*i+.5*n,o+.5*i-n/3,e-.05*i+.75*n,o+ +i-n/2),t.stroke()}(t,.75*e+n,o/2,.25*e,s);t.restore()}(t,this.width,this.height,this._muted,i,o,e))}},extend(PBMuteButton,TGE.DisplayObjectContainer),Object.defineProperty(PBMuteButton.prototype,"muted",{get:function(){return this._muted},set:function(t){t!==this._muted&&(this._muted=t,this.cache())}});var PBVideoPlayer=function(){PBVideoPlayer.superclass.constructor.apply(this,arguments)};PBVideoPlayer.prototype={setup:function(t){return this.settingsPrefix="promo_video",t.muteStyle=t.muteStyle||TGE.RemoteSettings("promo_muteStyle"),PBVideoPlayer.superclass.setup.call(this,t),"none"!==this.muteStyle&&"muted"!==this.muteStyle&&(this.muteButton=this.addChild((new PBMuteButton).setup({style:this.muteStyle,color:this.muteColor,thickness:this.muteThickness,settingsPrefix:"promo"})),this.muteButton.addEventListener("mouseup",this._onMuteButton.bind(this))),this.video&&this.getRemoteSetting("previewVideoCropping")&&!this.getRemoteSetting("noCropping")&&(this.overlay=this.videoContainer.addChild((new CB.Overlay).setup({layout:function(t){var e=this.parent.parent,o=e.getScreenRect();this.x=o.x,this.y=o.y,this.width=o.width,this.height=o.height,this.textHolder.rotation=-e.videoContainer.rotation},mouseEnabled:!1,backdropFillStyle:"noFill",textPosition:"middle",textParams:{text:"SAFE ZONE",fontSize:19}}))),this},_drawVideo:function(t){PBVideoPlayer.superclass._drawVideo.call(this,t),this.muteButton&&(t=!this.muteButton.x&&!this.muteButton.y,this.muteButton.muted=this.video.muted,this.muteButton.x=-this.width*this.registrationX+this.muteButton.width*this.getRemoteSetting("muteX"),this.muteButton.y=-this.height*this.registrationY+this.muteButton.height*this.getRemoteSetting("muteY"),t&&this.muteButton.cache())},_onMuteButton:function(t){this.mute(!this.video.muted)}},extend(PBVideoPlayer,TGE.VideoPlayer),PBFullscreenContainer=function(){PBFullscreenContainer.superclass.constructor.call(this)},PBFullscreenContainer.prototype={setup:function(t){return this.resizeSelf(),this.addEventListener("resize",this.resizeSelf.bind(this)),PBFullscreenContainer.superclass.setup.call(this,t),this},addToContainer:function(t){return this.addChild(t),t},addToContainerWithLayout:function(t,e){return this.addChild(e),this._applyLayoutToChild(t,e),e},_applyLayoutToChild:function(t,e){var o=Math.min(1,e.height/510),i=Math.min(1,e.width/510);return TGE.RemoteSettings("promo_custom_useDifferentLayouts")?e.layout=PBLayoutHandler.bind(e,{remoteSettingPrefix:t,layout:{portrait:{xPosition:.5,yPosition:.5,scaleToWidth:i,scaleToHeight:o},landscape:{xPosition:.5,yPosition:.5,scaleToWidth:i,scaleToHeight:o}},ranges:{size:{portrait:{min:.3,max:1},landscape:{min:.3,max:1}}}}):e.layout=PBLayoutHandler.bind(e,{remoteSettingPrefix:t+"_portrait",layout:{xPosition:.5,yPosition:.5,scaleToWidth:i,scaleToHeight:o},ranges:{size:{min:.3,max:1}}}),e.isCached=function(){return!0},e.cache=function(t,e){this._applyLayoutToChild(t,e)}.bind(this,t,e),e},getDimensions:function(){return{portrait:{width:700,height:700*TGE.RemoteSettings("promo_custom_fullscreen_portrait_height")},landscape:{width:700*TGE.RemoteSettings("promo_custom_fullscreen_landscape_width"),height:700},both:{width:0<TGE.RemoteSettings("promo_custom_fullscreen_both_ratio")?700:700*(1-TGE.RemoteSettings("promo_custom_fullscreen_both_ratio")),height:TGE.RemoteSettings("promo_custom_fullscreen_both_ratio")<0?700:700*(1+TGE.RemoteSettings("promo_custom_fullscreen_both_ratio"))}}},resizeSelf:function(){var t=TGE.RemoteSettings("promo_custom_useDifferentLayouts")?this.stage.isLandscape()?"landscape":"portrait":"both",t=this.getDimensions()[t];this.width=t.width,this.height=t.height}},extend(PBFullscreenContainer,TGE.DisplayObjectContainer),PBPopupContainer=function(){PBPopupContainer.superclass.constructor.call(this),this.ROTATION_MAP={none:0,right:90,flip:180,left:270}},PBPopupContainer.prototype={setup:function(t){return PBPopupContainer.superclass.setup.call(this,t),this.backImage=t.backImage,this.backImageVisual=this.addChild((new PBCroppedSprite).setup({image:this.backImage})),this.childObjectHolder=this.addChild((new TGE.DisplayObjectContainer).setup({registrationX:0,registrationY:0})),this._resizeSelf(),this._setupOwnLayout(),this.addEventListener("resize",this._resizeSelf.bind(this)),this},_setupOwnLayout:function(){var t;t=TGE.RemoteSettings("promo_custom_useDifferentLayouts")?PBLayoutHandler.bind(this,{remoteSettingPrefix:"promo_custom_popup",layout:{portrait:{xPercentage:.5,yPercentage:.5,scaleToWidth:1,scaleToHeight:1},landscape:{xPercentage:.5,yPercentage:.5,scaleToWidth:1,scaleToHeight:1}},ranges:{size:{portrait:{min:.5,max:1},landscape:{min:.5,max:1}}}}):PBLayoutHandler.bind(this,{remoteSettingPrefix:"promo_custom_popup_portrait",layout:{xPercentage:1,yPercentage:1,scaleToWidth:1,scaleToHeight:1},ranges:{size:{min:.5,max:1}}}),this.layout=function(){this._resizeSelf(),t()}.bind(this)},addToContainer:function(t){return this.childObjectHolder.addChild(t),t},addToContainerWithLayout:function(t,e){return this.childObjectHolder.addChild(e),this._applyLayoutToChild(t,e),e},_applyLayoutToChild:function(t,e){var o=e.height/510,i=e.width/510;return TGE.RemoteSettings("promo_custom_useDifferentLayouts")?e.layout=PBLayoutHandler.bind(e,{remoteSettingPrefix:t,layout:{portrait:{xPercentage:.5,yPercentage:.5,scaleToWidth:i,scaleToHeight:o},landscape:{xPercentage:.5,yPercentage:.5,scaleToWidth:i,scaleToHeight:o}},ranges:{size:{portrait:{min:.3,max:1},landscape:{min:.3,max:1}}}}):e.layout=PBLayoutHandler.bind(e,{remoteSettingPrefix:t+"_portrait",layout:{xPercentage:.5,yPercentage:.5,scaleToWidth:i,scaleToHeight:o},ranges:{size:{min:.3,max:1}}}),e.isCached=function(){return!0},e.cache=function(t,e){this._applyLayoutToChild(t,e)}.bind(this,t,e),e},_getImageRotation:function(){return{portrait:TGE.RemoteSettings("promo_custom_popup_portrait_orientation"),landscape:TGE.RemoteSettings("promo_custom_popup_landscape_orientation")}},_getDimensionMap:function(t){switch(t){case"right":case"left":return{width:"height",height:"width"};default:return{width:"width",height:"height"}}},_resizeSelf:function(){var t=TGE.RemoteSettings("promo_custom_useDifferentLayouts")&&this.stage.isLandscape()?"landscape":"portrait",e=this._getImageRotation(),o=this._getDimensionMap(e[t]),i=this.backImageVisual[o.width],n=this.backImageVisual[o.height],o=n<i;this.childObjectHolder.width=o?i/n*700:700,this.childObjectHolder.height=o?700:n/i*700;n=this._getExcessBoundsIncludingChildren(this.childObjectHolder);this.width=this.childObjectHolder.width+n.left+n.right,this.height=this.childObjectHolder.height+n.top+n.bottom,this.childObjectHolder.x=-(this.childObjectHolder.width-n.left+n.right)/2,this.childObjectHolder.y=-(this.childObjectHolder.height-n.top+n.bottom)/2,this.backImageVisual.scale=this.childObjectHolder.width/i,this.backImageVisual.x=(n.left-n.right)/2,this.backImageVisual.y=(n.top-n.bottom)/2,this.backImageVisual.rotation=this.ROTATION_MAP[e[t]]},_getExcessBoundsIncludingChildren:function(t){t.reapplyLayout();var n={left:0,right:0,top:0,bottom:0};return t.eachChild(function(){var t=-1*(this.x-this.width/2*this.scaleX),e=-1*(this.parent.width-this.x-this.width/2*this.scaleX),o=-1*(this.y-this.height/2*this.scaleY),i=-1*(this.parent.height-this.y-this.height/2*this.scaleY);n.left=t>n.left?t:n.left,n.right=e>n.right?e:n.right,n.top=o>n.top?o:n.top,n.bottom=i>n.bottom?i:n.bottom}),n},isCached:function(){return!0},cache:function(){this._resizeSelf(),this.reapplyLayout()}},extend(PBPopupContainer,TGE.DisplayObjectContainer),PBTextContainer=function(){PBTextContainer.superclass.constructor.call(this)},PBTextContainer.prototype={setup:function(t){return this.textObject=t.textObject,this.settingsPrefix=t.settingsPrefix,this._setupVisuals(),this._resizeSelf(),this.addEventListener("resize",this._resizeSelf.bind(this)),TGE.InCreativeBuilder()&&this._setupBuilderPreview(),PBTextContainer.superclass.setup.call(this,t),this},_setupVisuals:function(){this.addChild(this.textObject),this.layout=function(){var t=TGE.RemoteSettings("promo_custom_useDifferentLayouts")&&this.stage.isLandscape()?"landscape":"portrait",t={xPosition:TGE.RemoteSettings(this.settingsPrefix+"_"+t+"_xPosition"),yPosition:TGE.RemoteSettings(this.settingsPrefix+"_"+t+"_yPosition")};PBLayoutHelpers.positioning.setPosition.call(this,t),PBLayoutHelpers.positioning.ignoreParentRegistration.call(this),PBLayoutHelpers.positioning.ignoreSelfRegistration.call(this)}},_resizeSelf:function(){var t,e=TGE.RemoteSettings("promo_custom_useDifferentLayouts")&&this.stage.isLandscape()?"landscape":"portrait",o=(this.parent?this.parent.width:750)*TGE.RemoteSettings(this.settingsPrefix+"_"+e+"_wrapWidth");switch(this.textObject.hAlign){case"center":t=0;break;case"left":t=-o/2;break;case"right":t=o/2}e=GameConfig.TEXT_DEFS[this.textObject.textDef];t!==(e=!e.hAlign&&e.textDef&&GameConfig.TEXT_DEFS[e.textDef].hAlign?GameConfig.TEXT_DEFS[e.textDef]:e).x&&(e.x=t,TGE.InCreativeBuilder()&&_selfServe.saveTextDefs()),this.textObject._applyTextDef(this.textObject.textDef),this.textObject.wrapWidth=o,this.textObject._textChanged(),this.width="number"==typeof this.textObject.wrapWidth&&0<this.textObject.wrapWidth?this.textObject.wrapWidth:400,this.height=this.textObject.height,this.hasOwnProperty("builderOverlay")&&(this.builderOverlay.visible=TGE.RemoteSettings(this.settingsPrefix+"_editMode"))},_setupBuilderPreview:function(){this.addEventListener("update",function(){this._resizeSelf(),this.reapplyLayout()}.bind(this)),this.builderOverlay=this.addChild((new CB.Overlay).setup({backdropFillStyle:"noFill",borderLineDash:[8,4],borderWidth:2,textParams:{text:""},width:this.width,height:this.height,layout:{matchWidth:1,matchHeight:1,xPercentage:0,yPercentage:0}}))}},extend(PBTextContainer,TGE.DisplayObjectContainer),PBCustomPromoScreen=function(){PBCustomPromoScreen.superclass.constructor.call(this)},PBCustomPromoScreen.prototype={setup:function(t){return this.registrationX=.5,this.registrationY=.5,this.layout={matchWidth:1,matchHeight:1,xPercentage:-.5,yPercentage:-.5},PBCustomPromoScreen.superclass.setup.call(this,t),this.isLose=t.lose,this.setupBackground(t),this.setupContainer(),TGE.InCreativeBuilder()&&this.setupBuilderUI(),"video"!==TGE.RemoteSettings("promo_custom_style")||TGE.RemoteSettings("promo_video_previewVideoCropping")||PromoBuilder.PlayVideo(this.customPromoBackground,this),this},setupBackground:function(t){"video"!==TGE.RemoteSettings("promo_custom_style")&&"popup"!==TGE.RemoteSettings("promo_custom_style")&&"image"===TGE.RemoteSettings("promo_custom_backgroundStyle")&&"letterbox"===TGE.RemoteSettings("promo_background_aspectHandling")&&this.addChild((new TGE.DisplayObjectContainer).setup({colorDef:"promo_background_letterbox",layout:{xPercentage:.5,yPercentage:.5,matchWidth:1,matchHeight:1},alpha:1})),this.customBackgroundContainer=this.addChild((new TGE.DisplayObjectContainer).setup({width:this.width,height:this.height,layout:{xPercentage:.5,yPercentage:.5,matchWidth:1,matchHeight:1}})),this.objectsContainer=this.addChild((new TGE.DisplayObjectContainer).setup({width:this.width,height:this.height,layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1}})),"video"===TGE.RemoteSettings("promo_custom_style")?this.customPromoBackground=this.objectsContainer.addChild((new PBVideoPlayer).setup({assetId:t.videoAsset,fullscreen:!0,aspectHandling:TGE.RemoteSettings("promo_video_noCropping")?"letterbox":"crop",colorDef:"promo_video_background",backgroundColor:null,loop:TGE.RemoteSettings("promo_video_loop"),autoplay:!1,muted:PromoBuilder._shouldBeMuted(),layout:{xPercentage:.5,yPercentage:.5,matchWidth:1,matchHeight:1}})):"fullscreen"===TGE.RemoteSettings("promo_custom_style")&&"image"===TGE.RemoteSettings("promo_custom_backgroundStyle")&&("letterbox"===TGE.RemoteSettings("promo_background_aspectHandling")&&(this.customPromoBackground=this.customBackgroundContainer.addChild((new PBCroppedSprite).setup({image:"img_promo_background",layout:{xPercentage:0,yPercentage:0,scaleToWidth:1,scaleToHeight:1}}))),"crop"===TGE.RemoteSettings("promo_background_aspectHandling")&&(this.customPromoBackground=this.customBackgroundContainer.addChild((new PBCroppedSprite).setup({image:"img_promo_background",alpha:1})),this.customPromoBackground.layout=PBFullscreenControls.GetFocusLayoutFunction("promo_background").bind(this.customPromoBackground)))},setupContainer:function(){switch("popup"===TGE.RemoteSettings("promo_custom_style")?this.setupPopupContainer():this.setupFullscreenContainer(),TGE.RemoteSettings("promo_custom_largeImage_enabled")&&this.setupLargeImage(),TGE.RemoteSettings("promo_custom_smallImage_enabled")&&this.setupSmallImage(),TGE.RemoteSettings("promo_custom_bodyText_enabled")&&this.setupBodyText(),TGE.RemoteSettings("promo_custom_titleText_enabled")&&this.setupTitleText(),TGE.RemoteSettings("promo_buttons")){case 2:this.setupButton("B");case 1:this.setupButton("A")}},setupTitleText:function(){this.promoContainer.addToContainer((new PBTextContainer).setup({textObject:(new PBText).setup({textDef:this.isLose?"txt_promo_headerB":"txt_promo_headerA"}),settingsPrefix:"promo_custom_titleText"}))},setupBodyText:function(){this.promoContainer.addToContainer((new PBTextContainer).setup({textObject:(new PBText).setup({textDef:this.isLose?"txt_promo_bodyB":"txt_promo_bodyA"}),settingsPrefix:"promo_custom_bodyText"}))},setupSmallImage:function(){this.promoContainer.addToContainerWithLayout("promo_custom_smallImage",(new PBCroppedSprite).setup({image:"promo_custom_smallImage",rectMask:{roundness:TGE.RemoteSettings("promo_custom_smallImage_roundness"),borderWidth:TGE.RemoteSettings("promo_custom_smallImage_borderWidth"),borderColorDef:"promo_custom_smallImage_borderColor"}}))},setupLargeImage:function(){this.promoContainer.addToContainerWithLayout("promo_custom_largeImage",(new PBCroppedSprite).setup({image:this.isLose?"img_promo_artB":"img_promo_artA"}))},setupButton:function(t){t=this.promoContainer.addToContainerWithLayout("promo_custom_button"+t,(new TGE.NativeButton).setup({instanceName:"promo_button"+t,settingsPrefix:"promo_custom_button"+t,image:"promo_custom_button"+t,textDef:"txt_promo_button"+t}));t.promoContainer=this.promoContainer,TGE.InCreativeBuilder()&&t.addEventListener("update",function(t){this._setButtonSize(),this.promoContainer._applyLayoutToChild(this.settingsPrefix,this)}.bind(t))},setupPopupContainer:function(){this.promoContainer=this.objectsContainer.addChild((new PBPopupContainer).setup({backImage:"promo_custom_popupBackground"}))},setupFullscreenContainer:function(){this.promoContainer=this.objectsContainer.addChild((new PBFullscreenContainer).setup({})),this.promoContainer.layout={portrait:{xPercentage:.5,yPercentage:.5,scaleToWidth:.9,scaleToHeight:.95},landscape:{xPercentage:.5,yPercentage:.5,scaleToWidth:.95,scaleToHeight:.9}}},setupBuilderUI:function(){TGE.RemoteSettings("promo_custom_fullscreen_editMode")&&this.promoContainer.addChild((new CB.Overlay).setup({layout:{xPercentage:0,yPercentage:0,matchWidth:1,matchHeight:1},backdropFillStyle:"noFill",textParams:{text:"SAFE AREA"}})),"fullscreen"===TGE.RemoteSettings("promo_custom_style")&&"crop"===TGE.RemoteSettings("promo_background_aspectHandling")&&TGE.RemoteSettings("promo_previewBgFocus")&&"image"===TGE.RemoteSettings("promo_custom_backgroundStyle")&&(this.backgroundCrosshair=this.promoContainer.addChild((new PBCrosshair).setup({})),this.backgroundCrosshair.addEventListener("resizeEnd",PBFullscreenControls.GetFocusCrosshairLayoutFunction("promo_background",this.customPromoBackground).bind(this.backgroundCrosshair)))},_addButtonListener:function(t){var e,o="A"===t?1:2;if(TGE.RemoteSettings("promo_buttons")>=o){switch(TGE.RemoteSettings("promo_buttonAction"+t)){case"replay":e=PromoBuilder.onReplay.bind(PromoBuilder);break;case"action":e=PromoBuilder.onClickthrough.bind(PromoBuilder)}this.getChildByName("promo_button"+t,!0).addEventListener("click",e)}}},extend(PBCustomPromoScreen,TGE.DisplayObjectContainer),PBElxPromoScreen=function(){PBElxPromoScreen.superclass.constructor.call(this)},PBElxPromoScreen.prototype={setup:function(t){var e,o=TGE.RemoteSettings("promo_style");"static"===TGE.RemoteSettings("promo_type")&&(o="promoStatic_"+TGE.RemoteSettings("promo_staticBackground"));var i="none"===TGE.RemoteSettings("promo_bg");TGE.RemoteSettings("promo_testVideo")&&(o.indexOf("Video")<0||"custom"===TGE.RemoteSettings("promo_type"))&&(o="promoFullVideoNone",i=!0);var n=PromoBuilder.promoData[o];return n&&(e=PropertyCombine.clone(t.override),0<=o.indexOf("Video")&&(e["promo_videoContainer"+(i?"Full":"")]={className:"PBVideoPlayer",assetId:t.videoAsset,fullscreen:i,aspectHandling:i&&!TGE.RemoteSettings("promo_video_noCropping")?"crop":"letterbox",colorDef:i?"promo_video_background":null,backgroundColor:i?null:"rgba(0, 0, 0, 0)",loop:TGE.RemoteSettings("promo_video_loop"),muted:PromoBuilder._shouldBeMuted(),autoplay:!1}),"full"!==TGE.RemoteSettings("promo_bg")||"preset"!==TGE.RemoteSettings("promo_type")||i||(e.img_promo_background={className:"PBCroppedSprite"}),"popup"!==TGE.RemoteSettings("promo_bg")&&"twoBox"!==TGE.RemoteSettings("promo_bg")||"preset"!==TGE.RemoteSettings("promo_type")||(e.promo_background={backgroundColor:null,alpha:0,colorDef:"promo_custom_popupOverlayColor"}),n.orientation?(t.portrait={elx:TGE.GetClass(n.elx+"_portrait"),override:e},t.landscape={elx:TGE.GetClass(n.elx+"_landscape"),override:e}):(t.elx=TGE.GetClass(n.elx),t.override=e)),PBElxPromoScreen.superclass.setup.call(this,t),0<=o.indexOf("Video")&&!TGE.RemoteSettings("promo_video_previewVideoCropping")&&PromoBuilder.PlayVideo(this.getObject("promo_videoContainer"+(i?"Full":"")),this),"static"!==TGE.RemoteSettings("promo_type")&&"full"!==TGE.RemoteSettings("promo_bg")||TGE.RemoteSettings("promo_testVideo")||(TGE.RemoteSettings("promo_previewBgFocus")&&(this.promo_background_crosshair=this.addChild((new PBCrosshair).setup({}))),this.isCached=function(){return!0},this.cache=function(){this._resizeBg()},this.addEventListener("resizeEnd",this._resizeBg),this.addEventListener("addedToStage",this._resizeBg)),this},_resizeBg:function(){var t,e,o,i=this._getBgName("img_promo_background"),n=this.getObject(i),s=this.promo_background_crosshair,a=this._getBgName("promo_background");"crop"===TGE.RemoteSettings(a+"_aspectHandling")?(o=this.width*this.scaleX/(n.width*n.scaleX)/2,e=this.height*this.scaleY/(n.height*n.scaleY)/2,t=TGE.Math.Clamp(TGE.RemoteSettings(a+"_xPosition"),o,1-o),o=-1*((i=TGE.Math.Clamp(TGE.RemoteSettings(a+"_yPosition"),e,1-e))-.5),n.x=this.width*t+-2*(t-.5)*n.registrationX*n.width*n.scaleX-this.width*this.registrationX+(e=-1*(t-.5))*this.width,n.y=this.height*i+-2*(i-.5)*n.registrationY*n.height*n.scaleY-this.height*this.registrationY+o*this.height,s&&(e=TGE.RemoteSettings(a+"_xPosition")-t,o=TGE.RemoteSettings(a+"_yPosition")-i,s.x=e*n.width*n.scaleX+this.width/2,s.y=o*n.height*n.scaleY+this.height/2,s.visible=!0,s.bringToFront())):(n.x=this.width/2,n.y=this.height/2,n.scale=Math.min(this.width/n.width,this.height/n.height),s&&(s.visible=!1))},_getBgName:function(t){return"static"===TGE.RemoteSettings("promo_type")&&"dual"===TGE.RemoteSettings("promo_staticBackground")&&(t+=this.stage.isLandscape()?"_landscape":"_portrait"),t},_addButtonListener:function(t){}},extend(PBElxPromoScreen,ELXDisplay);;</script></head><body><div id="tre_container"></div>	<script type="text/javascript">var _TREMACROS={line:"4045",protocol:"https",time:(new Date()).getTime(),dst:"B0119",campaign:"25236",advertiser:"214"};var _TRESETTINGS={placementId:"hx8p",variants:false,qa:false,mraid:false,closeButtonCountdown:false,ignoreOrientation:true,closeButtonDelay:0,rewardedVideoOverlay:false,showLoadingIndicators:true,showTresensaBranding:false,gameVersion:"",showCloseButton:false,adFormat:"interstitial",freezeAnimationOnIdle:false,gameTitle:"Shopee Voucher BR | Scratch Off | VTP-13202-dap",gameDescription:"Swipe to reveal the hidden image!",gameId:"840ca6684ab44cCB",advertiser:"Liftoff",loadingImage:true,creativeStatus:9,creativeName:"Shopee Voucher BR | Scratch Off | VTP-13202-dap",clickThroughUrls:[],trackingUrls:[]};</script>	<script type="text/javascript">function extend(e,n){function t(){}var r,o=e.prototype;for(r in t.prototype=n.prototype,e.prototype=new t,(e.prototype.constructor=e).superclass=n.prototype,n.prototype.constructor===Object.prototype.constructor&&(n.prototype.constructor=n),o)o.hasOwnProperty(r)&&(e.prototype[r]=o[r])}var TreSensa=TreSensa||{};TreSensa.InventoryAdapters={},TreSensa.InventoryAdapters._loaderGif="data:image/gif;base64,R0lGODlhKwALAPEAAP///+8uJPaYk+8uJCH/C05FVFNDQVBFMi4wAwEAAAAh/hpDcmVhdGVkIHdpdGggYWpheGxvYWQuaW5mbwAh+QQJCgAAACwAAAAAKwALAAACMoSOCMuW2diD88UKG95W88uF4DaGWFmhZid93pq+pwxnLUnXh8ou+sSz+T64oCAyTBUAACH5BAkKAAAALAAAAAArAAsAAAI9xI4IyyAPYWOxmoTHrHzzmGHe94xkmJifyqFKQ0pwLLgHa82xrekkDrIBZRQab1jyfY7KTtPimixiUsevAAAh+QQJCgAAACwAAAAAKwALAAACPYSOCMswD2FjqZpqW9xv4g8KE7d54XmMpNSgqLoOpgvC60xjNonnyc7p+VKamKw1zDCMR8rp8pksYlKorgAAIfkECQoAAAAsAAAAACsACwAAAkCEjgjLltnYmJS6Bxt+sfq5ZUyoNJ9HHlEqdCfFrqn7DrE2m7Wdj/2y45FkQ13t5itKdshFExC8YCLOEBX6AhQAADsAAAAAAAAAAAA=",TreSensa.InventoryAdapters.GenericAdapter=function(){return this.waitOnInit=!1,this},TreSensa.InventoryAdapters.GenericAdapter.prototype={_idrnd:null,baseInitialize:function(e){this.initialize(e),this.waitOnInit?TreSensa.Console.log(TreSensa.LOG_INFO,"waiting on partner adapter to finish initialization..."):e&&e()},initialize:function(){TreSensa.Console.log(TreSensa.LOG_INFO,"using generic inventory partner adapter ("+TreSensa.Playable.distributionPartner+")")},kickoff:function(){TreSensa.Playable.initialize()},getSessionId:function(){return this._idrnd=this._idrnd||("dashpreview"==TreSensa.Playable.userID?"testuser":"xxxxxxxx".replace(/[x]/g,function(e){return(36*Math.random()|0).toString(36)})),"TRE3."+TreSensa.Playable.distributionPartner+"."+_TREMACROS.time+"."+this._idrnd},usesPackagedBuilds:function(){return!1},assetsMustBeInline:function(){return!1},getIFrameSrcPath:function(){return GameConfig.HOST=TreSensa.Playable.gameBucket+_TRESETTINGS.gameId+"/"+GameConfig.VERSION+"/index.html"},analyticsForbidden:function(){return!1},allowLocalStorage:function(){return!0},allowPageScroll:function(){return!0},getAssetsRoot:function(){return TreSensa.Playable.packagedBuild&&!TreSensa.Playable.inlinedAssets?"assets/":TreSensa.Playable.gameBucket+_TRESETTINGS.gameId+"/"+GameConfig.VERSION+"/assets/"},postponeGameLaunch:function(){return!1},preGameConstruction:function(){},_preLaunch:function(e){window.TGE&&!0===this.audioInfo().hideMuteButton&&(TGE.RemoteSettings.HasSetting("VideoPlayer_muteStyle")&&(TGE.RemoteSettings.GetSettings().VideoPlayer_muteStyle.value="none"),TGE.RemoteSettings.HasSetting("promo_muteStyle")&&(TGE.RemoteSettings.GetSettings().promo_muteStyle.value="none")),this.preLaunch(e)},preLaunch:function(e){},postLaunch:function(e){},initialViewability:function(){return!1===_TRESETTINGS.mraid},viewabilityControlsPreloader:function(){return!1},backgroundColor:function(){return TRESENSA_DEFAULT_BACKGROUND_COLOR},createPreloaderHtml:function(e){var n=_TRESETTINGS.showLoadingIndicators?'<div class="loading-msg">LOADING INTERACTIVE AD</div>':"",n="300x250"==_TRESETTINGS.adFormat?"":n,t="string"==typeof _TRESETTINGS.loadingImage?_TRESETTINGS.loadingImage:window._TREIMAGES?_TREIMAGES["256x256.jpg"]:TreSensa.Playable.gameBucket+_TRESETTINGS.gameId+"/icons/256x256.jpg",t=['<div class="center-block">',_TRESETTINGS.loadingImage?'<img class="icon" src="'+t+'"/>':'<div style="height: 50%;"></div>',n,_TRESETTINGS.showLoadingIndicators?'<div class="loading-gif-container"><img src='+TreSensa.InventoryAdapters._loaderGif+"></img></div>":"","</div>",_TRESETTINGS.showTresensaBranding?'<div id="powered-by">Interactive Ads by <b>TreSensa</b> </div>':""];e.setAttribute("class","preloader"),e.innerHTML=t.join("")},closeButtonInfo:function(){var e=_TRESETTINGS.showCloseButton;return{known:e,delay:e?_TRESETTINGS.closeButtonDelay:null,countdownShown:_TRESETTINGS.closeButtonCountdown||!1}},audioInfo:function(){return{allowed:!0}},runStartupLogic:function(){window.mraid?(_TRESETTINGS.mraid||TreSensa.Console.log(TreSensa.LOG_WARNING,"non-MRAID placement running in an MRAID environment"),"loading"===mraid.getState()?mraid.addEventListener("ready",mraidIsReady):mraidIsReady(!0)):_TRESETTINGS.mraid&&TreSensa.Playable.logError("mraid","MRAID was not defined")},sendEvent:function(e,n){},userCompleted:function(){},trueCompletion:function(){return!0},click:function(e){_TRESETTINGS.clickThroughUrls&&0===_TRESETTINGS.clickThroughUrls.length?TreSensa.Playable.logError("no_click_url","click-through possible but no URLs available"):openUrl(getClickThroughUrl(e,!0))}};TreSensa.InventoryAdapters.VungleAdapter=function(){return TreSensa.InventoryAdapters.VungleAdapter.superclass.constructor.call(this),this.waitOnInit=!0,this.onInitComplete=null,this.closeDelay=null,this.startMuted=!1,this.adInitialized=!1,this.vungleId="",this.vungleIdValid=!1,this},TreSensa.InventoryAdapters.VungleAdapter.prototype={initialize:function(e){TreSensa.Console.log(TreSensa.LOG_INFO,"using Vungle inventory partner adapter"),this.onInitComplete=e,this.vungleId=this._mongoObjectId(),this.vungleIdValid=!1,window.addEventListener("ad-event-pause",this._onAdEventPause.bind(this)),window.addEventListener("ad-event-resume",this._onAdEventResume.bind(this)),window.VungleHelper?this._initAd():window.addEventListener("ad-event-init",this._onAdEventInit.bind(this,!0)),window.tresensaVungleSimulator||("false"===_TREMACROS.inlinedAssets?this._onAdEventInit(!1):setTimeout(this._onAdEventInit.bind(this,!1),1e3))},_mongoObjectId:function(){return((new Date).getTime()/1e3|0).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return(16*Math.random()|0).toString(16)}).toLowerCase()},getSessionId:function(){return"VGL1."+this.vungleId+"."+_TREMACROS.time+"."+(window.tresensaVungleSimulator||"dashpreview"===TreSensa.Playable.userID?"2":this.vungleIdValid?"1":"0")},usesPackagedBuilds:function(){return!0},getIFrameSrcPath:function(){return TreSensa.Playable.packagedBuild?"./_creative.html":TreSensa.InventoryAdapters.VungleAdapter.superclass.getIFrameSrcPath.call(this)},getAssetsRoot:function(){return TreSensa.Playable.packagedBuild?"":TreSensa.InventoryAdapters.VungleAdapter.superclass.getAssetsRoot.call(this)},postponeGameLaunch:function(){return!this.adInitialized},initialViewability:function(){return this.adInitialized},viewabilityControlsPreloader:function(){return!0},audioInfo:function(){return{allowed:!0,startMuted:this.startMuted}},preGameConstruction:function(){window.BuilderGame&&delete BuilderGame.prototype.dumpScene,TreSensa.Playable.packagedBuild&&!TreSensa.Playable.isNonTGE()&&TGE.AssetManager.SetFullPathTransformation(function(e){return e.split("/").join("_")})},closeButtonInfo:function(){return{known:null!==this.closeDelay,delay:this.closeDelay,countdownShown:!0}},sendEvent:function(e,n){switch(e){case"interaction":TreSensa.Playable.isNonTGE()&&parent.postMessage("interacted","*");break;case"promo_screen":this._sendChannelMessage("complete")}},click:function(){this._sendChannelMessage("download")},_sendChannelMessage:function(e){window.parent!==window?window.parent.postMessage(e,"*"):window.tresensaVungleSimulator&&tresensaVungleSimulator(e)},_onAdEventInit:function(e){this.adInitialized||(e?TreSensa.Console.log(TreSensa.LOG_INFO,"Vungle ad-event-init received"):TreSensa.Console.log(TreSensa.LOG_WARNING,"timeout waiting on Vungle ad-event-init"),this._initAd(),TreSensa.Playable.makeAdViewable(),TreSensa.Playable.gameLaunchPostponed&&TreSensa.Playable.launchGame())},_initAd:function(){this.adInitialized=!0;var e=null;window.VungleHelper?(void 0!==VungleHelper.closeDelay&&(this.closeDelay=VungleHelper.closeDelay),"boolean"==typeof VungleHelper.rewardedAd&&(TreSensa.Playable.rewardedInventory=VungleHelper.rewardedAd),VungleHelper.tokens?(VungleHelper.tokens.SESSION_ID?(this.vungleId=VungleHelper.tokens.SESSION_ID,this.vungleIdValid=!0):e="no SESSION_ID in tokens",void 0!==VungleHelper.tokens.START_MUTED&&(this.startMuted="true"===VungleHelper.tokens.START_MUTED)):e="no VungleHelper.tokens"):e="no VungleHelper object",null!==e&&TreSensa.Playable.logError("no_session_id",e),this.onInitComplete&&this.onInitComplete(),null!==this.closeDelay&&(_TRESETTINGS.closeButtonDelay=this.closeDelay)},_onAdEventPause:function(){var e;TreSensa.Console.log(TreSensa.LOG_VERBOSE,"Vungle ad-event-pause received"),TreSensa.Playable.isNonTGE()?TreSensa.Playable.thirdPartyIFrame.contentWindow.postMessage("tre_pause","*"):(e=window.TGE&&TGE.Game.GetInstance())&&e.pause()},_onAdEventResume:function(){var e;TreSensa.Console.log(TreSensa.LOG_VERBOSE,"Vungle ad-event-resume received"),TreSensa.Playable.isNonTGE()?TreSensa.Playable.thirdPartyIFrame.contentWindow.postMessage("tre_resume","*"):(e=window.TGE&&TGE.Game.GetInstance())&&e.resume()}},extend(TreSensa.InventoryAdapters.VungleAdapter,TreSensa.InventoryAdapters.GenericAdapter),TreSensa.InventoryAdapters._liveAdapter=new TreSensa.InventoryAdapters.VungleAdapter;const TRESENSA_DEFAULT_BACKGROUND_COLOR="black";!function(){var e=TreSensa.InventoryAdapters._liveAdapter?TreSensa.InventoryAdapters._liveAdapter.backgroundColor():TRESENSA_DEFAULT_BACKGROUND_COLOR,e=(e=[window.TrePreview?"":"body, html, #tresensa_ad, #tre_container { width: 100%; height: 100%; margin: 0; padding: 0; background: "+e+"; text-align: center; font-family: Arial, Helvetica, sans-serif; overflow: hidden;}","#tresensa_ad { width: 100%; height: 100%; margin: 0; padding: 0; background: "+e+"; text-align: center; font-family: Arial, Helvetica, sans-serif; overflow: hidden;}","#tresensa_container {height: 100%; width: 100%; -moz-box-sizing: border-box; -webkit-box-sizing: border-box; box-sizing: border-box; }",".preloader {width: 100%; height: 100%; color: white; position: relative; background: "+e+"; }",".preloader-content {","position: absolute;","width: 100%;","height: 430px;","top: 50%;","margin-top: -315px;","text-align: center;","font-size: 30px;","padding: 100px 0;","}","#tresensa_companion {margin: 0px; padding: 0xp; text-align: left;}"]).concat(window.TrePreview?[".preloader .center-block {","top:48%;","left: 50%;","transform: translate3d(-50%,-48%, 0);","position: absolute;","height: 34%;","}",".preloader .icon {height: 100%; border-radius: 20%; margin-bottom: 4%;}",".preloader .loading-msg {font-size: 1.0vmin; padding-bottom: 1%; text-align: center;}",".preloader .loading-gif-container {width: 20%; margin-left: auto; margin-right: auto;}",".preloader .loading-gif-container img {width: 100%;}",".preloader #powered-by {visibility: hidden; position: absolute; left: 0; bottom: 2%; background: #ff0102; padding: 0.5vmin 2vmin 0.5vmin 2vmin; font-size: 1.4vmin; border-radius: 0px 4px 4px 0px;}"]:["@media (orientation: landscape) {",".preloader .center-block {","top:48%;","left: 50%;","transform: translate3d(-50%,-48%, 0);","position: absolute;","height: 40%;","}",".preloader .icon {height: 100%; border-radius: 20%; margin-bottom: 8%;}",".preloader .loading-msg {font-size: 2.4vh; padding-bottom: 3%;}",".preloader .loading-gif-container {width: 10vh; margin-left: auto; margin-right: auto;}",".preloader .loading-gif-container img {width: 100%;}",".preloader #powered-by {visibility: hidden; position: absolute; left: 0; bottom: 1vw; background: #ff0102; padding: 1.2vh 6vh 1.0vh 6vh; font-size: 2.5vh; border-radius: 0px 6px 6px 0px;}","}","@media (orientation: portrait) {",".preloader .center-block {","top:50%;","left: 50%;","transform: translate3d(-50%,-50%, 0);","position: absolute;","width: 40%;","}",".preloader .icon {width: 100%; border-radius: 20%; margin-bottom: 8%;}",".preloader .loading-msg {font-size: 2.4vw; padding-bottom: 3%;}",".preloader .loading-gif-container {width: 10vw; margin-left: auto; margin-right: auto;}",".preloader .loading-gif-container img {width: 100%;}",".preloader #powered-by {visibility: hidden; position: absolute; left: 0; bottom: 1vh; background: #ff0102; padding: 1.2vw 6vw 1.0vw 6vw; font-size: 2.5vw; border-radius: 0px 6px 6px 0px;}","}"]),t=document.createElement("style");t.appendChild(document.createTextNode(e.join("\n"))),document.body.appendChild(t)}();var TreSensa=TreSensa||{};function getClickThroughUrl(t,n){var a=TreSensa.Playable.gameBucket+"clickthrough.html";return _TRESETTINGS.clickThroughUrls&&_TRESETTINGS.clickThroughUrls.forEach(function(e){e.label===t&&e.url&&(a=n?TreSensa.Playable.expandUrl(e.url):e.url)}),a}function openUrl(e){window.mraid?mraid.open(e):windowClickthrough(e,!1===_TRESETTINGS.openLinksInNewWindow)}function customClickThrough(e,t){TreSensa.Console.log(TreSensa.LOG_INFO,"doing client-side click-through redirect..."),TreSensa.Playable.logEvent("click_through",{redirect_url:e,target:t}),window.mraid?(TreSensa.Playable.logEvent("mraid_open",{url:e}),mraid.open(e)):windowClickthrough(e,!1===_TRESETTINGS.openLinksInNewWindow),TreSensa.Playable.endSession()}function windowClickthrough(e,t){t?window.location[atob("aHJlZg==")]=e:window.open(e,"_blank")}function loadGame(){var e,t;TreSensa.Playable.gameLoadStarted||(TreSensa.Playable.gameLoadStarted=!0,e=void 0===_TRESETTINGS.gameVersion||""==_TRESETTINGS.gameVersion?"":"/"+_TRESETTINGS.gameVersion+"/js",e=TreSensa.Playable.gameBucket+_TRESETTINGS.gameId+e+"/GameConfig.js?t="+(new Date).getTime(),(t=document.createElement("div")).id="game_canvas",TreSensa.Playable.divAd.appendChild(t),window.TGL_DIRECT_MODE={url:e,props:TreSensa.Playable.getParameters()},TreSensa.Playable.packagedBuild||window.GameConfig?TreSensa.Playable.loadSDKs():TreSensa.Utils.insertScript(e,TreSensa.Playable.loadSDKs.bind(TreSensa.Playable)))}TreSensa.LOG_NONE=0,TreSensa.LOG_ERROR=1,TreSensa.LOG_WARNING=2,TreSensa.LOG_INFO=3,TreSensa.LOG_VERBOSE=4,TreSensa.Console={level:TreSensa.LOG_VERBOSE,log:function(e){var t,n;window.console&&e<=this.level&&(t="TPA: ",n="log",e===TreSensa.LOG_ERROR?(t+="**ERROR** ",n="error"):e===TreSensa.LOG_WARNING&&(t+="**WARNING** ",n="warn"),window.console[n](t+Array.prototype.slice.call(arguments,1)))}},TreSensa.Utils={insertScript:function(e,t){var n=document.getElementsByTagName("head")[0],a=document.createElement("script");a.src=e,a.async=!1,a.onload=t,n.appendChild(a)}},TreSensa.Macros={_queryString:null,getValue:function(e,t){return t=void 0===t?null:t,_TREMACROS[e]||this._getQueryStringValue(e)||t},getBoolean:function(e,t){e=_TREMACROS[e]||this._getQueryStringValue(e);return void 0===e?t:"true"===e||0<parseInt(e)},_getQueryStringValue:function(e){if(null===this._queryString){for(var t,n={},a=location.search.substring(1),i=/([^&=]+)=([^&]*)/g;t=i.exec(a);)n[decodeURIComponent(t[1])]=decodeURIComponent(t[2]);this._queryString=n}return this._queryString[e]}},(TreSensa=TreSensa||{}).PlatformInfo={initialize:function(){this.browser=this.searchString(this.dataBrowser)||null,this.browserVersion=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||null,this.platform=this.searchString(this.dataPlatform)||null,this.isMobileDevice=!("Windows"===this.platform||"Mac"===this.platform||"Linux"===this.platform),this.oniOS="iPhone"===this.platform||"iPad"===this.platform,this.onAndroid="Android"===this.platform,this.os=this.detectOS(this.platform),this.osVersion=this.detectOSversion(this.platform),this.hardwareVersion=this.detectHardwareVersion()},detectOS:function(e){return this.oniOS?"iOS":this.onAndroid?"Android":e},detectHardwareVersion:function(){if(!this.oniOS)return null;switch(window.screen.height){case 1024:return 1<window.devicePixelRatio?"iPad 3 or higher":"iPad 1 or 2";case 480:return 1<window.devicePixelRatio?"iPhone 4|S":"iPhone 3S or below";case 568:return"iPhone 5|S";case 667:return"iPhone 6|S";case 736:return"iPhone 6|S Plus"}return null},detectOSversion:function(e){var t="",n="",a=navigator.userAgent.toString();switch(e){case"Windows Phone":n=/Windows Phone OS\s+[\d\.]+/,t=String(a.match(n)).substring(17,20);break;case"iPhone":case"iPad":n=/OS\s+[\d\_]+/,t=String(a.match(n)).substring(3).replace(/_/g,".");break;case"Windows":n=/Windows NT\s+[\d\.]+/,t=String(a.match(n)).substring(11);break;case"OSX":n=/Mac OS X\s+[\d\_]+/,t=String(a.match(n)).substring(9,13);break;case"Android":n=/ndroid\s+[\d\.]+/,t=String(a.match(n)).substring(7,10)}return t},searchString:function(e){for(var t=0;t<e.length;t++)if(null!=e[t]){var n=e[t].string,a=e[t].prop;if(this.versionSearchString=e[t].versionSearch||e[t].identity,n){if(-1!==n.indexOf(e[t].subString))return"Mozilla"===e[t].identity&&navigator.userAgent.match(/Trident\/7\./)?"Explorer":e[t].identity}else if(a)return e[t].identity}},searchVersion:function(e){var t,n=e.indexOf(this.versionSearchString);if(-1!==n)return n=n+this.versionSearchString.length+1,t=e.indexOf(" ",n),-1==t?e.substr(n):e.substr(n,t-n)},dataBrowser:[{string:navigator.userAgent,subString:"Edge",identity:"Edge"},{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"Explorer",identity:"Explorer",versionSearch:"Explorer"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"}],dataPlatform:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone"},{string:navigator.userAgent,subString:"iPad",identity:"iPad"},{string:navigator.userAgent,subString:"iPod",identity:"iPod"},{string:navigator.userAgent,subString:"Android",identity:"Android"},{string:navigator.platform,subString:"Mac",identity:"OSX"},{string:navigator.userAgent,subString:"Mobile",identity:"Mobile"}]},TreSensa.Playable={ADFORMAT:{BANNER:1,INTERSTITIAL:2,EXPANDABLE:3},ATTRIBUTIONTYPE:{VIEWTHROUGH:0,CLICKTHROUGH:1},CUSTOMCAPSTATE:{OK:0,WARNING:1,BLOCKED:2},sessionID:"REMOVEME",parameters:{},adFormat:null,bannerWidth:0,bannerHeight:0,distributionPartner:null,packagedBuild:!1,inlinedAssets:!1,waitingOnVariantInfo:0,supplySidePlatform:null,lineItemID:null,publisherBundleID:null,userID:null,rewardedInventory:null,geo:null,wildcards:[],clientAdStartTime:null,lastEventAt:null,skipToPromoTimer:null,skippedToPromo:!1,gdpr:null,gdprConsent:null,divContainer:null,divPreloader:null,divAd:null,divCompanion:null,thirdPartyIFrame:null,getFromStorage:function(e){try{return this.inventoryAdapter.allowLocalStorage()?window.localStorage.getItem(e):null}catch(e){}},setInStorage:function(e,t){try{return this.inventoryAdapter.allowLocalStorage()?window.localStorage.setItem(e,t):null}catch(e){}},initialize:function(){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"initializing playable container..."),window._initDstSimulator&&window._initDstSimulator(),this.gameLoadStarted=!1,this.adViewable=!1,this.viewable=!1,this.gameLaunchPostponed=!1,this.gameLoaded=!1,this.closeTimerStarted=!1,this.closeButtonShown=!1,this.numInteractions=0,this.lastInteraction=null,this.numEngagements=0,this.numCompletions=0,this.promoScreenShowing=!1,this.heartbeatID=null,this.heartbeatCount=0,this.heartbeatPaused=!1,this.sessionEnded=!1,this.expanded=!1,this.customEventCounter=0,this.customEventState=0,this.trackingFired=[],this.variantId=_TRESETTINGS.variantId||null,this.mraidReady=!1,this.clientAdStartTime=this.lastEventAt=(new Date).getTime(),TreSensa.PlatformInfo.initialize(),this.distributionPartner=_TREMACROS.dst,this.lineItemID=TreSensa.Macros.getValue("line")||TreSensa.Macros.getValue("bw1"),this.publisherBundleID=TreSensa.Macros.getValue("publisher"),this.supplySidePlatform=TreSensa.Macros.getValue("ssp"),this.rewardedInventory=TreSensa.Macros.getValue("rewarded"),this.geo=TreSensa.Macros.getValue("geo"),this.gdpr=TreSensa.Macros.getValue("gdpr"),this.gdprConsent=TreSensa.Macros.getValue("gdpr_consent"),this.wildcards[1]=TreSensa.Macros.getValue("wild1"),this.wildcards[2]=TreSensa.Macros.getValue("wild2"),this.userID=TreSensa.Macros.getValue("user"),null!==this.userID&&"dashpreview"!==this.userID&&(this.userID=this.userID.match(/[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}/)?this.userID:null,"00000000-0000-0000-0000-000000000000"===this.userID&&(this.userID=null)),this.inventoryAdapter=TreSensa.InventoryAdapters._liveAdapter||new TreSensa.InventoryAdapters.GenericAdapter,this.gameBucket=this.chooseAssetBucket(),this.createDomElements(),this.inventoryAdapter.baseInitialize(this.continueInitialization.bind(this))},chooseAssetBucket:function(){var e=_TREMACROS.protocol+"://";return(e+=(void 0!==_TREMACROS.draft?"true"===_TREMACROS.draft:9!==_TRESETTINGS.creativeStatus&&!_TRESETTINGS.gameVersion)?"draft-":"")+(!0===_TRESETTINGS.qa?"qa-":"")+"games.tresensa.com/"},continueInitialization:function(){this.lockPageScroll(),this.packagedBuild="false"!==_TREMACROS.inlinedAssets&&this.inventoryAdapter.usesPackagedBuilds(),this.inlinedAssets=this.packagedBuild&&this.inventoryAdapter.assetsMustBeInline(),this.adViewable=this.inventoryAdapter.initialViewability(),_TRESETTINGS.partnerHandlesClickThrough=this.packagedBuild||_TRESETTINGS.partnerHandlesClickThrough,this.adFormat=TreSensa.Playable.ADFORMAT.INTERSTITIAL,"300x250"==_TRESETTINGS.adFormat?(this.adFormat=TreSensa.Playable.ADFORMAT.BANNER,this.bannerWidth=300,this.bannerHeight=250):"expandable 320x50"==_TRESETTINGS.adFormat&&(this.adFormat=TreSensa.Playable.ADFORMAT.EXPANDABLE,this.bannerWidth=320,this.bannerHeight=50),this.skipToPromoTimer=parseInt(TreSensa.Macros.getValue("endcardtimer","0")),this.skipToPromoTimer&&TreSensa.Console.log(TreSensa.LOG_VERBOSE,"skip to promo screen timer enabled ("+this.skipToPromoTimer+" seconds)"),this.initializeParameters(),this.logStartingEvent(),this.adFormat==TreSensa.Playable.ADFORMAT.EXPANDABLE&&"1"!==_TREMACROS.expandablePrefetch||loadGame(),setInterval(this.customEventCheck.bind(this),5e3),TreSensa.Console.log(TreSensa.LOG_VERBOSE,"finished initializing playable container"),this.inventoryAdapter.runStartupLogic()},createDomElements:function(){var e,t;this.divContainer&&(this.divContainer.parentNode.removeChild(this.divContainer),this.divContainer=null,this.divPreloader=null,this.divAd=null),this.divContainer=document.createElement("div"),this.divContainer.setAttribute("id","tresensa_container"),this.divPreloader=document.createElement("div"),this.inventoryAdapter.createPreloaderHtml(this.divPreloader),this.divAd=document.createElement("div"),this.divAd.setAttribute("id","tresensa_ad"),this.divAd.style.visibility="hidden",_TRESETTINGS.adFormat&&0===_TRESETTINGS.adFormat.lastIndexOf("expandable",0)&&(this.divContainer.style.display="none",this.divCompanion=document.createElement("div"),this.divCompanion.setAttribute("id","tresensa_companion"),t=_TRESETTINGS.adFormat.substring(11),e=_TREMACROS.companionVariant||"1",t=this.gameBucket+_TRESETTINGS.gameId+"/companions/"+t+"_"+e+".gif",this.divCompanion.innerHTML='<img class="icon" src="'+t+'">',this.divCompanion.onclick=function(){window.mraid&&mraid.expand()},document.getElementById("tre_container").appendChild(this.divCompanion)),this.divContainer.appendChild(this.divPreloader),this.divContainer.appendChild(this.divAd),document.getElementById("tre_container").appendChild(this.divContainer)},initializeParameters:function(){for(var e in this.parameters={previewMode:this.adFormat,ignoreOrientation:"true",adanimation:_TRESETTINGS.freezeAnimationOnIdle?30:void 0,kvbw1:TreSensa.Playable.lineItemID,adinv:TreSensa.Playable.publisherBundleID},_TREMACROS)_TREMACROS.hasOwnProperty(e)&&(this.parameters[e]=_TREMACROS[e])},lockPageScroll:function(){this.inventoryAdapter.allowPageScroll()||("loading"===document.readyState?document.addEventListener("DOMContentLoaded",TreSensa.Playable._lockPageScroll,!1):this._lockPageScroll())},_lockPageScroll:function(){document.addEventListener("touchmove",function(e){e.preventDefault()},!1)},getParameters:function(){return this.parameters},getCloseButtonInfo:function(){return this.inventoryAdapter.closeButtonInfo()},getAudioInfo:function(){return this.inventoryAdapter.audioInfo()},startCloseButtonTimer:function(){var e=TreSensa.Macros.getValue("showclose");"0"!==e&&("1"!==e&&this.adFormat===TreSensa.Playable.ADFORMAT.BANNER||this.closeTimerStarted||this.closeButtonShown||(setTimeout(this.showCloseButton.bind(this),1e3*_TRESETTINGS.closeButtonDelay),this.closeTimerStarted=!0,_TRESETTINGS.closeButtonCountdown&&window.TGE&&window.TGE.AdHeader&&window.TGE.AdHeader.ShowCountdown(_TRESETTINGS.closeButtonDelay)))},showCloseButton:function(){this.adFormat!==TreSensa.Playable.ADFORMAT.BANNER&&(!0===_TRESETTINGS.showCloseButton&&window.TGE&&window.TGE.AdHeader&&window.TGE.AdHeader.ShowClose(),this.closeButtonShown=!0,this.logEvent("show_close"))},expand:function(){this.adFormat!=TreSensa.Playable.ADFORMAT.EXPANDABLE||this.expanded||(loadGame(),this.divContainer.style.display="block",this.divCompanion.style.display="none",this.expanded=!0,window.TGE&&TGE.Game.GetInstance().resume())},collapse:function(){this.adFormat==TreSensa.Playable.ADFORMAT.EXPANDABLE&&this.expanded&&(this.divContainer.style.display="none",this.divCompanion.style.display="block",this.expanded=!1,this.exit("expandable_collapse"))},revealAd:function(){this.divPreloader.style.display="none",this.divAd.style.visibility="visible"},getSetting:function(e){return _TRESETTINGS[e]},logStartingEvent:function(){this.logEvent("container_code_loaded",{operating_system:TreSensa.PlatformInfo.os,operating_system_version:TreSensa.PlatformInfo.osVersion,browser:TreSensa.PlatformInfo.browser,browser_version:TreSensa.PlatformInfo.browserVersion,screen_width:window.screen.width,screen_height:window.screen.height,device:TreSensa.PlatformInfo.hardwareVersion,geo:this.geo,wild1:this.wildcards[1],wild2:this.wildcards[2]})},customEventCheck:function(){this.customEventState!==TreSensa.Playable.CUSTOMCAPSTATE.BLOCKED&&(15<=this.customEventCounter?this.blockCustomEvents(!0):5<=this.customEventCounter&&(TreSensa.Console.log(TreSensa.LOG_WARNING,"too many custom events being fired"),this.customEventState=TreSensa.Playable.CUSTOMCAPSTATE.WARNING),this.customEventCounter=0)},blockCustomEvents:function(e){TreSensa.Console.log(TreSensa.LOG_ERROR,"too many custom events being fired - applying cap!"),this.customEventState=TreSensa.Playable.CUSTOMCAPSTATE.BLOCKED,this.logError("custom_event_cap",e?">=10":"2 warnings")},logEvent:function(e,t){if("replay"===e&&(this.promoScreenShowing=!1),this.fireTrackingUrls(e,t),this.inventoryAdapter.sendEvent(e,t),!this.sessionEnded){if("custom"===e){if(this.customEventState===TreSensa.Playable.CUSTOMCAPSTATE.BLOCKED)return;this.customEventCounter++}var n=(new Date).getTime();if(0<this.numEngagements&&3e5<n-this.lastEventAt)this.endSession();else if(t=t||{},TreSensa.Console.log(TreSensa.LOG_INFO,"firing '"+e+"' event"),this.lastEventAt=n,!this.inventoryAdapter.analyticsForbidden()){var a,n=this.onDevServer()?_TREMACROS.protocol+"://analytics-dev.tresensa.com/adevents":_TREMACROS.protocol+"://analytics.tresensa.com/adevents",i={event_name:e,session_id:this.inventoryAdapter.getSessionId(),creative_id:_TRESETTINGS.gameId,creative_version:window.GameConfig?GameConfig.VERSION:null,placement_id:_TRESETTINGS.placementId,variant_id:this.variantId,line_item_id:this.lineItemID,user_id:this.userID,app_bundle_id:this.publisherBundleID,ssp:this.supplySidePlatform,session_cost:null,rewarded:null===this.rewardedInventory?null:this.rewardedInventory,user_agent:navigator.userAgent||null};for(a in t)t.hasOwnProperty(a)&&(i[a]=t[a]);e="event="+btoa(JSON.stringify(i));(new Image).setAttribute("src",n+"?"+e)}}},logError:function(e,t){TreSensa.Console.log(TreSensa.LOG_ERROR,e+" ("+(t=t||"")+")"),this.logEvent("error",{type:e,description:t})},fireTrackingUrls:function(e,t){var n=e,n=(n+="click_through"===e?"_"+t.target:"")+("custom"===e?"_"+t.name:"");if(!this.trackingFired[n]){var a=_TRESETTINGS.trackingUrls;if(a)for(var i=0;i<a.length;i++){var r=a[i],o=!1;switch(r.eventType){case"GAMEVIEWABLE":o="game_viewable"===e;break;case"INTERACTION":o="interaction"===e;break;case"ENGAGEMENT":o="engagement"===e;break;case"COMPLETION":o="promo_screen"===e;break;case"CLICK":o="click_through"===e&&r.label===t.target;break;case"CUSTOM":o="custom"===e&&r.label===t.name}o&&this.fireTrackingUrl(r.url)}this.trackingFired[n]=!0}},expandUrl:function(e){return e=(e=(e=(e=(e=e.replace("dc_rdid=;","dc_rdid={USER_ID};")).replace("ord=[timestamp]","ord={TIMESTAMP}")).replace("gdpr=${GDPR}","gdpr={GDPR}")).replace(/\${GDPR_CONSENT_[0-9Xx]*?}/g,"{GDPR_CONSENT_STRING}")).replace(/{[A-Za-z_]*?}/g,function(e){e=e.replace(/[{}]/g,"");var t=TreSensa.Macros.getValue(e);return null!==t?t:TreSensa.Playable.expandMacro(e)})},fireTrackingUrl:function(e){-1!==(e=this.expandUrl(e)).indexOf(".js")?this.fireTrackingScript(e):this.fireTrackingPixel(e)},fireTrackingScript:function(e){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"firing tracking script");var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)},fireTrackingPixel:function(e){TreSensa.Console.log(TreSensa.LOG_VERBOSE,"firing tracking pixel"),(new Image).src=e},expandMacro:function(e){var t="",n=!0;switch(e){case"CREATIVE_ID":t=_TRESETTINGS.gameId||"";break;case"CREATIVE_NAME":t=_TRESETTINGS.gameTitle||"";break;case"CREATIVE_VERSION":t=GameConfig.VERSION||"";break;case"LINE_ID":t=this.lineItemID||"";break;case"CAMPAIGN_ID":t=_TREMACROS.campaign||"";break;case"PLACEMENT_ID":t=_TRESETTINGS.placementId||"";break;case"SESSION_ID":t=this.inventoryAdapter.getSessionId()||"";break;case"SSP":t=this.supplySidePlatform||"";break;case"DST":t=this.distributionPartner||"";break;case"PUBLISHER_BUNDLE_ID":t=this.publisherBundleID||"";break;case"USER_ID":t=this.userID||"";break;case"USER_AGENT":t=navigator.userAgent;break;case"TIMESTAMP":case"CACHEBUSTER":t=Math.round((new Date).getTime()/1e3);break;case"ADVERTISER_ID":t=_TREMACROS.advertiser||"";break;case"SCORE":var a=TGE.Game.GetInstance(),t=a&&null!==a.getFinalScore()?a.getFinalScore():"";break;case"GDPR":t=null===this.gdpr?"":this.gdpr;break;case"GDPR_CONSENT_STRING":t=null===this.gdprConsent?"":this.gdprConsent,n=!1}return n?encodeURIComponent(t):t},isNonTGE:function(){return!GameConfig.TGE||"core"===GameConfig.TGE.VERSION.substring(0,4)},loadSDKs:function(){var e,t,n=!0===_TRESETTINGS.qa;window.GameConfig?(this.isNonTGE()||(e=document.getElementById("powered-by"))&&(e.style.visibility="visible"),GameConfig.VERSION=void 0===_TRESETTINGS.gameVersion||""==_TRESETTINGS.gameVersion?GameConfig.VERSION:_TRESETTINGS.gameVersion,e=GameConfig.HOST=this.gameBucket+_TRESETTINGS.gameId,GameConfig.DIRECT_AD=this.parameters,GameConfig.GoogleAnalytics&&(GameConfig.GoogleAnalytics.ENABLED=!1),GameConfig.ORIENTATION=GameConfig.ORIENTATION||"portrait",GameConfig.LIB_DIR=GameConfig.LIB_DIR||"https://sdk.tresensa.com/",t=GameConfig.TGE.VERSION.split("."),t=isNaN(t[0])?t[0]:t[0]+"."+t[1],GameConfig.TGE.VERSION=_TREMACROS.tgeVersion?(0<_TREMACROS.tgeVersion.indexOf(".")?"":t+".")+_TREMACROS.tgeVersion:GameConfig.TGE.VERSION,GameConfig.AUDIO_ROOT=GameConfig.IMAGE_ROOT=this.inventoryAdapter.getAssetsRoot(),this.waitingOnVariantInfo=_TRESETTINGS.placementId&&this.packagedBuild&&!0===_TRESETTINGS.variants?1:0,this.waitingOnVariantInfo&&(t=_TREMACROS.protocol+"://play"+(this.onDevServer()?"-dev":"")+".tresensa.com",fetch(t+"/variant?placement="+_TRESETTINGS.placementId+(!0===_TRESETTINGS.hackathon&&this.publisherBundleID?"&publisher="+this.publisherBundleID:"")).then(function(e){e.json().then(function(e){TreSensa.Playable._onVariantInfo(e)}).catch(function(e){TreSensa.Playable._onVariantInfo(null)})}).catch(function(e){TreSensa.Playable._onVariantInfo(null)}),setTimeout(function(){TreSensa.Playable._onVariantInfo(null)},1500)),this.packagedBuild?TreSensa.Playable.launchGame():this.isNonTGE()?window.TGE?TreSensa.Playable.launchGame():this.loadTGE(TreSensa.Playable.launchGame.bind(TreSensa.Playable)):(window.TGE||this.loadTGE(null),TreSensa.Console.log(TreSensa.LOG_INFO,"loading game code ("+_TRESETTINGS.gameId+" "+(n?"QA":"production")+" v"+GameConfig.VERSION+")..."),TreSensa.Utils.insertScript(e+"/"+GameConfig.VERSION+"/js/game.min.js",TreSensa.Playable.launchGame.bind(TreSensa.Playable)))):this.logError("no_config","game: "+_TRESETTINGS.gameId+", "+(n?"QA":"production")+" version: "+(_TRESETTINGS.gameVersion||"latest"))},_onVariantInfo:function(e){var t;0!==TreSensa.Playable.waitingOnVariantInfo&&(t="retrieved variant info - ",e?e.id?(this.variantId=e.id,delete e.settings._version_override,delete e.settings._creative_swap,e.settings&&0<Object.keys(e.settings).length?(_TRESETTINGS.remoteSettings=e.settings,t+="applied!"):t+="no changes"):t+="no test running":t="error or timeout waiting for variant info",TreSensa.Console.log(TreSensa.LOG_INFO,t),e=2===this.waitingOnVariantInfo,TreSensa.Playable.waitingOnVariantInfo=0,e&&this.launchGame())},_applyVariant:function(e){e=GameConfig.REMOTE_SETTINGS.multivariate.default[e];e&&this._mergeData(e,GameConfig)},_mergeData:function(e,t,n){for(var a in e){var i=e[a];if(i&&"object"==typeof i)if(Array.isArray(i))t[a]=TGE.DeepClone(i);else{let e=t[a];e&&"object"==typeof e||(e={},t[a]=e),this._mergeData(i,e,"REMOTE_SETTINGS"===a)}else n?t[a].default=i:t[a]=i}},loadTGE:function(e){TreSensa.Console.log(TreSensa.LOG_INFO,"loading sdks (TGE v"+GameConfig.TGE.VERSION+")..."),TreSensa.Utils.insertScript(GameConfig.LIB_DIR+"tge/tge-"+GameConfig.TGE.VERSION+".min.js",e)},launchGame:function(){return 0!==this.waitingOnVariantInfo?(TreSensa.Console.log(TreSensa.LOG_INFO,"waiting on variant info before launching game"),void(this.waitingOnVariantInfo=2)):this.inventoryAdapter.postponeGameLaunch()?(TreSensa.Console.log(TreSensa.LOG_INFO,"waiting on partner before launching game"),void(this.gameLaunchPostponed=!0)):(this.gameLaunchPostponed=!1,GameConfig.REMOTE_SETTINGS&&GameConfig.REMOTE_SETTINGS.multivariate&&(this._applyVariant("A"),(e=_TREMACROS.activeVariant||_TRESETTINGS.remoteSettings&&_TRESETTINGS.remoteSettings.activeVariant)&&"A"!==e&&this._applyVariant(e)),this.inventoryAdapter.preGameConstruction(),void(this.isNonTGE()?(new TGE.Game,this.inventoryAdapter._preLaunch(),e=this.inventoryAdapter.getIFrameSrcPath(),TreSensa.Console.log(TreSensa.LOG_INFO,"launching third party creative..."),this.createThirdPartyIFrame("tresensa_ad",e,function(e){switch(e.event){case"onload":TreSensa.Playable.initialGameLoadComplete(),document.dispatchEvent(new Event("tgeGameReady")),document.dispatchEvent(new Event("tgeAssetListsLoaded"));break;case"interaction":TreSensa.Playable.interaction();break;case"engagement":TreSensa.Playable.engagement();break;case"complete":TreSensa.Playable.promoScreenShown(e.reason||"unknown");break;case"replay":TreSensa.Playable.logEvent("replay",{});break;case"custom":TreSensa.Playable.logEvent("custom",{name:e.name});break;case"open":TreSensa.Playable.clickthrough("default")}}),this.inventoryAdapter.postLaunch()):(e={gameDiv:"game_canvas",orientation:GameConfig.ORIENTATION,reorientDiv:null,audioRoot:GameConfig.AUDIO_ROOT,imageRoot:GameConfig.IMAGE_ROOT},TreSensa.Playable.adFormat===TreSensa.Playable.ADFORMAT.BANNER&&(e.width=this.bannerWidth,e.height=this.bannerHeight),t=new window[GameConfig.CONSTRUCTOR||"GameConstructor"],window.TrePreview&&(t.desktopMaxCanvasWidth=Number.MAX_VALUE,t.desktopMaxCanvasHeight=Number.MAX_VALUE,t.resizeCanvasToParent=!0),this.inventoryAdapter._preLaunch(t),TreSensa.Console.log(TreSensa.LOG_INFO,"launching game..."),t.launch(e),this.inventoryAdapter.postLaunch(t))));var e,t},initialGameLoadComplete:function(){this.gameLoaded=!0,this.logEvent("game_ready",{load_time:(new Date).getTime()-this.clientAdStartTime,language:window.TGE?TGE.RemoteSettings("lang"):"en"}),this.inventoryAdapter.viewabilityControlsPreloader()||this.revealAd(),this.adFormat!==TreSensa.Playable.ADFORMAT.BANNER&&window.TGE&&TGE.AdHeader&&TGE.AdHeader.Create(this.closeAd.bind(this),this.closeButtonShown),this.adViewable&&this.makeGameViewable()},makeAdViewable:function(){this.adViewable||(this.adViewable=!0,this.gameLoaded&&this.makeGameViewable())},makeGameViewable:function(){this.viewable||(this.viewable=!0,this.logEvent("game_viewable",{}),this.isNonTGE()&&this.thirdPartyIFrame.contentWindow.postMessage("tre_viewable","*"),this.inventoryAdapter.viewabilityControlsPreloader()&&this.revealAd(),this.startSkipToPromoTimer(),this.startCloseButtonTimer(),this.isNonTGE()||(TGE.Game.GetInstance().gameMadeViewable(),_TRESETTINGS.rewardedVideoOverlay&&TGE.AdHeader.ShowRewardedPlayableOverlay()))},startSkipToPromoTimer:function(){0<this.skipToPromoTimer&&(TreSensa.Console.log(TreSensa.LOG_VERBOSE,"starting "+this.skipToPromoTimer+" second promo screen countdown..."),setTimeout(this.skipToPromoScreen.bind(this),1e3*this.skipToPromoTimer),this.skipToPromoTimer=0)},interaction:function(){this.adViewable||this.makeAdViewable(),this.numInteractions++,this.lastInteraction=(new Date).getTime(),1===this.numInteractions&&this.logEvent("interaction",{})},engagement:function(){this.adViewable||this.makeAdViewable(),this.numEngagements++,1===this.numEngagements&&(this.logEvent("engagement",{}),this.startHeartbeat())},skipToPromoScreen:function(){var e,t;this.promoScreenShowing?TreSensa.Console.log(TreSensa.LOG_INFO,"promo screen already showing, abandoning skip request"):(this.skippedToPromo=!0,e=null,TGE.RemoteSettings.HasSetting("state")&&(e=TGE.RemoteSettings("state")),TGE.RemoteSettings.AddSetting("state",{default:"promo",type:"string",name:"state",value:"promo"}),t=TreSensa.Playable.parameters.state,TreSensa.Playable.parameters.state="promo",TGE.Game.GetInstance()._resetGame(),TreSensa.Playable.parameters.state=t,e&&TGE.RemoteSettings.AddSetting("state",{default:e,type:"string",name:"state",value:e}))},promoScreenShown:function(e){this.promoScreenShowing=!0,e=this.skippedToPromo?"skip":e,this.skippedToPromo=!1,this.inventoryAdapter.trueCompletion()&&(this.numCompletions++,1===this.numCompletions&&TreSensa.Playable.logEvent("promo_screen",{reason:e,count:this.numCompletions})),this.inventoryAdapter.userCompleted()},clickthrough:function(e,t){this.logEvent("click_through",{target:e}),t?customClickThrough(t,e):this.inventoryAdapter.click(e),this.endSession()},endSession:function(e){this.sessionEnded||(TreSensa.Console.log(TreSensa.LOG_INFO,"session considered finished"),e=!0===e,this.stopHeartbeat(),document.dispatchEvent(new Event("tresensaSessionEnded")),window.TGE&&TGE.SessionEndedCallback&&TGE.SessionEndedCallback(e),this.sessionEnded=!0)},closeAd:function(){window.mraid&&_TRESETTINGS.mraid&&(mraid.isViewable()||this.logError("mraid","ad closed before mraid viewable"),mraid.close()),this.endSession()},exit:function(e){TreSensa.Playable.logEvent("exit",{reason:e}),this.endSession(),window.TGE&&TGE.Game.GetInstance().pause()},startHeartbeat:function(){this.heartbeatID||(this.heartbeatID=setInterval(this._heartbeat.bind(this),5e3))},stopHeartbeat:function(){this.heartbeatID&&(clearInterval(this.heartbeatID),this.heartbeatID=null)},_heartbeat:function(){0<this.numEngagements&&(this.heartbeatPaused&&this.heartbeatCount<=180&&this.timeSinceLastInteraction()<=30&&(this.heartbeatPaused=!1),!this.heartbeatPaused&&(30<this.timeSinceLastInteraction()||180<this.heartbeatCount)&&(this.heartbeatPaused=!0,this.logEvent("abort_heartbeat")),this.heartbeatPaused||(this.logEvent("heartbeat"),this.heartbeatCount++))},timeSinceLastInteraction:function(){return window.TGE&&TGE.Game.GetInstance().timeSinceLastInteraction?TGE.Game.GetInstance().timeSinceLastInteraction():((new Date).getTime()-this.lastInteraction)/1e3},onDevServer:function(){return"dev"===_TRESETTINGS._adserver_env}},window.TreSensa=window.TreSensa||{Playable:{}},TreSensa.Playable.createThirdPartyIFrame=function(e,t,n){this._iFrameSrc=t,n&&this._setupIFrameListener(n);t=document.getElementById(e);return this.thirdPartyIFrame=document.createElement("iframe"),this.thirdPartyIFrame.setAttribute("src",this._iFrameSrc+"?tre="+this._buildIFramePayload()),this.thirdPartyIFrame.style="width: 100%; height: 100%; border: none; padding: 0px; margin: 0px;",t.appendChild(this.thirdPartyIFrame),this.thirdPartyIFrame},TreSensa.Playable._setupIFrameListener=function(t){window.addEventListener("message",function(e){e=e.data;"object"==typeof e&&!0===e.tre?(e.tre=void 0,e.src="tre",t(e)):"string"==typeof e&&"tre_"===e.substring(0,4)?t({src:"tre",event:e.substring(4)}):"complete"===e?t({src:"vungle",event:"complete"}):"download"===e&&t({src:"vungle",event:"open"})})},TreSensa.Playable.reloadIFrame=function(){this.thirdPartyIFrame.contentWindow.location=this._iFrameSrc+"?tre="+this._buildIFramePayload()};var mraid_ready_fired=!(TreSensa.Playable._buildIFramePayload=function(){var e,t,n={settings:{}};for([e]of Object.entries(TGE.RemoteSettings.GetSettings()))n.settings[e]=TGE.RemoteSettings(e);for(t in n.text={},GameConfig.TEXT_DEFS){var a,i={};for(a in GameConfig.TEXT_DEFS[t])i[a]=TGE.GetTextProp(t,a);n.text[t]=i}return n.info={closeButton:TreSensa.Playable.getCloseButtonInfo()},encodeURIComponent(btoa(encodeURIComponent(JSON.stringify(n)).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)})))});function mraidViewable(e){e&&(mraid.removeEventListener("viewableChange",mraidViewable),mraidViewableReceived())}function mraidViewableReceived(){TreSensa.Playable.logEvent("mraid_viewable",{prefetch_wait:(new Date).getTime()-TreSensa.Playable.clientAdStartTime}),TreSensa.Playable.startSkipToPromoTimer(),TreSensa.Playable.makeAdViewable()}function checkViewState(){mraid.isViewable()?mraidViewableReceived():mraid.addEventListener("viewableChange",mraidViewable)}function mraidIsReady(e){TreSensa.Playable.mraidReady?TreSensa.Playable.logError("mraid","MRAID ready already fired"):((TreSensa.Playable.mraidReady=!0)===_TRESETTINGS.showCloseButton&&mraid.useCustomClose(!0),TreSensa.Playable.logEvent("mraid_ready",{mraid_version:String(mraid.getVersion()),placement_type:mraid.getPlacementType()}),checkViewState(),!0!==e&&mraid.removeEventListener("ready",mraidIsReady),mraid.addEventListener("error",function(e,t){TreSensa.Playable.logEvent("error",{type:"mraid",description:e})}),mraid.addEventListener("stateChange",function(e){"hidden"==e&&TreSensa.Playable.adFormat!=TreSensa.Playable.ADFORMAT.EXPANDABLE?TreSensa.Playable.exit("mraid_hidden"):"expanded"==e?TreSensa.Playable.expand():"default"==e&&TreSensa.Playable.collapse()}),mraid.addEventListener("sizeChange",function(e,t){window.TGE&&TGE.Game.GetInstance()&&TGE.Game.GetInstance().mraidResized(e,t)}))}TreSensa.InventoryAdapters._liveAdapter?TreSensa.InventoryAdapters._liveAdapter.kickoff():TreSensa.Playable.initialize();</script>			</body></html>